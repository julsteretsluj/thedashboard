function Ob(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Mb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vx={exports:{}},kc={},yx={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ia=Symbol.for("react.element"),Vb=Symbol.for("react.portal"),Lb=Symbol.for("react.fragment"),Ub=Symbol.for("react.strict_mode"),Fb=Symbol.for("react.profiler"),Bb=Symbol.for("react.provider"),zb=Symbol.for("react.context"),$b=Symbol.for("react.forward_ref"),Hb=Symbol.for("react.suspense"),Wb=Symbol.for("react.memo"),Gb=Symbol.for("react.lazy"),ng=Symbol.iterator;function qb(t){return t===null||typeof t!="object"?null:(t=ng&&t[ng]||t["@@iterator"],typeof t=="function"?t:null)}var xx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_x=Object.assign,wx={};function wi(t,e,n){this.props=t,this.context=e,this.refs=wx,this.updater=n||xx}wi.prototype.isReactComponent={};wi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ex(){}Ex.prototype=wi.prototype;function tf(t,e,n){this.props=t,this.context=e,this.refs=wx,this.updater=n||xx}var nf=tf.prototype=new Ex;nf.constructor=tf;_x(nf,wi.prototype);nf.isPureReactComponent=!0;var rg=Array.isArray,bx=Object.prototype.hasOwnProperty,rf={current:null},Tx={key:!0,ref:!0,__self:!0,__source:!0};function Sx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)bx.call(e,r)&&!Tx.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ia,type:t,key:i,ref:o,props:s,_owner:rf.current}}function Kb(t,e){return{$$typeof:ia,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sf(t){return typeof t=="object"&&t!==null&&t.$$typeof===ia}function Qb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sg=/\/+/g;function Uu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Qb(""+t.key):e.toString(36)}function ll(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ia:case Vb:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Uu(o,0):r,rg(s)?(n="",t!=null&&(n=t.replace(sg,"$&/")+"/"),ll(s,e,n,"",function(d){return d})):s!=null&&(sf(s)&&(s=Kb(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(sg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",rg(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Uu(i,l);o+=ll(i,e,n,c,s)}else if(c=qb(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Uu(i,l++),o+=ll(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function La(t,e,n){if(t==null)return t;var r=[],s=0;return ll(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Yb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},cl={transition:null},Jb={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:cl,ReactCurrentOwner:rf};function Cx(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:La,forEach:function(t,e,n){La(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return La(t,function(){e++}),e},toArray:function(t){return La(t,function(e){return e})||[]},only:function(t){if(!sf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=wi;le.Fragment=Lb;le.Profiler=Fb;le.PureComponent=tf;le.StrictMode=Ub;le.Suspense=Hb;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jb;le.act=Cx;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_x({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=rf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)bx.call(e,c)&&!Tx.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:ia,type:t.type,key:s,ref:i,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:zb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bb,_context:t},t.Consumer=t};le.createElement=Sx;le.createFactory=function(t){var e=Sx.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:$b,render:t}};le.isValidElement=sf;le.lazy=function(t){return{$$typeof:Gb,_payload:{_status:-1,_result:t},_init:Yb}};le.memo=function(t,e){return{$$typeof:Wb,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=cl.transition;cl.transition={};try{t()}finally{cl.transition=e}};le.unstable_act=Cx;le.useCallback=function(t,e){return xt.current.useCallback(t,e)};le.useContext=function(t){return xt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};le.useEffect=function(t,e){return xt.current.useEffect(t,e)};le.useId=function(){return xt.current.useId()};le.useImperativeHandle=function(t,e,n){return xt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return xt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return xt.current.useReducer(t,e,n)};le.useRef=function(t){return xt.current.useRef(t)};le.useState=function(t){return xt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return xt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return xt.current.useTransition()};le.version="18.3.1";yx.exports=le;var I=yx.exports;const Xb=Mb(I),Zb=Ob({__proto__:null,default:Xb},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT=I,tT=Symbol.for("react.element"),nT=Symbol.for("react.fragment"),rT=Object.prototype.hasOwnProperty,sT=eT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iT={key:!0,ref:!0,__self:!0,__source:!0};function Ix(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rT.call(e,r)&&!iT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:tT,type:t,key:i,ref:o,props:s,_owner:sT.current}}kc.Fragment=nT;kc.jsx=Ix;kc.jsxs=Ix;vx.exports=kc;var u=vx.exports,kx={exports:{}},Ot={},Nx={exports:{}},Ax={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,X){var ne=G.length;G.push(X);e:for(;0<ne;){var V=ne-1>>>1,$=G[V];if(0<s($,X))G[V]=X,G[ne]=$,ne=V;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var X=G[0],ne=G.pop();if(ne!==X){G[0]=ne;e:for(var V=0,$=G.length,ie=$>>>1;V<ie;){var ve=2*(V+1)-1,Ue=G[ve],M=ve+1,L=G[M];if(0>s(Ue,ne))M<$&&0>s(L,Ue)?(G[V]=L,G[M]=ne,V=M):(G[V]=Ue,G[ve]=ne,V=ve);else if(M<$&&0>s(L,ne))G[V]=L,G[M]=ne,V=M;else break e}}return X}function s(G,X){var ne=G.sortIndex-X.sortIndex;return ne!==0?ne:G.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,p=null,g=3,_=!1,C=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(G){for(var X=n(d);X!==null;){if(X.callback===null)r(d);else if(X.startTime<=G)r(d),X.sortIndex=X.expirationTime,e(c,X);else break;X=n(d)}}function R(G){if(N=!1,b(G),!C)if(n(c)!==null)C=!0,Lt(B);else{var X=n(d);X!==null&&Le(R,X.startTime-G)}}function B(G,X){C=!1,N&&(N=!1,E(x),x=-1),_=!0;var ne=g;try{for(b(X),p=n(c);p!==null&&(!(p.expirationTime>X)||G&&!j());){var V=p.callback;if(typeof V=="function"){p.callback=null,g=p.priorityLevel;var $=V(p.expirationTime<=X);X=t.unstable_now(),typeof $=="function"?p.callback=$:p===n(c)&&r(c),b(X)}else r(c);p=n(c)}if(p!==null)var ie=!0;else{var ve=n(d);ve!==null&&Le(R,ve.startTime-X),ie=!1}return ie}finally{p=null,g=ne,_=!1}}var F=!1,T=null,x=-1,S=5,k=-1;function j(){return!(t.unstable_now()-k<S)}function P(){if(T!==null){var G=t.unstable_now();k=G;var X=!0;try{X=T(!0,G)}finally{X?w():(F=!1,T=null)}}else F=!1}var w;if(typeof y=="function")w=function(){y(P)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,He=oe.port2;oe.port1.onmessage=P,w=function(){He.postMessage(null)}}else w=function(){A(P,0)};function Lt(G){T=G,F||(F=!0,w())}function Le(G,X){x=A(function(){G(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){C||_||(C=!0,Lt(B))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var ne=g;g=X;try{return G()}finally{g=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,X){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ne=g;g=G;try{return X()}finally{g=ne}},t.unstable_scheduleCallback=function(G,X,ne){var V=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?V+ne:V):ne=V,G){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ne+$,G={id:f++,callback:X,priorityLevel:G,startTime:ne,expirationTime:$,sortIndex:-1},ne>V?(G.sortIndex=ne,e(d,G),n(c)===null&&G===n(d)&&(N?(E(x),x=-1):N=!0,Le(R,ne-V))):(G.sortIndex=$,e(c,G),C||_||(C=!0,Lt(B))),G},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(G){var X=g;return function(){var ne=g;g=X;try{return G.apply(this,arguments)}finally{g=ne}}}})(Ax);Nx.exports=Ax;var oT=Nx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT=I,Dt=oT;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Px=new Set,Ao={};function ys(t,e){oi(t,e),oi(t+"Capture",e)}function oi(t,e){for(Ao[t]=e,t=0;t<e.length;t++)Px.add(e[t])}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kd=Object.prototype.hasOwnProperty,lT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ig={},og={};function cT(t){return kd.call(og,t)?!0:kd.call(ig,t)?!1:lT.test(t)?og[t]=!0:(ig[t]=!0,!1)}function uT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dT(t,e,n,r){if(e===null||typeof e>"u"||uT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _t(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new _t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new _t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new _t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new _t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new _t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new _t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new _t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new _t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new _t(t,5,!1,t.toLowerCase(),null,!1,!1)});var of=/[\-:]([a-z])/g;function af(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(of,af);et[e]=new _t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(of,af);et[e]=new _t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(of,af);et[e]=new _t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new _t(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new _t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new _t(t,1,!1,t.toLowerCase(),null,!0,!0)});function lf(t,e,n,r){var s=et.hasOwnProperty(e)?et[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dT(e,n,s,r)&&(n=null),r||s===null?cT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gn=aT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ua=Symbol.for("react.element"),Vs=Symbol.for("react.portal"),Ls=Symbol.for("react.fragment"),cf=Symbol.for("react.strict_mode"),Nd=Symbol.for("react.profiler"),Rx=Symbol.for("react.provider"),jx=Symbol.for("react.context"),uf=Symbol.for("react.forward_ref"),Ad=Symbol.for("react.suspense"),Pd=Symbol.for("react.suspense_list"),df=Symbol.for("react.memo"),rr=Symbol.for("react.lazy"),Dx=Symbol.for("react.offscreen"),ag=Symbol.iterator;function Ki(t){return t===null||typeof t!="object"?null:(t=ag&&t[ag]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,Fu;function no(t){if(Fu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fu=e&&e[1]||""}return`
`+Fu+t}var Bu=!1;function zu(t,e){if(!t||Bu)return"";Bu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Bu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?no(t):""}function hT(t){switch(t.tag){case 5:return no(t.type);case 16:return no("Lazy");case 13:return no("Suspense");case 19:return no("SuspenseList");case 0:case 2:case 15:return t=zu(t.type,!1),t;case 11:return t=zu(t.type.render,!1),t;case 1:return t=zu(t.type,!0),t;default:return""}}function Rd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ls:return"Fragment";case Vs:return"Portal";case Nd:return"Profiler";case cf:return"StrictMode";case Ad:return"Suspense";case Pd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jx:return(t.displayName||"Context")+".Consumer";case Rx:return(t._context.displayName||"Context")+".Provider";case uf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case df:return e=t.displayName||null,e!==null?e:Rd(t.type)||"Memo";case rr:e=t._payload,t=t._init;try{return Rd(t(e))}catch{}}return null}function fT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rd(e);case 8:return e===cf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ir(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ox(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mT(t){var e=Ox(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fa(t){t._valueTracker||(t._valueTracker=mT(t))}function Mx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ox(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jd(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ir(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vx(t,e){e=e.checked,e!=null&&lf(t,"checked",e,!1)}function Dd(t,e){Vx(t,e);var n=Ir(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Od(t,e.type,n):e.hasOwnProperty("defaultValue")&&Od(t,e.type,Ir(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Od(t,e,n){(e!=="number"||Rl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ro=Array.isArray;function Qs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ir(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Md(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ug(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(ro(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ir(n)}}function Lx(t,e){var n=Ir(e.value),r=Ir(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ux(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ux(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ba,Fx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ba=Ba||document.createElement("div"),Ba.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ba.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Po(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pT=["Webkit","ms","Moz","O"];Object.keys(fo).forEach(function(t){pT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fo[e]=fo[t]})});function Bx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fo.hasOwnProperty(t)&&fo[t]?(""+e).trim():e+"px"}function zx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Bx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var gT=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ld(t,e){if(e){if(gT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Ud(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fd=null;function hf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bd=null,Ys=null,Js=null;function hg(t){if(t=la(t)){if(typeof Bd!="function")throw Error(H(280));var e=t.stateNode;e&&(e=jc(e),Bd(t.stateNode,t.type,e))}}function $x(t){Ys?Js?Js.push(t):Js=[t]:Ys=t}function Hx(){if(Ys){var t=Ys,e=Js;if(Js=Ys=null,hg(t),e)for(t=0;t<e.length;t++)hg(e[t])}}function Wx(t,e){return t(e)}function Gx(){}var $u=!1;function qx(t,e,n){if($u)return t(e,n);$u=!0;try{return Wx(t,e,n)}finally{$u=!1,(Ys!==null||Js!==null)&&(Gx(),Hx())}}function Ro(t,e){var n=t.stateNode;if(n===null)return null;var r=jc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var zd=!1;if(Ln)try{var Qi={};Object.defineProperty(Qi,"passive",{get:function(){zd=!0}}),window.addEventListener("test",Qi,Qi),window.removeEventListener("test",Qi,Qi)}catch{zd=!1}function vT(t,e,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var mo=!1,jl=null,Dl=!1,$d=null,yT={onError:function(t){mo=!0,jl=t}};function xT(t,e,n,r,s,i,o,l,c){mo=!1,jl=null,vT.apply(yT,arguments)}function _T(t,e,n,r,s,i,o,l,c){if(xT.apply(this,arguments),mo){if(mo){var d=jl;mo=!1,jl=null}else throw Error(H(198));Dl||(Dl=!0,$d=d)}}function xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Kx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fg(t){if(xs(t)!==t)throw Error(H(188))}function wT(t){var e=t.alternate;if(!e){if(e=xs(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return fg(s),t;if(i===r)return fg(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function Qx(t){return t=wT(t),t!==null?Yx(t):null}function Yx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Yx(t);if(e!==null)return e;t=t.sibling}return null}var Jx=Dt.unstable_scheduleCallback,mg=Dt.unstable_cancelCallback,ET=Dt.unstable_shouldYield,bT=Dt.unstable_requestPaint,De=Dt.unstable_now,TT=Dt.unstable_getCurrentPriorityLevel,ff=Dt.unstable_ImmediatePriority,Xx=Dt.unstable_UserBlockingPriority,Ol=Dt.unstable_NormalPriority,ST=Dt.unstable_LowPriority,Zx=Dt.unstable_IdlePriority,Nc=null,pn=null;function CT(t){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Nc,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:NT,IT=Math.log,kT=Math.LN2;function NT(t){return t>>>=0,t===0?32:31-(IT(t)/kT|0)|0}var za=64,$a=4194304;function so(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ml(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=so(l):(i&=o,i!==0&&(r=so(i)))}else o=n&~s,o!==0?r=so(o):i!==0&&(r=so(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),s=1<<n,r|=t[n],e&=~s;return r}function AT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-rn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=AT(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Hd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function e_(){var t=za;return za<<=1,!(za&4194240)&&(za=64),t}function Hu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function oa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function RT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-rn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function mf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ge=0;function t_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var n_,pf,r_,s_,i_,Wd=!1,Ha=[],mr=null,pr=null,gr=null,jo=new Map,Do=new Map,ir=[],jT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pg(t,e){switch(t){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":jo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Do.delete(e.pointerId)}}function Yi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=la(e),e!==null&&pf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function DT(t,e,n,r,s){switch(e){case"focusin":return mr=Yi(mr,t,e,n,r,s),!0;case"dragenter":return pr=Yi(pr,t,e,n,r,s),!0;case"mouseover":return gr=Yi(gr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return jo.set(i,Yi(jo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Do.set(i,Yi(Do.get(i)||null,t,e,n,r,s)),!0}return!1}function o_(t){var e=Yr(t.target);if(e!==null){var n=xs(e);if(n!==null){if(e=n.tag,e===13){if(e=Kx(n),e!==null){t.blockedOn=e,i_(t.priority,function(){r_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ul(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fd=r,n.target.dispatchEvent(r),Fd=null}else return e=la(n),e!==null&&pf(e),t.blockedOn=n,!1;e.shift()}return!0}function gg(t,e,n){ul(t)&&n.delete(e)}function OT(){Wd=!1,mr!==null&&ul(mr)&&(mr=null),pr!==null&&ul(pr)&&(pr=null),gr!==null&&ul(gr)&&(gr=null),jo.forEach(gg),Do.forEach(gg)}function Ji(t,e){t.blockedOn===e&&(t.blockedOn=null,Wd||(Wd=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,OT)))}function Oo(t){function e(s){return Ji(s,t)}if(0<Ha.length){Ji(Ha[0],t);for(var n=1;n<Ha.length;n++){var r=Ha[n];r.blockedOn===t&&(r.blockedOn=null)}}for(mr!==null&&Ji(mr,t),pr!==null&&Ji(pr,t),gr!==null&&Ji(gr,t),jo.forEach(e),Do.forEach(e),n=0;n<ir.length;n++)r=ir[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ir.length&&(n=ir[0],n.blockedOn===null);)o_(n),n.blockedOn===null&&ir.shift()}var Xs=Gn.ReactCurrentBatchConfig,Vl=!0;function MT(t,e,n,r){var s=ge,i=Xs.transition;Xs.transition=null;try{ge=1,gf(t,e,n,r)}finally{ge=s,Xs.transition=i}}function VT(t,e,n,r){var s=ge,i=Xs.transition;Xs.transition=null;try{ge=4,gf(t,e,n,r)}finally{ge=s,Xs.transition=i}}function gf(t,e,n,r){if(Vl){var s=Gd(t,e,n,r);if(s===null)ed(t,e,r,Ll,n),pg(t,r);else if(DT(s,t,e,n,r))r.stopPropagation();else if(pg(t,r),e&4&&-1<jT.indexOf(t)){for(;s!==null;){var i=la(s);if(i!==null&&n_(i),i=Gd(t,e,n,r),i===null&&ed(t,e,r,Ll,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ed(t,e,r,null,n)}}var Ll=null;function Gd(t,e,n,r){if(Ll=null,t=hf(r),t=Yr(t),t!==null)if(e=xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Kx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ll=t,null}function a_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TT()){case ff:return 1;case Xx:return 4;case Ol:case ST:return 16;case Zx:return 536870912;default:return 16}default:return 16}}var ur=null,vf=null,dl=null;function l_(){if(dl)return dl;var t,e=vf,n=e.length,r,s="value"in ur?ur.value:ur.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return dl=s.slice(t,1<r?1-r:void 0)}function hl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wa(){return!0}function vg(){return!1}function Mt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wa:vg,this.isPropagationStopped=vg,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wa)},persist:function(){},isPersistent:Wa}),e}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yf=Mt(Ei),aa=Ne({},Ei,{view:0,detail:0}),LT=Mt(aa),Wu,Gu,Xi,Ac=Ne({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xi&&(Xi&&t.type==="mousemove"?(Wu=t.screenX-Xi.screenX,Gu=t.screenY-Xi.screenY):Gu=Wu=0,Xi=t),Wu)},movementY:function(t){return"movementY"in t?t.movementY:Gu}}),yg=Mt(Ac),UT=Ne({},Ac,{dataTransfer:0}),FT=Mt(UT),BT=Ne({},aa,{relatedTarget:0}),qu=Mt(BT),zT=Ne({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),$T=Mt(zT),HT=Ne({},Ei,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WT=Mt(HT),GT=Ne({},Ei,{data:0}),xg=Mt(GT),qT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QT[t])?!!e[t]:!1}function xf(){return YT}var JT=Ne({},aa,{key:function(t){if(t.key){var e=qT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?KT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xf,charCode:function(t){return t.type==="keypress"?hl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XT=Mt(JT),ZT=Ne({},Ac,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_g=Mt(ZT),eS=Ne({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xf}),tS=Mt(eS),nS=Ne({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),rS=Mt(nS),sS=Ne({},Ac,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iS=Mt(sS),oS=[9,13,27,32],_f=Ln&&"CompositionEvent"in window,po=null;Ln&&"documentMode"in document&&(po=document.documentMode);var aS=Ln&&"TextEvent"in window&&!po,c_=Ln&&(!_f||po&&8<po&&11>=po),wg=" ",Eg=!1;function u_(t,e){switch(t){case"keyup":return oS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Us=!1;function lS(t,e){switch(t){case"compositionend":return d_(e);case"keypress":return e.which!==32?null:(Eg=!0,wg);case"textInput":return t=e.data,t===wg&&Eg?null:t;default:return null}}function cS(t,e){if(Us)return t==="compositionend"||!_f&&u_(t,e)?(t=l_(),dl=vf=ur=null,Us=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return c_&&e.locale!=="ko"?null:e.data;default:return null}}var uS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uS[t.type]:e==="textarea"}function h_(t,e,n,r){$x(r),e=Ul(e,"onChange"),0<e.length&&(n=new yf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var go=null,Mo=null;function dS(t){b_(t,0)}function Pc(t){var e=zs(t);if(Mx(e))return t}function hS(t,e){if(t==="change")return e}var f_=!1;if(Ln){var Ku;if(Ln){var Qu="oninput"in document;if(!Qu){var Tg=document.createElement("div");Tg.setAttribute("oninput","return;"),Qu=typeof Tg.oninput=="function"}Ku=Qu}else Ku=!1;f_=Ku&&(!document.documentMode||9<document.documentMode)}function Sg(){go&&(go.detachEvent("onpropertychange",m_),Mo=go=null)}function m_(t){if(t.propertyName==="value"&&Pc(Mo)){var e=[];h_(e,Mo,t,hf(t)),qx(dS,e)}}function fS(t,e,n){t==="focusin"?(Sg(),go=e,Mo=n,go.attachEvent("onpropertychange",m_)):t==="focusout"&&Sg()}function mS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pc(Mo)}function pS(t,e){if(t==="click")return Pc(e)}function gS(t,e){if(t==="input"||t==="change")return Pc(e)}function vS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var an=typeof Object.is=="function"?Object.is:vS;function Vo(t,e){if(an(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!kd.call(e,s)||!an(t[s],e[s]))return!1}return!0}function Cg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ig(t,e){var n=Cg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cg(n)}}function p_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?p_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function g_(){for(var t=window,e=Rl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rl(t.document)}return e}function wf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function yS(t){var e=g_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&p_(n.ownerDocument.documentElement,n)){if(r!==null&&wf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ig(n,i);var o=Ig(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xS=Ln&&"documentMode"in document&&11>=document.documentMode,Fs=null,qd=null,vo=null,Kd=!1;function kg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kd||Fs==null||Fs!==Rl(r)||(r=Fs,"selectionStart"in r&&wf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vo&&Vo(vo,r)||(vo=r,r=Ul(qd,"onSelect"),0<r.length&&(e=new yf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fs)))}function Ga(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bs={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionend:Ga("Transition","TransitionEnd")},Yu={},v_={};Ln&&(v_=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Rc(t){if(Yu[t])return Yu[t];if(!Bs[t])return t;var e=Bs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in v_)return Yu[t]=e[n];return t}var y_=Rc("animationend"),x_=Rc("animationiteration"),__=Rc("animationstart"),w_=Rc("transitionend"),E_=new Map,Ng="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(t,e){E_.set(t,e),ys(e,[t])}for(var Ju=0;Ju<Ng.length;Ju++){var Xu=Ng[Ju],_S=Xu.toLowerCase(),wS=Xu[0].toUpperCase()+Xu.slice(1);Vr(_S,"on"+wS)}Vr(y_,"onAnimationEnd");Vr(x_,"onAnimationIteration");Vr(__,"onAnimationStart");Vr("dblclick","onDoubleClick");Vr("focusin","onFocus");Vr("focusout","onBlur");Vr(w_,"onTransitionEnd");oi("onMouseEnter",["mouseout","mouseover"]);oi("onMouseLeave",["mouseout","mouseover"]);oi("onPointerEnter",["pointerout","pointerover"]);oi("onPointerLeave",["pointerout","pointerover"]);ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ES=new Set("cancel close invalid load scroll toggle".split(" ").concat(io));function Ag(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_T(r,e,void 0,t),t.currentTarget=null}function b_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Ag(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Ag(s,l,d),i=c}}}if(Dl)throw t=$d,Dl=!1,$d=null,t}function we(t,e){var n=e[Zd];n===void 0&&(n=e[Zd]=new Set);var r=t+"__bubble";n.has(r)||(T_(e,t,2,!1),n.add(r))}function Zu(t,e,n){var r=0;e&&(r|=4),T_(n,t,r,e)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Lo(t){if(!t[qa]){t[qa]=!0,Px.forEach(function(n){n!=="selectionchange"&&(ES.has(n)||Zu(n,!1,t),Zu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qa]||(e[qa]=!0,Zu("selectionchange",!1,e))}}function T_(t,e,n,r){switch(a_(e)){case 1:var s=MT;break;case 4:s=VT;break;default:s=gf}n=s.bind(null,e,n,t),s=void 0,!zd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ed(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Yr(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}qx(function(){var d=i,f=hf(n),p=[];e:{var g=E_.get(t);if(g!==void 0){var _=yf,C=t;switch(t){case"keypress":if(hl(n)===0)break e;case"keydown":case"keyup":_=XT;break;case"focusin":C="focus",_=qu;break;case"focusout":C="blur",_=qu;break;case"beforeblur":case"afterblur":_=qu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=yg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=FT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=tS;break;case y_:case x_:case __:_=$T;break;case w_:_=rS;break;case"scroll":_=LT;break;case"wheel":_=iS;break;case"copy":case"cut":case"paste":_=WT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=_g}var N=(e&4)!==0,A=!N&&t==="scroll",E=N?g!==null?g+"Capture":null:g;N=[];for(var y=d,b;y!==null;){b=y;var R=b.stateNode;if(b.tag===5&&R!==null&&(b=R,E!==null&&(R=Ro(y,E),R!=null&&N.push(Uo(y,R,b)))),A)break;y=y.return}0<N.length&&(g=new _(g,C,null,n,f),p.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==Fd&&(C=n.relatedTarget||n.fromElement)&&(Yr(C)||C[Un]))break e;if((_||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,_?(C=n.relatedTarget||n.toElement,_=d,C=C?Yr(C):null,C!==null&&(A=xs(C),C!==A||C.tag!==5&&C.tag!==6)&&(C=null)):(_=null,C=d),_!==C)){if(N=yg,R="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(N=_g,R="onPointerLeave",E="onPointerEnter",y="pointer"),A=_==null?g:zs(_),b=C==null?g:zs(C),g=new N(R,y+"leave",_,n,f),g.target=A,g.relatedTarget=b,R=null,Yr(f)===d&&(N=new N(E,y+"enter",C,n,f),N.target=b,N.relatedTarget=A,R=N),A=R,_&&C)t:{for(N=_,E=C,y=0,b=N;b;b=Ps(b))y++;for(b=0,R=E;R;R=Ps(R))b++;for(;0<y-b;)N=Ps(N),y--;for(;0<b-y;)E=Ps(E),b--;for(;y--;){if(N===E||E!==null&&N===E.alternate)break t;N=Ps(N),E=Ps(E)}N=null}else N=null;_!==null&&Pg(p,g,_,N,!1),C!==null&&A!==null&&Pg(p,A,C,N,!0)}}e:{if(g=d?zs(d):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var B=hS;else if(bg(g))if(f_)B=gS;else{B=mS;var F=fS}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(B=pS);if(B&&(B=B(t,d))){h_(p,B,n,f);break e}F&&F(t,g,d),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&Od(g,"number",g.value)}switch(F=d?zs(d):window,t){case"focusin":(bg(F)||F.contentEditable==="true")&&(Fs=F,qd=d,vo=null);break;case"focusout":vo=qd=Fs=null;break;case"mousedown":Kd=!0;break;case"contextmenu":case"mouseup":case"dragend":Kd=!1,kg(p,n,f);break;case"selectionchange":if(xS)break;case"keydown":case"keyup":kg(p,n,f)}var T;if(_f)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Us?u_(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(c_&&n.locale!=="ko"&&(Us||x!=="onCompositionStart"?x==="onCompositionEnd"&&Us&&(T=l_()):(ur=f,vf="value"in ur?ur.value:ur.textContent,Us=!0)),F=Ul(d,x),0<F.length&&(x=new xg(x,t,null,n,f),p.push({event:x,listeners:F}),T?x.data=T:(T=d_(n),T!==null&&(x.data=T)))),(T=aS?lS(t,n):cS(t,n))&&(d=Ul(d,"onBeforeInput"),0<d.length&&(f=new xg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=T))}b_(p,e)})}function Uo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ul(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ro(t,n),i!=null&&r.unshift(Uo(t,i,s)),i=Ro(t,e),i!=null&&r.push(Uo(t,i,s))),t=t.return}return r}function Ps(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Ro(n,i),c!=null&&o.unshift(Uo(n,c,l))):s||(c=Ro(n,i),c!=null&&o.push(Uo(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bS=/\r\n?/g,TS=/\u0000|\uFFFD/g;function Rg(t){return(typeof t=="string"?t:""+t).replace(bS,`
`).replace(TS,"")}function Ka(t,e,n){if(e=Rg(e),Rg(t)!==e&&n)throw Error(H(425))}function Fl(){}var Qd=null,Yd=null;function Jd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xd=typeof setTimeout=="function"?setTimeout:void 0,SS=typeof clearTimeout=="function"?clearTimeout:void 0,jg=typeof Promise=="function"?Promise:void 0,CS=typeof queueMicrotask=="function"?queueMicrotask:typeof jg<"u"?function(t){return jg.resolve(null).then(t).catch(IS)}:Xd;function IS(t){setTimeout(function(){throw t})}function td(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Oo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Oo(e)}function vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var bi=Math.random().toString(36).slice(2),mn="__reactFiber$"+bi,Fo="__reactProps$"+bi,Un="__reactContainer$"+bi,Zd="__reactEvents$"+bi,kS="__reactListeners$"+bi,NS="__reactHandles$"+bi;function Yr(t){var e=t[mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Un]||n[mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dg(t);t!==null;){if(n=t[mn])return n;t=Dg(t)}return e}t=n,n=t.parentNode}return null}function la(t){return t=t[mn]||t[Un],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function jc(t){return t[Fo]||null}var eh=[],$s=-1;function Lr(t){return{current:t}}function be(t){0>$s||(t.current=eh[$s],eh[$s]=null,$s--)}function xe(t,e){$s++,eh[$s]=t.current,t.current=e}var kr={},ht=Lr(kr),Tt=Lr(!1),os=kr;function ai(t,e){var n=t.type.contextTypes;if(!n)return kr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function St(t){return t=t.childContextTypes,t!=null}function Bl(){be(Tt),be(ht)}function Og(t,e,n){if(ht.current!==kr)throw Error(H(168));xe(ht,e),xe(Tt,n)}function S_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,fT(t)||"Unknown",s));return Ne({},n,r)}function zl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,os=ht.current,xe(ht,t),xe(Tt,Tt.current),!0}function Mg(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=S_(t,e,os),r.__reactInternalMemoizedMergedChildContext=t,be(Tt),be(ht),xe(ht,t)):be(Tt),xe(Tt,n)}var Nn=null,Dc=!1,nd=!1;function C_(t){Nn===null?Nn=[t]:Nn.push(t)}function AS(t){Dc=!0,C_(t)}function Ur(){if(!nd&&Nn!==null){nd=!0;var t=0,e=ge;try{var n=Nn;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nn=null,Dc=!1}catch(s){throw Nn!==null&&(Nn=Nn.slice(t+1)),Jx(ff,Ur),s}finally{ge=e,nd=!1}}return null}var Hs=[],Ws=0,$l=null,Hl=0,Ft=[],Bt=0,as=null,Pn=1,Rn="";function qr(t,e){Hs[Ws++]=Hl,Hs[Ws++]=$l,$l=t,Hl=e}function I_(t,e,n){Ft[Bt++]=Pn,Ft[Bt++]=Rn,Ft[Bt++]=as,as=t;var r=Pn;t=Rn;var s=32-rn(r)-1;r&=~(1<<s),n+=1;var i=32-rn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pn=1<<32-rn(e)+s|n<<s|r,Rn=i+t}else Pn=1<<i|n<<s|r,Rn=t}function Ef(t){t.return!==null&&(qr(t,1),I_(t,1,0))}function bf(t){for(;t===$l;)$l=Hs[--Ws],Hs[Ws]=null,Hl=Hs[--Ws],Hs[Ws]=null;for(;t===as;)as=Ft[--Bt],Ft[Bt]=null,Rn=Ft[--Bt],Ft[Bt]=null,Pn=Ft[--Bt],Ft[Bt]=null}var Rt=null,Pt=null,Te=!1,en=null;function k_(t,e){var n=Ht(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Vg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rt=t,Pt=vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rt=t,Pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=as!==null?{id:Pn,overflow:Rn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ht(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rt=t,Pt=null,!0):!1;default:return!1}}function th(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nh(t){if(Te){var e=Pt;if(e){var n=e;if(!Vg(t,e)){if(th(t))throw Error(H(418));e=vr(n.nextSibling);var r=Rt;e&&Vg(t,e)?k_(r,n):(t.flags=t.flags&-4097|2,Te=!1,Rt=t)}}else{if(th(t))throw Error(H(418));t.flags=t.flags&-4097|2,Te=!1,Rt=t}}}function Lg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rt=t}function Qa(t){if(t!==Rt)return!1;if(!Te)return Lg(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jd(t.type,t.memoizedProps)),e&&(e=Pt)){if(th(t))throw N_(),Error(H(418));for(;e;)k_(t,e),e=vr(e.nextSibling)}if(Lg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pt=vr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pt=null}}else Pt=Rt?vr(t.stateNode.nextSibling):null;return!0}function N_(){for(var t=Pt;t;)t=vr(t.nextSibling)}function li(){Pt=Rt=null,Te=!1}function Tf(t){en===null?en=[t]:en.push(t)}var PS=Gn.ReactCurrentBatchConfig;function Zi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Ya(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ug(t){var e=t._init;return e(t._payload)}function A_(t){function e(E,y){if(t){var b=E.deletions;b===null?(E.deletions=[y],E.flags|=16):b.push(y)}}function n(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function r(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function s(E,y){return E=wr(E,y),E.index=0,E.sibling=null,E}function i(E,y,b){return E.index=b,t?(b=E.alternate,b!==null?(b=b.index,b<y?(E.flags|=2,y):b):(E.flags|=2,y)):(E.flags|=1048576,y)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,y,b,R){return y===null||y.tag!==6?(y=cd(b,E.mode,R),y.return=E,y):(y=s(y,b),y.return=E,y)}function c(E,y,b,R){var B=b.type;return B===Ls?f(E,y,b.props.children,R,b.key):y!==null&&(y.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===rr&&Ug(B)===y.type)?(R=s(y,b.props),R.ref=Zi(E,y,b),R.return=E,R):(R=xl(b.type,b.key,b.props,null,E.mode,R),R.ref=Zi(E,y,b),R.return=E,R)}function d(E,y,b,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=ud(b,E.mode,R),y.return=E,y):(y=s(y,b.children||[]),y.return=E,y)}function f(E,y,b,R,B){return y===null||y.tag!==7?(y=rs(b,E.mode,R,B),y.return=E,y):(y=s(y,b),y.return=E,y)}function p(E,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=cd(""+y,E.mode,b),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ua:return b=xl(y.type,y.key,y.props,null,E.mode,b),b.ref=Zi(E,null,y),b.return=E,b;case Vs:return y=ud(y,E.mode,b),y.return=E,y;case rr:var R=y._init;return p(E,R(y._payload),b)}if(ro(y)||Ki(y))return y=rs(y,E.mode,b,null),y.return=E,y;Ya(E,y)}return null}function g(E,y,b,R){var B=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return B!==null?null:l(E,y,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ua:return b.key===B?c(E,y,b,R):null;case Vs:return b.key===B?d(E,y,b,R):null;case rr:return B=b._init,g(E,y,B(b._payload),R)}if(ro(b)||Ki(b))return B!==null?null:f(E,y,b,R,null);Ya(E,b)}return null}function _(E,y,b,R,B){if(typeof R=="string"&&R!==""||typeof R=="number")return E=E.get(b)||null,l(y,E,""+R,B);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ua:return E=E.get(R.key===null?b:R.key)||null,c(y,E,R,B);case Vs:return E=E.get(R.key===null?b:R.key)||null,d(y,E,R,B);case rr:var F=R._init;return _(E,y,b,F(R._payload),B)}if(ro(R)||Ki(R))return E=E.get(b)||null,f(y,E,R,B,null);Ya(y,R)}return null}function C(E,y,b,R){for(var B=null,F=null,T=y,x=y=0,S=null;T!==null&&x<b.length;x++){T.index>x?(S=T,T=null):S=T.sibling;var k=g(E,T,b[x],R);if(k===null){T===null&&(T=S);break}t&&T&&k.alternate===null&&e(E,T),y=i(k,y,x),F===null?B=k:F.sibling=k,F=k,T=S}if(x===b.length)return n(E,T),Te&&qr(E,x),B;if(T===null){for(;x<b.length;x++)T=p(E,b[x],R),T!==null&&(y=i(T,y,x),F===null?B=T:F.sibling=T,F=T);return Te&&qr(E,x),B}for(T=r(E,T);x<b.length;x++)S=_(T,E,x,b[x],R),S!==null&&(t&&S.alternate!==null&&T.delete(S.key===null?x:S.key),y=i(S,y,x),F===null?B=S:F.sibling=S,F=S);return t&&T.forEach(function(j){return e(E,j)}),Te&&qr(E,x),B}function N(E,y,b,R){var B=Ki(b);if(typeof B!="function")throw Error(H(150));if(b=B.call(b),b==null)throw Error(H(151));for(var F=B=null,T=y,x=y=0,S=null,k=b.next();T!==null&&!k.done;x++,k=b.next()){T.index>x?(S=T,T=null):S=T.sibling;var j=g(E,T,k.value,R);if(j===null){T===null&&(T=S);break}t&&T&&j.alternate===null&&e(E,T),y=i(j,y,x),F===null?B=j:F.sibling=j,F=j,T=S}if(k.done)return n(E,T),Te&&qr(E,x),B;if(T===null){for(;!k.done;x++,k=b.next())k=p(E,k.value,R),k!==null&&(y=i(k,y,x),F===null?B=k:F.sibling=k,F=k);return Te&&qr(E,x),B}for(T=r(E,T);!k.done;x++,k=b.next())k=_(T,E,x,k.value,R),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?x:k.key),y=i(k,y,x),F===null?B=k:F.sibling=k,F=k);return t&&T.forEach(function(P){return e(E,P)}),Te&&qr(E,x),B}function A(E,y,b,R){if(typeof b=="object"&&b!==null&&b.type===Ls&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ua:e:{for(var B=b.key,F=y;F!==null;){if(F.key===B){if(B=b.type,B===Ls){if(F.tag===7){n(E,F.sibling),y=s(F,b.props.children),y.return=E,E=y;break e}}else if(F.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===rr&&Ug(B)===F.type){n(E,F.sibling),y=s(F,b.props),y.ref=Zi(E,F,b),y.return=E,E=y;break e}n(E,F);break}else e(E,F);F=F.sibling}b.type===Ls?(y=rs(b.props.children,E.mode,R,b.key),y.return=E,E=y):(R=xl(b.type,b.key,b.props,null,E.mode,R),R.ref=Zi(E,y,b),R.return=E,E=R)}return o(E);case Vs:e:{for(F=b.key;y!==null;){if(y.key===F)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(E,y.sibling),y=s(y,b.children||[]),y.return=E,E=y;break e}else{n(E,y);break}else e(E,y);y=y.sibling}y=ud(b,E.mode,R),y.return=E,E=y}return o(E);case rr:return F=b._init,A(E,y,F(b._payload),R)}if(ro(b))return C(E,y,b,R);if(Ki(b))return N(E,y,b,R);Ya(E,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(E,y.sibling),y=s(y,b),y.return=E,E=y):(n(E,y),y=cd(b,E.mode,R),y.return=E,E=y),o(E)):n(E,y)}return A}var ci=A_(!0),P_=A_(!1),Wl=Lr(null),Gl=null,Gs=null,Sf=null;function Cf(){Sf=Gs=Gl=null}function If(t){var e=Wl.current;be(Wl),t._currentValue=e}function rh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Zs(t,e){Gl=t,Sf=Gs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function qt(t){var e=t._currentValue;if(Sf!==t)if(t={context:t,memoizedValue:e,next:null},Gs===null){if(Gl===null)throw Error(H(308));Gs=t,Gl.dependencies={lanes:0,firstContext:t}}else Gs=Gs.next=t;return e}var Jr=null;function kf(t){Jr===null?Jr=[t]:Jr.push(t)}function R_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,kf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Fn(t,r)}function Fn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var sr=!1;function Nf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function j_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function On(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Fn(t,n)}return s=r.interleaved,s===null?(e.next=e,kf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Fn(t,n)}function fl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mf(t,n)}}function Fg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ql(t,e,n,r){var s=t.updateQueue;sr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,f=d=c=null,l=i;do{var g=l.lane,_=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,N=l;switch(g=e,_=n,N.tag){case 1:if(C=N.payload,typeof C=="function"){p=C.call(_,p,g);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=N.payload,g=typeof C=="function"?C.call(_,p,g):C,g==null)break e;p=Ne({},p,g);break e;case 2:sr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else _={eventTime:_,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=_,c=p):f=f.next=_,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(c=p),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);cs|=o,t.lanes=o,t.memoizedState=p}}function Bg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var ca={},gn=Lr(ca),Bo=Lr(ca),zo=Lr(ca);function Xr(t){if(t===ca)throw Error(H(174));return t}function Af(t,e){switch(xe(zo,e),xe(Bo,t),xe(gn,ca),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vd(e,t)}be(gn),xe(gn,e)}function ui(){be(gn),be(Bo),be(zo)}function D_(t){Xr(zo.current);var e=Xr(gn.current),n=Vd(e,t.type);e!==n&&(xe(Bo,t),xe(gn,n))}function Pf(t){Bo.current===t&&(be(gn),be(Bo))}var Se=Lr(0);function Kl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rd=[];function Rf(){for(var t=0;t<rd.length;t++)rd[t]._workInProgressVersionPrimary=null;rd.length=0}var ml=Gn.ReactCurrentDispatcher,sd=Gn.ReactCurrentBatchConfig,ls=0,Ie=null,Fe=null,Ge=null,Ql=!1,yo=!1,$o=0,RS=0;function ot(){throw Error(H(321))}function jf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!an(t[n],e[n]))return!1;return!0}function Df(t,e,n,r,s,i){if(ls=i,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ml.current=t===null||t.memoizedState===null?MS:VS,t=n(r,s),yo){i=0;do{if(yo=!1,$o=0,25<=i)throw Error(H(301));i+=1,Ge=Fe=null,e.updateQueue=null,ml.current=LS,t=n(r,s)}while(yo)}if(ml.current=Yl,e=Fe!==null&&Fe.next!==null,ls=0,Ge=Fe=Ie=null,Ql=!1,e)throw Error(H(300));return t}function Of(){var t=$o!==0;return $o=0,t}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ie.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Kt(){if(Fe===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=Ge===null?Ie.memoizedState:Ge.next;if(e!==null)Ge=e,Fe=t;else{if(t===null)throw Error(H(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Ge===null?Ie.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Ho(t,e){return typeof e=="function"?e(t):e}function id(t){var e=Kt(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Fe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var f=d.lane;if((ls&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,Ie.lanes|=f,cs|=f}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,an(r,e.memoizedState)||(bt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ie.lanes|=i,cs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function od(t){var e=Kt(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);an(i,e.memoizedState)||(bt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function O_(){}function M_(t,e){var n=Ie,r=Kt(),s=e(),i=!an(r.memoizedState,s);if(i&&(r.memoizedState=s,bt=!0),r=r.queue,Mf(U_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,Wo(9,L_.bind(null,n,r,s,e),void 0,null),Ke===null)throw Error(H(349));ls&30||V_(n,e,s)}return s}function V_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function L_(t,e,n,r){e.value=n,e.getSnapshot=r,F_(e)&&B_(t)}function U_(t,e,n){return n(function(){F_(e)&&B_(t)})}function F_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!an(t,n)}catch{return!0}}function B_(t){var e=Fn(t,1);e!==null&&sn(e,t,1,-1)}function zg(t){var e=hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:t},e.queue=t,t=t.dispatch=OS.bind(null,Ie,t),[e.memoizedState,t]}function Wo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function z_(){return Kt().memoizedState}function pl(t,e,n,r){var s=hn();Ie.flags|=t,s.memoizedState=Wo(1|e,n,void 0,r===void 0?null:r)}function Oc(t,e,n,r){var s=Kt();r=r===void 0?null:r;var i=void 0;if(Fe!==null){var o=Fe.memoizedState;if(i=o.destroy,r!==null&&jf(r,o.deps)){s.memoizedState=Wo(e,n,i,r);return}}Ie.flags|=t,s.memoizedState=Wo(1|e,n,i,r)}function $g(t,e){return pl(8390656,8,t,e)}function Mf(t,e){return Oc(2048,8,t,e)}function $_(t,e){return Oc(4,2,t,e)}function H_(t,e){return Oc(4,4,t,e)}function W_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function G_(t,e,n){return n=n!=null?n.concat([t]):null,Oc(4,4,W_.bind(null,e,t),n)}function Vf(){}function q_(t,e){var n=Kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function K_(t,e){var n=Kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Q_(t,e,n){return ls&21?(an(n,e)||(n=e_(),Ie.lanes|=n,cs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=n)}function jS(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=sd.transition;sd.transition={};try{t(!1),e()}finally{ge=n,sd.transition=r}}function Y_(){return Kt().memoizedState}function DS(t,e,n){var r=_r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},J_(t))X_(e,n);else if(n=R_(t,e,n,r),n!==null){var s=yt();sn(n,t,r,s),Z_(n,e,r)}}function OS(t,e,n){var r=_r(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(J_(t))X_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,an(l,o)){var c=e.interleaved;c===null?(s.next=s,kf(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=R_(t,e,s,r),n!==null&&(s=yt(),sn(n,t,r,s),Z_(n,e,r))}}function J_(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function X_(t,e){yo=Ql=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Z_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mf(t,n)}}var Yl={readContext:qt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},MS={readContext:qt,useCallback:function(t,e){return hn().memoizedState=[t,e===void 0?null:e],t},useContext:qt,useEffect:$g,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pl(4194308,4,W_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pl(4194308,4,t,e)},useInsertionEffect:function(t,e){return pl(4,2,t,e)},useMemo:function(t,e){var n=hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=DS.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=hn();return t={current:t},e.memoizedState=t},useState:zg,useDebugValue:Vf,useDeferredValue:function(t){return hn().memoizedState=t},useTransition:function(){var t=zg(!1),e=t[0];return t=jS.bind(null,t[1]),hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,s=hn();if(Te){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Ke===null)throw Error(H(349));ls&30||V_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,$g(U_.bind(null,r,i,t),[t]),r.flags|=2048,Wo(9,L_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hn(),e=Ke.identifierPrefix;if(Te){var n=Rn,r=Pn;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$o++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=RS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},VS={readContext:qt,useCallback:q_,useContext:qt,useEffect:Mf,useImperativeHandle:G_,useInsertionEffect:$_,useLayoutEffect:H_,useMemo:K_,useReducer:id,useRef:z_,useState:function(){return id(Ho)},useDebugValue:Vf,useDeferredValue:function(t){var e=Kt();return Q_(e,Fe.memoizedState,t)},useTransition:function(){var t=id(Ho)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:O_,useSyncExternalStore:M_,useId:Y_,unstable_isNewReconciler:!1},LS={readContext:qt,useCallback:q_,useContext:qt,useEffect:Mf,useImperativeHandle:G_,useInsertionEffect:$_,useLayoutEffect:H_,useMemo:K_,useReducer:od,useRef:z_,useState:function(){return od(Ho)},useDebugValue:Vf,useDeferredValue:function(t){var e=Kt();return Fe===null?e.memoizedState=t:Q_(e,Fe.memoizedState,t)},useTransition:function(){var t=od(Ho)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:O_,useSyncExternalStore:M_,useId:Y_,unstable_isNewReconciler:!1};function Xt(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Mc={isMounted:function(t){return(t=t._reactInternals)?xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yt(),s=_r(t),i=On(r,s);i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(sn(e,t,s,r),fl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yt(),s=_r(t),i=On(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(sn(e,t,s,r),fl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yt(),r=_r(t),s=On(n,r);s.tag=2,e!=null&&(s.callback=e),e=yr(t,s,r),e!==null&&(sn(e,t,r,n),fl(e,t,r))}};function Hg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Vo(n,r)||!Vo(s,i):!0}function ew(t,e,n){var r=!1,s=kr,i=e.contextType;return typeof i=="object"&&i!==null?i=qt(i):(s=St(e)?os:ht.current,r=e.contextTypes,i=(r=r!=null)?ai(t,s):kr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Wg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Mc.enqueueReplaceState(e,e.state,null)}function ih(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Nf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=qt(i):(i=St(e)?os:ht.current,s.context=ai(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Mc.enqueueReplaceState(s,s.state,null),ql(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function di(t,e){try{var n="",r=e;do n+=hT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ad(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function oh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var US=typeof WeakMap=="function"?WeakMap:Map;function tw(t,e,n){n=On(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xl||(Xl=!0,gh=r),oh(t,e)},n}function nw(t,e,n){n=On(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){oh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){oh(t,e),typeof r!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Gg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new US;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ZS.bind(null,t,e,n),e.then(t,t))}function qg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Kg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=On(-1,1),e.tag=2,yr(n,e,1))),n.lanes|=1),t)}var FS=Gn.ReactCurrentOwner,bt=!1;function vt(t,e,n,r){e.child=t===null?P_(e,null,n,r):ci(e,t.child,n,r)}function Qg(t,e,n,r,s){n=n.render;var i=e.ref;return Zs(e,s),r=Df(t,e,n,r,i,s),n=Of(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bn(t,e,s)):(Te&&n&&Ef(e),e.flags|=1,vt(t,e,r,s),e.child)}function Yg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Wf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,rw(t,e,i,r,s)):(t=xl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Vo,n(o,r)&&t.ref===e.ref)return Bn(t,e,s)}return e.flags|=1,t=wr(i,r),t.ref=e.ref,t.return=e,e.child=t}function rw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Vo(i,r)&&t.ref===e.ref)if(bt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,Bn(t,e,s)}return ah(t,e,n,r,s)}function sw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Ks,Nt),Nt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(Ks,Nt),Nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,xe(Ks,Nt),Nt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,xe(Ks,Nt),Nt|=r;return vt(t,e,s,n),e.child}function iw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ah(t,e,n,r,s){var i=St(n)?os:ht.current;return i=ai(e,i),Zs(e,s),n=Df(t,e,n,r,i,s),r=Of(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bn(t,e,s)):(Te&&r&&Ef(e),e.flags|=1,vt(t,e,n,s),e.child)}function Jg(t,e,n,r,s){if(St(n)){var i=!0;zl(e)}else i=!1;if(Zs(e,s),e.stateNode===null)gl(t,e),ew(e,n,r),ih(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=qt(d):(d=St(n)?os:ht.current,d=ai(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Wg(e,o,r,d),sr=!1;var g=e.memoizedState;o.state=g,ql(e,r,o,s),c=e.memoizedState,l!==r||g!==c||Tt.current||sr?(typeof f=="function"&&(sh(e,n,f,r),c=e.memoizedState),(l=sr||Hg(e,n,l,r,g,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,j_(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Xt(e.type,l),o.props=d,p=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=qt(c):(c=St(n)?os:ht.current,c=ai(e,c));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==c)&&Wg(e,o,r,c),sr=!1,g=e.memoizedState,o.state=g,ql(e,r,o,s);var C=e.memoizedState;l!==p||g!==C||Tt.current||sr?(typeof _=="function"&&(sh(e,n,_,r),C=e.memoizedState),(d=sr||Hg(e,n,d,r,g,C,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return lh(t,e,n,r,i,s)}function lh(t,e,n,r,s,i){iw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Mg(e,n,!1),Bn(t,e,i);r=e.stateNode,FS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ci(e,t.child,null,i),e.child=ci(e,null,l,i)):vt(t,e,l,i),e.memoizedState=r.state,s&&Mg(e,n,!0),e.child}function ow(t){var e=t.stateNode;e.pendingContext?Og(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Og(t,e.context,!1),Af(t,e.containerInfo)}function Xg(t,e,n,r,s){return li(),Tf(s),e.flags|=256,vt(t,e,n,r),e.child}var ch={dehydrated:null,treeContext:null,retryLane:0};function uh(t){return{baseLanes:t,cachePool:null,transitions:null}}function aw(t,e,n){var r=e.pendingProps,s=Se.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),xe(Se,s&1),t===null)return nh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Uc(o,r,0,null),t=rs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=uh(n),e.memoizedState=ch,t):Lf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return BS(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=wr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=wr(l,i):(i=rs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?uh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ch,r}return i=t.child,t=i.sibling,r=wr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lf(t,e){return e=Uc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ja(t,e,n,r){return r!==null&&Tf(r),ci(e,t.child,null,n),t=Lf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function BS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ad(Error(H(422))),Ja(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Uc({mode:"visible",children:r.children},s,0,null),i=rs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ci(e,t.child,null,o),e.child.memoizedState=uh(o),e.memoizedState=ch,i);if(!(e.mode&1))return Ja(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(H(419)),r=ad(i,r,void 0),Ja(t,e,o,r)}if(l=(o&t.childLanes)!==0,bt||l){if(r=Ke,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Fn(t,s),sn(r,t,s,-1))}return Hf(),r=ad(Error(H(421))),Ja(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=eC.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Pt=vr(s.nextSibling),Rt=e,Te=!0,en=null,t!==null&&(Ft[Bt++]=Pn,Ft[Bt++]=Rn,Ft[Bt++]=as,Pn=t.id,Rn=t.overflow,as=e),e=Lf(e,r.children),e.flags|=4096,e)}function Zg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rh(t.return,e,n)}function ld(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function lw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vt(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zg(t,n,e);else if(t.tag===19)Zg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(Se,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Kl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ld(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Kl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ld(e,!0,n,null,i);break;case"together":ld(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),cs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zS(t,e,n){switch(e.tag){case 3:ow(e),li();break;case 5:D_(e);break;case 1:St(e.type)&&zl(e);break;case 4:Af(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;xe(Wl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?aw(t,e,n):(xe(Se,Se.current&1),t=Bn(t,e,n),t!==null?t.sibling:null);xe(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return lw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xe(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,sw(t,e,n)}return Bn(t,e,n)}var cw,dh,uw,dw;cw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dh=function(){};uw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Xr(gn.current);var i=null;switch(n){case"input":s=jd(t,s),r=jd(t,r),i=[];break;case"select":s=Ne({},s,{value:void 0}),r=Ne({},r,{value:void 0}),i=[];break;case"textarea":s=Md(t,s),r=Md(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Fl)}Ld(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ao.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ao.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&we("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};dw=function(t,e,n,r){n!==r&&(e.flags|=4)};function eo(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $S(t,e,n){var r=e.pendingProps;switch(bf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return St(e.type)&&Bl(),at(e),null;case 3:return r=e.stateNode,ui(),be(Tt),be(ht),Rf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,en!==null&&(xh(en),en=null))),dh(t,e),at(e),null;case 5:Pf(e);var s=Xr(zo.current);if(n=e.type,t!==null&&e.stateNode!=null)uw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return at(e),null}if(t=Xr(gn.current),Qa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[mn]=e,r[Fo]=i,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(s=0;s<io.length;s++)we(io[s],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":lg(r,i),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},we("invalid",r);break;case"textarea":ug(r,i),we("invalid",r)}Ld(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ka(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ka(r.textContent,l,t),s=["children",""+l]):Ao.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":Fa(r),cg(r,i,!0);break;case"textarea":Fa(r),dg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Fl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ux(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[mn]=e,t[Fo]=r,cw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ud(n,r),n){case"dialog":we("cancel",t),we("close",t),s=r;break;case"iframe":case"object":case"embed":we("load",t),s=r;break;case"video":case"audio":for(s=0;s<io.length;s++)we(io[s],t);s=r;break;case"source":we("error",t),s=r;break;case"img":case"image":case"link":we("error",t),we("load",t),s=r;break;case"details":we("toggle",t),s=r;break;case"input":lg(t,r),s=jd(t,r),we("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ne({},r,{value:void 0}),we("invalid",t);break;case"textarea":ug(t,r),s=Md(t,r),we("invalid",t);break;default:s=r}Ld(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?zx(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Fx(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Po(t,c):typeof c=="number"&&Po(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ao.hasOwnProperty(i)?c!=null&&i==="onScroll"&&we("scroll",t):c!=null&&lf(t,i,c,o))}switch(n){case"input":Fa(t),cg(t,r,!1);break;case"textarea":Fa(t),dg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ir(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Qs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Qs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Fl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)dw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Xr(zo.current),Xr(gn.current),Qa(e)){if(r=e.stateNode,n=e.memoizedProps,r[mn]=e,(i=r.nodeValue!==n)&&(t=Rt,t!==null))switch(t.tag){case 3:Ka(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ka(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mn]=e,e.stateNode=r}return at(e),null;case 13:if(be(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Pt!==null&&e.mode&1&&!(e.flags&128))N_(),li(),e.flags|=98560,i=!1;else if(i=Qa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[mn]=e}else li(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),i=!1}else en!==null&&(xh(en),en=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?ze===0&&(ze=3):Hf())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return ui(),dh(t,e),t===null&&Lo(e.stateNode.containerInfo),at(e),null;case 10:return If(e.type._context),at(e),null;case 17:return St(e.type)&&Bl(),at(e),null;case 19:if(be(Se),i=e.memoizedState,i===null)return at(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)eo(i,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Kl(t),o!==null){for(e.flags|=128,eo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(Se,Se.current&1|2),e.child}t=t.sibling}i.tail!==null&&De()>hi&&(e.flags|=128,r=!0,eo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Kl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),eo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Te)return at(e),null}else 2*De()-i.renderingStartTime>hi&&n!==1073741824&&(e.flags|=128,r=!0,eo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=De(),e.sibling=null,n=Se.current,xe(Se,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return $f(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function HS(t,e){switch(bf(e),e.tag){case 1:return St(e.type)&&Bl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ui(),be(Tt),be(ht),Rf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pf(e),null;case 13:if(be(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));li()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Se),null;case 4:return ui(),null;case 10:return If(e.type._context),null;case 22:case 23:return $f(),null;case 24:return null;default:return null}}var Xa=!1,ut=!1,WS=typeof WeakSet=="function"?WeakSet:Set,Q=null;function qs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Re(t,e,r)}else n.current=null}function hh(t,e,n){try{n()}catch(r){Re(t,e,r)}}var ev=!1;function GS(t,e){if(Qd=Vl,t=g_(),wf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var _;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)g=p,p=_;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(c=o),(_=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=_}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yd={focusedElem:t,selectionRange:n},Vl=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var N=C.memoizedProps,A=C.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?N:Xt(e.type,N),A);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(R){Re(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return C=ev,ev=!1,C}function xo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&hh(e,n,i)}s=s.next}while(s!==r)}}function Vc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hw(t){var e=t.alternate;e!==null&&(t.alternate=null,hw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mn],delete e[Fo],delete e[Zd],delete e[kS],delete e[NS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fw(t){return t.tag===5||t.tag===3||t.tag===4}function tv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fl));else if(r!==4&&(t=t.child,t!==null))for(mh(t,e,n),t=t.sibling;t!==null;)mh(t,e,n),t=t.sibling}function ph(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ph(t,e,n),t=t.sibling;t!==null;)ph(t,e,n),t=t.sibling}var Ye=null,Zt=!1;function tr(t,e,n){for(n=n.child;n!==null;)mw(t,e,n),n=n.sibling}function mw(t,e,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Nc,n)}catch{}switch(n.tag){case 5:ut||qs(n,e);case 6:var r=Ye,s=Zt;Ye=null,tr(t,e,n),Ye=r,Zt=s,Ye!==null&&(Zt?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Zt?(t=Ye,n=n.stateNode,t.nodeType===8?td(t.parentNode,n):t.nodeType===1&&td(t,n),Oo(t)):td(Ye,n.stateNode));break;case 4:r=Ye,s=Zt,Ye=n.stateNode.containerInfo,Zt=!0,tr(t,e,n),Ye=r,Zt=s;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hh(n,e,o),s=s.next}while(s!==r)}tr(t,e,n);break;case 1:if(!ut&&(qs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Re(n,e,l)}tr(t,e,n);break;case 21:tr(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,tr(t,e,n),ut=r):tr(t,e,n);break;default:tr(t,e,n)}}function nv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new WS),e.forEach(function(r){var s=tC.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ye=l.stateNode,Zt=!1;break e;case 3:Ye=l.stateNode.containerInfo,Zt=!0;break e;case 4:Ye=l.stateNode.containerInfo,Zt=!0;break e}l=l.return}if(Ye===null)throw Error(H(160));mw(i,o,s),Ye=null,Zt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Re(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pw(e,t),e=e.sibling}function pw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),un(t),r&4){try{xo(3,t,t.return),Vc(3,t)}catch(N){Re(t,t.return,N)}try{xo(5,t,t.return)}catch(N){Re(t,t.return,N)}}break;case 1:Jt(e,t),un(t),r&512&&n!==null&&qs(n,n.return);break;case 5:if(Jt(e,t),un(t),r&512&&n!==null&&qs(n,n.return),t.flags&32){var s=t.stateNode;try{Po(s,"")}catch(N){Re(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Vx(s,i),Ud(l,o);var d=Ud(l,i);for(o=0;o<c.length;o+=2){var f=c[o],p=c[o+1];f==="style"?zx(s,p):f==="dangerouslySetInnerHTML"?Fx(s,p):f==="children"?Po(s,p):lf(s,f,p,d)}switch(l){case"input":Dd(s,i);break;case"textarea":Lx(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?Qs(s,!!i.multiple,_,!1):g!==!!i.multiple&&(i.defaultValue!=null?Qs(s,!!i.multiple,i.defaultValue,!0):Qs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Fo]=i}catch(N){Re(t,t.return,N)}}break;case 6:if(Jt(e,t),un(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Re(t,t.return,N)}}break;case 3:if(Jt(e,t),un(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oo(e.containerInfo)}catch(N){Re(t,t.return,N)}break;case 4:Jt(e,t),un(t);break;case 13:Jt(e,t),un(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Bf=De())),r&4&&nv(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(d=ut)||f,Jt(e,t),ut=d):Jt(e,t),un(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Q=t,f=t.child;f!==null;){for(p=Q=f;Q!==null;){switch(g=Q,_=g.child,g.tag){case 0:case 11:case 14:case 15:xo(4,g,g.return);break;case 1:qs(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(N){Re(r,n,N)}}break;case 5:qs(g,g.return);break;case 22:if(g.memoizedState!==null){sv(p);continue}}_!==null?(_.return=g,Q=_):sv(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Bx("display",o))}catch(N){Re(t,t.return,N)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(N){Re(t,t.return,N)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Jt(e,t),un(t),r&4&&nv(t);break;case 21:break;default:Jt(e,t),un(t)}}function un(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fw(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Po(s,""),r.flags&=-33);var i=tv(t);ph(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=tv(t);mh(t,l,o);break;default:throw Error(H(161))}}catch(c){Re(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qS(t,e,n){Q=t,gw(t)}function gw(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Xa;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ut;l=Xa;var d=ut;if(Xa=o,(ut=c)&&!d)for(Q=s;Q!==null;)o=Q,c=o.child,o.tag===22&&o.memoizedState!==null?iv(s):c!==null?(c.return=o,Q=c):iv(s);for(;i!==null;)Q=i,gw(i),i=i.sibling;Q=s,Xa=l,ut=d}rv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):rv(t)}}function rv(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||Vc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Xt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Bg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Oo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}ut||e.flags&512&&fh(e)}catch(g){Re(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function sv(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function iv(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vc(4,e)}catch(c){Re(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Re(e,s,c)}}var i=e.return;try{fh(e)}catch(c){Re(e,i,c)}break;case 5:var o=e.return;try{fh(e)}catch(c){Re(e,o,c)}}}catch(c){Re(e,e.return,c)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var KS=Math.ceil,Jl=Gn.ReactCurrentDispatcher,Uf=Gn.ReactCurrentOwner,Wt=Gn.ReactCurrentBatchConfig,he=0,Ke=null,Me=null,Ze=0,Nt=0,Ks=Lr(0),ze=0,Go=null,cs=0,Lc=0,Ff=0,_o=null,Et=null,Bf=0,hi=1/0,kn=null,Xl=!1,gh=null,xr=null,Za=!1,dr=null,Zl=0,wo=0,vh=null,vl=-1,yl=0;function yt(){return he&6?De():vl!==-1?vl:vl=De()}function _r(t){return t.mode&1?he&2&&Ze!==0?Ze&-Ze:PS.transition!==null?(yl===0&&(yl=e_()),yl):(t=ge,t!==0||(t=window.event,t=t===void 0?16:a_(t.type)),t):1}function sn(t,e,n,r){if(50<wo)throw wo=0,vh=null,Error(H(185));oa(t,n,r),(!(he&2)||t!==Ke)&&(t===Ke&&(!(he&2)&&(Lc|=n),ze===4&&or(t,Ze)),Ct(t,r),n===1&&he===0&&!(e.mode&1)&&(hi=De()+500,Dc&&Ur()))}function Ct(t,e){var n=t.callbackNode;PT(t,e);var r=Ml(t,t===Ke?Ze:0);if(r===0)n!==null&&mg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&mg(n),e===1)t.tag===0?AS(ov.bind(null,t)):C_(ov.bind(null,t)),CS(function(){!(he&6)&&Ur()}),n=null;else{switch(t_(r)){case 1:n=ff;break;case 4:n=Xx;break;case 16:n=Ol;break;case 536870912:n=Zx;break;default:n=Ol}n=Tw(n,vw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vw(t,e){if(vl=-1,yl=0,he&6)throw Error(H(327));var n=t.callbackNode;if(ei()&&t.callbackNode!==n)return null;var r=Ml(t,t===Ke?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ec(t,r);else{e=r;var s=he;he|=2;var i=xw();(Ke!==t||Ze!==e)&&(kn=null,hi=De()+500,ns(t,e));do try{JS();break}catch(l){yw(t,l)}while(!0);Cf(),Jl.current=i,he=s,Me!==null?e=0:(Ke=null,Ze=0,e=ze)}if(e!==0){if(e===2&&(s=Hd(t),s!==0&&(r=s,e=yh(t,s))),e===1)throw n=Go,ns(t,0),or(t,r),Ct(t,De()),n;if(e===6)or(t,r);else{if(s=t.current.alternate,!(r&30)&&!QS(s)&&(e=ec(t,r),e===2&&(i=Hd(t),i!==0&&(r=i,e=yh(t,i))),e===1))throw n=Go,ns(t,0),or(t,r),Ct(t,De()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:Kr(t,Et,kn);break;case 3:if(or(t,r),(r&130023424)===r&&(e=Bf+500-De(),10<e)){if(Ml(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){yt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xd(Kr.bind(null,t,Et,kn),e);break}Kr(t,Et,kn);break;case 4:if(or(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-rn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*KS(r/1960))-r,10<r){t.timeoutHandle=Xd(Kr.bind(null,t,Et,kn),r);break}Kr(t,Et,kn);break;case 5:Kr(t,Et,kn);break;default:throw Error(H(329))}}}return Ct(t,De()),t.callbackNode===n?vw.bind(null,t):null}function yh(t,e){var n=_o;return t.current.memoizedState.isDehydrated&&(ns(t,e).flags|=256),t=ec(t,e),t!==2&&(e=Et,Et=n,e!==null&&xh(e)),t}function xh(t){Et===null?Et=t:Et.push.apply(Et,t)}function QS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!an(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function or(t,e){for(e&=~Ff,e&=~Lc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function ov(t){if(he&6)throw Error(H(327));ei();var e=Ml(t,0);if(!(e&1))return Ct(t,De()),null;var n=ec(t,e);if(t.tag!==0&&n===2){var r=Hd(t);r!==0&&(e=r,n=yh(t,r))}if(n===1)throw n=Go,ns(t,0),or(t,e),Ct(t,De()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Kr(t,Et,kn),Ct(t,De()),null}function zf(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(hi=De()+500,Dc&&Ur())}}function us(t){dr!==null&&dr.tag===0&&!(he&6)&&ei();var e=he;he|=1;var n=Wt.transition,r=ge;try{if(Wt.transition=null,ge=1,t)return t()}finally{ge=r,Wt.transition=n,he=e,!(he&6)&&Ur()}}function $f(){Nt=Ks.current,be(Ks)}function ns(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,SS(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(bf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bl();break;case 3:ui(),be(Tt),be(ht),Rf();break;case 5:Pf(r);break;case 4:ui();break;case 13:be(Se);break;case 19:be(Se);break;case 10:If(r.type._context);break;case 22:case 23:$f()}n=n.return}if(Ke=t,Me=t=wr(t.current,null),Ze=Nt=e,ze=0,Go=null,Ff=Lc=cs=0,Et=_o=null,Jr!==null){for(e=0;e<Jr.length;e++)if(n=Jr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Jr=null}return t}function yw(t,e){do{var n=Me;try{if(Cf(),ml.current=Yl,Ql){for(var r=Ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ql=!1}if(ls=0,Ge=Fe=Ie=null,yo=!1,$o=0,Uf.current=null,n===null||n.return===null){ze=1,Go=e,Me=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Ze,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=qg(o);if(_!==null){_.flags&=-257,Kg(_,o,l,i,e),_.mode&1&&Gg(i,d,e),e=_,c=d;var C=e.updateQueue;if(C===null){var N=new Set;N.add(c),e.updateQueue=N}else C.add(c);break e}else{if(!(e&1)){Gg(i,d,e),Hf();break e}c=Error(H(426))}}else if(Te&&l.mode&1){var A=qg(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Kg(A,o,l,i,e),Tf(di(c,l));break e}}i=c=di(c,l),ze!==4&&(ze=2),_o===null?_o=[i]:_o.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=tw(i,c,e);Fg(i,E);break e;case 1:l=c;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(xr===null||!xr.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=nw(i,l,e);Fg(i,R);break e}}i=i.return}while(i!==null)}ww(n)}catch(B){e=B,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function xw(){var t=Jl.current;return Jl.current=Yl,t===null?Yl:t}function Hf(){(ze===0||ze===3||ze===2)&&(ze=4),Ke===null||!(cs&268435455)&&!(Lc&268435455)||or(Ke,Ze)}function ec(t,e){var n=he;he|=2;var r=xw();(Ke!==t||Ze!==e)&&(kn=null,ns(t,e));do try{YS();break}catch(s){yw(t,s)}while(!0);if(Cf(),he=n,Jl.current=r,Me!==null)throw Error(H(261));return Ke=null,Ze=0,ze}function YS(){for(;Me!==null;)_w(Me)}function JS(){for(;Me!==null&&!ET();)_w(Me)}function _w(t){var e=bw(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,e===null?ww(t):Me=e,Uf.current=null}function ww(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=HS(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Me=null;return}}else if(n=$S(n,e,Nt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);ze===0&&(ze=5)}function Kr(t,e,n){var r=ge,s=Wt.transition;try{Wt.transition=null,ge=1,XS(t,e,n,r)}finally{Wt.transition=s,ge=r}return null}function XS(t,e,n,r){do ei();while(dr!==null);if(he&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(RT(t,i),t===Ke&&(Me=Ke=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Za||(Za=!0,Tw(Ol,function(){return ei(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Wt.transition,Wt.transition=null;var o=ge;ge=1;var l=he;he|=4,Uf.current=null,GS(t,n),pw(n,t),yS(Yd),Vl=!!Qd,Yd=Qd=null,t.current=n,qS(n),bT(),he=l,ge=o,Wt.transition=i}else t.current=n;if(Za&&(Za=!1,dr=t,Zl=s),i=t.pendingLanes,i===0&&(xr=null),CT(n.stateNode),Ct(t,De()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Xl)throw Xl=!1,t=gh,gh=null,t;return Zl&1&&t.tag!==0&&ei(),i=t.pendingLanes,i&1?t===vh?wo++:(wo=0,vh=t):wo=0,Ur(),null}function ei(){if(dr!==null){var t=t_(Zl),e=Wt.transition,n=ge;try{if(Wt.transition=null,ge=16>t?16:t,dr===null)var r=!1;else{if(t=dr,dr=null,Zl=0,he&6)throw Error(H(331));var s=he;for(he|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Q=d;Q!==null;){var f=Q;switch(f.tag){case 0:case 11:case 15:xo(8,f,i)}var p=f.child;if(p!==null)p.return=f,Q=p;else for(;Q!==null;){f=Q;var g=f.sibling,_=f.return;if(hw(f),f===d){Q=null;break}if(g!==null){g.return=_,Q=g;break}Q=_}}}var C=i.alternate;if(C!==null){var N=C.child;if(N!==null){C.child=null;do{var A=N.sibling;N.sibling=null,N=A}while(N!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xo(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,Q=E;break e}Q=i.return}}var y=t.current;for(Q=y;Q!==null;){o=Q;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Q=b;else e:for(o=y;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Vc(9,l)}}catch(B){Re(l,l.return,B)}if(l===o){Q=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,Q=R;break e}Q=l.return}}if(he=s,Ur(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Nc,t)}catch{}r=!0}return r}finally{ge=n,Wt.transition=e}}return!1}function av(t,e,n){e=di(n,e),e=tw(t,e,1),t=yr(t,e,1),e=yt(),t!==null&&(oa(t,1,e),Ct(t,e))}function Re(t,e,n){if(t.tag===3)av(t,t,n);else for(;e!==null;){if(e.tag===3){av(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xr===null||!xr.has(r))){t=di(n,t),t=nw(e,t,1),e=yr(e,t,1),t=yt(),e!==null&&(oa(e,1,t),Ct(e,t));break}}e=e.return}}function ZS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yt(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(Ze&n)===n&&(ze===4||ze===3&&(Ze&130023424)===Ze&&500>De()-Bf?ns(t,0):Ff|=n),Ct(t,e)}function Ew(t,e){e===0&&(t.mode&1?(e=$a,$a<<=1,!($a&130023424)&&($a=4194304)):e=1);var n=yt();t=Fn(t,e),t!==null&&(oa(t,e,n),Ct(t,n))}function eC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ew(t,n)}function tC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),Ew(t,n)}var bw;bw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tt.current)bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bt=!1,zS(t,e,n);bt=!!(t.flags&131072)}else bt=!1,Te&&e.flags&1048576&&I_(e,Hl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;gl(t,e),t=e.pendingProps;var s=ai(e,ht.current);Zs(e,n),s=Df(null,e,r,t,s,n);var i=Of();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,St(r)?(i=!0,zl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Nf(e),s.updater=Mc,e.stateNode=s,s._reactInternals=e,ih(e,r,t,n),e=lh(null,e,r,!0,i,n)):(e.tag=0,Te&&i&&Ef(e),vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(gl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=rC(r),t=Xt(r,t),s){case 0:e=ah(null,e,r,t,n);break e;case 1:e=Jg(null,e,r,t,n);break e;case 11:e=Qg(null,e,r,t,n);break e;case 14:e=Yg(null,e,r,Xt(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),ah(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),Jg(t,e,r,s,n);case 3:e:{if(ow(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,j_(t,e),ql(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=di(Error(H(423)),e),e=Xg(t,e,r,n,s);break e}else if(r!==s){s=di(Error(H(424)),e),e=Xg(t,e,r,n,s);break e}else for(Pt=vr(e.stateNode.containerInfo.firstChild),Rt=e,Te=!0,en=null,n=P_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(li(),r===s){e=Bn(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return D_(e),t===null&&nh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Jd(r,s)?o=null:i!==null&&Jd(r,i)&&(e.flags|=32),iw(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&nh(e),null;case 13:return aw(t,e,n);case 4:return Af(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ci(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),Qg(t,e,r,s,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,xe(Wl,r._currentValue),r._currentValue=o,i!==null)if(an(i.value,o)){if(i.children===s.children&&!Tt.current){e=Bn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=On(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),rh(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),rh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Zs(e,n),s=qt(s),r=r(s),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,s=Xt(r,e.pendingProps),s=Xt(r.type,s),Yg(t,e,r,s,n);case 15:return rw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),gl(t,e),e.tag=1,St(r)?(t=!0,zl(e)):t=!1,Zs(e,n),ew(e,r,s),ih(e,r,s,n),lh(null,e,r,!0,t,n);case 19:return lw(t,e,n);case 22:return sw(t,e,n)}throw Error(H(156,e.tag))};function Tw(t,e){return Jx(t,e)}function nC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(t,e,n,r){return new nC(t,e,n,r)}function Wf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rC(t){if(typeof t=="function")return Wf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uf)return 11;if(t===df)return 14}return 2}function wr(t,e){var n=t.alternate;return n===null?(n=Ht(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Wf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ls:return rs(n.children,s,i,e);case cf:o=8,s|=8;break;case Nd:return t=Ht(12,n,e,s|2),t.elementType=Nd,t.lanes=i,t;case Ad:return t=Ht(13,n,e,s),t.elementType=Ad,t.lanes=i,t;case Pd:return t=Ht(19,n,e,s),t.elementType=Pd,t.lanes=i,t;case Dx:return Uc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Rx:o=10;break e;case jx:o=9;break e;case uf:o=11;break e;case df:o=14;break e;case rr:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Ht(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function rs(t,e,n,r){return t=Ht(7,t,r,e),t.lanes=n,t}function Uc(t,e,n,r){return t=Ht(22,t,r,e),t.elementType=Dx,t.lanes=n,t.stateNode={isHidden:!1},t}function cd(t,e,n){return t=Ht(6,t,null,e),t.lanes=n,t}function ud(t,e,n){return e=Ht(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sC(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hu(0),this.expirationTimes=Hu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gf(t,e,n,r,s,i,o,l,c){return t=new sC(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ht(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nf(i),t}function iC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Sw(t){if(!t)return kr;t=t._reactInternals;e:{if(xs(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(St(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(St(n))return S_(t,n,e)}return e}function Cw(t,e,n,r,s,i,o,l,c){return t=Gf(n,r,!0,t,s,i,o,l,c),t.context=Sw(null),n=t.current,r=yt(),s=_r(n),i=On(r,s),i.callback=e??null,yr(n,i,s),t.current.lanes=s,oa(t,s,r),Ct(t,r),t}function Fc(t,e,n,r){var s=e.current,i=yt(),o=_r(s);return n=Sw(n),e.context===null?e.context=n:e.pendingContext=n,e=On(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yr(s,e,o),t!==null&&(sn(t,s,o,i),fl(t,s,o)),o}function tc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qf(t,e){lv(t,e),(t=t.alternate)&&lv(t,e)}function oC(){return null}var Iw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kf(t){this._internalRoot=t}Bc.prototype.render=Kf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Fc(t,e,null,null)};Bc.prototype.unmount=Kf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;us(function(){Fc(null,t,null,null)}),e[Un]=null}};function Bc(t){this._internalRoot=t}Bc.prototype.unstable_scheduleHydration=function(t){if(t){var e=s_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ir.length&&e!==0&&e<ir[n].priority;n++);ir.splice(n,0,t),n===0&&o_(t)}};function Qf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cv(){}function aC(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=tc(o);i.call(d)}}var o=Cw(e,r,t,0,null,!1,!1,"",cv);return t._reactRootContainer=o,t[Un]=o.current,Lo(t.nodeType===8?t.parentNode:t),us(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=tc(c);l.call(d)}}var c=Gf(t,0,!1,null,null,!1,!1,"",cv);return t._reactRootContainer=c,t[Un]=c.current,Lo(t.nodeType===8?t.parentNode:t),us(function(){Fc(e,c,n,r)}),c}function $c(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=tc(o);l.call(c)}}Fc(e,o,t,s)}else o=aC(n,e,t,s,r);return tc(o)}n_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=so(e.pendingLanes);n!==0&&(mf(e,n|1),Ct(e,De()),!(he&6)&&(hi=De()+500,Ur()))}break;case 13:us(function(){var r=Fn(t,1);if(r!==null){var s=yt();sn(r,t,1,s)}}),qf(t,1)}};pf=function(t){if(t.tag===13){var e=Fn(t,134217728);if(e!==null){var n=yt();sn(e,t,134217728,n)}qf(t,134217728)}};r_=function(t){if(t.tag===13){var e=_r(t),n=Fn(t,e);if(n!==null){var r=yt();sn(n,t,e,r)}qf(t,e)}};s_=function(){return ge};i_=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};Bd=function(t,e,n){switch(e){case"input":if(Dd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=jc(r);if(!s)throw Error(H(90));Mx(r),Dd(r,s)}}}break;case"textarea":Lx(t,n);break;case"select":e=n.value,e!=null&&Qs(t,!!n.multiple,e,!1)}};Wx=zf;Gx=us;var lC={usingClientEntryPoint:!1,Events:[la,zs,jc,$x,Hx,zf]},to={findFiberByHostInstance:Yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cC={bundleType:to.bundleType,version:to.version,rendererPackageName:to.rendererPackageName,rendererConfig:to.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qx(t),t===null?null:t.stateNode},findFiberByHostInstance:to.findFiberByHostInstance||oC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var el=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!el.isDisabled&&el.supportsFiber)try{Nc=el.inject(cC),pn=el}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lC;Ot.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qf(e))throw Error(H(200));return iC(t,e,null,n)};Ot.createRoot=function(t,e){if(!Qf(t))throw Error(H(299));var n=!1,r="",s=Iw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Gf(t,1,!1,null,null,n,!1,r,s),t[Un]=e.current,Lo(t.nodeType===8?t.parentNode:t),new Kf(e)};Ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=Qx(e),t=t===null?null:t.stateNode,t};Ot.flushSync=function(t){return us(t)};Ot.hydrate=function(t,e,n){if(!zc(e))throw Error(H(200));return $c(null,t,e,!0,n)};Ot.hydrateRoot=function(t,e,n){if(!Qf(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Iw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Cw(e,null,t,1,n??null,s,!1,i,o),t[Un]=e.current,Lo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Bc(e)};Ot.render=function(t,e,n){if(!zc(e))throw Error(H(200));return $c(null,t,e,!1,n)};Ot.unmountComponentAtNode=function(t){if(!zc(t))throw Error(H(40));return t._reactRootContainer?(us(function(){$c(null,null,t,!1,function(){t._reactRootContainer=null,t[Un]=null})}),!0):!1};Ot.unstable_batchedUpdates=zf;Ot.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zc(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return $c(t,e,n,!1,r)};Ot.version="18.3.1-next-f1338f8080-20240426";function kw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kw)}catch(t){console.error(t)}}kw(),kx.exports=Ot;var uC=kx.exports,Nw,uv=uC;Nw=uv.createRoot,uv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qo(){return qo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qo.apply(this,arguments)}var hr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(hr||(hr={}));const dv="popstate";function dC(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return _h("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:nc(s)}return fC(e,n,null,t)}function ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hC(){return Math.random().toString(36).substr(2,8)}function hv(t,e){return{usr:t.state,key:t.key,idx:e}}function _h(t,e,n,r){return n===void 0&&(n=null),qo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ti(e):e,{state:n,key:e&&e.key||r||hC()})}function nc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ti(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function fC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=hr.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(qo({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=hr.Pop;let A=f(),E=A==null?null:A-d;d=A,c&&c({action:l,location:N.location,delta:E})}function g(A,E){l=hr.Push;let y=_h(N.location,A,E);d=f()+1;let b=hv(y,d),R=N.createHref(y);try{o.pushState(b,"",R)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(R)}i&&c&&c({action:l,location:N.location,delta:1})}function _(A,E){l=hr.Replace;let y=_h(N.location,A,E);d=f();let b=hv(y,d),R=N.createHref(y);o.replaceState(b,"",R),i&&c&&c({action:l,location:N.location,delta:0})}function C(A){let E=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof A=="string"?A:nc(A);return y=y.replace(/ $/,"%20"),ke(E,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,E)}let N={get action(){return l},get location(){return t(s,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(dv,p),c=A,()=>{s.removeEventListener(dv,p),c=null}},createHref(A){return e(s,A)},createURL:C,encodeLocation(A){let E=C(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:_,go(A){return o.go(A)}};return N}var fv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(fv||(fv={}));function mC(t,e,n){return n===void 0&&(n="/"),pC(t,e,n)}function pC(t,e,n,r){let s=typeof e=="string"?Ti(e):e,i=fi(s.pathname||"/",n);if(i==null)return null;let o=Aw(t);gC(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=IC(i);l=SC(o[c],d)}return l}function Aw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ke(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Er([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(ke(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Aw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:bC(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of Pw(i.path))s(i,o,c)}),e}function Pw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Pw(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function gC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:TC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const vC=/^:[\w-]+$/,yC=3,xC=2,_C=1,wC=10,EC=-2,mv=t=>t==="*";function bC(t,e){let n=t.split("/"),r=n.length;return n.some(mv)&&(r+=EC),e&&(r+=xC),n.filter(s=>!mv(s)).reduce((s,i)=>s+(vC.test(i)?yC:i===""?_C:wC),r)}function TC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function SC(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=wh({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Er([i,p.pathname]),pathnameBase:RC(Er([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=Er([i,p.pathnameBase]))}return o}function wh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=CC(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:_}=f;if(g==="*"){let N=l[p]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const C=l[p];return _&&!C?d[g]=void 0:d[g]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function CC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Yf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function IC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function fi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const kC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NC=t=>kC.test(t);function AC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ti(t):t,i;if(n)if(NC(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Yf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=pv(n.substring(1),"/"):i=pv(n,e)}else i=e;return{pathname:i,search:jC(r),hash:DC(s)}}function pv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jf(t,e){let n=PC(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Xf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ti(t):(s=qo({},t),ke(!s.pathname||!s.pathname.includes("?"),dd("?","pathname","search",s)),ke(!s.pathname||!s.pathname.includes("#"),dd("#","pathname","hash",s)),ke(!s.search||!s.search.includes("#"),dd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=AC(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Er=t=>t.join("/").replace(/\/\/+/g,"/"),RC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,DC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function OC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Rw=["post","put","patch","delete"];new Set(Rw);const MC=["get",...Rw];new Set(MC);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ko(){return Ko=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ko.apply(this,arguments)}const Hc=I.createContext(null),jw=I.createContext(null),qn=I.createContext(null),Wc=I.createContext(null),Kn=I.createContext({outlet:null,matches:[],isDataRoute:!1}),Dw=I.createContext(null);function VC(t,e){let{relative:n}=e===void 0?{}:e;Si()||ke(!1);let{basename:r,navigator:s}=I.useContext(qn),{hash:i,pathname:o,search:l}=Gc(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Er([r,o])),s.createHref({pathname:c,search:l,hash:i})}function Si(){return I.useContext(Wc)!=null}function _s(){return Si()||ke(!1),I.useContext(Wc).location}function Ow(t){I.useContext(qn).static||I.useLayoutEffect(t)}function Mw(){let{isDataRoute:t}=I.useContext(Kn);return t?XC():LC()}function LC(){Si()||ke(!1);let t=I.useContext(Hc),{basename:e,future:n,navigator:r}=I.useContext(qn),{matches:s}=I.useContext(Kn),{pathname:i}=_s(),o=JSON.stringify(Jf(s,n.v7_relativeSplatPath)),l=I.useRef(!1);return Ow(()=>{l.current=!0}),I.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=Xf(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Er([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}const UC=I.createContext(null);function FC(t){let e=I.useContext(Kn).outlet;return e&&I.createElement(UC.Provider,{value:t},e)}function Gc(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=I.useContext(qn),{matches:s}=I.useContext(Kn),{pathname:i}=_s(),o=JSON.stringify(Jf(s,r.v7_relativeSplatPath));return I.useMemo(()=>Xf(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function BC(t,e){return zC(t,e)}function zC(t,e,n,r){Si()||ke(!1);let{navigator:s}=I.useContext(qn),{matches:i}=I.useContext(Kn),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=_s(),f;if(e){var p;let A=typeof e=="string"?Ti(e):e;c==="/"||(p=A.pathname)!=null&&p.startsWith(c)||ke(!1),f=A}else f=d;let g=f.pathname||"/",_=g;if(c!=="/"){let A=c.replace(/^\//,"").split("/");_="/"+g.replace(/^\//,"").split("/").slice(A.length).join("/")}let C=mC(t,{pathname:_}),N=qC(C&&C.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:Er([c,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?c:Er([c,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,n,r);return e&&N?I.createElement(Wc.Provider,{value:{location:Ko({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:hr.Pop}},N):N}function $C(){let t=JC(),e=OC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:s},n):null,null)}const HC=I.createElement($C,null);class WC extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?I.createElement(Kn.Provider,{value:this.props.routeContext},I.createElement(Dw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GC(t){let{routeContext:e,match:n,children:r}=t,s=I.useContext(Hc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Kn.Provider,{value:e},r)}function qC(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||ke(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:_}=n,C=p.route.loader&&g[p.route.id]===void 0&&(!_||_[p.route.id]===void 0);if(p.route.lazy||C){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let _,C=!1,N=null,A=null;n&&(_=l&&p.route.id?l[p.route.id]:void 0,N=p.route.errorElement||HC,c&&(d<0&&g===0?(ZC("route-fallback"),C=!0,A=null):d===g&&(C=!0,A=p.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,g+1)),y=()=>{let b;return _?b=N:C?b=A:p.route.Component?b=I.createElement(p.route.Component,null):p.route.element?b=p.route.element:b=f,I.createElement(GC,{match:p,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:b})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?I.createElement(WC,{location:n.location,revalidation:n.revalidation,component:N,error:_,children:y(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):y()},null)}var Vw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Vw||{}),Lw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Lw||{});function KC(t){let e=I.useContext(Hc);return e||ke(!1),e}function QC(t){let e=I.useContext(jw);return e||ke(!1),e}function YC(t){let e=I.useContext(Kn);return e||ke(!1),e}function Uw(t){let e=YC(),n=e.matches[e.matches.length-1];return n.route.id||ke(!1),n.route.id}function JC(){var t;let e=I.useContext(Dw),n=QC(),r=Uw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function XC(){let{router:t}=KC(Vw.UseNavigateStable),e=Uw(Lw.UseNavigateStable),n=I.useRef(!1);return Ow(()=>{n.current=!0}),I.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ko({fromRouteId:e},i)))},[t,e])}const gv={};function ZC(t,e,n){gv[t]||(gv[t]=!0)}function eI(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function tI(t){let{to:e,replace:n,state:r,relative:s}=t;Si()||ke(!1);let{future:i,static:o}=I.useContext(qn),{matches:l}=I.useContext(Kn),{pathname:c}=_s(),d=Mw(),f=Xf(e,Jf(l,i.v7_relativeSplatPath),c,s==="path"),p=JSON.stringify(f);return I.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function nI(t){return FC(t.context)}function Rs(t){ke(!1)}function rI(t){let{basename:e="/",children:n=null,location:r,navigationType:s=hr.Pop,navigator:i,static:o=!1,future:l}=t;Si()&&ke(!1);let c=e.replace(/^\/*/,"/"),d=I.useMemo(()=>({basename:c,navigator:i,static:o,future:Ko({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Ti(r));let{pathname:f="/",search:p="",hash:g="",state:_=null,key:C="default"}=r,N=I.useMemo(()=>{let A=fi(f,c);return A==null?null:{location:{pathname:A,search:p,hash:g,state:_,key:C},navigationType:s}},[c,f,p,g,_,C,s]);return N==null?null:I.createElement(qn.Provider,{value:d},I.createElement(Wc.Provider,{children:n,value:N}))}function sI(t){let{children:e,location:n}=t;return BC(Eh(e),n)}new Promise(()=>{});function Eh(t,e){e===void 0&&(e=[]);let n=[];return I.Children.forEach(t,(r,s)=>{if(!I.isValidElement(r))return;let i=[...e,s];if(r.type===I.Fragment){n.push.apply(n,Eh(r.props.children,i));return}r.type!==Rs&&ke(!1),!r.props.index||!r.props.children||ke(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Eh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rc(){return rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rc.apply(this,arguments)}function Fw(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function iI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function oI(t,e){return t.button===0&&(!e||e==="_self")&&!iI(t)}const aI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lI=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],cI="6";try{window.__reactRouterVersion=cI}catch{}const uI=I.createContext({isTransitioning:!1}),dI="startTransition",vv=Zb[dI];function hI(t){let{basename:e,children:n,future:r,window:s}=t,i=I.useRef();i.current==null&&(i.current=dC({window:s,v5Compat:!0}));let o=i.current,[l,c]=I.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=I.useCallback(p=>{d&&vv?vv(()=>c(p)):c(p)},[c,d]);return I.useLayoutEffect(()=>o.listen(f),[o,f]),I.useEffect(()=>eI(r),[r]),I.createElement(rI,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const fI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bh=I.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:f,viewTransition:p}=e,g=Fw(e,aI),{basename:_}=I.useContext(qn),C,N=!1;if(typeof d=="string"&&mI.test(d)&&(C=d,fI))try{let b=new URL(window.location.href),R=d.startsWith("//")?new URL(b.protocol+d):new URL(d),B=fi(R.pathname,_);R.origin===b.origin&&B!=null?d=B+R.search+R.hash:N=!0}catch{}let A=VC(d,{relative:s}),E=gI(d,{replace:o,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:p});function y(b){r&&r(b),b.defaultPrevented||E(b)}return I.createElement("a",rc({},g,{href:C||A,onClick:N||i?r:y,ref:n,target:c}))}),hd=I.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:d,children:f}=e,p=Fw(e,lI),g=Gc(c,{relative:p.relative}),_=_s(),C=I.useContext(jw),{navigator:N,basename:A}=I.useContext(qn),E=C!=null&&vI(g)&&d===!0,y=N.encodeLocation?N.encodeLocation(g).pathname:g.pathname,b=_.pathname,R=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;s||(b=b.toLowerCase(),R=R?R.toLowerCase():null,y=y.toLowerCase()),R&&A&&(R=fi(R,A)||R);const B=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let F=b===y||!o&&b.startsWith(y)&&b.charAt(B)==="/",T=R!=null&&(R===y||!o&&R.startsWith(y)&&R.charAt(y.length)==="/"),x={isActive:F,isPending:T,isTransitioning:E},S=F?r:void 0,k;typeof i=="function"?k=i(x):k=[i,F?"active":null,T?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let j=typeof l=="function"?l(x):l;return I.createElement(bh,rc({},p,{"aria-current":S,className:k,ref:n,style:j,to:c,viewTransition:d}),typeof f=="function"?f(x):f)});var Th;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Th||(Th={}));var yv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(yv||(yv={}));function pI(t){let e=I.useContext(Hc);return e||ke(!1),e}function gI(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=Mw(),d=_s(),f=Gc(t,{relative:o});return I.useCallback(p=>{if(oI(p,n)){p.preventDefault();let g=r!==void 0?r:nc(d)===nc(f);c(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,f,r,s,n,t,i,o,l])}function vI(t,e){e===void 0&&(e={});let n=I.useContext(uI);n==null&&ke(!1);let{basename:r}=pI(Th.useViewTransitionState),s=Gc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=fi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=fi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return wh(s.pathname,o)!=null||wh(s.pathname,i)!=null}const yI=()=>{};var xv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},xI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},zw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,_=d&63;c||(_=64,o||(g=64)),r.push(n[f],n[p],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new _I;const g=i<<2|l>>4;if(r.push(g),d!==64){const _=l<<4&240|d>>2;if(r.push(_),p!==64){const C=d<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _I extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wI=function(t){const e=Bw(t);return zw.encodeByteArray(e,!0)},sc=function(t){return wI(t).replace(/\./g,"")},$w=function(t){try{return zw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=()=>EI().__FIREBASE_DEFAULTS__,TI=()=>{if(typeof process>"u"||typeof xv>"u")return;const t=xv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},SI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$w(t[1]);return e&&JSON.parse(e)},qc=()=>{try{return yI()||bI()||TI()||SI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Hw=t=>{var e,n;return(n=(e=qc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},CI=t=>{const e=Hw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ww=()=>{var t;return(t=qc())===null||t===void 0?void 0:t.config},Gw=t=>{var e;return(e=qc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[sc(JSON.stringify(n)),sc(JSON.stringify(o)),""].join(".")}const Eo={};function NI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Eo))Eo[e]?t.emulator.push(e):t.prod.push(e);return t}function AI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let _v=!1;function Kw(t,e){if(typeof window>"u"||typeof document>"u"||!Ci(window.location.host)||Eo[t]===e||Eo[t]||_v)return;Eo[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=NI().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{_v=!0,o()},g}function f(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=AI(r),_=n("text"),C=document.getElementById(_)||document.createElement("span"),N=n("learnmore"),A=document.getElementById(N)||document.createElement("a"),E=n("preprendIcon"),y=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const b=g.element;l(b),f(A,N);const R=d();c(y,E),b.append(y,C,A,R),document.body.appendChild(b)}i?(C.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function RI(){var t;const e=(t=qc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Qw(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function DI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OI(){const t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function MI(){return!RI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yw(){try{return typeof indexedDB=="object"}catch{return!1}}function Jw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function VI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="FirebaseError";class cn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=LI,Object.setPrototypeOf(this,cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ws.prototype.create)}}class ws{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?UI(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new cn(s,l,r)}}function UI(t,e){return t.replace(FI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const FI=/\{\$([^}]+)}/g;function BI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Nr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(wv(i)&&wv(o)){if(!Nr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function wv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ao(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function zI(t,e){const n=new $I(t,e);return n.subscribe.bind(n)}class $I{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=fd),s.error===void 0&&(s.error=fd),s.complete===void 0&&(s.complete=fd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=1e3,GI=2,qI=4*60*60*1e3,KI=.5;function Ev(t,e=WI,n=GI){const r=e*Math.pow(n,t),s=Math.round(KI*r*(Math.random()-.5)*2);return Math.min(qI,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t){return t&&t._delegate?t._delegate:t}class ln{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new II;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JI(e))try{this.getOrInitializeService({instanceIdentifier:Qr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qr){return this.instances.has(e)}getOptions(e=Qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qr){return this.component?this.component.multipleInstances?e:Qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YI(t){return t===Qr?void 0:t}function JI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const ZI={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},ek=ce.INFO,tk={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},nk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=tk[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kc{constructor(e){this.name=e,this._logLevel=ek,this._logHandler=nk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const rk=(t,e)=>e.some(n=>t instanceof n);let bv,Tv;function sk(){return bv||(bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ik(){return Tv||(Tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xw=new WeakMap,Sh=new WeakMap,Zw=new WeakMap,md=new WeakMap,Zf=new WeakMap;function ok(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(br(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Xw.set(n,t)}).catch(()=>{}),Zf.set(e,t),e}function ak(t){if(Sh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Sh.set(t,e)}let Ch={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Zw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lk(t){Ch=t(Ch)}function ck(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(pd(this),e,...n);return Zw.set(r,e.sort?e.sort():[e]),br(r)}:ik().includes(t)?function(...e){return t.apply(pd(this),e),br(Xw.get(this))}:function(...e){return br(t.apply(pd(this),e))}}function uk(t){return typeof t=="function"?ck(t):(t instanceof IDBTransaction&&ak(t),rk(t,sk())?new Proxy(t,Ch):t)}function br(t){if(t instanceof IDBRequest)return ok(t);if(md.has(t))return md.get(t);const e=uk(t);return e!==t&&(md.set(t,e),Zf.set(e,t)),e}const pd=t=>Zf.get(t);function e0(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=br(o);return r&&o.addEventListener("upgradeneeded",c=>{r(br(o.result),c.oldVersion,c.newVersion,br(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const dk=["get","getKey","getAll","getAllKeys","count"],hk=["put","add","delete","clear"],gd=new Map;function Sv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gd.get(e))return gd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=hk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||dk.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return gd.set(e,i),i}lk(t=>({...t,get:(e,n,r)=>Sv(e,n)||t.get(e,n,r),has:(e,n)=>!!Sv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ih="@firebase/app",Cv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new Kc("@firebase/app"),pk="@firebase/app-compat",gk="@firebase/analytics-compat",vk="@firebase/analytics",yk="@firebase/app-check-compat",xk="@firebase/app-check",_k="@firebase/auth",wk="@firebase/auth-compat",Ek="@firebase/database",bk="@firebase/data-connect",Tk="@firebase/database-compat",Sk="@firebase/functions",Ck="@firebase/functions-compat",Ik="@firebase/installations",kk="@firebase/installations-compat",Nk="@firebase/messaging",Ak="@firebase/messaging-compat",Pk="@firebase/performance",Rk="@firebase/performance-compat",jk="@firebase/remote-config",Dk="@firebase/remote-config-compat",Ok="@firebase/storage",Mk="@firebase/storage-compat",Vk="@firebase/firestore",Lk="@firebase/ai",Uk="@firebase/firestore-compat",Fk="firebase",Bk="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh="[DEFAULT]",zk={[Ih]:"fire-core",[pk]:"fire-core-compat",[vk]:"fire-analytics",[gk]:"fire-analytics-compat",[xk]:"fire-app-check",[yk]:"fire-app-check-compat",[_k]:"fire-auth",[wk]:"fire-auth-compat",[Ek]:"fire-rtdb",[bk]:"fire-data-connect",[Tk]:"fire-rtdb-compat",[Sk]:"fire-fn",[Ck]:"fire-fn-compat",[Ik]:"fire-iid",[kk]:"fire-iid-compat",[Nk]:"fire-fcm",[Ak]:"fire-fcm-compat",[Pk]:"fire-perf",[Rk]:"fire-perf-compat",[jk]:"fire-rc",[Dk]:"fire-rc-compat",[Ok]:"fire-gcs",[Mk]:"fire-gcs-compat",[Vk]:"fire-fst",[Uk]:"fire-fst-compat",[Lk]:"fire-vertex","fire-js":"fire-js",[Fk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new Map,$k=new Map,Nh=new Map;function Iv(t,e){try{t.container.addComponent(e)}catch(n){zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function En(t){const e=t.name;if(Nh.has(e))return zn.debug(`There were multiple attempts to register component ${e}.`),!1;Nh.set(e,t);for(const n of ic.values())Iv(n,t);for(const n of $k.values())Iv(n,t);return!0}function Es(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function At(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tr=new ws("app","Firebase",Hk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ln("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=Bk;function t0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:kh,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Tr.create("bad-app-name",{appName:String(s)});if(n||(n=Ww()),!n)throw Tr.create("no-options");const i=ic.get(s);if(i){if(Nr(n,i.options)&&Nr(r,i.config))return i;throw Tr.create("duplicate-app",{appName:s})}const o=new XI(s);for(const c of Nh.values())o.addComponent(c);const l=new Wk(n,r,o);return ic.set(s,l),l}function em(t=kh){const e=ic.get(t);if(!e&&t===kh&&Ww())return t0();if(!e)throw Tr.create("no-app",{appName:t});return e}function Gt(t,e,n){var r;let s=(r=zk[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zn.warn(l.join(" "));return}En(new ln(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="firebase-heartbeat-database",qk=1,Qo="firebase-heartbeat-store";let vd=null;function n0(){return vd||(vd=e0(Gk,qk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Tr.create("idb-open",{originalErrorMessage:t.message})})),vd}async function Kk(t){try{const n=(await n0()).transaction(Qo),r=await n.objectStore(Qo).get(r0(t));return await n.done,r}catch(e){if(e instanceof cn)zn.warn(e.message);else{const n=Tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zn.warn(n.message)}}}async function kv(t,e){try{const r=(await n0()).transaction(Qo,"readwrite");await r.objectStore(Qo).put(e,r0(t)),await r.done}catch(n){if(n instanceof cn)zn.warn(n.message);else{const r=Tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zn.warn(r.message)}}}function r0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=1024,Yk=30;class Jk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Zk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Nv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Yk){const o=eN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){zn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Nv(),{heartbeatsToSend:r,unsentEntries:s}=Xk(this._heartbeatsCache.heartbeats),i=sc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return zn.warn(n),""}}}function Nv(){return new Date().toISOString().substring(0,10)}function Xk(t,e=Qk){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Av(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Av(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Zk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yw()?Jw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Kk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return kv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return kv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Av(t){return sc(JSON.stringify({version:2,heartbeats:t})).length}function eN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t){En(new ln("platform-logger",e=>new fk(e),"PRIVATE")),En(new ln("heartbeat",e=>new Jk(e),"PRIVATE")),Gt(Ih,Cv,t),Gt(Ih,Cv,"esm2017"),Gt("fire-js","")}tN("");function tm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function s0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nN=s0,i0=new ws("auth","Firebase",s0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new Kc("@firebase/auth");function rN(t,...e){oc.logLevel<=ce.WARN&&oc.warn(`Auth (${Ii}): ${t}`,...e)}function _l(t,...e){oc.logLevel<=ce.ERROR&&oc.error(`Auth (${Ii}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t,...e){throw rm(t,...e)}function on(t,...e){return rm(t,...e)}function nm(t,e,n){const r=Object.assign(Object.assign({},nN()),{[e]:n});return new ws("auth","Firebase",r).create(e,{appName:t.name})}function Mn(t){return nm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sN(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Qt(t,"argument-error"),nm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return i0.create(t,...e)}function ee(t,e,...n){if(!t)throw rm(e,...n)}function jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _l(e),new Error(e)}function $n(t,e){t||jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function iN(){return Pv()==="http:"||Pv()==="https:"}function Pv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iN()||Qw()||"connection"in navigator)?navigator.onLine:!0}function aN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n){this.shortDelay=e,this.longDelay=n,$n(n>e,"Short delay should be less than long delay!"),this.isMobile=PI()||DI()}get(){return oN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t,e){$n(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uN=new da(3e4,6e4);function Fr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Qn(t,e,n,r,s={}){return a0(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=ua(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return jI()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Ci(t.emulatorConfig.host)&&(d.credentials="include"),o0.fetch()(await l0(t,t.config.apiHost,n,l),d)})}async function a0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},lN),e);try{const s=new hN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw tl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw tl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw tl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw tl(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw nm(t,f,d);Qt(t,f)}}catch(s){if(s instanceof cn)throw s;Qt(t,"network-request-failed",{message:String(s)})}}async function ha(t,e,n,r,s={}){const i=await Qn(t,e,n,r,s);return"mfaPendingCredential"in i&&Qt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function l0(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?sm(t.config,s):`${t.config.apiScheme}://${s}`;return cN.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function dN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(on(this.auth,"network-request-failed")),uN.get())})}}function tl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=on(t,e,r);return s.customData._tokenResponse=n,s}function Rv(t){return t!==void 0&&t.enterprise!==void 0}class fN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return dN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mN(t,e){return Qn(t,"GET","/v2/recaptchaConfig",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(t,e){return Qn(t,"POST","/v1/accounts:delete",e)}async function ac(t,e){return Qn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gN(t,e=!1){const n=mt(t),r=await n.getIdToken(e),s=im(r);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:bo(yd(s.auth_time)),issuedAtTime:bo(yd(s.iat)),expirationTime:bo(yd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function yd(t){return Number(t)*1e3}function im(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _l("JWT malformed, contained fewer than 3 sections"),null;try{const s=$w(n);return s?JSON.parse(s):(_l("Failed to decode base64 JWT payload"),null)}catch(s){return _l("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function jv(t){const e=im(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cn&&vN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function vN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bo(this.lastLoginAt),this.creationTime=bo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await mi(t,ac(n,{idToken:r}));ee(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?c0(i.providerUserInfo):[],l=_N(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=c?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Ph(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function xN(t){const e=mt(t);await lc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _N(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function c0(t){return t.map(e=>{var{providerId:n}=e,r=tm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(t,e){const n=await a0(t,{},async()=>{const r=ua({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await l0(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Ci(t.emulatorConfig.host)&&(c.credentials="include"),o0.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function EN(t,e){return Qn(t,"POST","/v2/accounts:revokeToken",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=jv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await wN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ti;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ti,this.toJSON())}_performRefresh(){return jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class tn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=tm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ph(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await mi(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gN(this,e)}reload(){return xN(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new tn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await lc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(At(this.auth.app))return Promise.reject(Mn(this.auth));const e=await this.getIdToken();return await mi(this,pN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(l=n.tenantId)!==null&&l!==void 0?l:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,y=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:b,emailVerified:R,isAnonymous:B,providerData:F,stsTokenManager:T}=n;ee(b&&T,e,"internal-error");const x=ti.fromJSON(this.name,T);ee(typeof b=="string",e,"internal-error"),nr(p,e.name),nr(g,e.name),ee(typeof R=="boolean",e,"internal-error"),ee(typeof B=="boolean",e,"internal-error"),nr(_,e.name),nr(C,e.name),nr(N,e.name),nr(A,e.name),nr(E,e.name),nr(y,e.name);const S=new tn({uid:b,auth:e,email:g,emailVerified:R,displayName:p,isAnonymous:B,photoURL:C,phoneNumber:_,tenantId:N,stsTokenManager:x,createdAt:E,lastLoginAt:y});return F&&Array.isArray(F)&&(S.providerData=F.map(k=>Object.assign({},k))),A&&(S._redirectEventId=A),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new ti;s.updateFromServerResponse(n);const i=new tn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await lc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?c0(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ti;l.updateFromIdToken(r);const c=new tn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Ph(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=new Map;function Dn(t){$n(t instanceof Function,"Expected a class definition");let e=Dv.get(t);return e?($n(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Dv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}u0.type="NONE";const Ov=u0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t,e,n){return`firebase:${t}:${e}:${n}`}class ni{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=wl(this.userKey,s.apiKey,i),this.fullPersistenceKey=wl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ac(this.auth,{idToken:e}).catch(()=>{});return n?tn._fromGetAccountInfoResponse(this.auth,n,e):null}return tn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ni(Dn(Ov),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Dn(Ov);const o=wl(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){let p;if(typeof f=="string"){const g=await ac(e,{idToken:f}).catch(()=>{});if(!g)break;p=await tn._fromGetAccountInfoResponse(e,g,f)}else p=tn._fromJSON(e,f);d!==i&&(l=p),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ni(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new ni(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(d0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(g0(e))return"Blackberry";if(v0(e))return"Webos";if(h0(e))return"Safari";if((e.includes("chrome/")||f0(e))&&!e.includes("edge/"))return"Chrome";if(p0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function d0(t=ft()){return/firefox\//i.test(t)}function h0(t=ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f0(t=ft()){return/crios\//i.test(t)}function m0(t=ft()){return/iemobile/i.test(t)}function p0(t=ft()){return/android/i.test(t)}function g0(t=ft()){return/blackberry/i.test(t)}function v0(t=ft()){return/webos/i.test(t)}function om(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bN(t=ft()){var e;return om(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TN(){return OI()&&document.documentMode===10}function y0(t=ft()){return om(t)||p0(t)||v0(t)||g0(t)||/windows phone/i.test(t)||m0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(t,e=[]){let n;switch(t){case"Browser":n=Mv(ft());break;case"Worker":n=`${Mv(ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ii}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(t,e={}){return Qn(t,"GET","/v2/passwordPolicy",Fr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=6;class kN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:IN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vv(this),this.idTokenSubscription=new Vv(this),this.beforeStateQueue=new SN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=i0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ni.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ac(this,{idToken:e}),r=await tn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(At(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(At(this.app))return Promise.reject(Mn(this));const n=e?mt(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return At(this.app)?Promise.reject(Mn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return At(this.app)?Promise.reject(Mn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CN(this),n=new kN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ws("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await EN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dn(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await ni.create(this,[Dn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=x0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(At(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&rN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Br(t){return mt(t)}class Vv{constructor(e){this.auth=e,this.observer=null,this.addObserver=zI(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AN(t){Qc=t}function _0(t){return Qc.loadJS(t)}function PN(){return Qc.recaptchaEnterpriseScript}function RN(){return Qc.gapiScript}function jN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class DN{constructor(){this.enterprise=new ON}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ON{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const MN="recaptcha-enterprise",w0="NO_RECAPTCHA";class VN{constructor(e){this.type=MN,this.auth=Br(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{mN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new fN(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;Rv(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(w0)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DN().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Rv(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=PN();c.length!==0&&(c+=l),_0(c).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Lv(t,e,n,r=!1,s=!1){const i=new VN(t);let o;if(s)o=w0;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Rh(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Lv(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Lv(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t,e){const n=Es(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Nr(i,e??{}))return s;Qt(s,"already-initialized")}return n.initialize({options:e})}function UN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function FN(t,e,n){const r=Br(t);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=E0(e),{host:o,port:l}=BN(e),c=l===null?"":`:${l}`,d={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(Nr(d,r.config.emulator)&&Nr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Ci(o)?(qw(`${i}//${o}${c}`),Kw("Auth",!0)):zN()}function E0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function BN(t){const e=E0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Uv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Uv(o)}}}function Uv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jn("not implemented")}_getIdTokenResponse(e){return jn("not implemented")}_linkToIdToken(e,n){return jn("not implemented")}_getReauthenticationResolver(e){return jn("not implemented")}}async function $N(t,e){return Qn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(t,e){return ha(t,"POST","/v1/accounts:signInWithPassword",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(t,e){return ha(t,"POST","/v1/accounts:signInWithEmailLink",Fr(t,e))}async function GN(t,e){return ha(t,"POST","/v1/accounts:signInWithEmailLink",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo extends am{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Yo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Yo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rh(e,n,"signInWithPassword",HN);case"emailLink":return WN(e,{email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rh(e,r,"signUpPassword",$N);case"emailLink":return GN(e,{idToken:n,email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ri(t,e){return ha(t,"POST","/v1/accounts:signInWithIdp",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="http://localhost";class ds extends am{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ds(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=tm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ds(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ri(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ri(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ri(e,n)}buildRequest(){const e={requestUri:qN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ua(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QN(t){const e=oo(ao(t)).link,n=e?oo(ao(e)).deep_link_id:null,r=oo(ao(t)).deep_link_id;return(r?oo(ao(r)).link:null)||r||n||e||t}class lm{constructor(e){var n,r,s,i,o,l;const c=oo(ao(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,p=KN((s=c.mode)!==null&&s!==void 0?s:null);ee(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=QN(e);try{return new lm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(){this.providerId=ki.PROVIDER_ID}static credential(e,n){return Yo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=lm.parseLink(n);return ee(r,"argument-error"),Yo._fromEmailAndCode(e,r.code,r.tenantId)}}ki.PROVIDER_ID="password";ki.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ki.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends cm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends fa{constructor(){super("facebook.com")}static credential(e){return ds._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.FACEBOOK_SIGN_IN_METHOD="facebook.com";ar.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An extends fa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ds._fromParams({providerId:An.PROVIDER_ID,signInMethod:An.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return An.credentialFromTaggedObject(e)}static credentialFromError(e){return An.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return An.credential(n,r)}catch{return null}}}An.GOOGLE_SIGN_IN_METHOD="google.com";An.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends fa{constructor(){super("github.com")}static credential(e){return ds._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.GITHUB_SIGN_IN_METHOD="github.com";lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends fa{constructor(){super("twitter.com")}static credential(e,n){return ds._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return cr.credential(n,r)}catch{return null}}}cr.TWITTER_SIGN_IN_METHOD="twitter.com";cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(t,e){return ha(t,"POST","/v1/accounts:signUp",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await tn._fromIdTokenResponse(e,r,s),o=Fv(r);return new hs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Fv(r);return new hs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Fv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends cn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,cc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new cc(e,n,r,s)}}function b0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?cc._fromErrorAndOperation(t,i,e,r):i})}async function JN(t,e,n=!1){const r=await mi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return hs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(t,e,n=!1){const{auth:r}=t;if(At(r.app))return Promise.reject(Mn(r));const s="reauthenticate";try{const i=await mi(t,b0(r,s,e,t),n);ee(i.idToken,r,"internal-error");const o=im(i.idToken);ee(o,r,"internal-error");const{sub:l}=o;return ee(t.uid===l,r,"user-mismatch"),hs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Qt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T0(t,e,n=!1){if(At(t.app))return Promise.reject(Mn(t));const r="signIn",s=await b0(t,r,e),i=await hs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function ZN(t,e){return T0(Br(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S0(t){const e=Br(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function eA(t,e,n){if(At(t.app))return Promise.reject(Mn(t));const r=Br(t),o=await Rh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YN).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&S0(t),c}),l=await hs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function tA(t,e,n){return At(t.app)?Promise.reject(Mn(t)):ZN(mt(t),ki.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&S0(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nA(t,e){return Qn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=mt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await mi(r,nA(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function sA(t,e,n,r){return mt(t).onIdTokenChanged(e,n,r)}function iA(t,e,n){return mt(t).beforeAuthStateChanged(e,n)}function oA(t,e,n,r){return mt(t).onAuthStateChanged(e,n,r)}function aA(t){return mt(t).signOut()}const uc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uc,"1"),this.storage.removeItem(uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=1e3,cA=10;class I0 extends C0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);TN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,cA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},lA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}I0.type="LOCAL";const uA=I0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0 extends C0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}k0.type="SESSION";const N0=k0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Yc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await dA(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=um("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return window}function fA(t){vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function mA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function gA(){return A0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="firebaseLocalStorageDb",vA=1,dc="firebaseLocalStorage",R0="fbase_key";class ma{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jc(t,e){return t.transaction([dc],e?"readwrite":"readonly").objectStore(dc)}function yA(){const t=indexedDB.deleteDatabase(P0);return new ma(t).toPromise()}function jh(){const t=indexedDB.open(P0,vA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(dc,{keyPath:R0})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(dc)?e(r):(r.close(),await yA(),e(await jh()))})})}async function Bv(t,e,n){const r=Jc(t,!0).put({[R0]:e,value:n});return new ma(r).toPromise()}async function xA(t,e){const n=Jc(t,!1).get(e),r=await new ma(n).toPromise();return r===void 0?null:r.value}function zv(t,e){const n=Jc(t,!0).delete(e);return new ma(n).toPromise()}const _A=800,wA=3;class j0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>wA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yc._getInstance(gA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await mA(),!this.activeServiceWorker)return;this.sender=new hA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jh();return await Bv(e,uc,"1"),await zv(e,uc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Bv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>xA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Jc(s,!1).getAll();return new ma(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_A)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}j0.type="LOCAL";const EA=j0;new da(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t,e){return e?Dn(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm extends am{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ri(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ri(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ri(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bA(t){return T0(t.auth,new dm(t),t.bypassAuthState)}function TA(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),XN(n,new dm(t),t.bypassAuthState)}async function SA(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),JN(n,new dm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bA;case"linkViaPopup":case"linkViaRedirect":return SA;case"reauthViaPopup":case"reauthViaRedirect":return TA;default:Qt(this.auth,"internal-error")}}resolve(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=new da(2e3,1e4);async function IA(t,e,n){if(At(t.app))return Promise.reject(on(t,"operation-not-supported-in-this-environment"));const r=Br(t);sN(t,e,cm);const s=D0(r,n);return new Zr(r,"signInViaPopup",e,s).executeNotNull()}class Zr extends O0{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Zr.currentPopupAction&&Zr.currentPopupAction.cancel(),Zr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){$n(this.filter.length===1,"Popup operations only handle one event");const e=um();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(on(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(on(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(on(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CA.get())};e()}}Zr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="pendingRedirect",El=new Map;class NA extends O0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=El.get(this.auth._key());if(!e){try{const r=await AA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}El.set(this.auth._key(),e)}return this.bypassAuthState||El.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AA(t,e){const n=jA(e),r=RA(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function PA(t,e){El.set(t._key(),e)}function RA(t){return Dn(t._redirectPersistence)}function jA(t){return wl(kA,t.config.apiKey,t.name)}async function DA(t,e,n=!1){if(At(t.app))return Promise.reject(Mn(t));const r=Br(t),s=D0(r,e),o=await new NA(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=10*60*1e3;class MA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!M0(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(on(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OA&&this.cachedEventUids.clear(),this.cachedEventUids.has($v(e))}saveEventToCache(e){this.cachedEventUids.add($v(e)),this.lastProcessedEventTime=Date.now()}}function $v(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function M0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function VA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(t,e={}){return Qn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FA=/^https?/;async function BA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await LA(t);for(const n of e)try{if(zA(n))return}catch{}Qt(t,"unauthorized-domain")}function zA(t){const e=Ah(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!FA.test(n))return!1;if(UA.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=new da(3e4,6e4);function Hv(){const t=vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function HA(t){return new Promise((e,n)=>{var r,s,i;function o(){Hv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hv(),n(on(t,"network-request-failed"))},timeout:$A.get()})}if(!((s=(r=vn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=vn().gapi)===null||i===void 0)&&i.load)o();else{const l=jN("iframefcb");return vn()[l]=()=>{gapi.load?o():n(on(t,"network-request-failed"))},_0(`${RN()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw bl=null,e})}let bl=null;function WA(t){return bl=bl||HA(t),bl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=new da(5e3,15e3),qA="__/auth/iframe",KA="emulator/auth/iframe",QA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JA(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?sm(e,KA):`https://${t.config.authDomain}/${qA}`,r={apiKey:e.apiKey,appName:t.name,v:Ii},s=YA.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ua(r).slice(1)}`}async function XA(t){const e=await WA(t),n=vn().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:JA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QA,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=on(t,"network-request-failed"),l=vn().setTimeout(()=>{i(o)},GA.get());function c(){vn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},e2=500,t2=600,n2="_blank",r2="http://localhost";class Wv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s2(t,e,n,r=e2,s=t2){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},ZA),{width:r.toString(),height:s.toString(),top:i,left:o}),d=ft().toLowerCase();n&&(l=f0(d)?n2:n),d0(d)&&(e=e||r2,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[_,C])=>`${g}${_}=${C},`,"");if(bN(d)&&l!=="_self")return i2(e||"",l),new Wv(null);const p=window.open(e||"",l,f);ee(p,t,"popup-blocked");try{p.focus()}catch{}return new Wv(p)}function i2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="__/auth/handler",a2="emulator/auth/handler",l2=encodeURIComponent("fac");async function Gv(t,e,n,r,s,i){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ii,eventId:s};if(e instanceof cm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",BI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof fa){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),d=c?`#${l2}=${encodeURIComponent(c)}`:"";return`${c2(t)}?${ua(l).slice(1)}${d}`}function c2({config:t}){return t.emulator?sm(t,a2):`https://${t.authDomain}/${o2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="webStorageSupport";class u2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N0,this._completeRedirectFn=DA,this._overrideRedirectResult=PA}async _openPopup(e,n,r,s){var i;$n((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Gv(e,n,r,Ah(),s);return s2(e,o,um())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Gv(e,n,r,Ah(),s);return fA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):($n(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await XA(e),r=new MA(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xd,{type:xd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[xd];o!==void 0&&n(!!o),Qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=BA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return y0()||h0()||om()}}const d2=u2;var qv="@firebase/auth",Kv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m2(t){En(new ln("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x0(t)},d=new NN(r,s,i,c);return UN(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),En(new ln("auth-internal",e=>{const n=Br(e.getProvider("auth").getImmediate());return(r=>new h2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gt(qv,Kv,f2(t)),Gt(qv,Kv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=5*60,g2=Gw("authIdTokenMaxAge")||p2;let Qv=null;const v2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>g2)return;const s=n==null?void 0:n.token;Qv!==s&&(Qv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function y2(t=em()){const e=Es(t,"auth");if(e.isInitialized())return e.getImmediate();const n=LN(t,{popupRedirectResolver:d2,persistence:[EA,uA,N0]}),r=Gw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=v2(i.toString());iA(n,o,()=>o(n.currentUser)),sA(n,l=>o(l))}}const s=Hw("auth");return s&&FN(n,`http://${s}`),n}function x2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}AN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=on("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",x2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m2("Browser");var _2="firebase",w2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt(_2,w2,"app");const V0="@firebase/installations",hm="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=1e4,U0=`w:${hm}`,F0="FIS_v2",E2="https://firebaseinstallations.googleapis.com/v1",b2=60*60*1e3,T2="installations",S2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},fs=new ws(T2,S2,C2);function B0(t){return t instanceof cn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0({projectId:t}){return`${E2}/projects/${t}/installations`}function $0(t){return{token:t.token,requestStatus:2,expiresIn:k2(t.expiresIn),creationTime:Date.now()}}async function H0(t,e){const r=(await e.json()).error;return fs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function W0({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function I2(t,{refreshToken:e}){const n=W0(t);return n.append("Authorization",N2(e)),n}async function G0(t){const e=await t();return e.status>=500&&e.status<600?t():e}function k2(t){return Number(t.replace("s","000"))}function N2(t){return`${F0} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=z0(t),s=W0(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:F0,appId:t.appId,sdkVersion:U0},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await G0(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:$0(d.authToken)}}else throw await H0("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=/^[cdef][\w-]{21}$/,Dh="";function j2(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=D2(t);return R2.test(n)?n:Dh}catch{return Dh}}function D2(t){return P2(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=new Map;function Q0(t,e){const n=Xc(t);Y0(n,e),O2(n,e)}function Y0(t,e){const n=K0.get(t);if(n)for(const r of n)r(e)}function O2(t,e){const n=M2();n&&n.postMessage({key:t,fid:e}),V2()}let es=null;function M2(){return!es&&"BroadcastChannel"in self&&(es=new BroadcastChannel("[Firebase] FID Change"),es.onmessage=t=>{Y0(t.data.key,t.data.fid)}),es}function V2(){K0.size===0&&es&&(es.close(),es=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="firebase-installations-database",U2=1,ms="firebase-installations-store";let _d=null;function fm(){return _d||(_d=e0(L2,U2,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ms)}}})),_d}async function hc(t,e){const n=Xc(t),s=(await fm()).transaction(ms,"readwrite"),i=s.objectStore(ms),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Q0(t,e.fid),e}async function J0(t){const e=Xc(t),r=(await fm()).transaction(ms,"readwrite");await r.objectStore(ms).delete(e),await r.done}async function Zc(t,e){const n=Xc(t),s=(await fm()).transaction(ms,"readwrite"),i=s.objectStore(ms),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&Q0(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mm(t){let e;const n=await Zc(t.appConfig,r=>{const s=F2(r),i=B2(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Dh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function F2(t){const e=t||{fid:j2(),registrationStatus:0};return X0(e)}function B2(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(fs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=z2(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:$2(t)}:{installationEntry:e}}async function z2(t,e){try{const n=await A2(t,e);return hc(t.appConfig,n)}catch(n){throw B0(n)&&n.customData.serverCode===409?await J0(t.appConfig):await hc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function $2(t){let e=await Yv(t.appConfig);for(;e.registrationStatus===1;)await q0(100),e=await Yv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await mm(t);return r||n}return e}function Yv(t){return Zc(t,e=>{if(!e)throw fs.create("installation-not-found");return X0(e)})}function X0(t){return H2(t)?{fid:t.fid,registrationStatus:0}:t}function H2(t){return t.registrationStatus===1&&t.registrationTime+L0<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2({appConfig:t,heartbeatServiceProvider:e},n){const r=G2(t,n),s=I2(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:U0,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await G0(()=>fetch(r,l));if(c.ok){const d=await c.json();return $0(d)}else throw await H0("Generate Auth Token",c)}function G2(t,{fid:e}){return`${z0(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pm(t,e=!1){let n;const r=await Zc(t.appConfig,i=>{if(!Z0(i))throw fs.create("not-registered");const o=i.authToken;if(!e&&Q2(o))return i;if(o.requestStatus===1)return n=q2(t,e),i;{if(!navigator.onLine)throw fs.create("app-offline");const l=J2(i);return n=K2(t,l),l}});return n?await n:r.authToken}async function q2(t,e){let n=await Jv(t.appConfig);for(;n.authToken.requestStatus===1;)await q0(100),n=await Jv(t.appConfig);const r=n.authToken;return r.requestStatus===0?pm(t,e):r}function Jv(t){return Zc(t,e=>{if(!Z0(e))throw fs.create("not-registered");const n=e.authToken;return X2(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function K2(t,e){try{const n=await W2(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await hc(t.appConfig,r),n}catch(n){if(B0(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await J0(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await hc(t.appConfig,r)}throw n}}function Z0(t){return t!==void 0&&t.registrationStatus===2}function Q2(t){return t.requestStatus===2&&!Y2(t)}function Y2(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+b2}function J2(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function X2(t){return t.requestStatus===1&&t.requestTime+L0<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(t){const e=t,{installationEntry:n,registrationPromise:r}=await mm(e);return r?r.catch(console.error):pm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eP(t,e=!1){const n=t;return await tP(n),(await pm(n,e)).token}async function tP(t){const{registrationPromise:e}=await mm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(t){if(!t||!t.options)throw wd("App Configuration");if(!t.name)throw wd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw wd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function wd(t){return fs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="installations",rP="installations-internal",sP=t=>{const e=t.getProvider("app").getImmediate(),n=nP(e),r=Es(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},iP=t=>{const e=t.getProvider("app").getImmediate(),n=Es(e,eE).getImmediate();return{getId:()=>Z2(n),getToken:s=>eP(n,s)}};function oP(){En(new ln(eE,sP,"PUBLIC")),En(new ln(rP,iP,"PRIVATE"))}oP();Gt(V0,hm);Gt(V0,hm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc="analytics",aP="firebase_id",lP="origin",cP=60*1e3,uP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",gm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It=new Kc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},jt=new ws("analytics","Analytics",dP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(t){if(!t.startsWith(gm)){const e=jt.create("invalid-gtag-resource",{gtagURL:t});return It.warn(e.message),""}return t}function tE(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function fP(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function mP(t,e){const n=fP("firebase-js-sdk-policy",{createScriptURL:hP}),r=document.createElement("script"),s=`${gm}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function pP(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function gP(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await tE(n)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(l){It.error(l)}t("config",s,i)}async function vP(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await tE(n);for(const c of o){const d=l.find(p=>p.measurementId===c),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){It.error(i)}}function yP(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[l,c]=o;await vP(t,e,n,l,c)}else if(i==="config"){const[l,c]=o;await gP(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,d]=o;t("get",l,c,d)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){It.error(l)}}return s}function xP(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=yP(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function _P(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(gm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=30,EP=1e3;class bP{constructor(e={},n=EP){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const nE=new bP;function TP(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function SP(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:TP(r)},i=uP.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw jt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function CP(t,e=nE,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw jt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw jt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new NP;return setTimeout(async()=>{l.abort()},cP),rE({appId:r,apiKey:s,measurementId:i},o,l,e)}async function rE(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=nE){var i;const{appId:o,measurementId:l}=t;try{await IP(r,e)}catch(c){if(l)return It.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await SP(t);return s.deleteThrottleMetadata(o),c}catch(c){const d=c;if(!kP(d)){if(s.deleteThrottleMetadata(o),l)return It.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw c}const f=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?Ev(n,s.intervalMillis,wP):Ev(n,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(o,p),It.debug(`Calling attemptFetch again in ${f} millis`),rE(t,p,r,s)}}function IP(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(jt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function kP(t){if(!(t instanceof cn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class NP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function AP(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PP(){if(Yw())try{await Jw()}catch(t){return It.warn(jt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return It.warn(jt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function RP(t,e,n,r,s,i,o){var l;const c=CP(t);c.then(_=>{n[_.measurementId]=_.appId,t.options.measurementId&&_.measurementId!==t.options.measurementId&&It.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>It.error(_)),e.push(c);const d=PP().then(_=>{if(_)return r.getId()}),[f,p]=await Promise.all([c,d]);_P(i)||mP(i,f.measurementId),s("js",new Date);const g=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return g[lP]="firebase",g.update=!0,p!=null&&(g[aP]=p),s("config",f.measurementId,g),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.app=e}_delete(){return delete To[this.app.options.appId],Promise.resolve()}}let To={},Xv=[];const Zv={};let Ed="dataLayer",DP="gtag",ey,sE,ty=!1;function OP(){const t=[];if(Qw()&&t.push("This is a browser extension environment."),VI()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=jt.create("invalid-analytics-context",{errorInfo:e});It.warn(n.message)}}function MP(t,e,n){OP();const r=t.options.appId;if(!r)throw jt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)It.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw jt.create("no-api-key");if(To[r]!=null)throw jt.create("already-exists",{id:r});if(!ty){pP(Ed);const{wrappedGtag:i,gtagCore:o}=xP(To,Xv,Zv,Ed,DP);sE=i,ey=o,ty=!0}return To[r]=RP(t,Xv,Zv,e,ey,Ed,n),new jP(t)}function VP(t=em()){t=mt(t);const e=Es(t,fc);return e.isInitialized()?e.getImmediate():LP(t)}function LP(t,e={}){const n=Es(t,fc);if(n.isInitialized()){const s=n.getImmediate();if(Nr(e,n.getOptions()))return s;throw jt.create("already-initialized")}return n.initialize({options:e})}function UP(t,e,n,r){t=mt(t),AP(sE,To[t.app.options.appId],e,n,r).catch(s=>It.error(s))}const ny="@firebase/analytics",ry="0.10.17";function FP(){En(new ln(fc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return MP(r,s,n)},"PUBLIC")),En(new ln("analytics-internal",t,"PRIVATE")),Gt(ny,ry),Gt(ny,ry,"esm2017");function t(e){try{const n=e.getProvider(fc).getImmediate();return{logEvent:(r,s,i)=>UP(n,r,s,i)}}catch(n){throw jt.create("interop-component-reg-failed",{reason:n})}}}FP();var sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sr,iE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,x){function S(){}S.prototype=x.prototype,T.D=x.prototype,T.prototype=new S,T.prototype.constructor=T,T.C=function(k,j,P){for(var w=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)w[oe-2]=arguments[oe];return x.prototype[j].apply(k,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,x,S){S||(S=0);var k=Array(16);if(typeof x=="string")for(var j=0;16>j;++j)k[j]=x.charCodeAt(S++)|x.charCodeAt(S++)<<8|x.charCodeAt(S++)<<16|x.charCodeAt(S++)<<24;else for(j=0;16>j;++j)k[j]=x[S++]|x[S++]<<8|x[S++]<<16|x[S++]<<24;x=T.g[0],S=T.g[1],j=T.g[2];var P=T.g[3],w=x+(P^S&(j^P))+k[0]+3614090360&4294967295;x=S+(w<<7&4294967295|w>>>25),w=P+(j^x&(S^j))+k[1]+3905402710&4294967295,P=x+(w<<12&4294967295|w>>>20),w=j+(S^P&(x^S))+k[2]+606105819&4294967295,j=P+(w<<17&4294967295|w>>>15),w=S+(x^j&(P^x))+k[3]+3250441966&4294967295,S=j+(w<<22&4294967295|w>>>10),w=x+(P^S&(j^P))+k[4]+4118548399&4294967295,x=S+(w<<7&4294967295|w>>>25),w=P+(j^x&(S^j))+k[5]+1200080426&4294967295,P=x+(w<<12&4294967295|w>>>20),w=j+(S^P&(x^S))+k[6]+2821735955&4294967295,j=P+(w<<17&4294967295|w>>>15),w=S+(x^j&(P^x))+k[7]+4249261313&4294967295,S=j+(w<<22&4294967295|w>>>10),w=x+(P^S&(j^P))+k[8]+1770035416&4294967295,x=S+(w<<7&4294967295|w>>>25),w=P+(j^x&(S^j))+k[9]+2336552879&4294967295,P=x+(w<<12&4294967295|w>>>20),w=j+(S^P&(x^S))+k[10]+4294925233&4294967295,j=P+(w<<17&4294967295|w>>>15),w=S+(x^j&(P^x))+k[11]+2304563134&4294967295,S=j+(w<<22&4294967295|w>>>10),w=x+(P^S&(j^P))+k[12]+1804603682&4294967295,x=S+(w<<7&4294967295|w>>>25),w=P+(j^x&(S^j))+k[13]+4254626195&4294967295,P=x+(w<<12&4294967295|w>>>20),w=j+(S^P&(x^S))+k[14]+2792965006&4294967295,j=P+(w<<17&4294967295|w>>>15),w=S+(x^j&(P^x))+k[15]+1236535329&4294967295,S=j+(w<<22&4294967295|w>>>10),w=x+(j^P&(S^j))+k[1]+4129170786&4294967295,x=S+(w<<5&4294967295|w>>>27),w=P+(S^j&(x^S))+k[6]+3225465664&4294967295,P=x+(w<<9&4294967295|w>>>23),w=j+(x^S&(P^x))+k[11]+643717713&4294967295,j=P+(w<<14&4294967295|w>>>18),w=S+(P^x&(j^P))+k[0]+3921069994&4294967295,S=j+(w<<20&4294967295|w>>>12),w=x+(j^P&(S^j))+k[5]+3593408605&4294967295,x=S+(w<<5&4294967295|w>>>27),w=P+(S^j&(x^S))+k[10]+38016083&4294967295,P=x+(w<<9&4294967295|w>>>23),w=j+(x^S&(P^x))+k[15]+3634488961&4294967295,j=P+(w<<14&4294967295|w>>>18),w=S+(P^x&(j^P))+k[4]+3889429448&4294967295,S=j+(w<<20&4294967295|w>>>12),w=x+(j^P&(S^j))+k[9]+568446438&4294967295,x=S+(w<<5&4294967295|w>>>27),w=P+(S^j&(x^S))+k[14]+3275163606&4294967295,P=x+(w<<9&4294967295|w>>>23),w=j+(x^S&(P^x))+k[3]+4107603335&4294967295,j=P+(w<<14&4294967295|w>>>18),w=S+(P^x&(j^P))+k[8]+1163531501&4294967295,S=j+(w<<20&4294967295|w>>>12),w=x+(j^P&(S^j))+k[13]+2850285829&4294967295,x=S+(w<<5&4294967295|w>>>27),w=P+(S^j&(x^S))+k[2]+4243563512&4294967295,P=x+(w<<9&4294967295|w>>>23),w=j+(x^S&(P^x))+k[7]+1735328473&4294967295,j=P+(w<<14&4294967295|w>>>18),w=S+(P^x&(j^P))+k[12]+2368359562&4294967295,S=j+(w<<20&4294967295|w>>>12),w=x+(S^j^P)+k[5]+4294588738&4294967295,x=S+(w<<4&4294967295|w>>>28),w=P+(x^S^j)+k[8]+2272392833&4294967295,P=x+(w<<11&4294967295|w>>>21),w=j+(P^x^S)+k[11]+1839030562&4294967295,j=P+(w<<16&4294967295|w>>>16),w=S+(j^P^x)+k[14]+4259657740&4294967295,S=j+(w<<23&4294967295|w>>>9),w=x+(S^j^P)+k[1]+2763975236&4294967295,x=S+(w<<4&4294967295|w>>>28),w=P+(x^S^j)+k[4]+1272893353&4294967295,P=x+(w<<11&4294967295|w>>>21),w=j+(P^x^S)+k[7]+4139469664&4294967295,j=P+(w<<16&4294967295|w>>>16),w=S+(j^P^x)+k[10]+3200236656&4294967295,S=j+(w<<23&4294967295|w>>>9),w=x+(S^j^P)+k[13]+681279174&4294967295,x=S+(w<<4&4294967295|w>>>28),w=P+(x^S^j)+k[0]+3936430074&4294967295,P=x+(w<<11&4294967295|w>>>21),w=j+(P^x^S)+k[3]+3572445317&4294967295,j=P+(w<<16&4294967295|w>>>16),w=S+(j^P^x)+k[6]+76029189&4294967295,S=j+(w<<23&4294967295|w>>>9),w=x+(S^j^P)+k[9]+3654602809&4294967295,x=S+(w<<4&4294967295|w>>>28),w=P+(x^S^j)+k[12]+3873151461&4294967295,P=x+(w<<11&4294967295|w>>>21),w=j+(P^x^S)+k[15]+530742520&4294967295,j=P+(w<<16&4294967295|w>>>16),w=S+(j^P^x)+k[2]+3299628645&4294967295,S=j+(w<<23&4294967295|w>>>9),w=x+(j^(S|~P))+k[0]+4096336452&4294967295,x=S+(w<<6&4294967295|w>>>26),w=P+(S^(x|~j))+k[7]+1126891415&4294967295,P=x+(w<<10&4294967295|w>>>22),w=j+(x^(P|~S))+k[14]+2878612391&4294967295,j=P+(w<<15&4294967295|w>>>17),w=S+(P^(j|~x))+k[5]+4237533241&4294967295,S=j+(w<<21&4294967295|w>>>11),w=x+(j^(S|~P))+k[12]+1700485571&4294967295,x=S+(w<<6&4294967295|w>>>26),w=P+(S^(x|~j))+k[3]+2399980690&4294967295,P=x+(w<<10&4294967295|w>>>22),w=j+(x^(P|~S))+k[10]+4293915773&4294967295,j=P+(w<<15&4294967295|w>>>17),w=S+(P^(j|~x))+k[1]+2240044497&4294967295,S=j+(w<<21&4294967295|w>>>11),w=x+(j^(S|~P))+k[8]+1873313359&4294967295,x=S+(w<<6&4294967295|w>>>26),w=P+(S^(x|~j))+k[15]+4264355552&4294967295,P=x+(w<<10&4294967295|w>>>22),w=j+(x^(P|~S))+k[6]+2734768916&4294967295,j=P+(w<<15&4294967295|w>>>17),w=S+(P^(j|~x))+k[13]+1309151649&4294967295,S=j+(w<<21&4294967295|w>>>11),w=x+(j^(S|~P))+k[4]+4149444226&4294967295,x=S+(w<<6&4294967295|w>>>26),w=P+(S^(x|~j))+k[11]+3174756917&4294967295,P=x+(w<<10&4294967295|w>>>22),w=j+(x^(P|~S))+k[2]+718787259&4294967295,j=P+(w<<15&4294967295|w>>>17),w=S+(P^(j|~x))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+x&4294967295,T.g[1]=T.g[1]+(j+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+j&4294967295,T.g[3]=T.g[3]+P&4294967295}r.prototype.u=function(T,x){x===void 0&&(x=T.length);for(var S=x-this.blockSize,k=this.B,j=this.h,P=0;P<x;){if(j==0)for(;P<=S;)s(this,T,P),P+=this.blockSize;if(typeof T=="string"){for(;P<x;)if(k[j++]=T.charCodeAt(P++),j==this.blockSize){s(this,k),j=0;break}}else for(;P<x;)if(k[j++]=T[P++],j==this.blockSize){s(this,k),j=0;break}}this.h=j,this.o+=x},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var x=1;x<T.length-8;++x)T[x]=0;var S=8*this.o;for(x=T.length-8;x<T.length;++x)T[x]=S&255,S/=256;for(this.u(T),T=Array(16),x=S=0;4>x;++x)for(var k=0;32>k;k+=8)T[S++]=this.g[x]>>>k&255;return T};function i(T,x){var S=l;return Object.prototype.hasOwnProperty.call(S,T)?S[T]:S[T]=x(T)}function o(T,x){this.h=x;for(var S=[],k=!0,j=T.length-1;0<=j;j--){var P=T[j]|0;k&&P==x||(S[j]=P,k=!1)}this.g=S}var l={};function c(T){return-128<=T&&128>T?i(T,function(x){return new o([x|0],0>x?-1:0)}):new o([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return A(d(-T));for(var x=[],S=1,k=0;T>=S;k++)x[k]=T/S|0,S*=4294967296;return new o(x,0)}function f(T,x){if(T.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(T.charAt(0)=="-")return A(f(T.substring(1),x));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(x,8)),k=p,j=0;j<T.length;j+=8){var P=Math.min(8,T.length-j),w=parseInt(T.substring(j,j+P),x);8>P?(P=d(Math.pow(x,P)),k=k.j(P).add(d(w))):(k=k.j(S),k=k.add(d(w)))}return k}var p=c(0),g=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(N(this))return-A(this).m();for(var T=0,x=1,S=0;S<this.g.length;S++){var k=this.i(S);T+=(0<=k?k:4294967296+k)*x,x*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(N(this))return"-"+A(this).toString(T);for(var x=d(Math.pow(T,6)),S=this,k="";;){var j=R(S,x).g;S=E(S,j.j(x));var P=((0<S.g.length?S.g[0]:S.h)>>>0).toString(T);if(S=j,C(S))return P+k;for(;6>P.length;)P="0"+P;k=P+k}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var x=0;x<T.g.length;x++)if(T.g[x]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=E(this,T),N(T)?-1:C(T)?0:1};function A(T){for(var x=T.g.length,S=[],k=0;k<x;k++)S[k]=~T.g[k];return new o(S,~T.h).add(g)}t.abs=function(){return N(this)?A(this):this},t.add=function(T){for(var x=Math.max(this.g.length,T.g.length),S=[],k=0,j=0;j<=x;j++){var P=k+(this.i(j)&65535)+(T.i(j)&65535),w=(P>>>16)+(this.i(j)>>>16)+(T.i(j)>>>16);k=w>>>16,P&=65535,w&=65535,S[j]=w<<16|P}return new o(S,S[S.length-1]&-2147483648?-1:0)};function E(T,x){return T.add(A(x))}t.j=function(T){if(C(this)||C(T))return p;if(N(this))return N(T)?A(this).j(A(T)):A(A(this).j(T));if(N(T))return A(this.j(A(T)));if(0>this.l(_)&&0>T.l(_))return d(this.m()*T.m());for(var x=this.g.length+T.g.length,S=[],k=0;k<2*x;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(var j=0;j<T.g.length;j++){var P=this.i(k)>>>16,w=this.i(k)&65535,oe=T.i(j)>>>16,He=T.i(j)&65535;S[2*k+2*j]+=w*He,y(S,2*k+2*j),S[2*k+2*j+1]+=P*He,y(S,2*k+2*j+1),S[2*k+2*j+1]+=w*oe,y(S,2*k+2*j+1),S[2*k+2*j+2]+=P*oe,y(S,2*k+2*j+2)}for(k=0;k<x;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=x;k<2*x;k++)S[k]=0;return new o(S,0)};function y(T,x){for(;(T[x]&65535)!=T[x];)T[x+1]+=T[x]>>>16,T[x]&=65535,x++}function b(T,x){this.g=T,this.h=x}function R(T,x){if(C(x))throw Error("division by zero");if(C(T))return new b(p,p);if(N(T))return x=R(A(T),x),new b(A(x.g),A(x.h));if(N(x))return x=R(T,A(x)),new b(A(x.g),x.h);if(30<T.g.length){if(N(T)||N(x))throw Error("slowDivide_ only works with positive integers.");for(var S=g,k=x;0>=k.l(T);)S=B(S),k=B(k);var j=F(S,1),P=F(k,1);for(k=F(k,2),S=F(S,2);!C(k);){var w=P.add(k);0>=w.l(T)&&(j=j.add(S),P=w),k=F(k,1),S=F(S,1)}return x=E(T,j.j(x)),new b(j,x)}for(j=p;0<=T.l(x);){for(S=Math.max(1,Math.floor(T.m()/x.m())),k=Math.ceil(Math.log(S)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),P=d(S),w=P.j(x);N(w)||0<w.l(T);)S-=k,P=d(S),w=P.j(x);C(P)&&(P=g),j=j.add(P),T=E(T,w)}return new b(j,T)}t.A=function(T){return R(this,T).h},t.and=function(T){for(var x=Math.max(this.g.length,T.g.length),S=[],k=0;k<x;k++)S[k]=this.i(k)&T.i(k);return new o(S,this.h&T.h)},t.or=function(T){for(var x=Math.max(this.g.length,T.g.length),S=[],k=0;k<x;k++)S[k]=this.i(k)|T.i(k);return new o(S,this.h|T.h)},t.xor=function(T){for(var x=Math.max(this.g.length,T.g.length),S=[],k=0;k<x;k++)S[k]=this.i(k)^T.i(k);return new o(S,this.h^T.h)};function B(T){for(var x=T.g.length+1,S=[],k=0;k<x;k++)S[k]=T.i(k)<<1|T.i(k-1)>>>31;return new o(S,T.h)}function F(T,x){var S=x>>5;x%=32;for(var k=T.g.length-S,j=[],P=0;P<k;P++)j[P]=0<x?T.i(P+S)>>>x|T.i(P+S+1)<<32-x:T.i(P+S);return new o(j,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Sr=o}).apply(typeof sy<"u"?sy:typeof self<"u"?self:typeof window<"u"?window:{});var nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oE,lo,aE,Tl,Oh,lE,cE,uE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof nl=="object"&&nl];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var D=a[v];if(!(D in m))break e;m=m[D]}a=a[a.length-1],v=m[a],h=h(v),h!=v&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var m=0,v=!1,D={next:function(){if(!v&&m<a.length){var O=m++;return{value:h(O,a[O]),done:!1}}return v=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,m){return a.call.apply(a.bind,arguments)}function p(a,h,m){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,v),a.apply(h,D)}}return function(){return a.apply(h,arguments)}}function g(a,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function _(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function C(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(v,D,O){for(var W=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)W[ye-2]=arguments[ye];return h.prototype[D].apply(v,W)}}function N(a){const h=a.length;if(0<h){const m=Array(h);for(let v=0;v<h;v++)m[v]=a[v];return m}return[]}function A(a,h){for(let m=1;m<arguments.length;m++){const v=arguments[m];if(c(v)){const D=a.length||0,O=v.length||0;a.length=D+O;for(let W=0;W<O;W++)a[D+W]=v[W]}else a.push(v)}}class E{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function y(a){return/^[\s\xa0]*$/.test(a)}function b(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function R(a){return R[" "](a),a}R[" "]=function(){};var B=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function F(a,h,m){for(const v in a)h.call(m,a[v],v,a)}function T(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function x(a){const h={};for(const m in a)h[m]=a[m];return h}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(a,h){let m,v;for(let D=1;D<arguments.length;D++){v=arguments[D];for(m in v)a[m]=v[m];for(let O=0;O<S.length;O++)m=S[O],Object.prototype.hasOwnProperty.call(v,m)&&(a[m]=v[m])}}function j(a){var h=1;a=a.split(":");const m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function P(a){l.setTimeout(()=>{throw a},0)}function w(){var a=X;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class oe{constructor(){this.h=this.g=null}add(h,m){const v=He.get();v.set(h,m),this.h?this.h.next=v:this.g=v,this.h=v}}var He=new E(()=>new Lt,a=>a.reset());class Lt{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,G=!1,X=new oe,ne=()=>{const a=l.Promise.resolve(void 0);Le=()=>{a.then(V)}};var V=()=>{for(var a;a=w();){try{a.h.call(a.g)}catch(m){P(m)}var h=He;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}G=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ve=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,h),l.removeEventListener("test",m,h)}catch{}return a}();function Ue(a,h){if(ie.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(B){e:{try{R(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:M[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ue.aa.h.call(this)}}C(Ue,ie);var M={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),q=0;function pe(a,h,m,v,D){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!v,this.ha=D,this.key=++q,this.da=this.fa=!1}function nt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Jn(a){this.src=a,this.g={},this.h=0}Jn.prototype.add=function(a,h,m,v,D){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var W=vu(a,h,v,D);return-1<W?(h=a[W],m||(h.fa=!1)):(h=new pe(h,this.src,O,!!v,D),h.fa=m,a.push(h)),h};function Di(a,h){var m=h.type;if(m in a.g){var v=a.g[m],D=Array.prototype.indexOf.call(v,h,void 0),O;(O=0<=D)&&Array.prototype.splice.call(v,D,1),O&&(nt(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function vu(a,h,m,v){for(var D=0;D<a.length;++D){var O=a[D];if(!O.da&&O.listener==h&&O.capture==!!m&&O.ha==v)return D}return-1}var yu="closure_lm_"+(1e6*Math.random()|0),xu={};function rp(a,h,m,v,D){if(Array.isArray(h)){for(var O=0;O<h.length;O++)rp(a,h[O],m,v,D);return null}return m=op(m),a&&a[L]?a.K(h,m,d(v)?!!v.capture:!1,D):ob(a,h,m,!1,v,D)}function ob(a,h,m,v,D,O){if(!h)throw Error("Invalid event type");var W=d(D)?!!D.capture:!!D,ye=wu(a);if(ye||(a[yu]=ye=new Jn(a)),m=ye.add(h,m,v,W,O),m.proxy)return m;if(v=ab(),m.proxy=v,v.src=a,v.listener=m,a.addEventListener)ve||(D=W),D===void 0&&(D=!1),a.addEventListener(h.toString(),v,D);else if(a.attachEvent)a.attachEvent(ip(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ab(){function a(m){return h.call(a.src,a.listener,m)}const h=lb;return a}function sp(a,h,m,v,D){if(Array.isArray(h))for(var O=0;O<h.length;O++)sp(a,h[O],m,v,D);else v=d(v)?!!v.capture:!!v,m=op(m),a&&a[L]?(a=a.i,h=String(h).toString(),h in a.g&&(O=a.g[h],m=vu(O,m,v,D),-1<m&&(nt(O[m]),Array.prototype.splice.call(O,m,1),O.length==0&&(delete a.g[h],a.h--)))):a&&(a=wu(a))&&(h=a.g[h.toString()],a=-1,h&&(a=vu(h,m,v,D)),(m=-1<a?h[a]:null)&&_u(m))}function _u(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[L])Di(h.i,a);else{var m=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(m,v,a.capture):h.detachEvent?h.detachEvent(ip(m),v):h.addListener&&h.removeListener&&h.removeListener(v),(m=wu(h))?(Di(m,a),m.h==0&&(m.src=null,h[yu]=null)):nt(a)}}}function ip(a){return a in xu?xu[a]:xu[a]="on"+a}function lb(a,h){if(a.da)a=!0;else{h=new Ue(h,this);var m=a.listener,v=a.ha||a.src;a.fa&&_u(a),a=m.call(v,h)}return a}function wu(a){return a=a[yu],a instanceof Jn?a:null}var Eu="__closure_events_fn_"+(1e9*Math.random()>>>0);function op(a){return typeof a=="function"?a:(a[Eu]||(a[Eu]=function(h){return a.handleEvent(h)}),a[Eu])}function rt(){$.call(this),this.i=new Jn(this),this.M=this,this.F=null}C(rt,$),rt.prototype[L]=!0,rt.prototype.removeEventListener=function(a,h,m,v){sp(this,a,h,m,v)};function pt(a,h){var m,v=a.F;if(v)for(m=[];v;v=v.F)m.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new ie(h,a);else if(h instanceof ie)h.target=h.target||a;else{var D=h;h=new ie(v,a),k(h,D)}if(D=!0,m)for(var O=m.length-1;0<=O;O--){var W=h.g=m[O];D=Ea(W,v,!0,h)&&D}if(W=h.g=a,D=Ea(W,v,!0,h)&&D,D=Ea(W,v,!1,h)&&D,m)for(O=0;O<m.length;O++)W=h.g=m[O],D=Ea(W,v,!1,h)&&D}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],v=0;v<m.length;v++)nt(m[v]);delete a.g[h],a.h--}}this.F=null},rt.prototype.K=function(a,h,m,v){return this.i.add(String(a),h,!1,m,v)},rt.prototype.L=function(a,h,m,v){return this.i.add(String(a),h,!0,m,v)};function Ea(a,h,m,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,O=0;O<h.length;++O){var W=h[O];if(W&&!W.da&&W.capture==m){var ye=W.listener,Qe=W.ha||W.src;W.fa&&Di(a.i,W),D=ye.call(Qe,v)!==!1&&D}}return D&&!v.defaultPrevented}function ap(a,h,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function lp(a){a.g=ap(()=>{a.g=null,a.i&&(a.i=!1,lp(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class cb extends ${constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:lp(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oi(a){$.call(this),this.h=a,this.g={}}C(Oi,$);var cp=[];function up(a){F(a.g,function(h,m){this.g.hasOwnProperty(m)&&_u(h)},a),a.g={}}Oi.prototype.N=function(){Oi.aa.N.call(this),up(this)},Oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bu=l.JSON.stringify,ub=l.JSON.parse,db=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Tu(){}Tu.prototype.h=null;function dp(a){return a.h||(a.h=a.i())}function hp(){}var Mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Su(){ie.call(this,"d")}C(Su,ie);function Cu(){ie.call(this,"c")}C(Cu,ie);var $r={},fp=null;function ba(){return fp=fp||new rt}$r.La="serverreachability";function mp(a){ie.call(this,$r.La,a)}C(mp,ie);function Vi(a){const h=ba();pt(h,new mp(h))}$r.STAT_EVENT="statevent";function pp(a,h){ie.call(this,$r.STAT_EVENT,a),this.stat=h}C(pp,ie);function gt(a){const h=ba();pt(h,new pp(h,a))}$r.Ma="timingevent";function gp(a,h){ie.call(this,$r.Ma,a),this.size=h}C(gp,ie);function Li(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function Ui(){this.g=!0}Ui.prototype.xa=function(){this.g=!1};function hb(a,h,m,v,D,O){a.info(function(){if(a.g)if(O)for(var W="",ye=O.split("&"),Qe=0;Qe<ye.length;Qe++){var fe=ye[Qe].split("=");if(1<fe.length){var st=fe[0];fe=fe[1];var it=st.split("_");W=2<=it.length&&it[1]=="type"?W+(st+"="+fe+"&"):W+(st+"=redacted&")}}else W=null;else W=O;return"XMLHTTP REQ ("+v+") [attempt "+D+"]: "+h+`
`+m+`
`+W})}function fb(a,h,m,v,D,O,W){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+D+"]: "+h+`
`+m+`
`+O+" "+W})}function Is(a,h,m,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+pb(a,m)+(v?" "+v:"")})}function mb(a,h){a.info(function(){return"TIMEOUT: "+h})}Ui.prototype.info=function(){};function pb(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var v=m[a];if(!(2>v.length)){var D=v[1];if(Array.isArray(D)&&!(1>D.length)){var O=D[0];if(O!="noop"&&O!="stop"&&O!="close")for(var W=1;W<D.length;W++)D[W]=""}}}}return bu(m)}catch{return h}}var Ta={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Iu;function Sa(){}C(Sa,Tu),Sa.prototype.g=function(){return new XMLHttpRequest},Sa.prototype.i=function(){return{}},Iu=new Sa;function Xn(a,h,m,v){this.j=a,this.i=h,this.l=m,this.R=v||1,this.U=new Oi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yp}function yp(){this.i=null,this.g="",this.h=!1}var xp={},ku={};function Nu(a,h,m){a.L=1,a.v=Na(Cn(h)),a.m=m,a.P=!0,_p(a,null)}function _p(a,h){a.F=Date.now(),Ca(a),a.A=Cn(a.v);var m=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Dp(m.i,"t",v),a.C=0,m=a.j.J,a.h=new yp,a.g=Xp(a.j,m?h:null,!a.m),0<a.O&&(a.M=new cb(g(a.Y,a,a.g),a.O)),h=a.U,m=a.g,v=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(cp[0]=D.toString()),D=cp);for(var O=0;O<D.length;O++){var W=rp(m,D[O],v||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=a.H?x(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Vi(),hb(a.i,a.u,a.A,a.l,a.R,a.m)}Xn.prototype.ca=function(a){a=a.target;const h=this.M;h&&In(a)==3?h.j():this.Y(a)},Xn.prototype.Y=function(a){try{if(a==this.g)e:{const it=In(this.g);var h=this.g.Ba();const As=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||Bp(this.g)))){this.J||it!=4||h==7||(h==8||0>=As?Vi(3):Vi(2)),Au(this);var m=this.g.Z();this.X=m;t:if(wp(this)){var v=Bp(this.g);a="";var D=v.length,O=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hr(this),Fi(this);var W="";break t}this.h.i=new l.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,a+=this.h.i.decode(v[h],{stream:!(O&&h==D-1)});v.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,fb(this.i,this.u,this.A,this.l,this.R,it,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Qe=this.g;if((ye=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(ye)){var fe=ye;break t}}fe=null}if(m=fe)Is(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pu(this,m);else{this.o=!1,this.s=3,gt(12),Hr(this),Fi(this);break e}}if(this.P){m=!0;let Yt;for(;!this.J&&this.C<W.length;)if(Yt=gb(this,W),Yt==ku){it==4&&(this.s=4,gt(14),m=!1),Is(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==xp){this.s=4,gt(15),Is(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else Is(this.i,this.l,Yt,null),Pu(this,Yt);if(wp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||W.length!=0||this.h.h||(this.s=1,gt(16),m=!1),this.o=this.o&&m,!m)Is(this.i,this.l,W,"[Invalid Chunked Response]"),Hr(this),Fi(this);else if(0<W.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Vu(st),st.M=!0,gt(11))}}else Is(this.i,this.l,W,null),Pu(this,W);it==4&&Hr(this),this.o&&!this.J&&(it==4?Kp(this.j,this):(this.o=!1,Ca(this)))}else jb(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),Hr(this),Fi(this)}}}catch{}finally{}};function wp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function gb(a,h){var m=a.C,v=h.indexOf(`
`,m);return v==-1?ku:(m=Number(h.substring(m,v)),isNaN(m)?xp:(v+=1,v+m>h.length?ku:(h=h.slice(v,v+m),a.C=v+m,h)))}Xn.prototype.cancel=function(){this.J=!0,Hr(this)};function Ca(a){a.S=Date.now()+a.I,Ep(a,a.I)}function Ep(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Li(g(a.ba,a),h)}function Au(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Xn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(mb(this.i,this.A),this.L!=2&&(Vi(),gt(17)),Hr(this),this.s=2,Fi(this)):Ep(this,this.S-a)};function Fi(a){a.j.G==0||a.J||Kp(a.j,a)}function Hr(a){Au(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,up(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Pu(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||Ru(m.h,a))){if(!a.K&&Ru(m.h,a)&&m.G==3){try{var v=m.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var D=v;if(D[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)Oa(m),ja(m);else break e;Mu(m),gt(18)}}else m.za=D[1],0<m.za-m.T&&37500>D[2]&&m.F&&m.v==0&&!m.C&&(m.C=Li(g(m.Za,m),6e3));if(1>=Sp(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Gr(m,11)}else if((a.K||m.g==a)&&Oa(m),!y(h))for(D=m.Da.g.parse(h),h=0;h<D.length;h++){let fe=D[h];if(m.T=fe[0],fe=fe[1],m.G==2)if(fe[0]=="c"){m.K=fe[1],m.ia=fe[2];const st=fe[3];st!=null&&(m.la=st,m.j.info("VER="+m.la));const it=fe[4];it!=null&&(m.Aa=it,m.j.info("SVER="+m.Aa));const As=fe[5];As!=null&&typeof As=="number"&&0<As&&(v=1.5*As,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;const Yt=a.g;if(Yt){const Va=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Va){var O=v.h;O.g||Va.indexOf("spdy")==-1&&Va.indexOf("quic")==-1&&Va.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(ju(O,O.h),O.h=null))}if(v.D){const Lu=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;Lu&&(v.ya=Lu,_e(v.I,v.D,Lu))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var W=a;if(v.qa=Jp(v,v.J?v.ia:null,v.W),W.K){Cp(v.h,W);var ye=W,Qe=v.L;Qe&&(ye.I=Qe),ye.B&&(Au(ye),Ca(ye)),v.g=W}else Gp(v);0<m.i.length&&Da(m)}else fe[0]!="stop"&&fe[0]!="close"||Gr(m,7);else m.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Gr(m,7):Ou(m):fe[0]!="noop"&&m.l&&m.l.ta(fe),m.v=0)}}Vi(4)}catch{}}var vb=class{constructor(a,h){this.g=a,this.map=h}};function bp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Sp(a){return a.h?1:a.g?a.g.size:0}function Ru(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function ju(a,h){a.g?a.g.add(h):a.h=h}function Cp(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}bp.prototype.cancel=function(){if(this.i=Ip(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ip(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.D);return h}return N(a.i)}function yb(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],m=a.length,v=0;v<m;v++)h.push(a[v]);return h}h=[],m=0;for(v in a)h[m++]=a[v];return h}function xb(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(const v in a)h[m++]=v;return h}}}function kp(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=xb(a),v=yb(a),D=v.length,O=0;O<D;O++)h.call(void 0,v[O],m&&m[O],a)}var Np=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _b(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var v=a[m].indexOf("="),D=null;if(0<=v){var O=a[m].substring(0,v);D=a[m].substring(v+1)}else O=a[m];h(O,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Wr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Wr){this.h=a.h,Ia(this,a.j),this.o=a.o,this.g=a.g,ka(this,a.s),this.l=a.l;var h=a.i,m=new $i;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),Ap(this,m),this.m=a.m}else a&&(h=String(a).match(Np))?(this.h=!1,Ia(this,h[1]||"",!0),this.o=Bi(h[2]||""),this.g=Bi(h[3]||"",!0),ka(this,h[4]),this.l=Bi(h[5]||"",!0),Ap(this,h[6]||"",!0),this.m=Bi(h[7]||"")):(this.h=!1,this.i=new $i(null,this.h))}Wr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(zi(h,Pp,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(zi(h,Pp,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(zi(m,m.charAt(0)=="/"?bb:Eb,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",zi(m,Sb)),a.join("")};function Cn(a){return new Wr(a)}function Ia(a,h,m){a.j=m?Bi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ka(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Ap(a,h,m){h instanceof $i?(a.i=h,Cb(a.i,a.h)):(m||(h=zi(h,Tb)),a.i=new $i(h,a.h))}function _e(a,h,m){a.i.set(h,m)}function Na(a){return _e(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Bi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function zi(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,wb),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function wb(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Pp=/[#\/\?@]/g,Eb=/[#\?:]/g,bb=/[#\?]/g,Tb=/[#\?@]/g,Sb=/#/g;function $i(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Zn(a){a.g||(a.g=new Map,a.h=0,a.i&&_b(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=$i.prototype,t.add=function(a,h){Zn(this),this.i=null,a=ks(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function Rp(a,h){Zn(a),h=ks(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function jp(a,h){return Zn(a),h=ks(a,h),a.g.has(h)}t.forEach=function(a,h){Zn(this),this.g.forEach(function(m,v){m.forEach(function(D){a.call(h,D,v,this)},this)},this)},t.na=function(){Zn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let v=0;v<h.length;v++){const D=a[v];for(let O=0;O<D.length;O++)m.push(h[v])}return m},t.V=function(a){Zn(this);let h=[];if(typeof a=="string")jp(this,a)&&(h=h.concat(this.g.get(ks(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},t.set=function(a,h){return Zn(this),this.i=null,a=ks(this,a),jp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Dp(a,h,m){Rp(a,h),0<m.length&&(a.i=null,a.g.set(ks(a,h),N(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var v=h[m];const O=encodeURIComponent(String(v)),W=this.V(v);for(v=0;v<W.length;v++){var D=O;W[v]!==""&&(D+="="+encodeURIComponent(String(W[v]))),a.push(D)}}return this.i=a.join("&")};function ks(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Cb(a,h){h&&!a.j&&(Zn(a),a.i=null,a.g.forEach(function(m,v){var D=v.toLowerCase();v!=D&&(Rp(this,v),Dp(this,D,m))},a)),a.j=h}function Ib(a,h){const m=new Ui;if(l.Image){const v=new Image;v.onload=_(er,m,"TestLoadImage: loaded",!0,h,v),v.onerror=_(er,m,"TestLoadImage: error",!1,h,v),v.onabort=_(er,m,"TestLoadImage: abort",!1,h,v),v.ontimeout=_(er,m,"TestLoadImage: timeout",!1,h,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function kb(a,h){const m=new Ui,v=new AbortController,D=setTimeout(()=>{v.abort(),er(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(O=>{clearTimeout(D),O.ok?er(m,"TestPingServer: ok",!0,h):er(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),er(m,"TestPingServer: error",!1,h)})}function er(a,h,m,v,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),v(m)}catch{}}function Nb(){this.g=new db}function Ab(a,h,m){const v=m||"";try{kp(a,function(D,O){let W=D;d(D)&&(W=bu(D)),h.push(v+O+"="+encodeURIComponent(W))})}catch(D){throw h.push(v+"type="+encodeURIComponent("_badmap")),D}}function Aa(a){this.l=a.Ub||null,this.j=a.eb||!1}C(Aa,Tu),Aa.prototype.g=function(){return new Pa(this.l,this.j)},Aa.prototype.i=function(a){return function(){return a}}({});function Pa(a,h){rt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Pa,rt),t=Pa.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Wi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Wi(this)),this.g&&(this.readyState=3,Wi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Op(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Op(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Hi(this):Wi(this),this.readyState==3&&Op(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Hi(this))},t.Qa=function(a){this.g&&(this.response=a,Hi(this))},t.ga=function(){this.g&&Hi(this)};function Hi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Wi(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function Wi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Mp(a){let h="";return F(a,function(m,v){h+=v,h+=":",h+=m,h+=`\r
`}),h}function Du(a,h,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=Mp(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):_e(a,h,m))}function Pe(a){rt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Pe,rt);var Pb=/^https?$/i,Rb=["POST","PUT"];t=Pe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Iu.g(),this.v=this.o?dp(this.o):dp(Iu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(O){Vp(this,O);return}if(a=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var D in v)m.set(D,v[D]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const O of v.keys())m.set(O,v.get(O));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),D=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Rb,h,void 0))||v||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,W]of m)this.g.setRequestHeader(O,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fp(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){Vp(this,O)}};function Vp(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Lp(a),Ra(a)}function Lp(a){a.A||(a.A=!0,pt(a,"complete"),pt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,pt(this,"complete"),pt(this,"abort"),Ra(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ra(this,!0)),Pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Up(this):this.bb())},t.bb=function(){Up(this)};function Up(a){if(a.h&&typeof o<"u"&&(!a.v[1]||In(a)!=4||a.Z()!=2)){if(a.u&&In(a)==4)ap(a.Ea,0,a);else if(pt(a,"readystatechange"),In(a)==4){a.h=!1;try{const W=a.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var v;if(v=W===0){var D=String(a.D).match(Np)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),v=!Pb.test(D?D.toLowerCase():"")}m=v}if(m)pt(a,"complete"),pt(a,"success");else{a.m=6;try{var O=2<In(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",Lp(a)}}finally{Ra(a)}}}}function Ra(a,h){if(a.g){Fp(a);const m=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||pt(a,"ready");try{m.onreadystatechange=v}catch{}}}function Fp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function In(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),ub(h)}};function Bp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function jb(a){const h={};a=(a.g&&2<=In(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(y(a[v]))continue;var m=j(a[v]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const O=h[D]||[];h[D]=O,O.push(m)}T(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gi(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function zp(a){this.Aa=0,this.i=[],this.j=new Ui,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gi("baseRetryDelayMs",5e3,a),this.cb=Gi("retryDelaySeedMs",1e4,a),this.Wa=Gi("forwardChannelMaxRetries",2,a),this.wa=Gi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new bp(a&&a.concurrentRequestLimit),this.Da=new Nb,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zp.prototype,t.la=8,t.G=1,t.connect=function(a,h,m,v){gt(0),this.W=a,this.H=h||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=Jp(this,null,this.W),Da(this)};function Ou(a){if($p(a),a.G==3){var h=a.U++,m=Cn(a.I);if(_e(m,"SID",a.K),_e(m,"RID",h),_e(m,"TYPE","terminate"),qi(a,m),h=new Xn(a,a.j,h),h.L=2,h.v=Na(Cn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=h.v,m=!0),m||(h.g=Xp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ca(h)}Yp(a)}function ja(a){a.g&&(Vu(a),a.g.cancel(),a.g=null)}function $p(a){ja(a),a.u&&(l.clearTimeout(a.u),a.u=null),Oa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Da(a){if(!Tp(a.h)&&!a.s){a.s=!0;var h=a.Ga;Le||ne(),G||(Le(),G=!0),X.add(h,a),a.B=0}}function Db(a,h){return Sp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Li(g(a.Ga,a,h),Qp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new Xn(this,this.j,a);let O=this.o;if(this.S&&(O?(O=x(O),k(O,this.S)):O=this.S),this.m!==null||this.O||(D.H=O,O=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Wp(this,D,h),m=Cn(this.I),_e(m,"RID",a),_e(m,"CVER",22),this.D&&_e(m,"X-HTTP-Session-Id",this.D),qi(this,m),O&&(this.O?h="headers="+encodeURIComponent(String(Mp(O)))+"&"+h:this.m&&Du(m,this.m,O)),ju(this.h,D),this.Ua&&_e(m,"TYPE","init"),this.P?(_e(m,"$req",h),_e(m,"SID","null"),D.T=!0,Nu(D,m,null)):Nu(D,m,h),this.G=2}}else this.G==3&&(a?Hp(this,a):this.i.length==0||Tp(this.h)||Hp(this))};function Hp(a,h){var m;h?m=h.l:m=a.U++;const v=Cn(a.I);_e(v,"SID",a.K),_e(v,"RID",m),_e(v,"AID",a.T),qi(a,v),a.m&&a.o&&Du(v,a.m,a.o),m=new Xn(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Wp(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ju(a.h,m),Nu(m,v,h)}function qi(a,h){a.H&&F(a.H,function(m,v){_e(h,v,m)}),a.l&&kp({},function(m,v){_e(h,v,m)})}function Wp(a,h,m){m=Math.min(a.i.length,m);var v=a.l?g(a.l.Na,a.l,a):null;e:{var D=a.i;let O=-1;for(;;){const W=["count="+m];O==-1?0<m?(O=D[0].g,W.push("ofs="+O)):O=0:W.push("ofs="+O);let ye=!0;for(let Qe=0;Qe<m;Qe++){let fe=D[Qe].g;const st=D[Qe].map;if(fe-=O,0>fe)O=Math.max(0,D[Qe].g-100),ye=!1;else try{Ab(st,W,"req"+fe+"_")}catch{v&&v(st)}}if(ye){v=W.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,v}function Gp(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Le||ne(),G||(Le(),G=!0),X.add(h,a),a.v=0}}function Mu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Li(g(a.Fa,a),Qp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,qp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Li(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),ja(this),qp(this))};function Vu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function qp(a){a.g=new Xn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Cn(a.qa);_e(h,"RID","rpc"),_e(h,"SID",a.K),_e(h,"AID",a.T),_e(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&_e(h,"TO",a.ja),_e(h,"TYPE","xmlhttp"),qi(a,h),a.m&&a.o&&Du(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=Na(Cn(h)),m.m=null,m.P=!0,_p(m,a)}t.Za=function(){this.C!=null&&(this.C=null,ja(this),Mu(this),gt(19))};function Oa(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Kp(a,h){var m=null;if(a.g==h){Oa(a),Vu(a),a.g=null;var v=2}else if(Ru(a.h,h))m=h.D,Cp(a.h,h),v=1;else return;if(a.G!=0){if(h.o)if(v==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var D=a.B;v=ba(),pt(v,new gp(v,m)),Da(a)}else Gp(a);else if(D=h.s,D==3||D==0&&0<h.X||!(v==1&&Db(a,h)||v==2&&Mu(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),D){case 1:Gr(a,5);break;case 4:Gr(a,10);break;case 3:Gr(a,6);break;default:Gr(a,2)}}}function Qp(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function Gr(a,h){if(a.j.info("Error code "+h),h==2){var m=g(a.fb,a),v=a.Xa;const D=!v;v=new Wr(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ia(v,"https"),Na(v),D?Ib(v.toString(),m):kb(v.toString(),m)}else gt(2);a.G=0,a.l&&a.l.sa(h),Yp(a),$p(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Yp(a){if(a.G=0,a.ka=[],a.l){const h=Ip(a.h);(h.length!=0||a.i.length!=0)&&(A(a.ka,h),A(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function Jp(a,h,m){var v=m instanceof Wr?Cn(m):new Wr(m);if(v.g!="")h&&(v.g=h+"."+v.g),ka(v,v.s);else{var D=l.location;v=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var O=new Wr(null);v&&Ia(O,v),h&&(O.g=h),D&&ka(O,D),m&&(O.l=m),v=O}return m=a.D,h=a.ya,m&&h&&_e(v,m,h),_e(v,"VER",a.la),qi(a,v),v}function Xp(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Pe(new Aa({eb:m})):new Pe(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zp(){}t=Zp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ma(){}Ma.prototype.g=function(a,h){return new kt(a,h)};function kt(a,h){rt.call(this),this.g=new zp(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!y(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!y(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ns(this)}C(kt,rt),kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){Ou(this.g)},kt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=bu(a),a=m);h.i.push(new vb(h.Ya++,a)),h.G==3&&Da(h)},kt.prototype.N=function(){this.g.l=null,delete this.j,Ou(this.g),delete this.g,kt.aa.N.call(this)};function eg(a){Su.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}C(eg,Su);function tg(){Cu.call(this),this.status=1}C(tg,Cu);function Ns(a){this.g=a}C(Ns,Zp),Ns.prototype.ua=function(){pt(this.g,"a")},Ns.prototype.ta=function(a){pt(this.g,new eg(a))},Ns.prototype.sa=function(a){pt(this.g,new tg)},Ns.prototype.ra=function(){pt(this.g,"b")},Ma.prototype.createWebChannel=Ma.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,uE=function(){return new Ma},cE=function(){return ba()},lE=$r,Oh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ta.NO_ERROR=0,Ta.TIMEOUT=8,Ta.HTTP_ERROR=6,Tl=Ta,vp.COMPLETE="complete",aE=vp,hp.EventType=Mi,Mi.OPEN="a",Mi.CLOSE="b",Mi.ERROR="c",Mi.MESSAGE="d",rt.prototype.listen=rt.prototype.K,lo=hp,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,oE=Pe}).apply(typeof nl<"u"?nl:typeof self<"u"?self:typeof window<"u"?window:{});const iy="@firebase/firestore",oy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ni="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new Kc("@firebase/firestore");function js(){return ps.logLevel}function K(t,...e){if(ps.logLevel<=ce.DEBUG){const n=e.map(vm);ps.debug(`Firestore (${Ni}): ${t}`,...n)}}function Hn(t,...e){if(ps.logLevel<=ce.ERROR){const n=e.map(vm);ps.error(`Firestore (${Ni}): ${t}`,...n)}}function Ar(t,...e){if(ps.logLevel<=ce.WARN){const n=e.map(vm);ps.warn(`Firestore (${Ni}): ${t}`,...n)}}function vm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,dE(t,r,n)}function dE(t,e,n){let r=`FIRESTORE (${Ni}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Hn(r),new Error(r)}function me(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||dE(e,s,r)}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends cn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class zP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $P{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Cr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Cr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string",31837,{l:r}),new hE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string",2055,{h:e}),new ct(e)}}class HP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new HP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ay{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,At(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){me(this.o===void 0,3512);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ay(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ay(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=qP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function Mh(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ae(r,s);{const i=fE(),o=KP(i.encode(ly(t,n)),i.encode(ly(e,n)));return o!==0?o:ae(r,s)}}n+=r>65535?2:1}return ae(t.length,e.length)}function ly(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function KP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ae(t[n],e[n]);return ae(t.length,e.length)}function pi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="__name__";class fn{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=fn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ae(e.length,n.length)}static compareSegments(e,n){const r=fn.isNumericId(e),s=fn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?fn.extractNumericId(e).compare(fn.extractNumericId(n)):Mh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sr.fromString(e.substring(4,e.length-2))}}class Ce extends fn{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const QP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends fn{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return QP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cy}static keyField(){return new Xe([cy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Y(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Y(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ce.fromString(e))}static fromName(e){return new J(Ce.fromString(e).popFirst(5))}static empty(){return new J(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ce(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(t,e,n){if(!n)throw new Y(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JP(t,e,n,r){if(e===!0&&r===!0)throw new Y(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function uy(t){if(!J.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function xm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function Jo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xm(t);throw new Y(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t,e){const n={typeString:t};return e&&(n.value=e),n}function pa(t,e){if(!mE(t))throw new Y(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Y(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy=-62135596800,hy=1e6;class Ee{static now(){return Ee.fromMillis(Date.now())}static fromDate(e){return Ee.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hy);return new Ee(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dy)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hy}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ee._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pa(e,Ee._jsonSchema))return new Ee(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ee._jsonSchemaVersion="firestore/timestamp/1.0",Ee._jsonSchema={type:Ve("string",Ee._jsonSchemaVersion),seconds:Ve("number"),nanoseconds:Ve("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Ee(0,0))}static max(){return new re(new Ee(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=-1;function XP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=re.fromTimestamp(r===1e9?new Ee(n+1,0):new Ee(n,r));return new Pr(s,J.empty(),e)}function ZP(t){return new Pr(t.readTime,t.key,Xo)}class Pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pr(re.min(),J.empty(),Xo)}static max(){return new Pr(re.max(),J.empty(),Xo)}}function eR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ai(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==tR)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function rR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Pi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}eu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=-1;function tu(t){return t==null}function mc(t){return t===0&&1/t==-1/0}function sR(t){return typeof t=="number"&&Number.isInteger(t)&&!mc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="";function iR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fy(e)),e=oR(t.get(n),e);return fy(e)}function oR(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case pE:n+="";break;default:n+=i}}return n}function fy(t){return t+pE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rl(this.root,e,this.comparator,!1)}getReverseIterator(){return new rl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rl(this.root,e,this.comparator,!0)}}class rl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new py(this.data.getIterator())}getIteratorFrom(e){return new py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $e)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $e(this.comparator);return n.data=e,n}}class py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new nn([])}unionWith(e){let n=new $e(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new vE("Invalid base64 string: "+i):i}}(e);return new tt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const aR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(t){if(me(!!t,39018),typeof t=="string"){let e=0;const n=aR.exec(t);if(me(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function jr(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="server_timestamp",xE="__type__",_E="__previous_value__",wE="__local_write_time__";function wm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[xE])===null||n===void 0?void 0:n.stringValue)===yE}function nu(t){const e=t.mapValue.fields[_E];return wm(e)?nu(e):e}function Zo(t){const e=Rr(t.mapValue.fields[wE].timestampValue);return new Ee(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,r,s,i,o,l,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const pc="(default)";class ea{constructor(e,n){this.projectId=e,this.database=n||pc}static empty(){return new ea("","")}get isDefaultDatabase(){return this.database===pc}isEqual(e){return e instanceof ea&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="__type__",cR="__max__",sl={mapValue:{}},bE="__vector__",gc="value";function Dr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wm(t)?4:dR(t)?9007199254740991:uR(t)?10:11:te(28295,{value:t})}function bn(t,e){if(t===e)return!0;const n=Dr(t);if(n!==Dr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zo(t).isEqual(Zo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Rr(s.timestampValue),l=Rr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return jr(s.bytesValue).isEqual(jr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return je(s.geoPointValue.latitude)===je(i.geoPointValue.latitude)&&je(s.geoPointValue.longitude)===je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return je(s.integerValue)===je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=je(s.doubleValue),l=je(i.doubleValue);return o===l?mc(o)===mc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return pi(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(my(o)!==my(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!bn(o[c],l[c])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function ta(t,e){return(t.values||[]).find(n=>bn(n,e))!==void 0}function gi(t,e){if(t===e)return 0;const n=Dr(t),r=Dr(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=je(i.integerValue||i.doubleValue),c=je(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return gy(t.timestampValue,e.timestampValue);case 4:return gy(Zo(t),Zo(e));case 5:return Mh(t.stringValue,e.stringValue);case 6:return function(i,o){const l=jr(i),c=jr(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=ae(l[d],c[d]);if(f!==0)return f}return ae(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ae(je(i.latitude),je(o.latitude));return l!==0?l:ae(je(i.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,d,f;const p=i.fields||{},g=o.fields||{},_=(l=p[gc])===null||l===void 0?void 0:l.arrayValue,C=(c=g[gc])===null||c===void 0?void 0:c.arrayValue,N=ae(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:vy(_,C)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===sl.mapValue&&o===sl.mapValue)return 0;if(i===sl.mapValue)return 1;if(o===sl.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const g=Mh(c[p],f[p]);if(g!==0)return g;const _=gi(l[c[p]],d[f[p]]);if(_!==0)return _}return ae(c.length,f.length)}(t.mapValue,e.mapValue);default:throw te(23264,{le:n})}}function gy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Rr(t),r=Rr(e),s=ae(n.seconds,r.seconds);return s!==0?s:ae(n.nanos,r.nanos)}function vy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=gi(n[s],r[s]);if(i)return i}return ae(n.length,r.length)}function vi(t){return Vh(t)}function Vh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Rr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return jr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Vh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Vh(n.fields[o])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function Sl(t){switch(Dr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nu(t);return e?16+Sl(e):16;case 5:return 2*t.stringValue.length;case 6:return jr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Sl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return bs(r.fields,(i,o)=>{s+=i.length+Sl(o)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function Lh(t){return!!t&&"integerValue"in t}function Em(t){return!!t&&"arrayValue"in t}function yy(t){return!!t&&"nullValue"in t}function xy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cl(t){return!!t&&"mapValue"in t}function uR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[EE])===null||n===void 0?void 0:n.stringValue)===bE}function So(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return bs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=So(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=So(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===cR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Cl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=So(n)}setAll(e){let n=Xe.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=So(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Cl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Cl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){bs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new zt(So(this.value))}}function TE(t){const e=[];return bs(t.fields,(n,r)=>{const s=new Xe([n]);if(Cl(r)){const i=TE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new dt(e,0,re.min(),re.min(),re.min(),zt.empty(),0)}static newFoundDocument(e,n,r,s){return new dt(e,1,n,re.min(),r,s,0)}static newNoDocument(e,n){return new dt(e,2,n,re.min(),re.min(),zt.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,re.min(),re.min(),zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n){this.position=e,this.inclusive=n}}function _y(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=gi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function wy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n="asc"){this.field=e,this.dir=n}}function hR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{}class Be extends SE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new mR(e,n,r):n==="array-contains"?new vR(e,r):n==="in"?new yR(e,r):n==="not-in"?new xR(e,r):n==="array-contains-any"?new _R(e,r):new Be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pR(e,r):new gR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(gi(n,this.value)):n!==null&&Dr(this.value)===Dr(n)&&this.matchesComparison(gi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tn extends SE{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Tn(e,n)}matches(e){return CE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function CE(t){return t.op==="and"}function IE(t){return fR(t)&&CE(t)}function fR(t){for(const e of t.filters)if(e instanceof Tn)return!1;return!0}function Uh(t){if(t instanceof Be)return t.field.canonicalString()+t.op.toString()+vi(t.value);if(IE(t))return t.filters.map(e=>Uh(e)).join(",");{const e=t.filters.map(n=>Uh(n)).join(",");return`${t.op}(${e})`}}function kE(t,e){return t instanceof Be?function(r,s){return s instanceof Be&&r.op===s.op&&r.field.isEqual(s.field)&&bn(r.value,s.value)}(t,e):t instanceof Tn?function(r,s){return s instanceof Tn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&kE(o,s.filters[l]),!0):!1}(t,e):void te(19439)}function NE(t){return t instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${vi(n.value)}`}(t):t instanceof Tn?function(n){return n.op.toString()+" {"+n.getFilters().map(NE).join(" ,")+"}"}(t):"Filter"}class mR extends Be{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class pR extends Be{constructor(e,n){super(e,"in",n),this.keys=AE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gR extends Be{constructor(e,n){super(e,"not-in",n),this.keys=AE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function AE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class vR extends Be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Em(n)&&ta(n.arrayValue,this.value)}}class yR extends Be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ta(this.value.arrayValue,n)}}class xR extends Be{constructor(e,n){super(e,"not-in",n)}matches(e){if(ta(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ta(this.value.arrayValue,n)}}class _R extends Be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Em(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ta(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Pe=null}}function Ey(t,e=null,n=[],r=[],s=null,i=null,o=null){return new wR(t,e,n,r,s,i,o)}function bm(t){const e=se(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Uh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),tu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vi(r)).join(",")),e.Pe=n}return e.Pe}function Tm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wy(t.startAt,e.startAt)&&wy(t.endAt,e.endAt)}function Fh(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function ER(t,e,n,r,s,i,o,l){return new ru(t,e,n,r,s,i,o,l)}function Sm(t){return new ru(t)}function by(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bR(t){return t.collectionGroup!==null}function Co(t){const e=se(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new $e(Xe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new yc(i,r))}),n.has(Xe.keyField().canonicalString())||e.Te.push(new yc(Xe.keyField(),r))}return e.Te}function yn(t){const e=se(t);return e.Ie||(e.Ie=TR(e,Co(t))),e.Ie}function TR(t,e){if(t.limitType==="F")return Ey(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new yc(s.field,i)});const n=t.endAt?new vc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new vc(t.startAt.position,t.startAt.inclusive):null;return Ey(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Bh(t,e,n){return new ru(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function su(t,e){return Tm(yn(t),yn(e))&&t.limitType===e.limitType}function PE(t){return`${bm(yn(t))}|lt:${t.limitType}`}function Ds(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>NE(s)).join(", ")}]`),tu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>vi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>vi(s)).join(",")),`Target(${r})`}(yn(t))}; limitType=${t.limitType})`}function iu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Co(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const d=_y(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,Co(r),s)||r.endAt&&!function(o,l,c){const d=_y(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,Co(r),s))}(t,e)}function SR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RE(t){return(e,n)=>{let r=!1;for(const s of Co(t)){const i=CR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function CR(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?gi(c,d):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){bs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return gE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=new Ae(J.comparator);function Wn(){return IR}const jE=new Ae(J.comparator);function co(...t){let e=jE;for(const n of t)e=e.insert(n.key,n);return e}function DE(t){let e=jE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ts(){return Io()}function OE(){return Io()}function Io(){return new Ts(t=>t.toString(),(t,e)=>t.isEqual(e))}const kR=new Ae(J.comparator),NR=new $e(J.comparator);function ue(...t){let e=NR;for(const n of t)e=e.add(n);return e}const AR=new $e(ae);function PR(){return AR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mc(e)?"-0":e}}function ME(t){return{integerValue:""+t}}function RR(t,e){return sR(e)?ME(e):Cm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(){this._=void 0}}function jR(t,e,n){return t instanceof xc?function(s,i){const o={fields:{[xE]:{stringValue:yE},[wE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&wm(i)&&(i=nu(i)),i&&(o.fields[_E]=i),{mapValue:o}}(n,e):t instanceof na?LE(t,e):t instanceof ra?UE(t,e):function(s,i){const o=VE(s,i),l=Ty(o)+Ty(s.Ee);return Lh(o)&&Lh(s.Ee)?ME(l):Cm(s.serializer,l)}(t,e)}function DR(t,e,n){return t instanceof na?LE(t,e):t instanceof ra?UE(t,e):n}function VE(t,e){return t instanceof _c?function(r){return Lh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class xc extends ou{}class na extends ou{constructor(e){super(),this.elements=e}}function LE(t,e){const n=FE(e);for(const r of t.elements)n.some(s=>bn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ra extends ou{constructor(e){super(),this.elements=e}}function UE(t,e){let n=FE(e);for(const r of t.elements)n=n.filter(s=>!bn(s,r));return{arrayValue:{values:n}}}class _c extends ou{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Ty(t){return je(t.integerValue||t.doubleValue)}function FE(t){return Em(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function OR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof na&&s instanceof na||r instanceof ra&&s instanceof ra?pi(r.elements,s.elements,bn):r instanceof _c&&s instanceof _c?bn(r.Ee,s.Ee):r instanceof xc&&s instanceof xc}(t.transform,e.transform)}class MR{constructor(e,n){this.version=e,this.transformResults=n}}class Vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Il(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class au{}function BE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $E(t.key,Vn.none()):new ga(t.key,t.data,Vn.none());{const n=t.data,r=zt.empty();let s=new $e(Xe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ss(t.key,r,new nn(s.toArray()),Vn.none())}}function VR(t,e,n){t instanceof ga?function(s,i,o){const l=s.value.clone(),c=Cy(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ss?function(s,i,o){if(!Il(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Cy(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(zE(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ko(t,e,n,r){return t instanceof ga?function(i,o,l,c){if(!Il(i.precondition,o))return l;const d=i.value.clone(),f=Iy(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ss?function(i,o,l,c){if(!Il(i.precondition,o))return l;const d=Iy(i.fieldTransforms,c,o),f=o.data;return f.setAll(zE(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return Il(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function LR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=VE(r.transform,s||null);i!=null&&(n===null&&(n=zt.empty()),n.set(r.field,i))}return n||null}function Sy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pi(r,s,(i,o)=>OR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ga extends au{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ss extends au{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function zE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Cy(t,e,n){const r=new Map;me(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,DR(o,l,n[s]))}return r}function Iy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,jR(i,o,e))}return r}class $E extends au{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UR extends au{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&VR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ko(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ko(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=OE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=BE(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&pi(this.mutations,e.mutations,(n,r)=>Sy(n,r))&&pi(this.baseMutations,e.baseMutations,(n,r)=>Sy(n,r))}}class Im{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){me(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return kR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Im(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,de;function $R(t){switch(t){case z.OK:return te(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function HE(t){if(t===void 0)return Hn("GRPC error has no .code"),z.UNKNOWN;switch(t){case Oe.OK:return z.OK;case Oe.CANCELLED:return z.CANCELLED;case Oe.UNKNOWN:return z.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return z.INTERNAL;case Oe.UNAVAILABLE:return z.UNAVAILABLE;case Oe.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Oe.NOT_FOUND:return z.NOT_FOUND;case Oe.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Oe.ABORTED:return z.ABORTED;case Oe.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Oe.DATA_LOSS:return z.DATA_LOSS;default:return te(39323,{code:t})}}(de=Oe||(Oe={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=new Sr([4294967295,4294967295],0);function ky(t){const e=fE().encode(t),n=new iE;return n.update(e),new Uint8Array(n.digest())}function Ny(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Sr([n,r],0),new Sr([s,i],0)]}class km{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new uo(`Invalid padding: ${n}`);if(r<0)throw new uo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new uo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Sr.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Sr.fromNumber(r)));return s.compare(HR)===1&&(s=new Sr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=ky(e),[r,s]=Ny(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new km(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.fe===0)return;const n=ky(e),[r,s]=Ny(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class uo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,va.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lu(re.min(),s,new Ae(ae),Wn(),ue())}}class va{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new va(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class WE{constructor(e,n){this.targetId=e,this.De=n}}class GE{constructor(e,n,r=tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ay{constructor(){this.ve=0,this.Ce=Py(),this.Fe=tt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ue(),n=ue(),r=ue();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:i})}}),new va(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Py()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,me(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class WR{constructor(e){this.We=e,this.Ge=new Map,this.ze=Wn(),this.je=il(),this.Je=il(),this.He=new Ae(ae)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(Fh(i))if(r===0){const o=new J(i.path);this.Xe(n,o,dt.newNoDocument(o,re.min()))}else me(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const l=this._t(e),c=l?this.ut(l,e,o):1;if(c!==0){this.rt(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=jr(r).toUint8Array()}catch(c){if(c instanceof vE)return Ar("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new km(o,s,i)}catch(c){return Ar(c instanceof uo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const l=this.st(o);if(l){if(i.current&&Fh(l.target)){const c=new J(l.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,dt.newNoDocument(c,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=ue();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new lu(e,n,this.He,this.ze,r);return this.ze=Wn(),this.je=il(),this.Je=il(),this.He=new Ae(ae),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Ay,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new $e(ae),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new $e(ae),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ay),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function il(){return new Ae(J.comparator)}function Py(){return new Ae(J.comparator)}const GR={asc:"ASCENDING",desc:"DESCENDING"},qR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KR={and:"AND",or:"OR"};class QR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zh(t,e){return t.useProto3Json||tu(e)?e:{value:e}}function wc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YR(t,e){return wc(t,e.toTimestamp())}function xn(t){return me(!!t,49232),re.fromTimestamp(function(n){const r=Rr(n);return new Ee(r.seconds,r.nanos)}(t))}function Nm(t,e){return $h(t,e).canonicalString()}function $h(t,e){const n=function(s){return new Ce(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function KE(t){const e=Ce.fromString(t);return me(ZE(e),10190,{key:e.toString()}),e}function Hh(t,e){return Nm(t.databaseId,e.path)}function bd(t,e){const n=KE(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(YE(n))}function QE(t,e){return Nm(t.databaseId,e)}function JR(t){const e=KE(t);return e.length===4?Ce.emptyPath():YE(e)}function Wh(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YE(t){return me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ry(t,e,n){return{name:Hh(t,e),fields:n.value.mapValue.fields}}function XR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(me(f===void 0||typeof f=="string",58123),tt.fromBase64String(f||"")):(me(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),tt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?z.UNKNOWN:HE(d.code);return new Y(f,d.message||"")}(o);n=new GE(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=bd(t,r.document.name),i=xn(r.document.updateTime),o=r.document.createTime?xn(r.document.createTime):re.min(),l=new zt({mapValue:{fields:r.document.fields}}),c=dt.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new kl(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=bd(t,r.document),i=r.readTime?xn(r.readTime):re.min(),o=dt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new kl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=bd(t,r.document),i=r.removedTargetIds||[];n=new kl([],i,s,null)}else{if(!("filter"in e))return te(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new zR(s,i),l=r.targetId;n=new WE(l,o)}}return n}function ZR(t,e){let n;if(e instanceof ga)n={update:Ry(t,e.key,e.value)};else if(e instanceof $E)n={delete:Hh(t,e.key)};else if(e instanceof Ss)n={update:Ry(t,e.key,e.data),updateMask:lj(e.fieldMask)};else{if(!(e instanceof UR))return te(16599,{Rt:e.type});n={verify:Hh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof xc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof na)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ra)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof _c)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:YR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)}(t,e.precondition)),n}function ej(t,e){return t&&t.length>0?(me(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?xn(s.updateTime):xn(i);return o.isEqual(re.min())&&(o=xn(i)),new MR(o,s.transformResults||[])}(n,e))):[]}function tj(t,e){return{documents:[QE(t,e.path)]}}function nj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QE(t,s);const i=function(d){if(d.length!==0)return XE(Tn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Os(g.field),direction:ij(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=zh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:s}}function rj(t){let e=JR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){me(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=JE(p);return g instanceof Tn&&IE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(C){return new yc(Ms(C.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,tu(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,_=p.values||[];return new vc(_,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,_=p.values||[];return new vc(_,g)}(n.endAt)),ER(e,s,o,i,l,"F",c,d)}function sj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ms(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ms(n.unaryFilter.field);return Be.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ms(n.unaryFilter.field);return Be.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ms(n.unaryFilter.field);return Be.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return Be.create(Ms(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tn.create(n.compositeFilter.filters.map(r=>JE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function ij(t){return GR[t]}function oj(t){return qR[t]}function aj(t){return KR[t]}function Os(t){return{fieldPath:t.canonicalString()}}function Ms(t){return Xe.fromServerFormat(t.fieldPath)}function XE(t){return t instanceof Be?function(n){if(n.op==="=="){if(xy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NAN"}};if(yy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NAN"}};if(yy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(n.field),op:oj(n.op),value:n.value}}}(t):t instanceof Tn?function(n){const r=n.getFilters().map(s=>XE(s));return r.length===1?r[0]:{compositeFilter:{op:aj(n.op),filters:r}}}(t):te(54877,{filter:t})}function lj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,r,s,i=re.min(),o=re.min(),l=tt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.gt=e}}function uj(t){const e=rj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this.Dn=new hj}addToCollectionParentIndex(e,n){return this.Dn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Pr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class hj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new $e(Ce.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new $e(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},e1=41943040;class wt{static withCacheSize(e){return new wt(e,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wt.DEFAULT_COLLECTION_PERCENTILE=10,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wt.DEFAULT=new wt(e1,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wt.DISABLED=new wt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new yi(0)}static ur(){return new yi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="LruGarbageCollector",fj=1048576;function Oy([t,e],[n,r]){const s=ae(t,n);return s===0?ae(e,r):s}class mj{constructor(e){this.Tr=e,this.buffer=new $e(Oy),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Oy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class pj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){K(Dy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Pi(n)?K(Dy,"Ignoring IndexedDB error during garbage collection: ",n):await Ai(n)}await this.Rr(3e5)})}}class gj{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(eu.ue);const r=new mj(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(jy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jy):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,l,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),js()<=ce.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function vj(t,e){return new gj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(){this.changes=new Ts(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ko(r.mutation,s,nn.empty(),Ee.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const s=ts();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=co();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Wn();const o=Io(),l=function(){return Io()}();return n.forEach((c,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Ss)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),ko(f.mutation,d,f.mutation.getFieldMask(),Ee.now())):o.set(d.key,nn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return l.set(d,new xj(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Io();let s=new Ae((o,l)=>o-l),i=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||nn.empty();f=l.applyToLocalView(d,f),r.set(c,f);const p=(s.get(l.batchId)||ue()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,p=OE();f.forEach(g=>{if(!i.has(g)){const _=BE(n.get(g),r.get(g));_!==null&&p.set(g,_),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(ts());let l=Xo,c=i;return o.next(d=>U.forEach(d,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ue())).next(f=>({batchId:l,changes:DE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=co();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=co();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,c=>{const d=function(p,g){return new ru(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,dt.newInvalidDocument(f)))});let l=co();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&ko(f.mutation,d,nn.empty(),Ee.now()),iu(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return U.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:xn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:uj(s.bundledQuery),readTime:xn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this.overlays=new Ae(J.comparator),this.kr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ts();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=ts(),i=n.length+1,o=new J(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ae((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=ts(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=ts(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return U.resolve(l)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new BR(n,r));let i=this.kr.get(n);i===void 0&&(i=ue(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(){this.qr=new $e(We.Qr),this.$r=new $e(We.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new We(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new We(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new J(new Ce([])),r=new We(n,e),s=new We(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new J(new Ce([])),r=new We(n,e),s=new We(n,e+1);let i=ue();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new We(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return J.comparator(e.key,n.key)||ae(e.Hr,n.Hr)}static Ur(e,n){return ae(e.Hr,n.Hr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new $e(We.Qr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new FR(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Yr=this.Yr.add(new We(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?_m:this.er-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new We(n,0),s=new We(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $e(ae);return n.forEach(s=>{const i=new We(s,0),o=new We(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),U.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new We(new J(i),0);let l=new $e(ae);return this.Yr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Hr)),!0)},o),U.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){me(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return U.forEach(n.mutations,s=>{const i=new We(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new We(n,0),s=this.Yr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e){this.ni=e,this.docs=function(){return new Ae(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=Wn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():dt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Wn();const o=n.path,l=new J(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||eR(ZP(f),r)<=0||(s.has(f.key)||iu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te(9500)}ri(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Cj(this)}getSize(e){return U.resolve(this.size)}}class Cj extends yj{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.persistence=e,this.ii=new Ts(n=>bm(n),Tm),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.si=0,this.oi=new Am,this.targetCount=0,this._i=yi.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),U.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new yi(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.hr(n),U.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n){this.ai={},this.overlays={},this.ui=new eu(0),this.ci=!1,this.ci=!0,this.li=new bj,this.referenceDelegate=e(this),this.hi=new Ij(this),this.indexManager=new dj,this.remoteDocumentCache=function(s){return new Sj(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new cj(n),this.Ti=new wj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ej,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Tj(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new kj(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return U.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class kj extends nR{constructor(e){super(),this.currentSequenceNumber=e}}class Pm{constructor(e){this.persistence=e,this.Ai=new Am,this.Ri=null}static Vi(e){return new Pm(e)}get mi(){if(this.Ri)return this.Ri;throw te(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.mi,r=>{const s=J.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,re.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return U.or([()=>U.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ec{constructor(e,n){this.persistence=e,this.gi=new Ts(r=>iR(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=vj(this,n)}static Vi(e,n){return new Ec(e,n)}Ii(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return U.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,re.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),U.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Sl(e.data.value)),n}Sr(e,n,r){return U.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=ue(),s=ue();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Rm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return MI()?8:rR(ft())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Nj;return this.ws(e,n,o).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,n,o,l.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(js()<=ce.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(js()<=ce.DEBUG&&K("QueryEngine","Query:",Ds(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(js()<=ce.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yn(n))):U.resolve())}ps(e,n){if(by(n))return U.resolve(null);let r=yn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Bh(n,null,"F"),r=yn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ue(...i);return this.gs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.bs(n,l);return this.Ds(n,d,o,c.readTime)?this.ps(e,Bh(n,null,"F")):this.vs(e,d,n,c)}))})))}ys(e,n,r,s){return by(n)||s.isEqual(re.min())?U.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?U.resolve(null):(js()<=ce.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ds(n)),this.vs(e,o,n,XP(s,Xo)).next(l=>l))})}bs(e,n){let r=new $e(RE(e));return n.forEach((s,i)=>{iu(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return js()<=ce.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Ds(n)),this.gs.getDocumentsMatchingQuery(e,n,Pr.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="LocalStore",Pj=3e8;class Rj{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Ae(ae),this.Ms=new Ts(i=>bm(i),Tm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _j(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function jj(t,e,n,r){return new Rj(t,e,n,r)}async function n1(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=ue();for(const d of s){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:l}))})})}function Dj(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const p=d.batch,g=p.keys();let _=U.resolve();return g.forEach(C=>{_=_.next(()=>f.getEntry(c,C)).next(N=>{const A=d.docVersions.get(C);me(A!==null,48541),N.version.compareTo(A)<0&&(p.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),f.addEntry(N)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ue();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function r1(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Oj(t,e){const n=se(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const l=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;l.push(n.hi.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.hi.addMatchingKeys(i,f.addedDocuments,p)));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(tt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),s=s.insert(p,_),function(N,A,E){return N.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Pj?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,_,f)&&l.push(n.hi.updateTargetData(i,_))});let c=Wn(),d=ue();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(Mj(i,o,e.documentUpdates).next(f=>{c=f.Ls,d=f.ks})),!r.isEqual(re.min())){const f=n.hi.getLastRemoteSnapshotVersion(i).next(p=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return U.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Fs=s,i))}function Mj(t,e,n){let r=ue(),s=ue();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Wn();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(re.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):K(jm,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ls:o,ks:s}})}function Vj(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=_m),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Lj(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new fr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Gh(t,e,n){const r=se(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Pi(o))throw o;K(jm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function My(t,e,n){const r=se(t);let s=re.min(),i=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const p=se(c),g=p.Ms.get(f);return g!==void 0?U.resolve(p.Fs.get(g)):p.hi.getTargetData(d,f)}(r,o,yn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:re.min(),n?i:ue())).next(l=>(Uj(r,SR(e),l),{documents:l,qs:i})))}function Uj(t,e,n){let r=t.xs.get(e)||re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class Vy{constructor(){this.activeTargetIds=PR()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fj{constructor(){this.Fo=new Vy,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Vy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="ConnectivityMonitor";class Uy{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){K(Ly,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){K(Ly,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol=null;function qh(){return ol===null?ol=function(){return 268435456+Math.round(2147483648*Math.random())}():ol++,"0x"+ol.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td="RestConnection",zj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $j{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===pc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=qh(),l=this.Go(e,n.toUriEncodedString());K(Td,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:d}=new URL(l),f=Ci(d);return this.jo(e,l,c,r,f).then(p=>(K(Td,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ar(Td,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ni}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=zj[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class Wj extends $j{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=qh();return new Promise((l,c)=>{const d=new oE;d.setWithCredentials(!0),d.listenOnce(aE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Tl.NO_ERROR:const p=d.getResponseJson();K(lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Tl.TIMEOUT:K(lt,`RPC '${e}' ${o} timed out`),c(new Y(z.DEADLINE_EXCEEDED,"Request time out"));break;case Tl.HTTP_ERROR:const g=d.getStatus();if(K(lt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const C=_==null?void 0:_.error;if(C&&C.status&&C.message){const N=function(E){const y=E.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(y)>=0?y:z.UNKNOWN}(C.status);c(new Y(N,C.message))}else c(new Y(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Y(z.UNAVAILABLE,"Connection failed."));break;default:te(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{K(lt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);K(lt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}P_(e,n,r){const s=qh(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=uE(),l=cE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=i.join("");K(lt,`Creating RPC '${e}' stream ${s}: ${f}`,c);const p=o.createWebChannel(f,c);this.T_(p);let g=!1,_=!1;const C=new Hj({Ho:A=>{_?K(lt,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(g||(K(lt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),K(lt,`RPC '${e}' stream ${s} sending:`,A),p.send(A))},Yo:()=>p.close()}),N=(A,E,y)=>{A.listen(E,b=>{try{y(b)}catch(R){setTimeout(()=>{throw R},0)}})};return N(p,lo.EventType.OPEN,()=>{_||(K(lt,`RPC '${e}' stream ${s} transport opened.`),C.s_())}),N(p,lo.EventType.CLOSE,()=>{_||(_=!0,K(lt,`RPC '${e}' stream ${s} transport closed`),C.__(),this.I_(p))}),N(p,lo.EventType.ERROR,A=>{_||(_=!0,Ar(lt,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),C.__(new Y(z.UNAVAILABLE,"The operation could not be completed")))}),N(p,lo.EventType.MESSAGE,A=>{var E;if(!_){const y=A.data[0];me(!!y,16349);const b=y,R=(b==null?void 0:b.error)||((E=b[0])===null||E===void 0?void 0:E.error);if(R){K(lt,`RPC '${e}' stream ${s} received error:`,R);const B=R.status;let F=function(S){const k=Oe[S];if(k!==void 0)return HE(k)}(B),T=R.message;F===void 0&&(F=z.INTERNAL,T="Unknown error status: "+B+" with message "+R.message),_=!0,C.__(new Y(F,T)),p.close()}else K(lt,`RPC '${e}' stream ${s} received:`,y),C.a_(y)}}),N(l,lE.STAT_EVENT,A=>{A.stat===Oh.PROXY?K(lt,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Oh.NOPROXY&&K(lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Sd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){return new QR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="PersistentStream";class i1{constructor(e,n,r,s,i,o,l,c){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new s1(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Hn(n.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new Y(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return K(Fy,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(K(Fy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Gj extends i1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=XR(this.serializer,e),r=function(i){if(!("targetChange"in i))return re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?xn(o.readTime):re.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Wh(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Fh(c)?{documents:tj(i,c)}:{query:nj(i,c).Vt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=qE(i,o.resumeToken);const d=zh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(re.min())>0){l.readTime=wc(i,o.snapshotVersion.toTimestamp());const d=zh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=sj(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Wh(this.serializer),n.removeTarget=e,this.k_(n)}}class qj extends i1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=ej(e.writeResults,e.commitTime),r=xn(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Wh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ZR(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{}class Qj extends Kj{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,$h(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(z.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Jo(e,$h(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(z.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Yj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Hn(n),this._a=!1):K("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="RemoteStore";class Jj{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Cs(this)&&(K(gs,"Restarting streams for network reachability change."),await async function(c){const d=se(c);d.Ia.add(4),await ya(d),d.Aa.set("Unknown"),d.Ia.delete(4),await uu(d)}(this))})}),this.Aa=new Yj(r,s)}}async function uu(t){if(Cs(t))for(const e of t.da)await e(!0)}async function ya(t){for(const e of t.da)await e(!1)}function o1(t,e){const n=se(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Vm(n)?Mm(n):Ri(n).x_()&&Om(n,e))}function Dm(t,e){const n=se(t),r=Ri(n);n.Ta.delete(e),r.x_()&&a1(n,e),n.Ta.size===0&&(r.x_()?r.B_():Cs(n)&&n.Aa.set("Unknown"))}function Om(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ri(t).H_(e)}function a1(t,e){t.Ra.$e(e),Ri(t).Y_(e)}function Mm(t){t.Ra=new WR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ri(t).start(),t.Aa.aa()}function Vm(t){return Cs(t)&&!Ri(t).M_()&&t.Ta.size>0}function Cs(t){return se(t).Ia.size===0}function l1(t){t.Ra=void 0}async function Xj(t){t.Aa.set("Online")}async function Zj(t){t.Ta.forEach((e,n)=>{Om(t,e)})}async function eD(t,e){l1(t),Vm(t)?(t.Aa.la(e),Mm(t)):t.Aa.set("Unknown")}async function tD(t,e,n){if(t.Aa.set("Online"),e instanceof GE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ta.delete(l),s.Ra.removeTarget(l))}(t,e)}catch(r){K(gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bc(t,r)}else if(e instanceof kl?t.Ra.Ye(e):e instanceof WE?t.Ra.it(e):t.Ra.et(e),!n.isEqual(re.min()))try{const r=await r1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Ra.Pt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ta.get(d);f&&i.Ta.set(d,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const f=i.Ta.get(c);if(!f)return;i.Ta.set(c,f.withResumeToken(tt.EMPTY_BYTE_STRING,f.snapshotVersion)),a1(i,c);const p=new fr(f.target,c,d,f.sequenceNumber);Om(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K(gs,"Failed to raise snapshot:",r),await bc(t,r)}}async function bc(t,e,n){if(!Pi(e))throw e;t.Ia.add(1),await ya(t),t.Aa.set("Offline"),n||(n=()=>r1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(gs,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await uu(t)})}function c1(t,e){return e().catch(n=>bc(t,n,e))}async function du(t){const e=se(t),n=Or(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:_m;for(;nD(e);)try{const s=await Vj(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,rD(e,s)}catch(s){await bc(e,s)}u1(e)&&d1(e)}function nD(t){return Cs(t)&&t.Pa.length<10}function rD(t,e){t.Pa.push(e);const n=Or(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function u1(t){return Cs(t)&&!Or(t).M_()&&t.Pa.length>0}function d1(t){Or(t).start()}async function sD(t){Or(t).na()}async function iD(t){const e=Or(t);for(const n of t.Pa)e.X_(n.mutations)}async function oD(t,e,n){const r=t.Pa.shift(),s=Im.from(r,e,n);await c1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await du(t)}async function aD(t,e){e&&Or(t).Z_&&await async function(r,s){if(function(o){return $R(o)&&o!==z.ABORTED}(s.code)){const i=r.Pa.shift();Or(r).N_(),await c1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await du(r)}}(t,e),u1(t)&&d1(t)}async function By(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),K(gs,"RemoteStore received new credentials");const r=Cs(n);n.Ia.add(3),await ya(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await uu(n)}async function lD(t,e){const n=se(t);e?(n.Ia.delete(2),await uu(n)):e||(n.Ia.add(2),await ya(n),n.Aa.set("Unknown"))}function Ri(t){return t.Va||(t.Va=function(n,r,s){const i=se(n);return i.ia(),new Gj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:Xj.bind(null,t),e_:Zj.bind(null,t),n_:eD.bind(null,t),J_:tD.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Vm(t)?Mm(t):t.Aa.set("Unknown")):(await t.Va.stop(),l1(t))})),t.Va}function Or(t){return t.ma||(t.ma=function(n,r,s){const i=se(n);return i.ia(),new qj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:sD.bind(null,t),n_:aD.bind(null,t),ea:iD.bind(null,t),ta:oD.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await du(t)):(await t.ma.stop(),t.Pa.length>0&&(K(gs,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Lm(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Um(t,e){if(Hn("AsyncQueue",`${e}: ${t}`),Pi(t))return new Y(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{static emptySet(e){return new si(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=co(),this.sortedSet=new Ae(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof si)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new si;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(){this.fa=new Ae(J.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):te(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class xi{constructor(e,n,r,s,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new xi(e,n,si.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&su(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class uD{constructor(){this.queries=$y(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=se(n),i=s.queries;s.queries=$y(),i.forEach((o,l)=>{for(const c of l.wa)c.onError(r)})})(this,new Y(z.ABORTED,"Firestore shutting down"))}}function $y(){return new Ts(t=>PE(t),su)}async function dD(t,e){const n=se(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new cD,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Um(o,`Initialization of query '${Ds(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&Fm(n)}async function hD(t,e){const n=se(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function fD(t,e){const n=se(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.wa)l.Ca(s)&&(r=!0);o.ya=s}}r&&Fm(n)}function mD(t,e,n){const r=se(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function Fm(t){t.Da.forEach(e=>{e.next()})}var Kh,Hy;(Hy=Kh||(Kh={})).Fa="default",Hy.Cache="cache";class pD{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new xi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Kh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.key=e}}class f1{constructor(e){this.key=e}}class gD{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ue(),this.mutatedKeys=ue(),this.Xa=RE(e),this.eu=new si(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new zy,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),_=iu(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),N=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let A=!1;g&&_?g.data.isEqual(_.data)?C!==N&&(r.track({type:3,doc:_}),A=!0):this.iu(g,_)||(r.track({type:2,doc:_}),A=!0,(c&&this.Xa(_,c)>0||d&&this.Xa(_,d)<0)&&(l=!0)):!g&&_?(r.track({type:0,doc:_}),A=!0):g&&!_&&(r.track({type:1,doc:g}),A=!0,(c||d)&&(l=!0)),A&&(_?(o=o.add(_),i=N?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{eu:o,ru:r,Ds:l,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((f,p)=>function(_,C){const N=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{At:A})}};return N(_)-N(C)}(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),s=s!=null&&s;const l=n&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,d=c!==this.Ya;return this.Ya=c,o.length!==0||d?{snapshot:new xi(this.query,e.eu,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new zy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ue(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new f1(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new h1(r))}),n}uu(e){this.Ha=e.qs,this.Za=ue();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return xi.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Bm="SyncEngine";class vD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class yD{constructor(e){this.key=e,this.lu=!1}}class xD{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Ts(l=>PE(l),su),this.Tu=new Map,this.Iu=new Set,this.du=new Ae(J.comparator),this.Eu=new Map,this.Au=new Am,this.Ru={},this.Vu=new Map,this.mu=yi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function _D(t,e,n=!0){const r=x1(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await m1(r,e,n,!0),s}async function wD(t,e){const n=x1(t);await m1(n,e,!0,!1)}async function m1(t,e,n,r){const s=await Lj(t.localStore,yn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await ED(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&o1(t.remoteStore,s),l}async function ED(t,e,n,r,s){t.gu=(p,g,_)=>async function(N,A,E,y){let b=A.view.nu(E);b.Ds&&(b=await My(N.localStore,A.query,!1).then(({documents:T})=>A.view.nu(T,b)));const R=y&&y.targetChanges.get(A.targetId),B=y&&y.targetMismatches.get(A.targetId)!=null,F=A.view.applyChanges(b,N.isPrimaryClient,R,B);return Gy(N,A.targetId,F._u),F.snapshot}(t,p,g,_);const i=await My(t.localStore,e,!0),o=new gD(e,i.qs),l=o.nu(i.documents),c=va.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);Gy(t,n,d._u);const f=new vD(e,n,o);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function bD(t,e,n){const r=se(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!su(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Gh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Dm(r.remoteStore,s.targetId),Qh(r,s.targetId)}).catch(Ai)):(Qh(r,s.targetId),await Gh(r.localStore,s.targetId,!0))}async function TD(t,e){const n=se(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dm(n.remoteStore,r.targetId))}async function SD(t,e,n){const r=RD(t);try{const s=await function(o,l){const c=se(o),d=Ee.now(),f=l.reduce((_,C)=>_.add(C.key),ue());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let C=Wn(),N=ue();return c.Os.getEntries(_,f).next(A=>{C=A,C.forEach((E,y)=>{y.isValidDocument()||(N=N.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,C)).next(A=>{p=A;const E=[];for(const y of l){const b=LR(y,p.get(y.key).overlayedDocument);b!=null&&E.push(new Ss(y.key,b,TE(b.value.mapValue),Vn.exists(!0)))}return c.mutationQueue.addMutationBatch(_,d,E,l)}).next(A=>{g=A;const E=A.applyToLocalDocumentSet(p,N);return c.documentOverlayCache.saveOverlays(_,A.batchId,E)})}).then(()=>({batchId:g.batchId,changes:DE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.Ru[o.currentUser.toKey()];d||(d=new Ae(ae)),d=d.insert(l,c),o.Ru[o.currentUser.toKey()]=d}(r,s.batchId,n),await xa(r,s.changes),await du(r.remoteStore)}catch(s){const i=Um(s,"Failed to persist write");n.reject(i)}}async function p1(t,e){const n=se(t);try{const r=await Oj(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?me(o.lu,14607):s.removedDocuments.size>0&&(me(o.lu,42227),o.lu=!1))}),await xa(n,r,e)}catch(r){await Ai(r)}}function Wy(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=se(o);c.onlineState=l;let d=!1;c.queries.forEach((f,p)=>{for(const g of p.wa)g.va(l)&&(d=!0)}),d&&Fm(c)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CD(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Ae(J.comparator);o=o.insert(i,dt.newNoDocument(i,re.min()));const l=ue().add(i),c=new lu(re.min(),new Map,new Ae(ae),o,l);await p1(r,c),r.du=r.du.remove(i),r.Eu.delete(e),zm(r)}else await Gh(r.localStore,e,!1).then(()=>Qh(r,e,n)).catch(Ai)}async function ID(t,e){const n=se(t),r=e.batch.batchId;try{const s=await Dj(n.localStore,e);v1(n,r,null),g1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xa(n,s)}catch(s){await Ai(s)}}async function kD(t,e,n){const r=se(t);try{const s=await function(o,l){const c=se(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(me(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);v1(r,e,n),g1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xa(r,s)}catch(s){await Ai(s)}}function g1(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function v1(t,e,n){const r=se(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function Qh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||y1(t,r)})}function y1(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Dm(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),zm(t))}function Gy(t,e,n){for(const r of n)r instanceof h1?(t.Au.addReference(r.key,e),ND(t,r)):r instanceof f1?(K(Bm,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||y1(t,r.key)):te(19791,{yu:r})}function ND(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(K(Bm,"New document in limbo: "+n),t.Iu.add(r),zm(t))}function zm(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new J(Ce.fromString(e)),r=t.mu.next();t.Eu.set(r,new yD(n)),t.du=t.du.insert(n,r),o1(t.remoteStore,new fr(yn(Sm(n.path)),r,"TargetPurposeLimboResolution",eu.ue))}}async function xa(t,e,n){const r=se(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((l,c)=>{o.push(r.gu(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Rm.Es(c.targetId,d);i.push(p)}}))}),await Promise.all(o),r.hu.J_(s),await async function(c,d){const f=se(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(d,g=>U.forEach(g.Is,_=>f.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>U.forEach(g.ds,_=>f.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!Pi(p))throw p;K(jm,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const _=f.Fs.get(g),C=_.snapshotVersion,N=_.withLastLimboFreeSnapshotVersion(C);f.Fs=f.Fs.insert(g,N)}}}(r.localStore,i))}async function AD(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){K(Bm,"User change. New user:",e.toKey());const r=await n1(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(l=>{l.forEach(c=>{c.reject(new Y(z.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xa(n,r.Bs)}}function PD(t,e){const n=se(t),r=n.Eu.get(e);if(r&&r.lu)return ue().add(r.key);{let s=ue();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const l=n.Pu.get(o);s=s.unionWith(l.view.tu)}return s}}function x1(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=p1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CD.bind(null,e),e.hu.J_=fD.bind(null,e.eventManager),e.hu.pu=mD.bind(null,e.eventManager),e}function RD(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ID.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kD.bind(null,e),e}class Tc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return jj(this.persistence,new Aj,e.initialUser,this.serializer)}Du(e){return new t1(Pm.Vi,this.serializer)}bu(e){return new Fj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tc.provider={build:()=>new Tc};class jD extends Tc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){me(this.persistence.referenceDelegate instanceof Ec,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new pj(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?wt.withCacheSize(this.cacheSizeBytes):wt.DEFAULT;return new t1(r=>Ec.Vi(r,n),this.serializer)}}class Yh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=AD.bind(null,this.syncEngine),await lD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uD}()}createDatastore(e){const n=cu(e.databaseInfo.databaseId),r=function(i){return new Wj(i)}(e.databaseInfo);return function(i,o,l,c){return new Qj(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new Jj(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Wy(this.syncEngine,n,0),function(){return Uy.C()?new Uy:new Bj}())}createSyncEngine(e,n){return function(s,i,o,l,c,d,f){const p=new xD(s,i,o,l,c,d);return f&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=se(s);K(gs,"RemoteStore shutting down."),i.Ia.add(5),await ya(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Yh.provider={build:()=>new Yh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="FirestoreClient";class OD{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ct.UNAUTHENTICATED,this.clientId=ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K(Mr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(Mr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Um(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cd(t,e){t.asyncQueue.verifyOperationInProgress(),K(Mr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await n1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Ar("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{K("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Ar("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function qy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await MD(t);K(Mr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>By(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>By(e.remoteStore,s)),t._onlineComponents=e}async function MD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(Mr,"Using user provided OfflineComponentProvider");try{await Cd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ar("Error using user provided cache. Falling back to memory cache: "+n),await Cd(t,new Tc)}}else K(Mr,"Using default OfflineComponentProvider"),await Cd(t,new jD(void 0));return t._offlineComponents}async function _1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(Mr,"Using user provided OnlineComponentProvider"),await qy(t,t._uninitializedComponentsProvider._online)):(K(Mr,"Using default OnlineComponentProvider"),await qy(t,new Yh))),t._onlineComponents}function VD(t){return _1(t).then(e=>e.syncEngine)}async function LD(t){const e=await _1(t),n=e.eventManager;return n.onListen=_D.bind(null,e.syncEngine),n.onUnlisten=bD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=wD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TD.bind(null,e.syncEngine),n}function UD(t,e,n={}){const r=new Cr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const f=new DD({next:g=>{f.Ou(),o.enqueueAndForget(()=>hD(i,p));const _=g.docs.has(l);!_&&g.fromCache?d.reject(new Y(z.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&c&&c.source==="server"?d.reject(new Y(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new pD(Sm(l.path),f,{includeMetadataChanges:!0,ka:!0});return dD(i,p)}(await LD(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="firestore.googleapis.com",Qy=!0;class Yy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E1,this.ssl=Qy}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Qy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=e1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fj)throw new Y(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $m{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BP;switch(r.type){case"firstParty":return new WP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ky.get(n);r&&(K("ComponentProvider","Removing Datastore"),Ky.delete(n),r.terminate())}(this),Promise.resolve()}}function FD(t,e,n,r={}){var s;t=Jo(t,$m);const i=Ci(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(qw(`https://${c}`),Kw("Firestore",!0)),o.host!==E1&&o.host!==c&&Ar("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!Nr(d,l)&&(t._setSettings(d),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=ct.MOCK_USER;else{f=kI(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Y(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ct(g)}t._authCredentials=new zP(new hE(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hm(this.firestore,e,this._query)}}class qe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qe(this.firestore,e,this._key)}toJSON(){return{type:qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(pa(n,qe._jsonSchema))return new qe(e,r||null,new J(Ce.fromString(n.referencePath)))}}qe._jsonSchemaVersion="firestore/documentReference/1.0",qe._jsonSchema={type:Ve("string",qe._jsonSchemaVersion),referencePath:Ve("string")};class sa extends Hm{constructor(e,n,r){super(e,n,Sm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new J(e))}withConverter(e){return new sa(this.firestore,e,this._path)}}function b1(t,e,...n){if(t=mt(t),arguments.length===1&&(e=ym.newId()),YP("doc","path",e),t instanceof $m){const r=Ce.fromString(e,...n);return uy(r),new qe(t,null,new J(r))}{if(!(t instanceof qe||t instanceof sa))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return uy(r),new qe(t.firestore,t instanceof sa?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="AsyncQueue";class Xy{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new s1(this,"async_queue_retry"),this.oc=()=>{const r=Sd();r&&K(Jy,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Sd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Sd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Cr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Pi(e))throw e;K(Jy,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Hn("INTERNAL UNHANDLED ERROR: ",Zy(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Lm.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&te(47125,{hc:Zy(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Zy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Wm extends $m{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Xy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xy(e),this._firestoreClient=void 0,await e}}}function BD(t,e){const n=typeof t=="object"?t:em(),r=typeof t=="string"?t:pc,s=Es(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=CI("firestore");i&&FD(s,...i)}return s}function T1(t){if(t._terminated)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zD(t),t._firestoreClient}function zD(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,d,f){return new lR(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,w1(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new OD(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $t(tt.fromBase64String(e))}catch(n){throw new Y(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $t(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pa(e,$t._jsonSchema))return $t.fromBase64String(e.bytes)}}$t._jsonSchemaVersion="firestore/bytes/1.0",$t._jsonSchema={type:Ve("string",$t._jsonSchemaVersion),bytes:Ve("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_n._jsonSchemaVersion}}static fromJSON(e){if(pa(e,_n._jsonSchema))return new _n(e.latitude,e.longitude)}}_n._jsonSchemaVersion="firestore/geoPoint/1.0",_n._jsonSchema={type:Ve("string",_n._jsonSchemaVersion),latitude:Ve("number"),longitude:Ve("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:wn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pa(e,wn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new wn(e.vectorValues);throw new Y(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wn._jsonSchemaVersion="firestore/vectorValue/1.0",wn._jsonSchema={type:Ve("string",wn._jsonSchemaVersion),vectorValues:Ve("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=/^__.*__$/;class HD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,n,this.fieldTransforms):new ga(e,this.data,n,this.fieldTransforms)}}function C1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ec:t})}}class qm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new qm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Sc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(C1(this.Ec)&&$D.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class WD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||cu(e)}Dc(e,n,r,s=!1){return new qm({Ec:e,methodName:n,bc:r,path:Xe.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function GD(t){const e=t._freezeSettings(),n=cu(t._databaseId);return new WD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qD(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);A1("Data must be an object, but it was:",o,r);const l=k1(r,o);let c,d;if(i.merge)c=new nn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=KD(e,p,n);if(!o.contains(g))throw new Y(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);YD(f,g)||f.push(g)}c=new nn(f),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new HD(new zt(l),c,d)}function I1(t,e){if(N1(t=mt(t)))return A1("Unsupported field value:",e,t),k1(t,e);if(t instanceof S1)return function(r,s){if(!C1(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=I1(l,s.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ee.fromDate(r);return{timestampValue:wc(s.serializer,i)}}if(r instanceof Ee){const i=new Ee(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wc(s.serializer,i)}}if(r instanceof _n)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $t)return{bytesValue:qE(s.serializer,r._byteString)};if(r instanceof qe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Nm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof wn)return function(o,l){return{mapValue:{fields:{[EE]:{stringValue:bE},[gc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.wc("VectorValues must only contain numeric values.");return Cm(l.serializer,d)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${xm(r)}`)}(t,e)}function k1(t,e){const n={};return gE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(t,(r,s)=>{const i=I1(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function N1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ee||t instanceof _n||t instanceof $t||t instanceof qe||t instanceof S1||t instanceof wn)}function A1(t,e,n){if(!N1(n)||!mE(n)){const r=xm(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function KD(t,e,n){if((e=mt(e))instanceof Gm)return e._internalPath;if(typeof e=="string")return P1(t,e);throw Sc("Field path arguments must be of type string or ",t,!1,void 0,n)}const QD=new RegExp("[~\\*/\\[\\]]");function P1(t,e,n){if(e.search(QD)>=0)throw Sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gm(...e.split("."))._internalPath}catch{throw Sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Y(z.INVALID_ARGUMENT,l+t+c)}function YD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(j1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JD extends R1{data(){return super.data()}}function j1(t,e){return typeof e=="string"?P1(t,e):e instanceof Gm?e._internalPath:e._delegate._internalPath}class XD{convertValue(e,n="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return bs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[gc].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>je(o.doubleValue));return new wn(i)}convertGeoPoint(e){return new _n(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=nu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zo(e));default:return null}}convertTimestamp(e){const n=Rr(e);return new Ee(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);me(ZE(r),9688,{name:e});const s=new ea(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||Hn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class ho{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ss extends R1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(j1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ss._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",ss._jsonSchema={type:Ve("string",ss._jsonSchemaVersion),bundleSource:Ve("string","DocumentSnapshot"),bundleName:Ve("string"),bundle:Ve("string")};class Nl extends ss{data(e={}){return super.data(e)}}class No{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ho(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Nl(this._firestore,this._userDataWriter,r.key,r,new ho(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Nl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ho(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Nl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ho(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:eO(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=No._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ym.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t){t=Jo(t,qe);const e=Jo(t.firestore,Wm);return UD(T1(e),t._key).then(n=>iO(e,t,n))}No._jsonSchemaVersion="firestore/querySnapshot/1.0",No._jsonSchema={type:Ve("string",No._jsonSchemaVersion),bundleSource:Ve("string","QuerySnapshot"),bundleName:Ve("string"),bundle:Ve("string")};class nO extends XD{constructor(e){super(),this.firestore=e}convertBytes(e){return new $t(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}}function rO(t,e,n){t=Jo(t,qe);const r=Jo(t.firestore,Wm),s=ZD(t.converter,e);return sO(r,[qD(GD(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Vn.none())])}function sO(t,e){return function(r,s){const i=new Cr;return r.asyncQueue.enqueueAndForget(async()=>SD(await VD(r),s,i)),i.promise}(T1(t),e)}function iO(t,e,n){const r=n.docs.get(e._key),s=new nO(t);return new ss(t,s,e._key,r,new ho(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ni=s})(Ii),En(new ln("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Wm(new $P(r.getProvider("auth-internal")),new GP(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Y(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ea(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Gt(iy,oy,e),Gt(iy,oy,"esm2017")})();const oO={apiKey:"AIzaSyCiwB1htquwW3GT5h57rwM35Ei4T9MG0_8",authDomain:"seamunssite.firebaseapp.com",projectId:"seamunssite",storageBucket:"seamunssite.firebasestorage.app",messagingSenderId:"834316126529",appId:"1:834316126529:web:983e1745ef677df16cf9c0",measurementId:"G-GJZXN823XL"},aO=!0,_i=aO?t0(oO):null,dn=_i?y2(_i):null,Cc=_i?BD(_i):null;_i&&typeof window<"u"&&VP(_i);const Km=I.createContext(null);function ex(t){return t.includes("auth/invalid-credential")||t.includes("auth/wrong-password")?"Invalid email or password.":t.includes("auth/user-not-found")?"No account found for this email.":t.includes("auth/email-already-in-use")?"This email is already registered.":t.includes("auth/weak-password")?"Password should be at least 6 characters.":t.includes("auth/invalid-email")?"Please enter a valid email address.":t.includes("auth/too-many-requests")?"Too many attempts. Try again later.":t}function lO(t){return t?{uid:t.uid,name:t.displayName??null,email:t.email??null,picture:t.photoURL??null}:null}function cO({children:t}){const[e,n]=I.useState(null),[r,s]=I.useState(!0),[i,o]=I.useState(null);I.useEffect(()=>{if(!dn)return;const _=oA(dn,C=>{n(lO(C)),s(!1)});return()=>_()},[]);const l=I.useCallback(async()=>{if(dn){o(null),s(!0);try{const _=new An;await IA(dn,_)}catch(_){n(null),o(_ instanceof Error?_.message:"Google sign-in failed")}finally{s(!1)}}},[]),c=I.useCallback(async(_,C)=>{if(dn){o(null),s(!0);try{await tA(dn,_.trim(),C)}catch(N){const A=N instanceof Error?N.message:"Sign-in failed";o(A.includes("auth/")?ex(A):A)}finally{s(!1)}}},[]),d=I.useCallback(async(_,C,N)=>{if(dn){o(null),s(!0);try{const A=await eA(dn,_.trim(),C);N!=null&&N.trim()&&A.user&&await rA(A.user,{displayName:N.trim()})}catch(A){const E=A instanceof Error?A.message:"Sign-up failed";o(E.includes("auth/")?ex(E):E)}finally{s(!1)}}},[]),f=I.useCallback(async()=>{dn&&await aA(dn),n(null),o(null)},[]),p=I.useCallback(()=>o(null),[]),g={user:e,isAuthenticated:!!e,isLoading:r,login:l,loginWithEmail:c,signUpWithEmail:d,logout:f,authError:i,clearAuthError:p};return u.jsx(Km.Provider,{value:g,children:t})}const D1={user:null,isAuthenticated:!1,isLoading:!1,login:async()=>{},loginWithEmail:async()=>{},signUpWithEmail:async()=>{},logout:async()=>{},authError:null,clearAuthError:()=>{}};function uO({children:t}){return u.jsx(Km.Provider,{value:D1,children:t})}function Qm(){return I.useContext(Km)??D1}const tx="seamuns-dashboard-theme",nx="seamuns-dashboard-color-mode",rx="seamuns-dashboard-color-theme",O1=[{id:"default",label:"Default",emoji:"",brand:"#2563eb"},{id:"health",label:"Health",emoji:"",brand:"#0d9488"},{id:"war",label:"War & conflict",emoji:"",brand:"#b91c1c"},{id:"women",label:"Women",emoji:"",brand:"#a855f7"},{id:"nature",label:"Nature",emoji:"",brand:"#16a34a"},{id:"peace",label:"Peace",emoji:"",brand:"#0284c7"},{id:"economy",label:"Economy",emoji:"",brand:"#d97706"},{id:"education",label:"Education",emoji:"",brand:"#4f46e5"},{id:"rights",label:"Human rights",emoji:"",brand:"#dc2626"}],Jh="gold-blue",M1=[{id:"gold-blue",label:"Gold & Blue",emoji:""},{id:"red",label:"Red",emoji:""},{id:"orange",label:"Orange",emoji:""},{id:"yellow",label:"Yellow",emoji:""},{id:"green",label:"Green",emoji:""},{id:"light-blue",label:"Light Blue",emoji:""},{id:"blue",label:"Blue",emoji:""},{id:"purple",label:"Purple",emoji:""},{id:"pink",label:"Pink",emoji:""},{id:"brown",label:"Brown",emoji:""},{id:"monochromatic",label:"Monochromatic",emoji:""}],V1=I.createContext(null),dO=t=>O1.some(e=>e.id===t),hO=t=>M1.some(e=>e.id===t),fO=t=>t==="light"||t==="dark";function mO({children:t}){const[e,n]=I.useState(()=>{if(typeof window>"u")return"default";const f=localStorage.getItem(tx);return f&&dO(f)?f:"default"}),[r,s]=I.useState(()=>{if(typeof window>"u")return Jh;const f=localStorage.getItem(rx);return f&&hO(f)?f:Jh}),[i,o]=I.useState(()=>{if(typeof window>"u")return"light";const f=localStorage.getItem(nx);return f&&fO(f)?f:"light"});I.useEffect(()=>{document.documentElement.setAttribute("data-theme",e),localStorage.setItem(tx,e)},[e]),I.useEffect(()=>{document.documentElement.setAttribute("data-color-theme",r),localStorage.setItem(rx,r)},[r]),I.useEffect(()=>{document.documentElement.setAttribute("data-color-mode",i),localStorage.setItem(nx,i)},[i]);const l=f=>n(f),c=f=>s(f),d=f=>o(f);return u.jsx(V1.Provider,{value:{themeId:e,setThemeId:l,themes:O1,colorThemeId:r,setColorThemeId:c,colorThemes:M1,colorMode:i,setColorMode:d},children:t})}function pO(){const t=I.useContext(V1);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=I.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>I.createElement("svg",{ref:c,...vO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:L1("lucide",s),...l},[...o.map(([d,f])=>I.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=(t,e)=>{const n=I.forwardRef(({className:r,...s},i)=>I.createElement(yO,{ref:i,iconNode:e,className:L1(`lucide-${gO(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=Z("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=Z("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=Z("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=Z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=Z("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=Z("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=Z("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=Z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=Z("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=Z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=Z("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Z("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=Z("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=Z("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=Z("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=Z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=Z("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=Z("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=Z("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=Z("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=Z("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=Z("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=Z("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=Z("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=Z("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=Z("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=Z("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=Z("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=Z("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=Z("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=Z("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=Z("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=Z("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=Z("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=Z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=Z("Vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function lx(){const{login:t,loginWithEmail:e,signUpWithEmail:n,logout:r,isAuthenticated:s,user:i,isLoading:o,authError:l,clearAuthError:c}=Qm(),[d,f]=I.useState(!1),[p,g]=I.useState("login"),[_,C]=I.useState(""),[N,A]=I.useState(""),[E,y]=I.useState(""),b=I.useRef(null);I.useEffect(()=>{if(!d)return;const F=T=>{b.current&&!b.current.contains(T.target)&&f(!1)};return document.addEventListener("click",F),()=>document.removeEventListener("click",F)},[d]);const R=()=>{f(F=>!F),d||(c(),C(""),A(""),y(""))},B=F=>{F.preventDefault(),p==="login"?e(_,N):n(_,N,E||void 0)};return o&&!d?u.jsx("span",{className:"text-xs text-[var(--text-muted)] px-2 py-1.5",children:"Loading"}):s&&i?u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-xs text-[var(--text-muted)]",children:[i.picture?u.jsx("img",{src:i.picture,alt:i.name??"User",className:"w-6 h-6 rounded-lg object-cover border border-[var(--border)]"}):u.jsx("div",{className:"w-6 h-6 rounded-lg bg-[var(--brand-soft)] flex items-center justify-center",children:u.jsx(pu,{className:"w-3 h-3 text-[var(--brand)]"})}),u.jsx("span",{className:"text-[var(--text)] max-w-[120px] truncate",children:i.name??i.email})]}),u.jsxs("button",{type:"button",onClick:()=>r(),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors",children:[u.jsx(kO,{className:"w-3 h-3"}),"Log out"]})]}):u.jsxs("div",{className:"relative",ref:b,children:[u.jsxs("button",{type:"button",onClick:R,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--brand)] text-white hover:opacity-90 transition-opacity",children:[u.jsx(IO,{className:"w-3 h-3"}),"Log in / Sign up",u.jsx(ji,{className:`w-3 h-3 transition-transform ${d?"rotate-180":""}`})]}),d&&u.jsxs("div",{className:"absolute right-0 top-full mt-1 z-50 w-72 rounded-lg border border-[var(--border)] bg-[var(--bg-elevated)] shadow-lg p-3",children:[u.jsxs("button",{type:"button",onClick:()=>{t(),f(!1)},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-[var(--text)] bg-[var(--bg-card)] hover:bg-[var(--border)] border border-[var(--border)] transition-colors",children:[u.jsx(B1,{className:"w-4 h-4 text-[var(--brand)]"}),"Continue with Gmail"]}),u.jsx("div",{className:"my-3 border-t border-[var(--border)]"}),u.jsxs("div",{className:"flex gap-1 p-0.5 rounded-lg bg-[var(--bg-card)] border border-[var(--border)]",children:[u.jsx("button",{type:"button",onClick:()=>{g("login"),c()},className:`flex-1 px-2 py-1.5 rounded-md text-xs font-medium transition-colors ${p==="login"?"bg-[var(--brand)] text-white":"text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:"Log in"}),u.jsx("button",{type:"button",onClick:()=>{g("signup"),c()},className:`flex-1 px-2 py-1.5 rounded-md text-xs font-medium transition-colors ${p==="signup"?"bg-[var(--brand)] text-white":"text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:"Sign up"})]}),u.jsxs("form",{onSubmit:B,className:"space-y-2 mt-2",children:[p==="signup"&&u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Name (optional)"}),u.jsx("input",{type:"text",value:E,onChange:F=>y(F.target.value),placeholder:"Your name",className:"mt-0.5 w-full px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)]"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Email"}),u.jsx("input",{type:"email",value:_,onChange:F=>C(F.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email",className:"mt-0.5 w-full px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)]"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Password"}),u.jsx("input",{type:"password",value:N,onChange:F=>A(F.target.value),placeholder:p==="signup"?"At least 6 characters":"",required:!0,minLength:p==="signup"?6:void 0,autoComplete:p==="login"?"current-password":"new-password",className:"mt-0.5 w-full px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)]"})]}),l&&u.jsx("p",{className:"text-xs text-[var(--danger)]",children:l}),u.jsx("button",{type:"submit",disabled:o,className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium bg-[var(--brand)] text-white hover:opacity-90 transition-opacity disabled:opacity-60",children:o?"Please wait":p==="login"?"Log in with email":"Create account"})]})]})]})}function cx(){const{colorThemeId:t,setColorThemeId:e,colorThemes:n,colorMode:r,setColorMode:s,setThemeId:i}=pO(),[o,l]=I.useState(!1),c=I.useRef(null);I.useEffect(()=>{function f(p){c.current&&!c.current.contains(p.target)&&l(!1)}return o&&document.addEventListener("click",f),()=>document.removeEventListener("click",f)},[o]);const d=n.find(f=>f.id===t)??n[0];return u.jsxs("div",{className:"relative",ref:c,children:[u.jsxs("button",{type:"button",onClick:()=>l(!o),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text)] hover:bg-[var(--bg-card)] border border-[var(--border)] bg-[var(--bg-elevated)] transition-colors","aria-expanded":o,"aria-haspopup":"listbox","aria-label":"Theme",children:[u.jsx(PO,{className:"w-4 h-4 flex-shrink-0 text-[var(--text-muted)]"}),u.jsx("span",{className:"hidden sm:inline",children:"Theme"}),u.jsx("span",{className:"text-[var(--brand)]",title:d.label,"aria-hidden":!0,children:d.emoji}),u.jsx(ji,{className:`w-4 h-4 flex-shrink-0 text-[var(--text-muted)] transition-transform ${o?"rotate-180":""}`,"aria-hidden":!0})]}),o&&u.jsxs("div",{className:"absolute right-0 top-full mt-1.5 py-2 rounded-xl border border-[var(--border)] bg-[var(--bg-card)] shadow-[var(--shadow-card)] shadow-lg z-50 min-w-[200px]",role:"dialog","aria-label":"Theme options",children:[u.jsx("div",{className:"px-3 py-1.5 text-xs font-medium text-[var(--text-muted)] border-b border-[var(--border)] mb-2",children:"Appearance"}),u.jsxs("div",{className:"flex gap-1 px-2 pb-2",children:[u.jsxs("button",{type:"button",onClick:()=>s("light"),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${r==="light"?"bg-[var(--brand)] text-white shadow-sm":"text-[var(--text-muted)] hover:bg-[var(--bg-elevated)] hover:text-[var(--text)]"}`,"aria-pressed":r==="light",children:[u.jsx(VO,{className:"w-4 h-4"}),"Light"]}),u.jsxs("button",{type:"button",onClick:()=>s("dark"),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${r==="dark"?"bg-[var(--brand)] text-white shadow-sm":"text-[var(--text-muted)] hover:bg-[var(--bg-elevated)] hover:text-[var(--text)]"}`,"aria-pressed":r==="dark",children:[u.jsx(AO,{className:"w-4 h-4"}),"Dark"]})]}),u.jsxs("div",{className:"px-3 py-1.5 text-xs font-medium text-[var(--text-muted)] border-b border-[var(--border)] mb-2",children:["Theme color ",u.jsx("span",{className:"font-normal",children:"(default: Gold & Blue)"})]}),u.jsx("div",{className:"max-h-[260px] overflow-y-auto",role:"listbox","aria-label":"Theme color",children:n.map(f=>{const p=f.id===Jh,g=t===f.id;return u.jsxs("button",{type:"button",role:"option","aria-selected":g,onClick:()=>{e(f.id),i("default"),l(!1)},className:`flex items-center gap-2 w-full px-3 py-2 text-left text-sm transition-colors whitespace-nowrap min-w-0 ${g?"bg-[var(--brand)] text-white":"text-[var(--text)] hover:bg-[var(--bg-elevated)]"}`,children:[u.jsx("span",{className:"text-base flex-shrink-0","aria-hidden":!0,children:f.emoji}),u.jsx("span",{className:"truncate",children:f.label}),p&&u.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded text-[10px] font-medium flex-shrink-0 ${g?"bg-white/20 text-white":"bg-[var(--accent-soft)] text-[var(--accent)]"}`,children:"Default"}),g&&u.jsx("span",{className:"ml-auto text-white","aria-hidden":!0,children:""})]},f.id)})})]})]})}function K1({className:t="h-8 w-auto"}){return u.jsx("img",{src:"/logo.png",alt:"SEAMUNs",className:t,fetchPriority:"high"})}const ux=[{to:"/",label:" Home"},{to:"/chair",label:" Chair Room"},{to:"/delegate",label:" Delegate"}];function UO(){const[t,e]=I.useState(!1),n=_s(),r=()=>e(!1);return I.useEffect(()=>{r()},[n.pathname]),u.jsxs("div",{className:"min-h-screen flex flex-col",children:[u.jsxs("header",{className:"sticky top-0 z-50 border-b border-[var(--border)] bg-[var(--bg-base)]/95 backdrop-blur-sm shadow-[0_1px_0_0_var(--border)]",children:[u.jsxs("div",{className:"max-w-[1600px] mx-auto px-2 sm:px-4 py-1.5 sm:py-2 flex items-center justify-between gap-2 min-h-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3 min-w-0",children:[u.jsxs(hd,{to:"/",className:"font-semibold text-base sm:text-lg md:text-xl text-[var(--text)] hover:text-[var(--brand)] transition-colors flex items-center gap-1.5 sm:gap-2 whitespace-nowrap min-w-0 py-1",onClick:r,children:[u.jsx(K1,{className:"h-5 sm:h-7 w-auto flex-shrink-0"}),u.jsx("span",{className:"hidden sm:inline truncate",children:"SEAMUNs Dashboard"}),u.jsx("span",{className:"sm:hidden truncate",children:"SEAMUNs"}),u.jsx("span",{className:"text-[var(--brand)]/80 text-sm hidden sm:inline",children:""})]}),u.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[var(--text-muted)] hover:text-[var(--brand)] transition-colors hidden md:inline",children:"seamuns.site"})]}),u.jsxs("div",{className:"hidden md:flex items-center gap-1.5",children:[u.jsx(cx,{}),u.jsx("nav",{className:"flex items-center gap-0.5 p-0.5 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] flex-nowrap",children:ux.map(({to:s,label:i})=>u.jsx(hd,{to:s,className:({isActive:o})=>`px-2.5 py-1 rounded-md text-xs font-medium transition-colors whitespace-nowrap ${o?"bg-[var(--brand)] text-white shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:i},s))}),u.jsx(lx,{})]}),u.jsxs("div",{className:"flex md:hidden items-center gap-0.5",children:[u.jsx(cx,{}),u.jsx("button",{type:"button",onClick:()=>e(!t),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors","aria-expanded":t,"aria-label":t?"Close menu":"Open menu",children:t?u.jsx(gu,{className:"w-4 h-4"}):u.jsx(NO,{className:"w-4 h-4"})}),u.jsx(lx,{})]})]}),t&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40 bg-black/30 md:hidden",onClick:r,"aria-hidden":!0}),u.jsx("div",{className:"fixed top-11 right-0 bottom-0 left-0 z-50 md:hidden bg-[var(--bg-elevated)] border-l border-[var(--border)] shadow-xl overflow-y-auto",role:"dialog","aria-label":"Navigation menu",children:u.jsxs("nav",{className:"flex flex-col p-4 gap-1",children:[ux.map(({to:s,label:i})=>u.jsx(hd,{to:s,onClick:r,className:({isActive:o})=>`px-4 py-3 rounded-lg text-sm font-medium transition-colors ${o?"bg-[var(--brand)] text-white":"text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:i},s)),u.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",onClick:r,className:"px-4 py-3 rounded-lg text-sm text-[var(--text-muted)] hover:text-[var(--brand)] hover:bg-[var(--bg-card)]",children:"seamuns.site "})]})})]})]}),u.jsx("main",{className:"main-content flex-1 min-w-0",children:u.jsx(nI,{})}),u.jsxs("footer",{className:"border-t border-[var(--border)] py-2 sm:py-3 px-3 sm:px-4 text-center text-[10px] sm:text-xs text-[var(--text-muted)] bg-[var(--bg-elevated)]/50",children:["Part of ",u.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",className:"text-[var(--brand)] hover:underline",children:"SEAMUNs"}),"  Model UN conferences across South East Asia"]})]})}const FO={Afghanistan:"AF",Albania:"AL",Algeria:"DZ",Andorra:"AD",Angola:"AO","Antigua and Barbuda":"AG",Argentina:"AR",Armenia:"AM",Australia:"AU",Austria:"AT",Azerbaijan:"AZ",Bahamas:"BS",Bahrain:"BH",Bangladesh:"BD",Barbados:"BB",Belarus:"BY",Belgium:"BE",Belize:"BZ",Benin:"BJ",Bhutan:"BT",Bolivia:"BO","Bosnia and Herzegovina":"BA",Botswana:"BW",Brazil:"BR","Brunei Darussalam":"BN",Bulgaria:"BG","Burkina Faso":"BF",Burundi:"BI","Cabo Verde":"CV",Cambodia:"KH",Cameroon:"CM",Canada:"CA","Central African Republic":"CF",Chad:"TD",Chile:"CL",China:"CN",Colombia:"CO",Comoros:"KM",Congo:"CG","Costa Rica":"CR",Croatia:"HR",Cuba:"CU",Cyprus:"CY","Czech Republic":"CZ","Cte d'Ivoire":"CI","Democratic People's Republic of Korea":"KP","Democratic Republic of the Congo":"CD",Denmark:"DK",Djibouti:"DJ",Dominica:"DM","Dominican Republic":"DO",Ecuador:"EC",Egypt:"EG","El Salvador":"SV","Equatorial Guinea":"GQ",Eritrea:"ER",Estonia:"EE",Eswatini:"SZ",Ethiopia:"ET",Fiji:"FJ",Finland:"FI",France:"FR",Gabon:"GA",Gambia:"GM",Georgia:"GE",Germany:"DE",Ghana:"GH",Greece:"GR",Grenada:"GD",Guatemala:"GT",Guinea:"GN","Guinea-Bissau":"GW",Guyana:"GY",Haiti:"HT",Honduras:"HN",Hungary:"HU",Iceland:"IS",India:"IN",Indonesia:"ID",Iran:"IR",Iraq:"IQ",Ireland:"IE",Israel:"IL",Italy:"IT",Jamaica:"JM",Japan:"JP",Jordan:"JO",Kazakhstan:"KZ",Kenya:"KE",Kiribati:"KI",Kuwait:"KW",Kyrgyzstan:"KG","Lao People's Democratic Republic":"LA",Latvia:"LV",Lebanon:"LB",Lesotho:"LS",Liberia:"LR",Libya:"LY",Liechtenstein:"LI",Lithuania:"LT",Luxembourg:"LU",Madagascar:"MG",Malawi:"MW",Malaysia:"MY",Maldives:"MV",Mali:"ML",Malta:"MT","Marshall Islands":"MH",Mauritania:"MR",Mauritius:"MU",Mexico:"MX","Micronesia (Federated States of)":"FM",Moldova:"MD",Monaco:"MC",Mongolia:"MN",Montenegro:"ME",Morocco:"MA",Mozambique:"MZ",Myanmar:"MM",Namibia:"NA",Nauru:"NR",Nepal:"NP",Netherlands:"NL","New Zealand":"NZ",Nicaragua:"NI",Niger:"NE",Nigeria:"NG","North Macedonia":"MK",Norway:"NO",Oman:"OM",Pakistan:"PK",Palau:"PW",Panama:"PA","Papua New Guinea":"PG",Paraguay:"PY",Peru:"PE",Philippines:"PH",Poland:"PL",Portugal:"PT",Qatar:"QA","Republic of Korea":"KR",Romania:"RO","Russian Federation":"RU",Rwanda:"RW","Saint Kitts and Nevis":"KN","Saint Lucia":"LC","Saint Vincent and the Grenadines":"VC",Samoa:"WS","San Marino":"SM","Sao Tome and Principe":"ST","Saudi Arabia":"SA",Senegal:"SN",Serbia:"RS",Seychelles:"SC","Sierra Leone":"SL",Singapore:"SG",Slovakia:"SK",Slovenia:"SI","Solomon Islands":"SB",Somalia:"SO","South Africa":"ZA","South Sudan":"SS",Spain:"ES","Sri Lanka":"LK",Sudan:"SD",Suriname:"SR",Sweden:"SE",Switzerland:"CH","Syrian Arab Republic":"SY",Tajikistan:"TJ",Thailand:"TH","Timor-Leste":"TL",Togo:"TG",Tonga:"TO","Trinidad and Tobago":"TT",Tunisia:"TN",Turkey:"TR",Turkmenistan:"TM",Tuvalu:"TV",Uganda:"UG",Ukraine:"UA","United Arab Emirates":"AE","United Kingdom":"GB","United Republic of Tanzania":"TZ","United States":"US",Uruguay:"UY",Uzbekistan:"UZ",Vanuatu:"VU",Venezuela:"VE","Viet Nam":"VN",Yemen:"YE",Zambia:"ZM",Zimbabwe:"ZW"};function BO(t){return/^[A-Z]{2}$/i.test(t)?Array.from(t.toUpperCase()).map(e=>String.fromCodePoint(127397+e.charCodeAt(0))).join(""):""}function Q1(t){const e=FO[t];return e?BO(e):""}const Y1="seamuns-dashboard-chair-state",dx={committee:"UNSC",topic:"Cybersecurity and International Peace",universe:"",sessionStarted:!1,sessionStartTime:null,delegates:[],delegateStrikes:[],delegateFeedback:[],motions:[],speakers:[],activeSpeaker:null,speakerDuration:60,rollCallComplete:!1,crisisSlides:[],crisisSpeakers:[],crisisFacts:[],crisisPathways:[],archive:[],voteInProgress:null,delegateVotes:{},flowChecklist:{},prepChecklist:{},delegationEmojiOverrides:{},chairName:"",chairEmail:""};function zO(){try{const t=localStorage.getItem(Y1);if(t){const e=JSON.parse(t);return{...dx,...e}}}catch{}return dx}const J1=I.createContext(null);function $O({children:t}){const[e,n]=I.useState(zO);I.useEffect(()=>{const M=setTimeout(()=>{try{localStorage.setItem(Y1,JSON.stringify(e))}catch{}},1e3);return()=>clearTimeout(M)},[e]);const r=I.useCallback(M=>{n(L=>({...L,committee:M}))},[]),s=I.useCallback(M=>{n(L=>({...L,topic:M}))},[]),i=I.useCallback(M=>{n(L=>({...L,universe:M}))},[]),o=I.useCallback(M=>{n(L=>({...L,chairName:M}))},[]),l=I.useCallback(M=>{n(L=>({...L,chairEmail:M}))},[]),c=I.useCallback(()=>{n(M=>({...M,sessionStarted:!0,sessionStartTime:new Date().toISOString()}))},[]),d=I.useCallback(()=>{n(M=>({...M,sessionStarted:!1,sessionStartTime:null}))},[]),f=I.useCallback(M=>{n(L=>({...L,delegates:[...L.delegates,{...M,id:crypto.randomUUID()}]}))},[]),p=I.useCallback(M=>{n(L=>({...L,delegates:L.delegates.filter(q=>q.id!==M),delegateStrikes:L.delegateStrikes.filter(q=>q.delegateId!==M),delegateFeedback:L.delegateFeedback.filter(q=>q.delegateId!==M)}))},[]),g=I.useCallback((M,L)=>{n(q=>({...q,delegates:q.delegates.map(pe=>pe.id===M?{...pe,...L}:pe)}))},[]),_=I.useCallback((M,L)=>{n(q=>({...q,motions:[...q.motions,{id:crypto.randomUUID(),text:M,type:L,starred:!1,timestamp:new Date().toISOString(),status:"active"}]}))},[]),C=I.useCallback(M=>{n(L=>({...L,motions:L.motions.map(q=>q.id===M?{...q,starred:!q.starred}:q)}))},[]),N=I.useCallback((M,L)=>{n(q=>({...q,motions:q.motions.map(pe=>pe.id===M?{...pe,status:L}:pe)}))},[]),A=I.useCallback(M=>{n(L=>{const q=L.motions.find(pe=>pe.id===M);return!q||q.type==="point"?L:{...L,voteInProgress:q,delegateVotes:{}}})},[]),E=I.useCallback((M,L)=>{n(q=>({...q,delegateVotes:{...q.delegateVotes,[M]:L}}))},[]),y=I.useCallback(()=>{n(M=>{if(!M.voteInProgress)return M;const L=Object.values(M.delegateVotes).filter(nt=>nt==="yes").length,q=Object.values(M.delegateVotes).filter(nt=>nt==="no").length,pe=Object.values(M.delegateVotes).filter(nt=>nt==="abstain").length;return{...M,motions:M.motions.map(nt=>nt.id===M.voteInProgress.id?{...nt,votes:{yes:L,no:q,abstain:pe},status:L>q?"passed":"failed"}:nt),voteInProgress:null,delegateVotes:{}}})},[]),b=I.useCallback((M,L,q)=>{n(pe=>({...pe,speakers:[...pe.speakers,{id:crypto.randomUUID(),delegateId:M,country:L,name:q,duration:pe.speakerDuration,speaking:!1}]}))},[]),R=I.useCallback(M=>{n(L=>{var q;return{...L,speakers:L.speakers.filter(pe=>pe.id!==M),activeSpeaker:((q=L.activeSpeaker)==null?void 0:q.id)===M?null:L.activeSpeaker}})},[]),B=I.useCallback(M=>{n(L=>({...L,activeSpeaker:M,speakers:L.speakers.map(q=>q.id===(M==null?void 0:M.id)?{...q,speaking:!0,startTime:Date.now()}:{...q,speaking:!1})}))},[]),F=I.useCallback(M=>{n(L=>({...L,speakerDuration:M}))},[]),T=I.useCallback(M=>{n(L=>({...L,rollCallComplete:M}))},[]),x=I.useCallback(M=>{n(L=>({...L,crisisSlides:[...L.crisisSlides,M]}))},[]),S=I.useCallback(M=>{n(L=>({...L,crisisSpeakers:[...L.crisisSpeakers,M]}))},[]),k=I.useCallback(M=>{n(L=>({...L,crisisFacts:[...L.crisisFacts,M]}))},[]),j=I.useCallback(M=>{n(L=>({...L,crisisPathways:[...L.crisisPathways,M]}))},[]),P=I.useCallback((M,L,q)=>{n(pe=>({...pe,archive:[...pe.archive,{type:M,name:L,content:q}]}))},[]),w=I.useCallback((M,L)=>{n(q=>({...q,delegateStrikes:[...q.delegateStrikes,{delegateId:M,type:L,timestamp:new Date().toISOString()}]}))},[]),oe=I.useCallback((M,L)=>{n(q=>{const pe=[...q.delegateStrikes].reverse().findIndex(Jn=>Jn.delegateId===M&&Jn.type===L);if(pe===-1)return q;const nt=q.delegateStrikes.length-1-pe;return{...q,delegateStrikes:q.delegateStrikes.filter((Jn,Di)=>Di!==nt)}})},[]),He=I.useCallback((M,L)=>{n(q=>({...q,delegateFeedback:[...q.delegateFeedback,{delegateId:M,type:L,timestamp:new Date().toISOString()}]}))},[]),Lt=I.useCallback(M=>{const L={compliment:0,concern:0};return e.delegateFeedback.filter(q=>q.delegateId===M).forEach(q=>{L[q.type]=(L[q.type]??0)+1}),L},[e.delegateFeedback]),Le=I.useCallback(M=>{n(L=>({...L,flowChecklist:{...L.flowChecklist,[M]:!L.flowChecklist[M]}}))},[]),G=I.useCallback(M=>!!e.flowChecklist[M],[e.flowChecklist]),X=I.useCallback(()=>{n(M=>({...M,flowChecklist:{}}))},[]),ne=I.useCallback(M=>{n(L=>({...L,prepChecklist:{...L.prepChecklist,[M]:!L.prepChecklist[M]}}))},[]),V=I.useCallback(M=>!!e.prepChecklist[M],[e.prepChecklist]),$=I.useCallback(()=>{n(M=>({...M,prepChecklist:{}}))},[]),ie=I.useCallback((M,L)=>{n(q=>{const pe={...q.delegationEmojiOverrides};return L===null||L===""?delete pe[M]:pe[M]=L,{...q,delegationEmojiOverrides:pe}})},[]),ve=I.useCallback(M=>{const L=e.delegationEmojiOverrides[M];return L!==void 0&&L!==""?L:Q1(M)},[e.delegationEmojiOverrides]),Ue={...e,setCommittee:r,setTopic:s,setUniverse:i,setChairName:o,setChairEmail:l,startSession:c,stopSession:d,addDelegate:f,removeDelegate:p,updateDelegate:g,addMotion:_,starMotion:C,setMotionStatus:N,startVote:A,recordVote:E,endVote:y,addToSpeakers:b,removeFromSpeakers:R,setActiveSpeaker:B,setSpeakerDuration:F,setRollCallComplete:T,addCrisisSlide:x,addCrisisSpeaker:S,addCrisisFact:k,addCrisisPathway:j,addToArchive:P,addStrike:w,removeStrike:oe,getStrikeCount:(M,L)=>e.delegateStrikes.filter(q=>q.delegateId===M&&q.type===L).length,getStrikeCountsByType:M=>{const L={};return e.delegateStrikes.filter(q=>q.delegateId===M).forEach(q=>{L[q.type]=(L[q.type]??0)+1}),L},addDelegateFeedback:He,getFeedbackCountsByType:Lt,toggleFlowStep:Le,isFlowStepDone:G,resetFlowChecklist:X,togglePrepStep:ne,isPrepStepDone:V,resetPrepChecklist:$,setDelegationEmoji:ie,getDelegationEmoji:ve};return u.jsx(J1.Provider,{value:Ue,children:t})}function Vt(){const t=I.useContext(J1);if(!t)throw new Error("useChair must be used within ChairProvider");return t}function Yn({title:t,children:e,label:n="More info"}){const[r,s]=I.useState(!1),i=I.useRef(null);return I.useEffect(()=>{if(!r)return;const o=l=>{i.current&&!i.current.contains(l.target)&&s(!1)};return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},[r]),u.jsxs("div",{className:"relative inline-flex",ref:i,children:[u.jsx("button",{type:"button",onClick:o=>{o.stopPropagation(),s(l=>!l)},className:"p-1 rounded-full text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-expanded":r,"aria-haspopup":"dialog","aria-label":n,children:u.jsx(TO,{className:"w-4 h-4"})}),r&&u.jsxs("div",{role:"dialog","aria-label":t,className:"absolute left-0 top-full mt-1 z-50 min-w-[220px] max-w-[320px] p-3 rounded-xl border border-[var(--border)] bg-[var(--bg-card)] shadow-lg text-left",children:[u.jsx("p",{className:"font-medium text-[var(--text)] text-sm mb-1",children:t}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] [&_ul]:list-disc [&_ul]:pl-4 [&_ul]:space-y-0.5 [&_ol]:list-decimal [&_ol]:pl-4 [&_ol]:space-y-0.5",children:e})]})]})}const HO=["Point of order abuse","Unparliamentary language","Speaking out of turn","Disruption","Failure to yield","Other"],Zh=3;function WO(t){return t.rollCallStatus?t.rollCallStatus:t.present?"present":"absent"}function GO(){const{delegates:t,committee:e,topic:n,universe:r,getStrikeCountsByType:s,addDelegateFeedback:i,getFeedbackCountsByType:o,getDelegationEmoji:l}=Vt(),[c,d]=I.useState(null),f=I.useRef(null);return I.useEffect(()=>{if(!c)return;const p=g=>{f.current&&!f.current.contains(g.target)&&d(null)};return document.addEventListener("click",p),()=>document.removeEventListener("click",p)},[c]),u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex items-start gap-2",children:u.jsxs("div",{children:[u.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Digital Room View",u.jsx(Yn,{title:"Digital Room",children:"Shows all delegates with their roll-call status (Absent, Present, P&V). Click a delegate card to give a compliment or concern reminder. Delegates are listed alphabetically by country."})]}),u.jsxs("p",{className:"text-[var(--text-muted)] text-sm",children:[e,r?`  ${r}  ${n}`:`  ${n}`]}),u.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:"Click a delegate to give a compliment or concern reminder."})]})}),u.jsx("div",{className:"card-block p-6 min-h-[320px]",children:t.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-[var(--text-muted)]",children:[u.jsx("p",{className:"text-sm",children:" No delegates in the room yet."}),u.jsx("p",{className:"text-xs mt-1",children:"Add delegates from the Delegates section."})]}):u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:[...t].sort((p,g)=>p.country.localeCompare(g.country,void 0,{sensitivity:"base"})).map(p=>{const g=s(p.id),_=Object.values(g).reduce((b,R)=>b+R,0),C=Object.values(g).some(b=>b>=Zh),N=o(p.id),A=N.compliment??0,E=N.concern??0,y=c===p.id;return u.jsxs("div",{ref:y?f:void 0,className:"relative",children:[u.jsxs("button",{type:"button",onClick:()=>d(y?null:p.id),className:`w-full rounded-lg border p-3 text-center transition-colors text-left ${C?"border-[var(--danger)] bg-[var(--danger)]/10 hover:bg-[var(--danger)]/15":"border-[var(--border)] bg-[var(--bg-elevated)] hover:bg-[var(--bg-card)] hover:border-[var(--accent)]/50"} ${y?"ring-2 ring-[var(--accent)]":""}`,"aria-expanded":y,"aria-haspopup":"menu","aria-label":`${p.country}  give compliment or concern`,children:[u.jsxs("div",{className:"text-xs font-medium text-[var(--accent)] uppercase tracking-wide flex items-center justify-center gap-1",children:[u.jsx("span",{children:l(p.country)||""}),u.jsx("span",{children:p.country})]}),u.jsx("div",{className:"text-sm text-[var(--text)] mt-1 font-medium",children:p.name||""}),p.committee&&u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-0.5",children:p.committee}),u.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2 flex-wrap",children:[(()=>{const b=WO(p),R={absent:"Absent",present:"Present (may abstain)","present-and-voting":"Present and voting"};return u.jsxs("span",{className:`inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[10px] font-medium ${b==="absent"?"bg-[var(--text-muted)]/20 text-[var(--text-muted)]":b==="present"?"bg-[var(--success)]/20 text-[var(--success)]":"bg-[var(--accent)]/20 text-[var(--accent)]"}`,title:R[b],children:[u.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${b==="absent"?"bg-[var(--text-muted)]":b==="present"?"bg-[var(--success)]":"bg-[var(--accent)]"}`}),b==="present-and-voting"?"P&V":b==="present"?"Present":"Absent"]})})(),_>0&&u.jsxs("span",{className:`inline-flex items-center gap-0.5 text-xs ${C?"text-[var(--danger)]":"text-[var(--accent)]"}`,title:Object.entries(g).map(([b,R])=>`${b}: ${R}`).join(", "),children:[u.jsx(Ic,{className:"w-3 h-3"}),_]}),A>0&&u.jsxs("span",{className:"inline-flex items-center gap-0.5 text-xs text-[var(--success)]",title:"Compliments",children:[u.jsx(ax,{className:"w-3 h-3"}),A]}),E>0&&u.jsxs("span",{className:"inline-flex items-center gap-0.5 text-xs text-[var(--danger)]",title:"Concern reminders",children:[u.jsx(ix,{className:"w-3 h-3"}),E]}),u.jsx(ji,{className:`w-3 h-3 text-[var(--text-muted)] flex-shrink-0 transition-transform ${y?"rotate-180":""}`,"aria-hidden":!0})]})]}),y&&u.jsxs("div",{className:"absolute left-0 right-0 top-full mt-1 z-10 rounded-lg border border-[var(--border)] bg-[var(--bg-card)] shadow-lg py-1 min-w-[10rem]",role:"menu","aria-label":"Delegate actions",children:[u.jsxs("button",{type:"button",role:"menuitem",onClick:()=>{i(p.id,"compliment"),d(null)},className:"flex items-center gap-2 w-full px-3 py-2 text-left text-sm text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[u.jsx(ax,{className:"w-4 h-4 text-[var(--success)]"}),"Give compliment"]}),u.jsxs("button",{type:"button",role:"menuitem",onClick:()=>{i(p.id,"concern"),d(null)},className:"flex items-center gap-2 w-full px-3 py-2 text-left text-sm text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[u.jsx(ix,{className:"w-4 h-4 text-[var(--danger)]"}),"Give concern reminder"]})]})]},p.id)})})})]})}const ef=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Cte d'Ivoire","Democratic People's Republic of Korea","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Lao People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia (Federated States of)","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Macedonia","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Republic of Korea","Romania","Russian Federation","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syrian Arab Republic","Tajikistan","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United Republic of Tanzania","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela","Viet Nam","Yemen","Zambia","Zimbabwe"],ii="__OTHER__";function qO(){const{delegates:t,addDelegate:e,removeDelegate:n,updateDelegate:r,committee:s,addStrike:i,removeStrike:o,getStrikeCountsByType:l,getDelegationEmoji:c,setDelegationEmoji:d}=Vt(),[f,p]=I.useState(""),[g,_]=I.useState(""),[C,N]=I.useState(""),[A,E]=I.useState(""),[y,b]=I.useState(!1),[R,B]=I.useState(null),[F,T]=I.useState(""),[x,S]=I.useState(null),[k,j]=I.useState(""),[P,w]=I.useState(""),[oe,He]=I.useState(null),[Lt,Le]=I.useState(""),G=f===ii?g.trim():f,X=()=>{G&&(e({country:G,name:C.trim()||void 0,email:A.trim()||void 0,committee:s||void 0,rollCallStatus:"absent"}),p(""),_(""),N(""),E(""))},ne=()=>{ef.forEach(V=>{t.some($=>$.country===V)||e({country:V,committee:s||void 0,rollCallStatus:"absent"})}),b(!1)};return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex items-start gap-2",children:u.jsxs("div",{children:[u.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Delegates",u.jsx(Yn,{title:"Delegates",children:"Add all countries in the room. Select from the UNGA dropdown or add custom. You can set a name and email per delegate. Use the  icon to set a custom flag/emoji for non-UN delegations (e.g. FWC). Strikes can be recorded per delegate."})]}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Add or remove delegates. Preset UNGA flags shown; use the  button to set a custom emoji for delegations (e.g. FWC)."})]})}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add delegate"}),u.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Country"}),u.jsxs("select",{value:f,onChange:V=>p(V.target.value),className:"min-w-[12rem] max-w-[20rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",children:[u.jsx("option",{value:"",children:" Select country "}),ef.map(V=>u.jsx("option",{value:V,children:V},V)),u.jsx("option",{value:ii,children:" Other "})]})]}),f===ii&&u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Custom country"}),u.jsx("input",{type:"text",value:g,onChange:V=>_(V.target.value),placeholder:"e.g. Observer State",className:"w-40 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Name (optional)"}),u.jsx("input",{type:"text",value:C,onChange:V=>N(V.target.value),placeholder:"Delegate name",className:"w-40 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Email (optional)"}),u.jsx("input",{type:"email",value:A,onChange:V=>E(V.target.value),placeholder:"delegate@example.com",className:"w-48 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("button",{onClick:X,disabled:!G,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap items-center gap-2",children:u.jsx("button",{onClick:()=>b(!0),className:"px-3 py-1.5 rounded-lg bg-[var(--accent-soft)] text-[var(--accent)] text-sm font-medium hover:bg-[var(--accent-soft)]/80 transition-colors",children:"Add all UNGA members not in list"})})]}),y&&u.jsxs("div",{className:"rounded-xl border border-[var(--accent)] bg-[var(--accent-soft)] p-4 flex items-center justify-between flex-wrap gap-2",children:[u.jsx("p",{className:"text-sm text-[var(--text)]",children:"Add all 193 UNGA member states not yet in the list?"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>b(!1),className:"px-3 py-1.5 rounded-lg bg-[var(--bg-card)] text-sm",children:"Cancel"}),u.jsx("button",{onClick:ne,className:"px-3 py-1.5 rounded-lg bg-[var(--accent)] text-white text-sm font-medium",children:"Add all"})]})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border)] flex items-center gap-2",children:[u.jsx(pu,{className:"w-4 h-4 text-[var(--text-muted)]"}),u.jsxs("span",{className:"text-sm font-medium text-[var(--text)]",children:[" Current delegates (",t.length,")"]})]}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-[28rem] overflow-auto",children:[...t].sort((V,$)=>V.country.localeCompare($.country,void 0,{sensitivity:"base"})).map(V=>{const $=l(V.id),ie=Object.values($).some(M=>M>=Zh),ve=Object.values($).reduce((M,L)=>M+L,0),Ue=x===V.id;return u.jsxs("li",{className:`px-4 py-3 flex flex-col gap-2 ${ie?"bg-[var(--danger)]/10 border-l-4 border-[var(--danger)]":""}`,children:[u.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[u.jsxs("span",{className:"text-sm text-[var(--text)] flex items-center gap-2 min-w-0",children:[u.jsx("span",{className:"text-base shrink-0",title:"Delegation flag/emoji",children:c(V.country)||""}),u.jsx("strong",{className:"text-[var(--accent)] truncate",children:V.country}),V.name&&u.jsxs("span",{className:"text-[var(--text-muted)] ml-1 shrink-0",children:[" ",V.name]}),V.email&&u.jsxs("span",{className:"text-xs text-[var(--text-muted)] ml-1 shrink-0 truncate",title:V.email,children:[" ",V.email]}),ve>0&&u.jsxs("span",{className:"ml-2 inline-flex items-center gap-1 text-xs",title:"Strikes",children:[u.jsx(Ic,{className:`w-3.5 h-3.5 ${ie?"text-[var(--danger)]":"text-[var(--accent)]"}`}),ve]})]}),u.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[u.jsx("button",{onClick:()=>{B(R===V.id?null:V.id),T(V.email??"")},className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors",title:"Edit delegate email",children:u.jsx(B1,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>{He(oe===V.country?null:V.country),Le(c(V.country))},className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors",title:"Set custom emoji/flag for this delegation",children:u.jsx(MO,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>S(Ue?null:V.id),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors",title:"Add strike",children:u.jsx(Ic,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>n(V.id),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)] transition-colors",title:"Remove delegate",children:u.jsx(vs,{className:"w-4 h-4"})})]})]}),oe===V.country&&u.jsxs("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap gap-2 items-center",children:[u.jsx("label",{className:"text-xs text-[var(--text-muted)]",children:"Custom emoji for this delegation:"}),u.jsx("input",{type:"text",value:Lt,onChange:M=>Le(M.target.value),placeholder:"e.g.  or paste any emoji",className:"w-24 px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm"}),u.jsx("button",{onClick:()=>{d(V.country,Lt.trim()||null),He(null),Le("")},className:"px-2 py-1.5 rounded-lg bg-[var(--accent)] text-white text-xs font-medium",children:"Apply"}),u.jsx("button",{onClick:()=>{d(V.country,null),He(null),Le("")},className:"px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] text-[var(--text-muted)] text-xs",children:"Clear (use preset)"}),u.jsx("button",{onClick:()=>{He(null),Le("")},className:"px-2 py-1.5 rounded-lg text-[var(--text-muted)] text-xs",children:"Cancel"})]}),R===V.id&&u.jsxs("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap gap-2 items-center",children:[u.jsx("label",{className:"text-xs text-[var(--text-muted)]",children:"Delegate email:"}),u.jsx("input",{type:"email",value:F,onChange:M=>T(M.target.value),placeholder:"delegate@example.com",className:"flex-1 min-w-[12rem] px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm"}),u.jsx("button",{onClick:()=>{r(V.id,{email:F.trim()||void 0}),B(null),T("")},className:"px-2 py-1.5 rounded-lg bg-[var(--accent)] text-white text-xs font-medium",children:"Apply"}),u.jsx("button",{onClick:()=>{r(V.id,{email:void 0}),B(null),T("")},className:"px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] text-[var(--text-muted)] text-xs",children:"Clear"}),u.jsx("button",{onClick:()=>{B(null),T("")},className:"px-2 py-1.5 rounded-lg text-[var(--text-muted)] text-xs",children:"Cancel"})]}),Object.keys($).length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 text-xs",children:Object.entries($).map(([M,L])=>u.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-md ${L>=Zh?"bg-[var(--danger)]/20 text-[var(--danger)]":"bg-[var(--accent-soft)] text-[var(--accent)]"}`,children:[M,": ",L,u.jsx("button",{onClick:()=>o(V.id,M),className:"p-0.5 rounded hover:bg-black/10",title:"Remove one strike",children:u.jsx(ep,{className:"w-3 h-3"})})]},M))}),Ue&&u.jsxs("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap gap-2 items-end",children:[u.jsxs("select",{value:P,onChange:M=>{const L=M.target.value;w(L),L&&(i(V.id,L),S(null),w(""),j(""))},className:"px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",children:[u.jsx("option",{value:"",children:" Select misbehaviour"}),HO.map(M=>u.jsx("option",{value:M,children:M},M))]}),u.jsx("input",{type:"text",value:k,onChange:M=>j(M.target.value),placeholder:"Or type custom",className:"w-36 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsx("button",{onClick:()=>{const M=k.trim();M&&(i(V.id,M),S(null),j(""),w(""))},disabled:!k.trim(),className:"px-3 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add strike (custom)"}),u.jsx("button",{onClick:()=>{S(null),j(""),w("")},className:"px-3 py-2 rounded-lg bg-[var(--bg-elevated)] text-[var(--text-muted)] text-sm",children:"Cancel"})]})]},V.id)})})]})]})}const KO=[{id:"mod-caucus",label:"Moderated caucus",type:"motion",template:t=>`Motion for moderated caucus for ${t.duration||"___"} on the topic of ${t.topic||"___"} with ${t.speakerTime||"___"} per speaker`,fields:[{key:"duration",label:"Total time",placeholder:"e.g. 10 minutes"},{key:"topic",label:"Topic",placeholder:"e.g. causes of conflict"},{key:"speakerTime",label:"Time per speaker",placeholder:"e.g. 45 seconds"}]},{id:"unmod-caucus",label:"Unmoderated caucus",type:"motion",template:t=>`Motion for unmoderated caucus for ${t.duration||"___"}`,fields:[{key:"duration",label:"Duration",placeholder:"e.g. 5 minutes"}]},{id:"open-speaker-list",label:"Open speaker list",type:"motion",template:()=>"Motion to open the speaker list",fields:[]},{id:"close-speaker-list",label:"Close speaker list",type:"motion",template:()=>"Motion to close the speaker list",fields:[]},{id:"point-order",label:"Point of order",type:"point",template:()=>"Point of order",fields:[]},{id:"point-information",label:"Point of information",type:"point",template:()=>"Point of information",fields:[]},{id:"point-personal",label:"Point of personal privilege",type:"point",template:()=>"Point of personal privilege",fields:[]}];function QO(){const{motions:t,addMotion:e,starMotion:n,setMotionStatus:r,startVote:s}=Vt(),[i,o]=I.useState(""),[l,c]=I.useState("motion"),[d,f]=I.useState(!1),[p,g]=I.useState(null),[_,C]=I.useState({}),N=()=>{i.trim()&&(e(i.trim(),l),o(""))},A=R=>{g(R),C({}),c(R.type)},E=()=>{if(!p)return;const R=p.template(_);e(R,p.type),g(null),C({}),f(!1)},y=t.filter(R=>R.status==="active"),b=t.filter(R=>R.status!=="active");return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Motions & Points"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Record and star motions and points."})]}),u.jsxs("div",{className:"card-block p-4 space-y-3",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>c("motion"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${l==="motion"?"bg-[var(--accent-soft)] text-[var(--accent)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)]"}`,children:" Motion"}),u.jsx("button",{onClick:()=>c("point"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${l==="point"?"bg-[var(--accent-soft)] text-[var(--accent)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)]"}`,children:" Point"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:i,onChange:R=>o(R.target.value),onKeyDown:R=>R.key==="Enter"&&N(),placeholder:l==="motion"?"e.g. Motion to open the speaker list":"e.g. Point of order",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(Sn,{className:"w-4 h-4"}),"  Add"]})]}),u.jsxs("div",{className:"border-t border-[var(--border)] pt-3 mt-3",children:[u.jsxs("button",{type:"button",onClick:()=>f(!d),className:"flex items-center gap-1.5 text-xs font-medium text-[var(--text-muted)] hover:text-[var(--accent)]",children:[d?u.jsx(Jm,{className:"w-3.5 h-3.5"}):u.jsx(ji,{className:"w-3.5 h-3.5"}),"Preset options"]}),d&&u.jsxs("div",{className:"mt-2 space-y-2",children:[u.jsx("div",{className:"flex flex-wrap gap-1.5",children:KO.map(R=>u.jsx("button",{type:"button",onClick:()=>A(R),className:`px-2.5 py-1.5 rounded-md text-xs font-medium transition-colors ${(p==null?void 0:p.id)===R.id?"bg-[var(--accent)] text-white":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)] border border-[var(--border)]"}`,children:R.label},R.id))}),p&&u.jsxs("div",{className:"rounded-lg border border-[var(--border)] bg-[var(--bg-elevated)] p-3 space-y-2",children:[p.fields.length===0?u.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:p.template({})}):p.fields.map(R=>u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-0.5",children:R.label}),u.jsx("input",{type:"text",value:_[R.key]??"",onChange:B=>C(F=>({...F,[R.key]:B.target.value})),placeholder:R.placeholder,className:"w-full px-2.5 py-1.5 rounded-md bg-[var(--bg-card)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]},R.key)),u.jsxs("div",{className:"flex gap-2 pt-1",children:[u.jsxs("button",{type:"button",onClick:E,className:"px-3 py-1.5 rounded-md bg-[var(--accent)] text-white text-xs font-medium hover:opacity-90",children:["Add ",p.type==="motion"?"motion":"point"]}),u.jsx("button",{type:"button",onClick:()=>g(null),className:"px-3 py-1.5 rounded-md text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] text-xs font-medium",children:"Cancel"})]})]})]})]})]}),y.length>0&&u.jsxs("div",{className:"rounded-xl border border-[var(--accent)]/40 bg-[var(--accent-soft)]/30 p-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-3",children:" Active"}),u.jsx("ul",{className:"space-y-2",children:y.map(R=>u.jsxs("li",{className:"flex items-center gap-2 flex-wrap",children:[u.jsx("button",{onClick:()=>n(R.id),className:"p-1 rounded text-[var(--text-muted)] hover:text-[var(--accent)]",title:R.starred?"Unstar":"Star",children:u.jsx(ox,{className:`w-4 h-4 ${R.starred?"fill-[var(--accent)] text-[var(--accent)]":""}`})}),u.jsx("span",{className:"text-xs text-[var(--text-muted)] uppercase",children:R.type}),u.jsx("span",{className:"text-sm text-[var(--text)] flex-1",children:R.text}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>r(R.id,"passed"),className:"p-1.5 rounded-lg bg-[var(--success)]/20 text-[var(--success)] hover:bg-[var(--success)]/30",title:"Passed",children:u.jsx(Ym,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>r(R.id,"failed"),className:"p-1.5 rounded-lg bg-[var(--danger)]/20 text-[var(--danger)] hover:bg-[var(--danger)]/30",title:"Failed",children:u.jsx(gu,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>r(R.id,"tabled"),className:"p-1.5 rounded-lg bg-[var(--text-muted)]/20 text-[var(--text-muted)]",title:"Tabled",children:u.jsx(ep,{className:"w-4 h-4"})}),R.type==="motion"&&u.jsx("button",{onClick:()=>s(R.id),className:"px-2 py-1 rounded-lg bg-[var(--accent)] text-white text-xs font-medium",children:"Vote"})]})]},R.id))})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Log"})}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:[...b].reverse().map(R=>u.jsxs("li",{className:"px-4 py-3 flex items-start gap-2",children:[u.jsx("button",{onClick:()=>n(R.id),className:"p-1 rounded mt-0.5 text-[var(--text-muted)] hover:text-[var(--accent)] flex-shrink-0",children:u.jsx(ox,{className:`w-4 h-4 ${R.starred?"fill-[var(--accent)] text-[var(--accent)]":""}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] uppercase",children:R.type}),u.jsx("p",{className:"text-sm text-[var(--text)]",children:R.text}),u.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-[var(--text-muted)]",children:[u.jsx("span",{children:new Date(R.timestamp).toLocaleString()}),u.jsx("span",{className:"capitalize",children:R.status}),R.type==="motion"&&R.votes&&u.jsxs("span",{children:["Yes ",R.votes.yes," / No ",R.votes.no," / Abstain ",R.votes.abstain]})]})]})]},R.id))})]})]})}function hx(t){return t.rollCallStatus?t.rollCallStatus:t.present?"present":"absent"}function YO(){const{voteInProgress:t,delegates:e,delegateVotes:n,recordVote:r,endVote:s,getDelegationEmoji:i}=Vt();if(!t)return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Voting"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Start a vote from a motion in Motions & Points."})]}),u.jsx("div",{className:"card-block p-8 text-center text-[var(--text-muted)]",children:' No active vote. Go to Motions & Points and click "Vote" on a motion.'})]});const o=Object.values(n).filter(g=>g==="yes").length,l=Object.values(n).filter(g=>g==="no").length,c=Object.values(n).filter(g=>g==="abstain").length,f=e.filter(g=>hx(g)!=="absent").length,p=Object.keys(n).length;return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex items-start gap-2",children:u.jsxs("div",{children:[u.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Active Voting",u.jsx(Yn,{title:"Voting",children:`Start a vote from a motion in Motions & Points. Record each delegate's vote: Yes, No, or Abstain. Delegates marked "Present and voting" cannot abstain. Absent delegates have no vote buttons. End vote to record the result on the motion.`})]}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Record each delegate's vote."})]})}),u.jsxs("div",{className:"rounded-xl border-2 border-[var(--accent)] bg-[var(--accent-soft)]/30 p-4",children:[u.jsx("p",{className:"text-sm font-medium text-[var(--text)] mb-2",children:" Motion:"}),u.jsx("p",{className:"text-[var(--text)]",children:t.text}),u.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[u.jsxs("span",{className:"text-[var(--success)]",children:["Yes: ",o]}),u.jsxs("span",{className:"text-[var(--danger)]",children:["No: ",l]}),u.jsxs("span",{className:"text-[var(--text-muted)]",children:["Abstain: ",c]}),u.jsxs("span",{className:"text-[var(--text-muted)]",children:["Recorded: ",p," / ",f]})]}),u.jsx("button",{onClick:s,className:"mt-4 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:"End vote & record result"})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Delegate votes"})}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:[...e].sort((g,_)=>g.country.localeCompare(_.country,void 0,{sensitivity:"base"})).map(g=>{const _=n[g.id],C=hx(g),N=C==="absent",A=C==="present";return u.jsxs("li",{className:`px-4 py-3 flex items-center justify-between ${N?"opacity-60":""}`,children:[u.jsxs("span",{className:"text-sm text-[var(--text)] flex items-center gap-2",children:[u.jsx("span",{className:"shrink-0",children:i(g.country)||""}),u.jsx("strong",{className:"text-[var(--accent)]",children:g.country}),g.name&&u.jsx("span",{className:"text-[var(--text-muted)]",children:g.name}),N&&u.jsx("span",{className:"ml-2 text-xs text-[var(--text-muted)]",children:"(Absent)"})]}),N?u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:""}):u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>r(g.id,"yes"),className:`p-2 rounded-lg transition-colors ${_==="yes"?"bg-[var(--success)]/30 text-[var(--success)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--success)]"}`,title:"Yes",children:u.jsx(Ym,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>r(g.id,"no"),className:`p-2 rounded-lg transition-colors ${_==="no"?"bg-[var(--danger)]/30 text-[var(--danger)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--danger)]"}`,title:"No",children:u.jsx(gu,{className:"w-4 h-4"})}),A&&u.jsx("button",{onClick:()=>r(g.id,"abstain"),className:`p-2 rounded-lg transition-colors ${_==="abstain"?"bg-[var(--text-muted)]/30 text-[var(--text)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)]"}`,title:"Abstain (present only)",children:u.jsx(ep,{className:"w-4 h-4"})})]})]},g.id)})})]})]})}const is=[{value:"AL",label:"AL  Arab League"},{value:"ASEAN",label:"ASEAN  Association of Southeastern Asian Nations"},{value:"AU",label:"AU  African Union"},{value:"CCPCJ",label:"CCPCJ  Commission on Crime Prevention and Criminal Justice"},{value:"CERN",label:"CERN  European Organization for Nuclear Research"},{value:"CND",label:"CND  United Nations Commission on Narcotic Drugs"},{value:"CoM",label:"CoM  Council of Marvels (Fictional)"},{value:"CPD",label:"CPD  Commission on Population and Development"},{value:"CSTD",label:"CSTD  Commission on Science and Technology for Development"},{value:"DGC",label:"DGC  United Nations Department of Global Communications"},{value:"DISEC",label:"DISEC  Disarmament and International Security Committee (UNGA 1st)"},{value:"ECOFIN",label:"ECOFIN  Economic and Financial Committee (UNGA 2nd)"},{value:"ECOSOC",label:"ECOSOC  Economic and Social Council"},{value:"EP",label:"EP  European Parliament"},{value:"FAO",label:"FAO  Food and Agriculture Organization"},{value:"FIFA",label:"FIFA  Fdration Internationale de Football Association"},{value:"GA6",label:"GA6  Legal (UNGA 6th Committee)"},{value:"HRC",label:"HRC  Human Rights Council"},{value:"UNHRC",label:"UNHRC  Human Rights Council"},{value:"HSC",label:"HSC  Historical Security Council"},{value:"IAEA",label:"IAEA  International Atomic Energy Agency"},{value:"ICAO",label:"ICAO  International Civil Aviation Organisation"},{value:"ICC",label:"ICC  International Criminal Court"},{value:"ICC-Commerce",label:"ICC  International Chamber of Commerce"},{value:"ICJ",label:"ICJ  International Court of Justice"},{value:"ICRC",label:"ICRC  International Committee of the Red Cross"},{value:"ILO",label:"ILO  International Labour Organization"},{value:"IMF",label:"IMF  International Monetary Fund"},{value:"IMO",label:"IMO  International Maritime Organisation"},{value:"Interpol",label:"Interpol  International Criminal Police Organization"},{value:"IOPC",label:"IOPC  International Olympic and Paralympic Committee"},{value:"NATO",label:"NATO  North Atlantic Treaty Organization"},{value:"PBC",label:"PBC  Peacebuilding Commission"},{value:"PC",label:"PC  Press Corps"},{value:"UNSC",label:"SC / UNSC  Security Council"},{value:"SCSHT",label:"SCSHT  Special Conference on Slavery and Human Trafficking"},{value:"SOCHUM",label:"SOCHUM  Social, Cultural, and Humanitarian Committee (UNGA 3rd)"},{value:"SPECPOL",label:"SPECPOL  Special Political and Decolonization (UNGA 4th)"},{value:"UNCSA",label:"UNCSA  Commission on Superhuman Activities (Fictional)"},{value:"UNCTAD",label:"UNCTAD  United Nations Conference on Trade and Development"},{value:"UNEP",label:"UNEP  United Nations Environmental Program"},{value:"UNESCO",label:"UNESCO  UN Educational, Scientific, and Cultural Organization"},{value:"UNHCR",label:"UNHCR  UN High Commissioner for Refugees"},{value:"UNICEF",label:"UNICEF  United Nations Children's Fund"},{value:"UNIDO",label:"UNIDO  UN Industrial Development Organization"},{value:"UNISDR",label:"UNISDR  United Nations Office for Disaster Risk Reduction"},{value:"UNODC",label:"UNODC  United Nations Office on Drugs and Crime"},{value:"UNOOSA",label:"UNOOSA  United Nations Office for Outer Space Affairs"},{value:"UNPFII",label:"UNPFII  UN Permanent Forum on Indigenous Issues"},{value:"UN-Women",label:"UN Women  United Nations Entity for Gender Equality and the Empowerment of Women"},{value:"UNWTO",label:"UNWTO  World Tourism Organization"},{value:"US-Senate",label:"US Senate  United States Senate"},{value:"WFP",label:"WFP  World Food Program"},{value:"WHO",label:"WHO  World Health Organization"},{value:"WMO",label:"WMO  World Meteorological Organization"},{value:"WIPO",label:"WIPO  World Intellectual Property Organization"},{value:"WB",label:"WB  World Bank"},{value:"WTO",label:"WTO  World Trade Organization"},{value:"Crisis",label:"Crisis Committee"}];is.map(t=>t.value);const Ut="__OTHER__";function fx({onClose:t}){const{committee:e,topic:n,universe:r,chairName:s,chairEmail:i,setCommittee:o,setTopic:l,setUniverse:c,setChairName:d,setChairEmail:f}=Vt(),p=I.useMemo(()=>is.find(C=>C.value===e)?e:e?Ut:"",[e]),g=_=>{o(_===Ut?"":_)};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"font-semibold text-lg text-[var(--text)]",children:" Committee & topic"}),t&&u.jsx("button",{onClick:t,className:"text-[var(--text-muted)] hover:text-[var(--text)] text-sm",children:"Close"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Set committee"}),u.jsxs("select",{value:p,onChange:_=>g(_.target.value),className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Committee",children:[u.jsx("option",{value:"",children:"Select committee"}),is.map(_=>u.jsx("option",{value:_.value,children:_.label},_.value)),u.jsx("option",{value:Ut,children:"Other (custom)"})]}),p===Ut&&u.jsx("input",{type:"text",value:e,onChange:_=>o(_.target.value),placeholder:"e.g. Custom committee name",className:"mt-2 w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Custom committee name"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Universe (optional, for fictional committees)"}),u.jsx("input",{type:"text",value:r,onChange:_=>c(_.target.value),placeholder:"e.g. Star Wars, Harry Potter  leave blank for real-world",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Universe (optional)"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Topic"}),u.jsx("input",{type:"text",value:n,onChange:_=>l(_.target.value),placeholder:"e.g. Cybersecurity and International Peace",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("div",{className:"pt-2 border-t border-[var(--border)]",children:[u.jsx("h4",{className:"text-sm font-medium text-[var(--text)] mb-2",children:" Chair"}),u.jsxs("label",{className:"block mb-2",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Chair name (optional)"}),u.jsx("input",{type:"text",value:s,onChange:_=>d(_.target.value),placeholder:"e.g. Jane Smith",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Chair name"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Chair email (optional)"}),u.jsx("input",{type:"email",value:i,onChange:_=>f(_.target.value),placeholder:"e.g. chair@conference.org",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Chair email"})]})]})]})}function JO(){const{motions:t}=Vt(),e=t.filter(o=>o.status==="passed").length,n=t.filter(o=>o.status==="failed").length,r=t.filter(o=>o.status==="tabled").length,s=t.filter(o=>o.type==="motion").length,i=t.filter(o=>o.type==="point").length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Score"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Motions and points summary."})]}),u.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--success)]",children:e}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Passed"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--danger)]",children:n}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Failed"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--text-muted)]",children:r}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Tabled"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:t.length}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Total"})]})]}),u.jsxs("div",{className:"card-block p-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)] mb-2",children:" Breakdown"}),u.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["Motions: ",s,"  Points: ",i]})]})]})}function al(t){return t.rollCallStatus?t.rollCallStatus:t.present?"present":"absent"}const XO={absent:"present",present:"present-and-voting","present-and-voting":"absent"},mx={absent:"Absent",present:"Present (may abstain)","present-and-voting":"Present and voting"};function ZO(){const{delegates:t,rollCallComplete:e,setRollCallComplete:n,updateDelegate:r,getDelegationEmoji:s}=Vt(),i=(p,g)=>{r(p,{rollCallStatus:g})},o=(p,g)=>{i(p,XO[g])},l=t.filter(p=>al(p)==="present").length,c=t.filter(p=>al(p)==="present-and-voting").length,d=t.filter(p=>al(p)==="absent").length,f=l+c;return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex items-start gap-2",children:u.jsxs("div",{children:[u.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Roll Call Tracker",u.jsx(Yn,{title:"Roll call",children:"Mark each delegate as Absent, Present (may abstain), or Present and voting (must vote, cannot abstain). Click a delegate's status to cycle. During voting, only present delegates can vote; present-and-voting cannot choose abstain."})]}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Present (may abstain from voting), Present and voting (must vote, cannot abstain), or Absent. Click to cycle."})]})}),u.jsx("div",{className:"flex items-center gap-3",children:u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e,onChange:p=>n(p.target.checked),className:"rounded border-[var(--border)] bg-[var(--bg-elevated)] text-[var(--accent)] focus:ring-[var(--accent)]"}),u.jsx("span",{className:"text-sm text-[var(--text)]",children:"Roll call complete"})]})}),u.jsxs("div",{className:"card-block p-4 flex flex-wrap gap-4 text-sm",children:[u.jsxs("span",{className:"text-[var(--success)]",children:["Present (may abstain): ",u.jsx("strong",{children:l})]}),u.jsxs("span",{className:"text-[var(--accent)]",children:["Present and voting: ",u.jsx("strong",{children:c})]}),u.jsxs("span",{className:"text-[var(--text-muted)]",children:["Absent: ",u.jsx("strong",{children:d})]}),u.jsxs("span",{className:"text-[var(--text-muted)]",children:["Total present: ",u.jsx("strong",{children:f})," / ",t.length]})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Delegates"})}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:[...t].sort((p,g)=>p.country.localeCompare(g.country,void 0,{sensitivity:"base"})).map(p=>{const g=al(p),_=g==="present",C=g==="present-and-voting",N=g==="absent";return u.jsxs("li",{className:"px-4 py-3 flex items-center justify-between gap-2",children:[u.jsxs("span",{className:"text-sm text-[var(--text)] min-w-0 flex items-center gap-2",children:[u.jsx("span",{className:"text-base shrink-0",children:s(p.country)||""}),u.jsx("strong",{className:"text-[var(--accent)] truncate",children:p.country}),p.name&&u.jsx("span",{className:"text-[var(--text-muted)] shrink-0",children:p.name})]}),u.jsxs("button",{onClick:()=>o(p.id,g),className:`flex items-center gap-1.5 text-xs px-2.5 py-1.5 rounded-lg transition-colors shrink-0 ${N?"text-[var(--text-muted)] bg-[var(--bg-elevated)] hover:bg-[var(--border)]":_?"text-[var(--success)] bg-[var(--success)]/10 hover:bg-[var(--success)]/20":"text-[var(--accent)] bg-[var(--accent-soft)] hover:bg-[var(--accent-soft)]/80"}`,title:mx[g],children:[N&&u.jsx(gu,{className:"w-4 h-4"}),_&&u.jsx(Ym,{className:"w-4 h-4"}),C&&u.jsx(q1,{className:"w-4 h-4"}),mx[g]]})]},p.id)})})]}),u.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Click a delegate's status to cycle: Absent  Present (may abstain)  Present and voting  Absent."})]})}function e4(){const{sessionStarted:t,sessionStartTime:e,startSession:n,stopSession:r}=Vt();return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Committee Session"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Start or stop the committee session."})]}),u.jsxs("div",{className:"card-block p-6 flex flex-col sm:flex-row items-center gap-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:`w-3 h-3 rounded-md ${t?"bg-[var(--success)] animate-pulse":"bg-[var(--text-muted)]"}`}),u.jsx("span",{className:"text-sm font-medium text-[var(--text)]",children:t?" Session in progress":" Session not started"})]}),e&&u.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Started: ",new Date(e).toLocaleString()]}),u.jsx("div",{className:"flex gap-3",children:t?u.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--danger)] text-white text-sm font-medium hover:opacity-90 transition-opacity",children:[u.jsx(mu,{className:"w-4 h-4"}),"  Stop session"]}):u.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--success)] text-white text-sm font-medium hover:opacity-90 transition-opacity",children:[u.jsx(H1,{className:"w-4 h-4"}),"  Start session"]})})]})]})}function t4(){const{delegates:t,speakers:e,activeSpeaker:n,speakerDuration:r,setSpeakerDuration:s,addToSpeakers:i,removeFromSpeakers:o,setActiveSpeaker:l,getDelegationEmoji:c}=Vt(),[d,f]=I.useState(""),[p,g]=I.useState(0);I.useEffect(()=>{if(!(n!=null&&n.startTime))return;const N=setInterval(()=>{g(Math.floor((Date.now()-n.startTime)/1e3))},1e3);return()=>clearInterval(N)},[n==null?void 0:n.startTime,n==null?void 0:n.id]);const _=()=>{const N=t.find(A=>A.id===d);N&&(i(N.id,N.country,N.name||N.country),f(""))},C=n?Math.max(0,r-p):0;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Speakers"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Mod Speakers List, Active Speaker (Timed), Consultation Speakers."})]}),u.jsxs("div",{className:"rounded-xl border-2 border-[var(--accent)]/50 bg-[var(--accent-soft)]/30 p-4",children:[u.jsxs("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2 flex items-center gap-2",children:[u.jsx(fu,{className:"w-4 h-4"}),"  Active speaker"]}),n?u.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[u.jsxs("span",{className:"text-lg font-semibold text-[var(--text)] flex items-center gap-2",children:[u.jsx("span",{children:c(n.country)||""}),n.country,"  ",n.name]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx(Xm,{className:"w-4 h-4 text-[var(--text-muted)]"}),u.jsxs("span",{className:C===0?"text-[var(--danger)]":"text-[var(--text)]",children:[Math.floor(C/60),":",String(C%60).padStart(2,"0")," remaining"]})]}),u.jsx("button",{onClick:()=>l(null),className:"px-3 py-1.5 rounded-lg bg-[var(--bg-card)] text-sm text-[var(--text)] hover:bg-[var(--border)]",children:"End speech"})]}):u.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No active speaker. Start one from the list below."})]}),u.jsxs("div",{className:"card-block p-4 space-y-3",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Speaker duration (seconds)"}),u.jsx("input",{type:"number",min:30,max:300,value:r,onChange:N=>s(Number(N.target.value)||60),className:"w-24 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("div",{className:"card-block p-4 space-y-3",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add to speakers list"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsxs("select",{value:d,onChange:N=>f(N.target.value),className:"px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",children:[u.jsx("option",{value:"",children:"Select delegate"}),[...t].sort((N,A)=>N.country.localeCompare(A.country,void 0,{sensitivity:"base"})).map(N=>u.jsxs("option",{value:N.id,children:[N.country," ",N.name?` ${N.name}`:""]},N.id))]}),u.jsxs("button",{onClick:_,disabled:!d,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Mod speakers list"})}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-80 overflow-auto",children:e.map((N,A)=>u.jsxs("li",{className:"px-4 py-3 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:"text-xs text-[var(--text-muted)] w-6",children:[A+1,"."]}),u.jsxs("span",{className:"text-sm text-[var(--text)] flex items-center gap-2",children:[u.jsx("span",{className:"shrink-0",children:c(N.country)||""}),u.jsx("strong",{className:"text-[var(--accent)]",children:N.country}),"  ",N.name]}),N.speaking&&u.jsx("span",{className:"px-2 py-0.5 rounded bg-[var(--accent-soft)] text-[var(--accent)] text-xs font-medium",children:"Speaking"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[!N.speaking&&u.jsx("button",{onClick:()=>l(N),className:"px-2 py-1 rounded-lg bg-[var(--accent)] text-white text-xs font-medium hover:opacity-90",children:"Start"}),u.jsx("button",{onClick:()=>o(N.id),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)]",title:"Remove",children:u.jsx(vs,{className:"w-4 h-4"})})]})]},N.id))})]})]})}const n4=[{id:"slides",label:"Slides",icon:F1},{id:"speakers",label:"Speakers",icon:fu},{id:"facts",label:"Facts",icon:hu},{id:"pathways",label:"Pathways",icon:RO}];function r4(){const{crisisSlides:t,crisisSpeakers:e,crisisFacts:n,crisisPathways:r,addCrisisSlide:s,addCrisisSpeaker:i,addCrisisFact:o,addCrisisPathway:l}=Vt(),[c,d]=I.useState("slides"),[f,p]=I.useState(""),g=()=>{f.trim()&&(c==="slides"&&s(f.trim()),c==="speakers"&&i(f.trim()),c==="facts"&&o(f.trim()),c==="pathways"&&l(f.trim()),p(""))},C={slides:t,speakers:e,facts:n,pathways:r}[c];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Crisis Dashboard"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Slides  Speakers  Facts  Pathways."})]}),u.jsx("div",{className:"flex gap-2 border-b border-[var(--border)] pb-2",children:n4.map(({id:N,label:A,icon:E})=>u.jsxs("button",{onClick:()=>d(N),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${c===N?"bg-[var(--accent-soft)] text-[var(--accent)]":"text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:[u.jsx(E,{className:"w-4 h-4"})," ",A]},N))}),u.jsxs("div",{className:"card-block p-4 space-y-3",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:f,onChange:N=>p(N.target.value),onKeyDown:N=>N.key==="Enter"&&g(),placeholder:c==="slides"?"Slide title or URL":c==="speakers"?"Speaker name":c==="facts"?"Fact":"Pathway description",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-64 overflow-auto",children:C.map((N,A)=>u.jsx("li",{className:"px-3 py-2 flex items-center justify-between text-sm text-[var(--text)]",children:N},A))})]})]})}const s4=[{id:"position",label:" Position papers",icon:hu},{id:"chair-report",label:" Chair reports",icon:_a},{id:"slides",label:" Slides (ceremony or crisis)",icon:F1},{id:"speeches",label:" Speeches",icon:fu},{id:"prep",label:" Prep document",icon:EO}];function i4(){const{archive:t,addToArchive:e}=Vt(),[n,r]=I.useState("position"),[s,i]=I.useState(""),[o,l]=I.useState(""),c=()=>{s.trim()&&(e(n,s.trim(),o.trim()||void 0),i(""),l(""))};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Archive"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Position papers, chair reports, slides, speeches, prep docs."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add to archive"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:s4.map(({id:d,label:f,icon:p})=>u.jsxs("button",{onClick:()=>r(d),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n===d?"bg-[var(--accent-soft)] text-[var(--accent)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)]"}`,children:[u.jsx(p,{className:"w-4 h-4"})," ",f]},d))}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"text",value:s,onChange:d=>i(d.target.value),placeholder:"Document name",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsx("textarea",{value:o,onChange:d=>l(d.target.value),placeholder:"Optional content or link",rows:2,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"}),u.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Archive"})}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:t.length===0?u.jsx("li",{className:"px-4 py-8 text-center text-[var(--text-muted)] text-sm",children:"No items in archive yet."}):t.slice().reverse().map((d,f)=>u.jsxs("li",{className:"px-4 py-3",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] uppercase",children:d.type}),u.jsx("p",{className:"text-sm font-medium text-[var(--text)]",children:d.name}),d.content&&u.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:d.content})]},f))})]})]})}const Id=[{id:"rollcall",label:"Roll call"},{id:"open-floor",label:"Open the floor (points & motions)"},{id:"recognize-motions",label:"Recognize motions"},{id:"vote-motions",label:"Vote on motion(s)"},{id:"engage-or-gsl",label:"Engage in chosen motion or move to GSL"},{id:"open-floor-again",label:"Open the floor again"},{id:"recognize-motions-2",label:"Recognize motions (repeat as needed)"},{id:"vote-motions-2",label:"Vote on motion(s)"},{id:"continue-cycle",label:"Continue cycle (engage motion / GSL  open floor)"}];function o4(){const{toggleFlowStep:t,isFlowStepDone:e,resetFlowChecklist:n}=Vt(),r=Id.filter(s=>e(s.id)).length;return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex items-start gap-2",children:u.jsxs("div",{children:[u.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Committee flow checklist",u.jsx(Yn,{title:"Committee flow",children:"Tick each step as you run the session: roll call  open the floor  recognize motions  vote  engage in the motion or move to GSL  open the floor again. Reset when starting a new session or cycle."})]}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Normal committee flow  tick steps as you go. Reset when starting a new session or cycle."})]})}),u.jsxs("div",{className:"card-block p-4 space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[u.jsxs("span",{className:"text-xs font-medium text-[var(--text-muted)]",children:[r," / ",Id.length," done"]}),u.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[u.jsx(W1,{className:"w-3.5 h-3.5"}),"Reset checklist"]})]}),u.jsx("ul",{className:"space-y-1",children:Id.map(s=>{const i=e(s.id);return u.jsx("li",{children:u.jsxs("label",{className:`flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer transition-colors ${i?"bg-[var(--success)]/10 text-[var(--text)]":"hover:bg-[var(--bg-elevated)]"}`,children:[u.jsx("span",{className:"text-[var(--accent)] flex-shrink-0",children:i?u.jsx(wa,{className:"w-5 h-5 fill-[var(--success)] text-[var(--success)]"}):u.jsx(mu,{className:"w-5 h-5"})}),u.jsx("span",{className:`text-sm ${i?"line-through text-[var(--text-muted)]":"text-[var(--text)]"}`,children:s.label}),u.jsx("input",{type:"checkbox",checked:i,onChange:()=>t(s.id),className:"sr-only","aria-label":s.label})]})},s.id)})})]})]})}const px=[{title:" Rules & procedure",steps:[{id:"prep-rules-read",label:"Read and understand committee rules of procedure"},{id:"prep-parliamentary",label:"Review parliamentary procedure (motions, points, voting)"},{id:"prep-time-limits",label:"Confirm speaking times and time limits"},{id:"prep-quorum",label:"Know quorum and voting requirements"}]},{title:" Committee & topic",steps:[{id:"prep-topic-research",label:"Research committee topic and background"},{id:"prep-study-guide",label:"Read study guide and key documents"},{id:"prep-committee-set",label:"Set committee name and topic in dashboard"},{id:"prep-agenda",label:"Prepare session agenda and flow"}]},{title:" Room & tech",steps:[{id:"prep-room-setup",label:"Set up digital room (delegates list, placards)"},{id:"prep-tech-check",label:"Tech check: platform, audio, screen share"},{id:"prep-backup",label:"Have backup plan if tech fails"}]},{title:" Materials & logistics",steps:[{id:"prep-rollcall-list",label:"Prepare roll call list and attendance"},{id:"prep-speakers-list",label:"Plan speakers list management"},{id:"prep-motions-templates",label:"Prepare common motions / points (if using templates)"},{id:"prep-timing",label:"Confirm session start time and breaks"}]},{title:" Crisis (if applicable)",steps:[{id:"prep-crisis-brief",label:"Review crisis elements and update slides"},{id:"prep-crisis-speakers",label:"Plan crisis speaker order / cues"},{id:"prep-crisis-pathways",label:"Prepare crisis pathways and facts"}]},{title:" Team & communication",steps:[{id:"prep-co-chair",label:"Coordinate with co-chair(s) on roles"},{id:"prep-staff",label:"Confirm staff / dais support and cues"},{id:"prep-delegate-brief",label:"Prepare brief for delegates (rules, timing)"}]}];function a4(){const{togglePrepStep:t,isPrepStepDone:e,resetPrepChecklist:n}=Vt(),r=px.flatMap(i=>i.steps),s=r.filter(i=>e(i.id)).length;return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex items-start gap-2",children:u.jsxs("div",{children:[u.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Chair preparation checklist",u.jsx(Yn,{title:"Chair prep",children:"Before the conference: review rules and procedure, research the topic, set up the digital room and tech, prepare roll call and speakers list, and coordinate with co-chairs. Reset when prepping a new session."})]}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Before the conference: rules, topic, room, materials, and team. Reset when prepping a new session."})]})}),u.jsxs("div",{className:"card-block p-4 flex items-center justify-between gap-2 mb-4",children:[u.jsxs("span",{className:"text-xs font-medium text-[var(--text-muted)]",children:[s," / ",r.length," done"]}),u.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[u.jsx(W1,{className:"w-3.5 h-3.5"}),"Reset checklist"]})]}),u.jsx("div",{className:"space-y-5",children:px.map(i=>u.jsxs("div",{className:"card-block p-4",children:[u.jsx("h3",{className:"font-medium text-[var(--text)] mb-3",children:i.title}),u.jsx("ul",{className:"space-y-1",children:i.steps.map(o=>{const l=e(o.id);return u.jsx("li",{children:u.jsxs("label",{className:`flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer transition-colors ${l?"bg-[var(--success)]/10 text-[var(--text)]":"hover:bg-[var(--bg-elevated)]"}`,children:[u.jsx("span",{className:"text-[var(--accent)] flex-shrink-0",children:l?u.jsx(wa,{className:"w-5 h-5 fill-[var(--success)] text-[var(--success)]"}):u.jsx(mu,{className:"w-5 h-5"})}),u.jsx("span",{className:`text-sm ${l?"line-through text-[var(--text-muted)]":"text-[var(--text)]"}`,children:o.label}),u.jsx("input",{type:"checkbox",checked:l,onChange:()=>t(o.id),className:"sr-only","aria-label":o.label})]})},o.id)})})]},i.title))})]})}const l4=[{step:1,title:"Set committee & topic",body:"Open Settings () or go to  Committee & Topic. Enter committee name, optional universe for fictional committees, topic, and your chair name/email."},{step:2,title:"Prep checklist",body:"Use  Prep checklist to tick off rules, topic research, room setup, materials, and team coordination before the conference."},{step:3,title:"Add delegates",body:"Go to  Delegates. Select country from the dropdown (all UNGA members) or add custom. Optionally add name and email. Use the  icon to set a custom flag/emoji for delegations like FWC."},{step:4,title:"Roll call",body:"In  Roll Call, mark each delegate as Absent, Present (may abstain), or Present and voting (must vote). Click to cycle. Mark roll call complete when done."},{step:5,title:"Digital Room",body:" Digital Room shows all delegates with their roll-call status. Click a delegate to give a compliment or concern reminder."},{step:6,title:"Flow checklist",body:"Use  Flow checklist during the session: roll call  open floor  recognize motions  vote  engage or GSL  repeat."},{step:7,title:"Motions & voting",body:"In  Motions & Points, add motions or points. Start a vote from a motion; in  Voting record each delegate's vote (Yes/No/Abstain). Present and voting delegates cannot abstain."},{step:8,title:"Speakers",body:"In  Speakers, add delegates to the mod speakers list, set speaking time, and start/stop the active speaker with the timer."},{step:9,title:"Crisis & archive",body:"Use  Crisis for crisis elements. Use  Archive to store position papers, chair reports, and prep docs."}];function c4(){const[t,e]=I.useState(!1);return u.jsxs("section",{className:"mt-10 pt-6 border-t border-[var(--border)]","aria-labelledby":"chair-howto-heading",children:[u.jsxs("button",{type:"button",onClick:()=>e(n=>!n),className:"flex items-center gap-2 w-full text-left group","aria-expanded":t,children:[u.jsx(_a,{className:"w-5 h-5 text-[var(--accent)] shrink-0"}),u.jsx("h2",{id:"chair-howto-heading",className:"font-semibold text-lg text-[var(--text)] group-hover:text-[var(--accent)] transition-colors",children:"How to use this system (Chair)"}),t?u.jsx(Jm,{className:"w-5 h-5 text-[var(--text-muted)] ml-auto"}):u.jsx(ji,{className:"w-5 h-5 text-[var(--text-muted)] ml-auto"})]}),t&&u.jsxs("div",{className:"mt-4 space-y-4 text-sm text-[var(--text-muted)]",children:[u.jsx("p",{className:"text-[var(--text)]",children:"Step-by-step guide for running committee in the Chair Room:"}),u.jsx("ol",{className:"space-y-3 list-none pl-0",children:l4.map(({step:n,title:r,body:s})=>u.jsxs("li",{className:"flex gap-3",children:[u.jsx("span",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-[var(--accent-soft)] text-[var(--accent)] font-semibold flex items-center justify-center text-xs",children:n}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-[var(--text)]",children:r}),u.jsx("p",{className:"mt-0.5",children:s})]})]},n))})]})]})}const tp=[{category:"Documents & articles",sources:[{name:"UN Official Document System (ODS)",url:"https://documents.un.org/"},{name:"UN Digital Library",url:"https://digitallibrary.un.org/"},{name:"UN News",url:"https://news.un.org/"},{name:"UN Yearbook",url:"https://www.un.org/en/yearbook/"},{name:"UN Press",url:"https://press.un.org/"}]},{category:"Legislation & treaties",sources:[{name:"UN Treaty Collection",url:"https://treaties.un.org/"},{name:"UN Audiovisual Library of International Law",url:"https://legal.un.org/avl/"},{name:"UNCITRAL (International Trade Law)",url:"https://uncitral.un.org/"},{name:"UN Charter",url:"https://www.un.org/en/about-us/un-charter"}]},{category:"Main bodies",sources:[{name:"UN General Assembly",url:"https://www.un.org/ga/"},{name:"UN Security Council",url:"https://www.un.org/securitycouncil/"},{name:"UN ECOSOC",url:"https://www.un.org/ecosoc/"},{name:"International Court of Justice (ICJ)",url:"https://www.icj-cij.org/"},{name:"UN Secretariat",url:"https://www.un.org/sg/"},{name:"UN Trusteeship Council",url:"https://www.un.org/en/about-us/trusteeship-council"}]},{category:"Programmes & funds",sources:[{name:"UNDP",url:"https://www.undp.org/"},{name:"UNICEF",url:"https://www.unicef.org/"},{name:"UNHCR",url:"https://www.unhcr.org/"},{name:"WFP (World Food Programme)",url:"https://www.wfp.org/"},{name:"UNFPA",url:"https://www.unfpa.org/"},{name:"UN Environment Programme (UNEP)",url:"https://www.unep.org/"},{name:"UN Women",url:"https://www.unwomen.org/"},{name:"UN-Habitat",url:"https://unhabitat.org/"}]},{category:"Specialized agencies & related",sources:[{name:"WHO",url:"https://www.who.int/"},{name:"UNESCO",url:"https://www.unesco.org/"},{name:"IOM (International Organization for Migration)",url:"https://www.iom.int/"},{name:"UN Office on Drugs and Crime (UNODC)",url:"https://www.unodc.org/"},{name:"UN Office for Disarmament Affairs (UNODA)",url:"https://www.un.org/disarmament/"},{name:"UN Human Rights (OHCHR)",url:"https://www.ohchr.org/"},{name:"World Bank",url:"https://www.worldbank.org/"},{name:"IMF",url:"https://www.imf.org/"},{name:"ILO",url:"https://www.ilo.org/"},{name:"FAO",url:"https://www.fao.org/"}]},{category:"Peacekeeping & missions",sources:[{name:"UN Peacekeeping",url:"https://peacekeeping.un.org/"},{name:"UN Peacekeeping  current missions",url:"https://peacekeeping.un.org/en/missions"},{name:"UN Special Political Missions",url:"https://dppa.un.org/en/special-political-missions"}]},{category:"Founders & members",sources:[{name:"UN Member States",url:"https://www.un.org/en/about-us/member-states"},{name:"UN System (founders & members)",url:"https://www.un.org/en/about-us/un-system"},{name:"UN History",url:"https://www.un.org/en/about-us/history"}]}],X1=tp.flatMap(t=>t.sources);function np({compact:t=!1,showHeading:e=!0}){return u.jsxs("div",{className:"space-y-4",children:[e&&u.jsxs("div",{children:[u.jsx("h2",{className:"section-heading text-[var(--text)] mb-0.5",children:" Official UN links"}),u.jsx("p",{className:"text-[var(--text-muted)] text-xs sm:text-sm",children:"Documents, treaties, main bodies, programmes, missions, and member info. Open in new tab."})]}),u.jsx("div",{className:t?"space-y-3":"space-y-5",children:tp.map(({category:n,sources:r})=>u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wide mb-1.5 sm:mb-2",children:n}),u.jsx("ul",{className:t?"flex flex-wrap gap-1.5":"flex flex-wrap gap-2",children:r.map(({name:s,url:i})=>u.jsx("li",{children:u.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:`inline-block rounded-md border border-[var(--border)] bg-[var(--bg-elevated)] text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors ${t?"px-2 py-1 text-xs":"px-2.5 py-1.5 text-sm"}`,children:[s," "]})},s))})]},n))})]})}const Z1="seamuns-dashboard-sidebar-expanded";function u4(){try{const t=localStorage.getItem(Z1);return t===null?!0:t==="true"}catch{return!0}}const d4=[{id:"prep",label:" Prep checklist",icon:CO},{id:"flow",label:" Flow checklist",icon:wa},{id:"room",label:" Digital Room",icon:SO},{id:"delegates",label:" Delegates",icon:G1},{id:"motions",label:" Motions & Points",icon:hu},{id:"voting",label:" Voting",icon:q1},{id:"committee",label:" Committee & Topic",icon:_a},{id:"score",label:" Score",icon:sx},{id:"rollcall",label:" Roll Call",icon:sx},{id:"session",label:" Session",icon:H1},{id:"speakers",label:" Speakers",icon:fu},{id:"crisis",label:" Crisis",icon:Ic},{id:"archive",label:" Archive",icon:xO},{id:"links",label:" Official links",icon:Xh}];function h4(){const[t,e]=I.useState("prep"),[n,r]=I.useState(!1),[s,i]=I.useState(u4);I.useEffect(()=>{localStorage.setItem(Z1,String(s))},[s]);const o=()=>i(l=>!l);return u.jsxs("div",{className:"flex flex-col lg:flex-row min-h-[calc(100vh-3rem)] sm:min-h-[calc(100vh-3.5rem)] lg:min-h-[calc(100vh-4rem)]",children:[u.jsx("aside",{className:`border-b lg:border-b-0 lg:border-r border-[var(--border)] bg-[var(--bg-elevated)] flex-shrink-0 overflow-x-auto overflow-y-hidden transition-[width] duration-200 ${s?"lg:w-max lg:min-w-[11rem] lg:max-w-[14rem]":"lg:w-10"}`,children:u.jsxs("div",{className:"flex lg:flex-col gap-0.5 p-1 sm:p-1.5 items-stretch lg:items-stretch",children:[d4.map(({id:l,label:c,icon:d})=>u.jsxs("button",{onClick:()=>e(l),title:c,className:`flex items-center gap-1.5 px-2 py-1.5 rounded-md text-xs font-medium transition-colors text-left whitespace-nowrap min-w-0 shrink-0 ${s?"w-full lg:w-max lg:min-w-0":"w-full lg:justify-center lg:px-1.5 lg:w-full"} ${t===l?"bg-[var(--accent)] text-white shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:[u.jsx(d,{className:"w-3.5 h-3.5 flex-shrink-0"}),u.jsx("span",{className:s?"lg:whitespace-nowrap":"truncate lg:sr-only lg:overflow-hidden lg:w-0",children:c})]},l)),u.jsxs("button",{onClick:()=>r(!n),title:"Settings",className:`flex items-center gap-1.5 px-2 py-1.5 rounded-md text-xs text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] mt-auto shrink-0 ${s?"w-full lg:w-max lg:min-w-0":"w-full lg:justify-center lg:px-1.5 lg:w-full"}`,children:[u.jsx(OO,{className:"w-3.5 h-3.5"}),u.jsx("span",{className:s?"lg:whitespace-nowrap":"truncate lg:sr-only lg:overflow-hidden lg:w-0",children:" Settings"})]}),u.jsxs("button",{type:"button",onClick:o,title:s?"Collapse sidebar":"Expand sidebar",className:"hidden lg:flex items-center justify-center gap-1.5 px-1.5 py-1.5 rounded-md text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors w-max",children:[s?u.jsx(z1,{className:"w-4 h-4 flex-shrink-0"}):u.jsx($1,{className:"w-4 h-4 flex-shrink-0"}),s&&u.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:"Hide labels"})]})]})}),u.jsxs("main",{className:"flex-1 p-2 sm:p-3 md:p-5 overflow-auto min-w-0",children:[n&&u.jsx("div",{className:"mb-6 p-4 card-block",children:u.jsx(fx,{onClose:()=>r(!1)})}),t==="prep"&&u.jsx(a4,{}),t==="flow"&&u.jsx(o4,{}),t==="room"&&u.jsx(GO,{}),t==="delegates"&&u.jsx(qO,{}),t==="motions"&&u.jsx(QO,{}),t==="voting"&&u.jsx(YO,{}),t==="committee"&&u.jsx(fx,{}),t==="score"&&u.jsx(JO,{}),t==="rollcall"&&u.jsx(ZO,{}),t==="session"&&u.jsx(e4,{}),t==="speakers"&&u.jsx(t4,{}),t==="crisis"&&u.jsx(r4,{}),t==="archive"&&u.jsx(i4,{}),t==="links"&&u.jsx("div",{className:"card-block p-4 sm:p-6",children:u.jsx(np,{showHeading:!0})}),u.jsx(c4,{})]})]})}function f4(){return u.jsxs($O,{children:[u.jsxs("div",{className:"border-b border-[var(--border)] bg-[var(--bg-elevated)] px-3 sm:px-4 py-2 sm:py-3 flex items-center gap-2 sm:gap-3 shadow-[0_1px_0_0_var(--border)]",children:[u.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-[var(--accent-soft)] flex items-center justify-center flex-shrink-0",children:u.jsx(U1,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--accent)]"})}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("h1",{className:"page-title text-[var(--text)] whitespace-nowrap truncate",children:" Chair Room"}),u.jsx("p",{className:"text-xs sm:text-sm text-[var(--text-muted)] whitespace-nowrap truncate",children:" Digital Room   Motions   Voting   Speakers"}),u.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:"Data is saved locally  clearing site data will remove it."})]})]}),u.jsx(h4,{})]})}const eb="delegateData";async function m4(t){if(!Cc)return null;const e=b1(Cc,eb,t),n=await tO(e);return n.exists()?n.data():null}async function p4(t,e){if(!Cc)return;const n=b1(Cc,eb,t);await rO(n,e)}function g4(t){const e=t.committeeMatrix&&Object.keys(t.committeeMatrix).length>0,n=t.committeeMatrixEntries&&t.committeeMatrixEntries.length>0;return{...t,delegateEmail:t.delegateEmail??"",committeeCount:t.committeeCount??0,committees:t.committees??[],committeeMatrixEntries:e&&!n&&t.committeeMatrix?Object.entries(t.committeeMatrix).map(([s,i])=>({committee:s,firstName:i,delegation:""})):t.committeeMatrixEntries??[],checklist:{...tb,...t.checklist||{}}}}const tb={positionPaper:!1,researchTopic:!1,researchCountryStance:!1,researchResolutions:!1,researchAllies:!1,researchNews:!1,positionPaperDraft:!1,positionPaperFinal:!1,positionPaperSubmit:!1,openingSpeechDraft:!1,openingSpeechTimed:!1,openingSpeech:!1,modSpeeches:!1,modCaucusPoints:!1,knowRules:!1,knowAgenda:!1,materialsReady:!1},Al=t=>({id:t,name:"New Conference",country:"",delegateEmail:"",stanceOverview:"",committeeCount:0,committees:[],committeeMatrixEntries:[],countdownDate:"",checklist:{...tb},trustedSources:[],nationSources:[],uploadedResources:[]});function Pl(){var t;return((t=crypto.randomUUID)==null?void 0:t.call(crypto))??`conf-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}const nb=I.createContext(null);function v4(t,e){const n=t.find(r=>r.id===e);return n||(t.length>0?t[0]:Al(Pl()))}function y4({children:t,userId:e=null}){var ne;const[n,r]=I.useState(()=>[Al(Pl())]),[s,i]=I.useState(()=>{var V;return((V=n[0])==null?void 0:V.id)??""}),[o,l]=I.useState(!1),[c,d]=I.useState(null),[f,p]=I.useState(!1),g=s||((ne=n[0])==null?void 0:ne.id),_=v4(n,g??"");I.useEffect(()=>{!g&&n[0]&&i(n[0].id)},[g,n]),I.useEffect(()=>{if(!e){p(!0);return}let V=!1;return m4(e).then($=>{V||!$||$.conferences.length>0&&(r($.conferences.map(g4)),i($.activeConferenceId||$.conferences[0].id))}).catch(()=>{}).finally(()=>{V||p(!0)}),()=>{V=!0}},[e]);const C=I.useCallback(V=>{r($=>{const ie=$.findIndex(Ue=>Ue.id===g);if(ie<0)return $;const ve=[...$];return ve[ie]=V($[ie]),ve})},[g]),N=I.useCallback(V=>C($=>({...$,name:V})),[C]),A=I.useCallback(V=>C($=>({...$,country:V})),[C]),E=I.useCallback(V=>C($=>({...$,delegateEmail:V})),[C]),y=I.useCallback(V=>C($=>({...$,stanceOverview:V})),[C]),b=I.useCallback(V=>C($=>({...$,committeeCount:Math.max(0,Math.min(20,V))})),[C]),R=I.useCallback(V=>C($=>({...$,committees:V})),[C]),B=I.useCallback(V=>C($=>({...$,committeeMatrixEntries:[...$.committeeMatrixEntries??[],V]})),[C]),F=I.useCallback(V=>C($=>({...$,committeeMatrixEntries:($.committeeMatrixEntries??[]).filter((ie,ve)=>ve!==V)})),[C]),T=I.useCallback(V=>C($=>({...$,countdownDate:V})),[C]),x=I.useCallback(V=>C($=>({...$,checklist:{...$.checklist,[V]:!$.checklist[V]}})),[C]),S=I.useCallback(V=>C($=>({...$,trustedSources:[...$.trustedSources,V]})),[C]),k=I.useCallback(V=>C($=>({...$,trustedSources:$.trustedSources.filter((ie,ve)=>ve!==V)})),[C]),j=I.useCallback(V=>C($=>({...$,nationSources:[...$.nationSources,V]})),[C]),P=I.useCallback(V=>C($=>({...$,nationSources:$.nationSources.filter((ie,ve)=>ve!==V)})),[C]),w=I.useCallback((V,$)=>C(ie=>({...ie,uploadedResources:[...ie.uploadedResources,{name:V,url:$}]})),[C]),oe=I.useCallback(V=>C($=>({...$,uploadedResources:$.uploadedResources.filter((ie,ve)=>ve!==V)})),[C]),He=I.useCallback(()=>{const V=Pl(),$=Al(V);r(ie=>[...ie,$]),i(V)},[]),Lt=I.useCallback(V=>{var Ue,M;const $=n.filter(L=>L.id!==V),ie=$.length>0?$:[Al(Pl())],ve=g===V?((Ue=ie[0])==null?void 0:Ue.id)??"":g??((M=ie[0])==null?void 0:M.id)??"";r(ie),i(ve)},[n,g]),Le=I.useCallback(V=>{i(V)},[]),G=I.useCallback(async()=>{var V;if(e){l(!0);try{await p4(e,{conferences:n,activeConferenceId:g??((V=n[0])==null?void 0:V.id)??""}),d(new Date)}finally{l(!1)}}},[e,n,g]);I.useEffect(()=>{if(!e||!f)return;const V=setTimeout(()=>{G()},3e3);return()=>clearTimeout(V)},[e,f,n,g,G]);const X={..._,conferences:n,activeConferenceId:g??"",setName:N,setCountry:A,setDelegateEmail:E,setStanceOverview:y,setCommitteeCount:b,setCommittees:R,addCommitteeMatrixEntry:B,removeCommitteeMatrixEntry:F,setCountdownDate:T,toggleChecklist:x,addTrustedSource:S,removeTrustedSource:k,addNationSource:j,removeNationSource:P,addUploadedResource:w,removeUploadedResource:oe,addConference:He,removeConference:Lt,setActiveConference:Le,saveToAccount:G,isSaving:o,lastSaved:c,isLoaded:f};return u.jsx(nb.Provider,{value:X,children:t})}function zr(){const t=I.useContext(nb);if(!t)throw new Error("useDelegate must be used within DelegateProvider");return t}function x4(){const{name:t,country:e,delegateEmail:n,stanceOverview:r,setName:s,setCountry:i,setDelegateEmail:o,setStanceOverview:l}=zr();return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex items-start gap-2",children:u.jsxs("div",{children:[u.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Country Assignment",u.jsx(Yn,{title:"Country & Stance",children:"Enter your conference name, country assignment, optional email (e.g. for chair contact), and a brief stance overview. This is your main profile for this conference."})]}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Your country and brief stance overview for this conference."})]})}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Conference name"}),u.jsx("input",{type:"text",value:t,onChange:c=>s(c.target.value),placeholder:"e.g. NMUN 2025",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Country"}),u.jsx("input",{type:"text",value:e,onChange:c=>i(c.target.value),placeholder:"e.g. France, United Kingdom",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Your email (optional)"}),u.jsx("input",{type:"email",value:n,onChange:c=>o(c.target.value),placeholder:"e.g. you@example.com",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Your email"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Brief stance overview"}),u.jsx("textarea",{value:r,onChange:c=>l(c.target.value),placeholder:"Summarize your country's position on the committee topic(s)...",rows:5,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]})]})]})}function _4(t){if(t===Ut)return"Other";const e=is.find(n=>n.value===t);return e?e.label:t}function w4(){const{committeeCount:t,committees:e,setCommitteeCount:n,setCommittees:r,committeeMatrixEntries:s,addCommitteeMatrixEntry:i,removeCommitteeMatrixEntry:o}=zr(),[l,c]=I.useState(""),[d,f]=I.useState(""),[p,g]=I.useState(""),[_,C]=I.useState({}),[N,A]=I.useState(0),E=Math.max(0,Math.min(20,t)),y=e.length>0?e:Array.from({length:E},(P,w)=>_[w]??""),b=P=>{const w=Math.max(0,Math.min(20,P));n(w),w<e.length?r(e.slice(0,w)):w>e.length&&r([...e,...Array(w-e.length).fill("")])},R=(P,w)=>{const oe=[...y];oe[P]=w===Ut?Ut:w,r(oe)},B=(P,w)=>{C(He=>({...He,[P]:w}));const oe=[...e];oe.length<=P||(oe[P]=w,r(oe))},F=P=>P===Ut?"Other":_4(P),T=y.filter(Boolean),x=Math.min(Math.max(0,N),Math.max(0,T.length-1)),S=T[x]??"",k=P=>s.map((w,oe)=>({entry:w,i:oe})).filter(({entry:w})=>w.committee===P),j=P=>{const w=d===ii?p.trim():d;!P||!l.trim()||(i({committee:P,firstName:l.trim(),delegation:w||""}),c(""),f(""),g(""))};return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex items-start gap-2",children:u.jsxs("div",{children:[u.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Committee Matrix",u.jsx(Yn,{title:"Committee Matrix",children:"Set how many committees and which ones for this conference. Use one tab per committee to add entries: first name and delegation. Each delegation shows a flag emoji. Use this to track who is in which committee."})]}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Set how many committees for this conference, which committees, then add delegates (first name + delegation)."})]})}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Conference committees"}),u.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"When registering this conference: how many committees, and which ones?"}),u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"How many committees?"}),u.jsx("input",{type:"number",min:0,max:20,value:E,onChange:P=>b(parseInt(P.target.value,10)||0),className:"w-24 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Number of committees"})]}),E>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block",children:"Which committees?"}),Array.from({length:E},(P,w)=>u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsxs("span",{className:"text-xs text-[var(--text-muted)] w-20",children:["Committee ",w+1]}),u.jsxs("select",{value:y[w]&&is.some(oe=>oe.value===y[w])?y[w]:y[w]?Ut:"",onChange:oe=>R(w,oe.target.value),className:"min-w-[12rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":`Committee ${w+1}`,children:[u.jsx("option",{value:"",children:"Select"}),is.map(oe=>u.jsx("option",{value:oe.value,children:oe.label},oe.value)),u.jsx("option",{value:Ut,children:"Other (custom)"})]}),(y[w]===Ut||y[w]&&!is.some(oe=>oe.value===y[w]))&&u.jsx("input",{type:"text",value:y[w]&&y[w]!==Ut?y[w]:_[w]??"",onChange:oe=>B(w,oe.target.value),placeholder:"Committee name",className:"min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]},w))]})]}),u.jsx("div",{className:"card-block overflow-hidden",children:T.length===0?u.jsx("div",{className:"px-4 py-8 text-center text-[var(--text-muted)] text-sm",children:"Set committees above, then use the tabs to add and view matrix entries per committee."}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex border-b border-[var(--border)] overflow-x-auto",children:T.map((P,w)=>u.jsx("button",{type:"button",onClick:()=>A(w),className:`px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${w===x?"border-[var(--accent)] text-[var(--accent)] bg-[var(--accent-soft)]/30":"border-transparent text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-elevated)]"}`,children:F(P)},P))}),S&&u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] mr-2",children:" Add to this committee:"}),u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"First name"}),u.jsx("input",{type:"text",value:l,onChange:P=>c(P.target.value),placeholder:"e.g. Alex",className:"w-28 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Delegation"}),u.jsxs("select",{value:d,onChange:P=>f(P.target.value),className:"min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Delegation",children:[u.jsx("option",{value:"",children:"Select"}),ef.map(P=>u.jsx("option",{value:P,children:P},P)),u.jsx("option",{value:ii,children:"Other"})]}),d===ii&&u.jsx("input",{type:"text",value:p,onChange:P=>g(P.target.value),placeholder:"Delegation name",className:"mt-1 min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("button",{onClick:()=>j(S),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-[var(--border)] bg-[var(--bg-elevated)]",children:[u.jsx("th",{className:"text-left px-4 py-2 font-medium text-[var(--text-muted)]",children:"First name"}),u.jsx("th",{className:"text-left px-4 py-2 font-medium text-[var(--text-muted)]",children:"Delegation"}),u.jsx("th",{className:"w-10 px-2 py-2","aria-label":"Remove"})]})}),u.jsx("tbody",{children:k(S).length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-[var(--text-muted)]",children:"No entries for this committee yet."})}):k(S).map(({entry:P,i:w})=>u.jsxs("tr",{className:"border-b border-[var(--border)]",children:[u.jsx("td",{className:"px-4 py-3 text-[var(--text)]",children:P.firstName}),u.jsx("td",{className:"px-4 py-3 text-[var(--text)]",children:u.jsxs("span",{className:"inline-flex items-center gap-2",children:[u.jsx("span",{className:"text-base shrink-0",title:P.delegation||void 0,children:Q1(P.delegation||"")||""}),P.delegation||""]})}),u.jsx("td",{className:"px-2 py-3",children:u.jsx("button",{type:"button",onClick:()=>o(w),className:"p-1.5 rounded text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)]","aria-label":"Remove entry",children:u.jsx(vs,{className:"w-4 h-4"})})})]},w))})]})})]})]})})]})}const rb="https://docs.google.com/document/d/1SuV8e971dG78pm6_P6Z62MZQTjRKgBn2lyclq148Ifw/edit?usp=sharing";function E4(){const{country:t}=zr();return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Prep Template"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Use this template to structure your research and speaking prep."})]}),u.jsxs("div",{className:"card-block p-4 sm:p-5 border-2 border-[var(--accent)]/30 bg-[var(--accent-soft)]/50",children:[u.jsxs("h3",{className:"text-sm font-medium text-[var(--text)] mb-1 flex items-center gap-2",children:[u.jsx(wO,{className:"w-4 h-4 text-[var(--accent)]"}),"Make a copy to guide your prep"]}),u.jsxs("p",{className:"text-sm text-[var(--text-muted)] mb-3",children:["Open the MUN Prep Template in Google Docs, then use ",u.jsx("strong",{children:"File  Make a copy"})," to create your own copy for research and speaking prep."]}),u.jsxs("a",{href:rb,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 transition-opacity",children:[u.jsx(Zm,{className:"w-4 h-4"}),"Open MUN Prep Template (Google Doc)"]})]}),u.jsxs("div",{className:"card-block p-6 space-y-4",children:[u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Country"}),u.jsx("p",{className:"text-sm text-[var(--text)]",children:t||""})]}),u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Topic research"}),u.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Key facts, UN resolutions, recent developments."}),u.jsx("textarea",{placeholder:"Notes...",rows:4,className:"mt-2 w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]}),u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Country stance"}),u.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"How your country views the topic; red lines and priorities."}),u.jsx("textarea",{placeholder:"Notes...",rows:4,className:"mt-2 w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]}),u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Opening speech (draft)"}),u.jsx("textarea",{placeholder:"Draft opening statement...",rows:5,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]}),u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Mod speeches (optional)"}),u.jsx("textarea",{placeholder:"Talking points for moderated caucus...",rows:3,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]})]})]})}const sb=["Reuters","BBC News","Al Jazeera","Associated Press (AP)","The Guardian","Council on Foreign Relations (CFR)","Human Rights Watch","Amnesty International"],gx=[...X1.map(t=>t.name),...sb],b4=Object.fromEntries(X1.map(t=>[t.name,t.url])),T4={health:["WHO","UN News"],disease:["WHO","UN News"],refugee:["UNHCR","UN News","Amnesty International"],refugees:["UNHCR","UN News","Amnesty International"],migration:["UNHCR","UN News","IOM (International Organization for Migration)"],climate:["UN News","UN Environment Programme (UNEP)","Reuters","The Guardian"],environment:["UN News","UN Environment Programme (UNEP)","Reuters","The Guardian"],economy:["World Bank","IMF","UN News"],economic:["World Bank","IMF","UN News"],finance:["IMF","World Bank"],rights:["Human Rights Watch","Amnesty International","UN News","UN Human Rights (OHCHR)"],"human-rights":["Human Rights Watch","Amnesty International","UN News","UN Human Rights (OHCHR)"],conflict:["Reuters","BBC News","Council on Foreign Relations (CFR)","UN News","UN Peacekeeping"],security:["Reuters","BBC News","Council on Foreign Relations (CFR)","UN News","UN Security Council"],peace:["UN News","UN Peacekeeping","Reuters","BBC News"],education:["UN News","UNESCO"],women:["UN News","Amnesty International","UN Women"],gender:["UN News","Amnesty International","UN Women"],disarmament:["UN News","UN Office for Disarmament Affairs (UNODA)","Reuters"],arms:["UN News","UN Office for Disarmament Affairs (UNODA)","Reuters"],drugs:["UN Office on Drugs and Crime (UNODC)","UN News"],crime:["UN Office on Drugs and Crime (UNODC)","UN News"],treaties:["UN Treaty Collection","UN Official Document System (ODS)","UN Audiovisual Library of International Law"],documents:["UN Official Document System (ODS)","UN Digital Library","UN Treaty Collection"],food:["WFP (World Food Programme)","FAO","UN News"],labour:["ILO","UN News"],habitat:["UN-Habitat","UN News"],charter:["UN Charter","UN Official Document System (ODS)"],missions:["UN Peacekeeping","UN Peacekeeping  current missions","UN Special Political Missions"]};function S4(t){const e=t.toLowerCase().trim().split(/\s+/).filter(Boolean);if(e.length===0)return[];const n=new Set;for(const i of e){const o=[];for(const[c,d]of Object.entries(T4))(c.includes(i)||i.includes(c))&&o.push(...d);const l=gx.filter(c=>c.toLowerCase().includes(i));[...o,...l].forEach(c=>n.add(c))}const r=e.join(" ");return gx.filter(i=>i.toLowerCase().includes(r)).forEach(i=>n.add(i)),Array.from(n)}function C4(){const{trustedSources:t,nationSources:e,addTrustedSource:n,removeTrustedSource:r,addNationSource:s,removeNationSource:i}=zr(),[o,l]=I.useState(""),[c,d]=I.useState(""),[f,p]=I.useState(""),g=I.useMemo(()=>S4(f),[f]),_=()=>{o.trim()&&(n(o.trim()),l(""))},C=()=>{c.trim()&&(s(c.trim()),d(""))},N=A=>{t.includes(A)||n(A)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Trusted & Nation Sources"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Trusted sources and nation-specific sources for research."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Search by key terms (topic-related)"}),u.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Enter terms related to your topic (e.g. health, refugees, climate, economy) to see suggested sources."}),u.jsx("div",{className:"flex gap-2",children:u.jsxs("div",{className:"relative flex-1",children:[u.jsx(DO,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--text-muted)] pointer-events-none"}),u.jsx("input",{type:"text",value:f,onChange:A=>p(A.target.value),placeholder:"e.g. health refugees climate",className:"w-full pl-9 pr-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]})}),g.length>0&&u.jsxs("div",{className:"rounded-lg border border-[var(--border)] bg-[var(--bg-elevated)] p-3",children:[u.jsx("p",{className:"text-xs font-medium text-[var(--text-muted)] mb-2",children:"Suggested sources for your topic"}),u.jsx("div",{className:"flex flex-wrap gap-1.5",children:g.map(A=>u.jsxs("button",{type:"button",onClick:()=>N(A),disabled:t.includes(A),className:"px-2.5 py-1 rounded-md text-xs font-medium transition-colors bg-[var(--accent-soft)] text-[var(--accent)] hover:opacity-90 border border-[var(--accent)]/30 disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",A]},A))})]}),u.jsx("h3",{className:"text-sm font-medium text-[var(--text)] pt-2 border-t border-[var(--border)]",children:" Trusted sources"}),u.jsx("p",{className:"text-xs text-[var(--text-muted)] mb-2",children:"Official UN links by category (click to add; open link in new tab)."}),tp.map(({category:A,sources:E})=>u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wide mb-1.5",children:A}),u.jsx("div",{className:"flex flex-wrap gap-1.5",children:E.map(({name:y,url:b})=>u.jsxs("span",{className:"inline-flex items-center gap-1",children:[u.jsxs("button",{type:"button",onClick:()=>N(y),disabled:t.includes(y),className:"px-2.5 py-1 rounded-md text-xs font-medium transition-colors bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--accent-soft)] border border-[var(--border)] disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",y]}),u.jsx("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--accent)] hover:underline text-xs",title:"Open in new tab",children:""})]},y))})]},A)),u.jsx("h4",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wide mb-1.5 mt-4",children:"Other trusted"}),u.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:sb.map(A=>u.jsxs("button",{type:"button",onClick:()=>N(A),disabled:t.includes(A),className:"px-2.5 py-1 rounded-md text-xs font-medium transition-colors bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--accent-soft)] border border-[var(--border)] disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",A]},A))}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:o,onChange:A=>l(A.target.value),onKeyDown:A=>A.key==="Enter"&&_(),placeholder:"URL or name",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("ul",{className:"space-y-2",children:t.map((A,E)=>{const y=b4[A];return u.jsxs("li",{className:"flex items-center justify-between gap-2 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] text-sm text-[var(--text)]",children:[y?u.jsxs("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--accent)] hover:underline truncate min-w-0",children:[A," "]}):u.jsx("span",{className:"truncate min-w-0",children:A}),u.jsx("button",{onClick:()=>r(E),className:"p-1 rounded text-[var(--text-muted)] hover:text-[var(--danger)] shrink-0",children:u.jsx(vs,{className:"w-4 h-4"})})]},E)})})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Nation-specific sources"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:c,onChange:A=>d(A.target.value),onKeyDown:A=>A.key==="Enter"&&C(),placeholder:"URL or name",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("ul",{className:"space-y-2",children:e.map((A,E)=>u.jsxs("li",{className:"flex items-center justify-between px-3 py-2 rounded-lg bg-[var(--bg-elevated)] text-sm text-[var(--text)]",children:[A,u.jsx("button",{onClick:()=>i(E),className:"p-1 rounded text-[var(--text-muted)] hover:text-[var(--danger)]",children:u.jsx(vs,{className:"w-4 h-4"})})]},E))})]})]})}function I4(){const{uploadedResources:t,addUploadedResource:e,removeUploadedResource:n}=zr(),[r,s]=I.useState(""),[i,o]=I.useState(""),l=()=>{r.trim()&&(e(r.trim(),i.trim()||void 0),s(""),o(""))};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Chair Report & Delegate Resources"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Handbook, position paper guidelines, chair report  upload or link."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsxs("h3",{className:"text-sm font-medium text-[var(--text)] flex items-center gap-2",children:[u.jsx(LO,{className:"w-4 h-4 text-[var(--accent)]"}),"  Add resource"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"text",value:r,onChange:c=>s(c.target.value),placeholder:"Resource name (e.g. Chair report, Pos paper guidelines)",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsx("input",{type:"text",value:i,onChange:c=>o(c.target.value),placeholder:"URL (optional)",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-64 overflow-auto",children:t.map((c,d)=>u.jsxs("li",{className:"px-3 py-3 flex items-center justify-between gap-2",children:[c.url?u.jsxs("a",{href:c.url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 min-w-0 flex items-center gap-2 rounded-lg py-1 -mx-1 px-1 hover:bg-[var(--accent-soft)] transition-colors group",children:[u.jsx(Zm,{className:"w-4 h-4 flex-shrink-0 text-[var(--text-muted)] group-hover:text-[var(--accent)]"}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-[var(--text)] group-hover:text-[var(--accent)] truncate",children:c.name}),u.jsx("p",{className:"text-xs text-[var(--text-muted)] truncate max-w-xs",children:c.url})]})]}):u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-[var(--text)]",children:c.name}),u.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"No link"})]}),u.jsx("button",{type:"button",onClick:()=>n(d),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)] flex-shrink-0","aria-label":"Remove resource",children:u.jsx(vs,{className:"w-4 h-4"})})]},d))})]})]})}const k4=[{title:" Topic research",docSection:"Complete the Topic research section in your prep doc",keys:[{key:"researchTopic",label:"Topic and background (key facts, history)"},{key:"researchResolutions",label:"Existing UN resolutions and draft ideas"},{key:"researchNews",label:"Recent news and developments on the topic"}]},{title:" Country stance",docSection:"Complete the Country stance section in your prep doc",keys:[{key:"researchCountryStance",label:"Your countrys stance, policy, and red lines"},{key:"researchAllies",label:"Likely allies and blocs"}]},{title:" Position paper",docSection:"Use the Position paper section in your prep doc",keys:[{key:"positionPaperDraft",label:"Draft (structure and main points)"},{key:"positionPaperFinal",label:"Finalise (edit and cite sources)"},{key:"positionPaperSubmit",label:"Submit by deadline"},{key:"positionPaper",label:"Complete and approved"}]},{title:" Opening speech",docSection:"Use the Opening speech section in your prep doc",keys:[{key:"openingSpeechDraft",label:"Draft opening statement"},{key:"openingSpeechTimed",label:"Time and trim to speaking limit"},{key:"openingSpeech",label:"Ready and practised"}]},{title:" Mod & unmod speeches",docSection:"Use the Mod / unmod section in your prep doc",keys:[{key:"modSpeeches",label:"Moderated caucus talking points"},{key:"modCaucusPoints",label:"Unmoderated caucus / bloc discussion points"}]},{title:" Rules & materials",docSection:"Check off before conference",keys:[{key:"knowRules",label:"Committee rules and parliamentary procedure"},{key:"knowAgenda",label:"Agenda, timing, and conference schedule"},{key:"materialsReady",label:"Materials ready (placard, paper, laptop, etc.)"}]}];function N4(){const{checklist:t,toggleChecklist:e}=zr();return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex items-start gap-2",children:u.jsxs("div",{children:[u.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Preparation checklist",u.jsx(Yn,{title:"Preparation checklist",children:"Tick off research, position paper, speeches, and materials. The checklist follows the sections of the MUN Prep Template  make a copy of the template and work through each section in your doc."})]}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm mb-2",children:"This checklist follows the sections of the MUN Prep Template. Make a copy of the template and work through each section in your doc."}),u.jsxs("a",{href:rb,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 text-sm font-medium text-[var(--accent)] hover:underline",children:[u.jsx(Zm,{className:"w-4 h-4"}),"Open MUN Prep Template (Google Doc)"]})]})}),u.jsx("div",{className:"space-y-5",children:k4.map(n=>u.jsxs("div",{className:"card-block p-4",children:[u.jsx("h3",{className:"font-medium text-[var(--text)] mb-1",children:n.title}),u.jsx("p",{className:"text-xs text-[var(--text-muted)] mb-3",children:n.docSection}),u.jsx("ul",{className:"space-y-1",children:n.keys.map(({key:r,label:s})=>u.jsx("li",{children:u.jsxs("label",{className:"flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer hover:bg-[var(--bg-elevated)] transition-colors",children:[u.jsx("span",{className:"text-[var(--accent)] flex-shrink-0",children:t[r]?u.jsx(wa,{className:"w-5 h-5 fill-[var(--accent)]"}):u.jsx(mu,{className:"w-5 h-5"})}),u.jsx("span",{className:`text-sm text-[var(--text)] ${t[r]?"line-through text-[var(--text-muted)]":""}`,children:s}),u.jsx("input",{type:"checkbox",checked:t[r],onChange:()=>e(r),className:"sr-only","aria-label":s})]})},r))})]},n.title))})]})}function A4(){const{countdownDate:t,setCountdownDate:e}=zr(),[n,r]=I.useState(null);return I.useEffect(()=>{if(!t){r(null);return}const s=new Date(t).getTime(),i=()=>{const l=Date.now();if(l>=s){r({days:0,hours:0,minutes:0,seconds:0});return}const c=Math.floor((s-l)/1e3);r({days:Math.floor(c/86400),hours:Math.floor(c%86400/3600),minutes:Math.floor(c%3600/60),seconds:c%60})};i();const o=setInterval(i,1e3);return()=>clearInterval(o)},[t]),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Conference Countdown"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Set the conference start date and see time remaining."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Conference start (date & time)"}),u.jsx("input",{type:"datetime-local",value:t?t.slice(0,16):"",onChange:s=>e(s.target.value?new Date(s.target.value).toISOString():""),className:"w-full max-w-xs px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),n&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--text-muted)]",children:[u.jsx(Xm,{className:"w-4 h-4 text-[var(--accent)]"}),u.jsx("span",{children:" Time until conference:"})]})]}),n&&u.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:n.days}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Days"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:n.hours}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Hours"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:n.minutes}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Minutes"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:n.seconds}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Seconds"})]})]})]})}const P4=[{step:1,title:"Set your conference & country",body:"In  Country & Stance, enter conference name, your country assignment, your email (optional), and a brief stance overview."},{step:2,title:"Committee matrix",body:"In  Committee Matrix, set how many committees and which ones. Use the tabs to add entries per committee: first name and delegation. Each delegation shows a flag emoji."},{step:3,title:"Prep template",body:"In  Prep Template, open the MUN Prep Template (Google Doc) and make a copy. Use it to structure research, country stance, position paper, and speeches."},{step:4,title:"Trusted & nation sources",body:"In  Trusted & Nation Sources, add links and sources you use for research and country policy."},{step:5,title:"Checklist",body:"In  Checklist, tick off research, position paper, speeches, and materials. The checklist follows the sections of the MUN Prep Template."},{step:6,title:"Chair report & resources",body:"In  Chair Report & Resources, add handbook, position paper guidelines, and any uploaded resources from your chair."},{step:7,title:"Conference countdown",body:"Set your  Conference Countdown date to see time left until the conference."},{step:8,title:"Save to account",body:'Sign in and use "Save to account" to store your conferences and data across devices. You can add multiple conferences and switch between them.'}];function R4(){const[t,e]=I.useState(!1);return u.jsxs("section",{className:"mt-10 pt-6 border-t border-[var(--border)]","aria-labelledby":"delegate-howto-heading",children:[u.jsxs("button",{type:"button",onClick:()=>e(n=>!n),className:"flex items-center gap-2 w-full text-left group","aria-expanded":t,children:[u.jsx(_a,{className:"w-5 h-5 text-[var(--accent)] shrink-0"}),u.jsx("h2",{id:"delegate-howto-heading",className:"font-semibold text-lg text-[var(--text)] group-hover:text-[var(--accent)] transition-colors",children:"How to use this system (Delegate)"}),t?u.jsx(Jm,{className:"w-5 h-5 text-[var(--text-muted)] ml-auto"}):u.jsx(ji,{className:"w-5 h-5 text-[var(--text-muted)] ml-auto"})]}),t&&u.jsxs("div",{className:"mt-4 space-y-4 text-sm text-[var(--text-muted)]",children:[u.jsx("p",{className:"text-[var(--text)]",children:"Step-by-step guide for preparing as a delegate:"}),u.jsx("ol",{className:"space-y-3 list-none pl-0",children:P4.map(({step:n,title:r,body:s})=>u.jsxs("li",{className:"flex gap-3",children:[u.jsx("span",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-[var(--accent-soft)] text-[var(--accent)] font-semibold flex items-center justify-center text-xs",children:n}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-[var(--text)]",children:r}),u.jsx("p",{className:"mt-0.5",children:s})]})]},n))})]})]})}const ib="seamuns-dashboard-sidebar-expanded";function j4(){try{const t=localStorage.getItem(ib);return t===null?!0:t==="true"}catch{return!0}}function D4(){const{conferences:t,activeConferenceId:e,setActiveConference:n,addConference:r,removeConference:s,saveToAccount:i,isSaving:o,lastSaved:l,isLoaded:c}=zr(),{isAuthenticated:d}=Qm(),f=t.length>1,p=g=>{const _=Date.now()-g.getTime();return _<6e4?"Saved just now":_<36e5?`Saved ${Math.floor(_/6e4)}m ago`:g.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})};return u.jsxs("div",{className:"border-b border-[var(--border)] bg-[var(--bg-elevated)] px-3 sm:px-4 py-2 sm:py-3 flex flex-wrap items-center gap-2 sm:gap-3 shadow-[0_1px_0_0_var(--border)]",children:[u.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-[var(--accent-soft)] flex items-center justify-center flex-shrink-0",children:u.jsx(pu,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--accent)]"})}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("h1",{className:"page-title text-[var(--text)] whitespace-nowrap truncate",children:" Delegate Dashboard"}),u.jsx("p",{className:"text-xs sm:text-sm text-[var(--text-muted)] whitespace-nowrap truncate",children:" Country   Matrix   Prep   Checklist   Countdown"}),c&&!d&&u.jsx("p",{className:"text-xs text-[var(--accent)] mt-1",children:"Sign in and save to account so your data isn't lost on refresh or when switching devices."})]}),c&&u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsxs("label",{className:"flex items-center gap-1.5 text-xs text-[var(--text-muted)]",children:[u.jsx("span",{className:"hidden sm:inline",children:"Conference"}),u.jsx("select",{value:e,onChange:g=>n(g.target.value),className:"min-w-[8rem] px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Select conference",children:t.map(g=>u.jsx("option",{value:g.id,children:g.name||"Unnamed"},g.id))})]}),u.jsxs("button",{type:"button",onClick:r,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--accent)] text-white hover:opacity-90 transition-opacity",children:[u.jsx(Sn,{className:"w-3.5 h-3.5"})," Add conference"]}),f&&u.jsx("button",{type:"button",onClick:()=>s(e),title:"Remove this conference",className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-card)] transition-colors","aria-label":"Remove conference",children:u.jsx(vs,{className:"w-3.5 h-3.5"})}),d&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>i(),disabled:o,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--brand)] text-white hover:opacity-90 transition-opacity disabled:opacity-60",children:[u.jsx(jO,{className:"w-3.5 h-3.5"}),o?"Saving":"Save to account"]}),l&&!o&&u.jsxs("span",{className:"text-xs text-[var(--text-muted)]",title:"Auto-saved to your account",children:["Auto-saved ",p(l)]})]})]})]})}const O4=[{id:"country",label:" Country & Stance",icon:bO},{id:"matrix",label:" Committee Matrix",icon:G1},{id:"prep",label:" Prep Template",icon:hu},{id:"sources",label:" Trusted & Nation Sources",icon:Xh},{id:"links",label:" Official links",icon:Xh},{id:"resources",label:" Chair Report & Resources",icon:_a},{id:"checklist",label:" Checklist",icon:wa},{id:"countdown",label:" Conference Countdown",icon:Xm}];function M4(){const[t,e]=I.useState("country"),[n,r]=I.useState(j4);I.useEffect(()=>{localStorage.setItem(ib,String(n))},[n]);const s=()=>r(i=>!i);return u.jsxs("div",{className:"flex flex-col lg:flex-row min-h-[calc(100vh-3rem)] sm:min-h-[calc(100vh-3.5rem)] lg:min-h-[calc(100vh-4rem)]",children:[u.jsx("aside",{className:`border-b lg:border-b-0 lg:border-r border-[var(--border)] bg-[var(--bg-elevated)] flex-shrink-0 overflow-x-auto overflow-y-hidden transition-[width] duration-200 ${n?"lg:w-max lg:min-w-[11rem] lg:max-w-[14rem]":"lg:w-10"}`,children:u.jsxs("div",{className:"flex lg:flex-col gap-0.5 p-1 sm:p-1.5 items-stretch lg:items-stretch",children:[O4.map(({id:i,label:o,icon:l})=>u.jsxs("button",{onClick:()=>e(i),title:o,className:`flex items-center gap-1.5 px-2 py-1.5 rounded-md text-xs font-medium transition-colors text-left whitespace-nowrap min-w-0 shrink-0 ${n?"w-full lg:w-max lg:min-w-0":"w-full lg:justify-center lg:px-1.5 lg:w-full"} ${t===i?"bg-[var(--accent)] text-white shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:[u.jsx(l,{className:"w-3.5 h-3.5 flex-shrink-0"}),u.jsx("span",{className:n?"lg:whitespace-nowrap":"truncate lg:sr-only lg:overflow-hidden lg:w-0",children:o})]},i)),u.jsxs("button",{type:"button",onClick:s,title:n?"Collapse sidebar":"Expand sidebar",className:"hidden lg:flex items-center justify-center gap-1.5 px-1.5 py-1.5 rounded-md text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors w-max",children:[n?u.jsx(z1,{className:"w-4 h-4 flex-shrink-0"}):u.jsx($1,{className:"w-4 h-4 flex-shrink-0"}),n&&u.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:"Hide labels"})]})]})}),u.jsxs("main",{className:"flex-1 p-2 sm:p-3 md:p-5 overflow-auto min-w-0",children:[t==="country"&&u.jsx(x4,{}),t==="matrix"&&u.jsx(w4,{}),t==="prep"&&u.jsx(E4,{}),t==="sources"&&u.jsx(C4,{}),t==="links"&&u.jsx("div",{className:"card-block p-4 sm:p-6",children:u.jsx(np,{showHeading:!0})}),t==="resources"&&u.jsx(I4,{}),t==="checklist"&&u.jsx(N4,{}),t==="countdown"&&u.jsx(A4,{}),u.jsx(R4,{})]})]})}function V4(){const{user:t}=Qm(),e=(t==null?void 0:t.uid)??null;return u.jsxs(y4,{userId:e,children:[u.jsx(D4,{}),u.jsx(M4,{})]})}function L4(){return u.jsxs("div",{className:"max-w-[1000px] mx-auto px-3 sm:px-6 py-8 sm:py-12 md:py-16 text-center",children:[u.jsx(K1,{className:"h-10 sm:h-12 md:h-14 w-auto mx-auto mb-4 sm:mb-5"}),u.jsxs("h1",{className:"font-semibold text-2xl sm:text-3xl md:text-4xl text-[var(--text)] mb-2 sm:mb-3",children:["SEAMUNs Dashboard ",u.jsx("span",{className:"text-[var(--brand)]",children:""})]}),u.jsxs("p",{className:"text-[var(--text-muted)] text-sm sm:text-base md:text-lg mb-6 sm:mb-10 max-w-xl mx-auto",children:["Part of ",u.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",className:"text-[var(--brand)] hover:underline",children:"SEAMUNs"}),"  run committee sessions and prepare for conferences. Choose your role below."]}),u.jsxs("div",{className:"grid sm:grid-cols-2 gap-3 sm:gap-6",children:[u.jsxs(bh,{to:"/chair",className:"group block p-4 sm:p-6 md:p-8 rounded-[var(--radius-card)] border border-[var(--border)] bg-[var(--bg-card)] shadow-[var(--shadow-card)] hover:border-[var(--brand)] hover:bg-[var(--brand-soft)] transition-all text-left",children:[u.jsx("div",{className:"w-9 h-9 sm:w-11 sm:h-11 rounded-lg sm:rounded-xl bg-[var(--brand-soft)] flex items-center justify-center mb-3 sm:mb-4 group-hover:scale-105 transition-transform",children:u.jsx(U1,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--brand)]"})}),u.jsx("h2",{className:"font-semibold text-lg sm:text-xl text-[var(--text)] mb-1.5 sm:mb-2",children:" Chair Room"}),u.jsx("p",{className:"text-[var(--text-muted)] text-xs sm:text-sm",children:" Digital Room   Delegates   Motions   Voting   Speakers   Crisis   Archive"})]}),u.jsxs(bh,{to:"/delegate",className:"group block p-4 sm:p-6 md:p-8 rounded-[var(--radius-card)] border border-[var(--border)] bg-[var(--bg-card)] shadow-[var(--shadow-card)] hover:border-[var(--accent)] hover:bg-[var(--accent-soft)] transition-all text-left",children:[u.jsx("div",{className:"w-9 h-9 sm:w-11 sm:h-11 rounded-lg sm:rounded-xl bg-[var(--accent-soft)] flex items-center justify-center mb-3 sm:mb-4 group-hover:scale-105 transition-transform",children:u.jsx(pu,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--accent)]"})}),u.jsx("h2",{className:"font-semibold text-lg sm:text-xl text-[var(--text)] mb-1.5 sm:mb-2",children:" Delegate Dashboard"}),u.jsx("p",{className:"text-[var(--text-muted)] text-xs sm:text-sm",children:" Country   Matrix   Prep   Checklist   Countdown"})]})]}),u.jsxs("p",{className:"mt-6 sm:mt-10 text-[var(--text-muted)] text-xs sm:text-sm flex items-center justify-center gap-2",children:[u.jsx(_O,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),u.jsx("span",{children:" Per-conference setup for chairs and delegates"})]}),u.jsx("section",{className:"mt-10 sm:mt-14 pt-8 sm:pt-12 border-t border-[var(--border)] text-left",children:u.jsx(np,{showHeading:!0})})]})}function U4(){return u.jsx(mO,{children:u.jsx(sI,{children:u.jsxs(Rs,{path:"/",element:u.jsx(UO,{}),children:[u.jsx(Rs,{index:!0,element:u.jsx(L4,{})}),u.jsx(Rs,{path:"chair",element:u.jsx(f4,{})}),u.jsx(Rs,{path:"delegate",element:u.jsx(V4,{})}),u.jsx(Rs,{path:"*",element:u.jsx(tI,{to:"/",replace:!0})})]})})})}const F4=!0,B4=F4?cO:uO,z4=u.jsx(I.StrictMode,{children:u.jsx(hI,{children:u.jsx(B4,{children:u.jsx(U4,{})})})});Nw(document.getElementById("root")).render(z4);
