function PT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function RT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fx={exports:{}},Sc={},px={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ra=Symbol.for("react.element"),jT=Symbol.for("react.portal"),DT=Symbol.for("react.fragment"),OT=Symbol.for("react.strict_mode"),MT=Symbol.for("react.profiler"),VT=Symbol.for("react.provider"),LT=Symbol.for("react.context"),UT=Symbol.for("react.forward_ref"),FT=Symbol.for("react.suspense"),BT=Symbol.for("react.memo"),zT=Symbol.for("react.lazy"),Zm=Symbol.iterator;function $T(t){return t===null||typeof t!="object"?null:(t=Zm&&t[Zm]||t["@@iterator"],typeof t=="function"?t:null)}var mx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gx=Object.assign,vx={};function _i(t,e,n){this.props=t,this.context=e,this.refs=vx,this.updater=n||mx}_i.prototype.isReactComponent={};_i.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yx(){}yx.prototype=_i.prototype;function Zh(t,e,n){this.props=t,this.context=e,this.refs=vx,this.updater=n||mx}var ef=Zh.prototype=new yx;ef.constructor=Zh;gx(ef,_i.prototype);ef.isPureReactComponent=!0;var eg=Array.isArray,xx=Object.prototype.hasOwnProperty,tf={current:null},_x={key:!0,ref:!0,__self:!0,__source:!0};function wx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)xx.call(e,r)&&!_x.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ra,type:t,key:i,ref:o,props:s,_owner:tf.current}}function HT(t,e){return{$$typeof:ra,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nf(t){return typeof t=="object"&&t!==null&&t.$$typeof===ra}function WT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tg=/\/+/g;function Vu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?WT(""+t.key):e.toString(36)}function il(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ra:case jT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Vu(o,0):r,eg(s)?(n="",t!=null&&(n=t.replace(tg,"$&/")+"/"),il(s,e,n,"",function(d){return d})):s!=null&&(nf(s)&&(s=HT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(tg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",eg(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Vu(i,l);o+=il(i,e,n,c,s)}else if(c=$T(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Vu(i,l++),o+=il(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Oa(t,e,n){if(t==null)return t;var r=[],s=0;return il(t,r,"","",function(i){return e.call(n,i,s++)}),r}function GT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},ol={transition:null},qT={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:ol,ReactCurrentOwner:tf};function Ex(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Oa,forEach:function(t,e,n){Oa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Oa(t,function(){e++}),e},toArray:function(t){return Oa(t,function(e){return e})||[]},only:function(t){if(!nf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=_i;le.Fragment=DT;le.Profiler=MT;le.PureComponent=Zh;le.StrictMode=OT;le.Suspense=FT;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qT;le.act=Ex;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=tf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)xx.call(e,c)&&!_x.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:ra,type:t.type,key:s,ref:i,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:LT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VT,_context:t},t.Consumer=t};le.createElement=wx;le.createFactory=function(t){var e=wx.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:UT,render:t}};le.isValidElement=nf;le.lazy=function(t){return{$$typeof:zT,_payload:{_status:-1,_result:t},_init:GT}};le.memo=function(t,e){return{$$typeof:BT,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=ol.transition;ol.transition={};try{t()}finally{ol.transition=e}};le.unstable_act=Ex;le.useCallback=function(t,e){return xt.current.useCallback(t,e)};le.useContext=function(t){return xt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};le.useEffect=function(t,e){return xt.current.useEffect(t,e)};le.useId=function(){return xt.current.useId()};le.useImperativeHandle=function(t,e,n){return xt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return xt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return xt.current.useReducer(t,e,n)};le.useRef=function(t){return xt.current.useRef(t)};le.useState=function(t){return xt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return xt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return xt.current.useTransition()};le.version="18.3.1";px.exports=le;var N=px.exports;const KT=RT(N),QT=PT({__proto__:null,default:KT},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT=N,JT=Symbol.for("react.element"),XT=Symbol.for("react.fragment"),ZT=Object.prototype.hasOwnProperty,eb=YT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tb={key:!0,ref:!0,__self:!0,__source:!0};function Tx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ZT.call(e,r)&&!tb.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:JT,type:t,key:i,ref:o,props:s,_owner:eb.current}}Sc.Fragment=XT;Sc.jsx=Tx;Sc.jsxs=Tx;fx.exports=Sc;var u=fx.exports,bx={exports:{}},Ot={},Sx={exports:{}},Ix={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,X){var $=G.length;G.push(X);e:for(;0<$;){var V=$-1>>>1,J=G[V];if(0<s(J,X))G[V]=X,G[$]=J,$=V;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var X=G[0],$=G.pop();if($!==X){G[0]=$;e:for(var V=0,J=G.length,oe=J>>>1;V<oe;){var Le=2*(V+1)-1,Ke=G[Le],M=Le+1,L=G[M];if(0>s(Ke,$))M<J&&0>s(L,Ke)?(G[V]=L,G[M]=$,V=M):(G[V]=Ke,G[Le]=$,V=Le);else if(M<J&&0>s(L,$))G[V]=L,G[M]=$,V=M;else break e}}return X}function s(G,X){var $=G.sortIndex-X.sortIndex;return $!==0?$:G.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,m=null,g=3,_=!1,I=!1,k=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(G){for(var X=n(d);X!==null;){if(X.callback===null)r(d);else if(X.startTime<=G)r(d),X.sortIndex=X.expirationTime,e(c,X);else break;X=n(d)}}function R(G){if(k=!1,T(G),!I)if(n(c)!==null)I=!0,Lt(B);else{var X=n(d);X!==null&&Ve(R,X.startTime-G)}}function B(G,X){I=!1,k&&(k=!1,E(x),x=-1),_=!0;var $=g;try{for(T(X),m=n(c);m!==null&&(!(m.expirationTime>X)||G&&!j());){var V=m.callback;if(typeof V=="function"){m.callback=null,g=m.priorityLevel;var J=V(m.expirationTime<=X);X=t.unstable_now(),typeof J=="function"?m.callback=J:m===n(c)&&r(c),T(X)}else r(c);m=n(c)}if(m!==null)var oe=!0;else{var Le=n(d);Le!==null&&Ve(R,Le.startTime-X),oe=!1}return oe}finally{m=null,g=$,_=!1}}var F=!1,b=null,x=-1,S=5,C=-1;function j(){return!(t.unstable_now()-C<S)}function P(){if(b!==null){var G=t.unstable_now();C=G;var X=!0;try{X=b(!0,G)}finally{X?w():(F=!1,b=null)}}else F=!1}var w;if(typeof y=="function")w=function(){y(P)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,$e=ie.port2;ie.port1.onmessage=P,w=function(){$e.postMessage(null)}}else w=function(){A(P,0)};function Lt(G){b=G,F||(F=!0,w())}function Ve(G,X){x=A(function(){G(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){I||_||(I=!0,Lt(B))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var $=g;g=X;try{return G()}finally{g=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,X){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var $=g;g=G;try{return X()}finally{g=$}},t.unstable_scheduleCallback=function(G,X,$){var V=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?V+$:V):$=V,G){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=$+J,G={id:f++,callback:X,priorityLevel:G,startTime:$,expirationTime:J,sortIndex:-1},$>V?(G.sortIndex=$,e(d,G),n(c)===null&&G===n(d)&&(k?(E(x),x=-1):k=!0,Ve(R,$-V))):(G.sortIndex=J,e(c,G),I||_||(I=!0,Lt(B))),G},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(G){var X=g;return function(){var $=g;g=X;try{return G.apply(this,arguments)}finally{g=$}}}})(Ix);Sx.exports=Ix;var nb=Sx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb=N,Dt=nb;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cx=new Set,ko={};function vs(t,e){ii(t,e),ii(t+"Capture",e)}function ii(t,e){for(ko[t]=e,t=0;t<e.length;t++)Cx.add(e[t])}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Id=Object.prototype.hasOwnProperty,sb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ng={},rg={};function ib(t){return Id.call(rg,t)?!0:Id.call(ng,t)?!1:sb.test(t)?rg[t]=!0:(ng[t]=!0,!1)}function ob(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ab(t,e,n,r){if(e===null||typeof e>"u"||ob(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _t(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new _t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new _t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new _t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new _t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new _t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new _t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new _t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new _t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new _t(t,5,!1,t.toLowerCase(),null,!1,!1)});var rf=/[\-:]([a-z])/g;function sf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rf,sf);et[e]=new _t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rf,sf);et[e]=new _t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rf,sf);et[e]=new _t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new _t(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new _t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new _t(t,1,!1,t.toLowerCase(),null,!0,!0)});function of(t,e,n,r){var s=et.hasOwnProperty(e)?et[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ab(e,n,s,r)&&(n=null),r||s===null?ib(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gn=rb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ma=Symbol.for("react.element"),Ms=Symbol.for("react.portal"),Vs=Symbol.for("react.fragment"),af=Symbol.for("react.strict_mode"),Cd=Symbol.for("react.profiler"),kx=Symbol.for("react.provider"),Nx=Symbol.for("react.context"),lf=Symbol.for("react.forward_ref"),kd=Symbol.for("react.suspense"),Nd=Symbol.for("react.suspense_list"),cf=Symbol.for("react.memo"),nr=Symbol.for("react.lazy"),Ax=Symbol.for("react.offscreen"),sg=Symbol.iterator;function Gi(t){return t===null||typeof t!="object"?null:(t=sg&&t[sg]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,Lu;function eo(t){if(Lu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lu=e&&e[1]||""}return`
`+Lu+t}var Uu=!1;function Fu(t,e){if(!t||Uu)return"";Uu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Uu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?eo(t):""}function lb(t){switch(t.tag){case 5:return eo(t.type);case 16:return eo("Lazy");case 13:return eo("Suspense");case 19:return eo("SuspenseList");case 0:case 2:case 15:return t=Fu(t.type,!1),t;case 11:return t=Fu(t.type.render,!1),t;case 1:return t=Fu(t.type,!0),t;default:return""}}function Ad(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vs:return"Fragment";case Ms:return"Portal";case Cd:return"Profiler";case af:return"StrictMode";case kd:return"Suspense";case Nd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Nx:return(t.displayName||"Context")+".Consumer";case kx:return(t._context.displayName||"Context")+".Provider";case lf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cf:return e=t.displayName||null,e!==null?e:Ad(t.type)||"Memo";case nr:e=t._payload,t=t._init;try{return Ad(t(e))}catch{}}return null}function cb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ad(e);case 8:return e===af?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ir(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Px(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ub(t){var e=Px(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Va(t){t._valueTracker||(t._valueTracker=ub(t))}function Rx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Px(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pd(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ig(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ir(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jx(t,e){e=e.checked,e!=null&&of(t,"checked",e,!1)}function Rd(t,e){jx(t,e);var n=Ir(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jd(t,e.type,n):e.hasOwnProperty("defaultValue")&&jd(t,e.type,Ir(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function og(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jd(t,e,n){(e!=="number"||Nl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var to=Array.isArray;function Ks(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ir(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Dd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ag(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(to(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ir(n)}}function Dx(t,e){var n=Ir(e.value),r=Ir(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function lg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ox(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Od(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ox(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var La,Mx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(La=La||document.createElement("div"),La.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=La.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function No(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},db=["Webkit","ms","Moz","O"];Object.keys(uo).forEach(function(t){db.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),uo[e]=uo[t]})});function Vx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||uo.hasOwnProperty(t)&&uo[t]?(""+e).trim():e+"px"}function Lx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Vx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var hb=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Md(t,e){if(e){if(hb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Vd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ld=null;function uf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ud=null,Qs=null,Ys=null;function cg(t){if(t=oa(t)){if(typeof Ud!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Ac(e),Ud(t.stateNode,t.type,e))}}function Ux(t){Qs?Ys?Ys.push(t):Ys=[t]:Qs=t}function Fx(){if(Qs){var t=Qs,e=Ys;if(Ys=Qs=null,cg(t),e)for(t=0;t<e.length;t++)cg(e[t])}}function Bx(t,e){return t(e)}function zx(){}var Bu=!1;function $x(t,e,n){if(Bu)return t(e,n);Bu=!0;try{return Bx(t,e,n)}finally{Bu=!1,(Qs!==null||Ys!==null)&&(zx(),Fx())}}function Ao(t,e){var n=t.stateNode;if(n===null)return null;var r=Ac(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Fd=!1;if(Ln)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){Fd=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{Fd=!1}function fb(t,e,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ho=!1,Al=null,Pl=!1,Bd=null,pb={onError:function(t){ho=!0,Al=t}};function mb(t,e,n,r,s,i,o,l,c){ho=!1,Al=null,fb.apply(pb,arguments)}function gb(t,e,n,r,s,i,o,l,c){if(mb.apply(this,arguments),ho){if(ho){var d=Al;ho=!1,Al=null}else throw Error(H(198));Pl||(Pl=!0,Bd=d)}}function ys(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Hx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ug(t){if(ys(t)!==t)throw Error(H(188))}function vb(t){var e=t.alternate;if(!e){if(e=ys(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ug(s),t;if(i===r)return ug(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function Wx(t){return t=vb(t),t!==null?Gx(t):null}function Gx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gx(t);if(e!==null)return e;t=t.sibling}return null}var qx=Dt.unstable_scheduleCallback,dg=Dt.unstable_cancelCallback,yb=Dt.unstable_shouldYield,xb=Dt.unstable_requestPaint,je=Dt.unstable_now,_b=Dt.unstable_getCurrentPriorityLevel,df=Dt.unstable_ImmediatePriority,Kx=Dt.unstable_UserBlockingPriority,Rl=Dt.unstable_NormalPriority,wb=Dt.unstable_LowPriority,Qx=Dt.unstable_IdlePriority,Ic=null,mn=null;function Eb(t){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Ic,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:Sb,Tb=Math.log,bb=Math.LN2;function Sb(t){return t>>>=0,t===0?32:31-(Tb(t)/bb|0)|0}var Ua=64,Fa=4194304;function no(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=no(l):(i&=o,i!==0&&(r=no(i)))}else o=n&~s,o!==0?r=no(o):i!==0&&(r=no(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),s=1<<n,r|=t[n],e&=~s;return r}function Ib(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-rn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=Ib(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function zd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yx(){var t=Ua;return Ua<<=1,!(Ua&4194240)&&(Ua=64),t}function zu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function sa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function kb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-rn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function hf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ge=0;function Jx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xx,ff,Zx,e_,t_,$d=!1,Ba=[],fr=null,pr=null,mr=null,Po=new Map,Ro=new Map,sr=[],Nb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hg(t,e){switch(t){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Po.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ro.delete(e.pointerId)}}function Ki(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=oa(e),e!==null&&ff(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ab(t,e,n,r,s){switch(e){case"focusin":return fr=Ki(fr,t,e,n,r,s),!0;case"dragenter":return pr=Ki(pr,t,e,n,r,s),!0;case"mouseover":return mr=Ki(mr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Po.set(i,Ki(Po.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ro.set(i,Ki(Ro.get(i)||null,t,e,n,r,s)),!0}return!1}function n_(t){var e=Qr(t.target);if(e!==null){var n=ys(e);if(n!==null){if(e=n.tag,e===13){if(e=Hx(n),e!==null){t.blockedOn=e,t_(t.priority,function(){Zx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function al(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ld=r,n.target.dispatchEvent(r),Ld=null}else return e=oa(n),e!==null&&ff(e),t.blockedOn=n,!1;e.shift()}return!0}function fg(t,e,n){al(t)&&n.delete(e)}function Pb(){$d=!1,fr!==null&&al(fr)&&(fr=null),pr!==null&&al(pr)&&(pr=null),mr!==null&&al(mr)&&(mr=null),Po.forEach(fg),Ro.forEach(fg)}function Qi(t,e){t.blockedOn===e&&(t.blockedOn=null,$d||($d=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,Pb)))}function jo(t){function e(s){return Qi(s,t)}if(0<Ba.length){Qi(Ba[0],t);for(var n=1;n<Ba.length;n++){var r=Ba[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fr!==null&&Qi(fr,t),pr!==null&&Qi(pr,t),mr!==null&&Qi(mr,t),Po.forEach(e),Ro.forEach(e),n=0;n<sr.length;n++)r=sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<sr.length&&(n=sr[0],n.blockedOn===null);)n_(n),n.blockedOn===null&&sr.shift()}var Js=Gn.ReactCurrentBatchConfig,Dl=!0;function Rb(t,e,n,r){var s=ge,i=Js.transition;Js.transition=null;try{ge=1,pf(t,e,n,r)}finally{ge=s,Js.transition=i}}function jb(t,e,n,r){var s=ge,i=Js.transition;Js.transition=null;try{ge=4,pf(t,e,n,r)}finally{ge=s,Js.transition=i}}function pf(t,e,n,r){if(Dl){var s=Hd(t,e,n,r);if(s===null)Xu(t,e,r,Ol,n),hg(t,r);else if(Ab(s,t,e,n,r))r.stopPropagation();else if(hg(t,r),e&4&&-1<Nb.indexOf(t)){for(;s!==null;){var i=oa(s);if(i!==null&&Xx(i),i=Hd(t,e,n,r),i===null&&Xu(t,e,r,Ol,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Xu(t,e,r,null,n)}}var Ol=null;function Hd(t,e,n,r){if(Ol=null,t=uf(r),t=Qr(t),t!==null)if(e=ys(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Hx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ol=t,null}function r_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_b()){case df:return 1;case Kx:return 4;case Rl:case wb:return 16;case Qx:return 536870912;default:return 16}default:return 16}}var cr=null,mf=null,ll=null;function s_(){if(ll)return ll;var t,e=mf,n=e.length,r,s="value"in cr?cr.value:cr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ll=s.slice(t,1<r?1-r:void 0)}function cl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function za(){return!0}function pg(){return!1}function Mt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?za:pg,this.isPropagationStopped=pg,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=za)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=za)},persist:function(){},isPersistent:za}),e}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gf=Mt(wi),ia=ke({},wi,{view:0,detail:0}),Db=Mt(ia),$u,Hu,Yi,Cc=ke({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yi&&(Yi&&t.type==="mousemove"?($u=t.screenX-Yi.screenX,Hu=t.screenY-Yi.screenY):Hu=$u=0,Yi=t),$u)},movementY:function(t){return"movementY"in t?t.movementY:Hu}}),mg=Mt(Cc),Ob=ke({},Cc,{dataTransfer:0}),Mb=Mt(Ob),Vb=ke({},ia,{relatedTarget:0}),Wu=Mt(Vb),Lb=ke({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ub=Mt(Lb),Fb=ke({},wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bb=Mt(Fb),zb=ke({},wi,{data:0}),gg=Mt(zb),$b={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wb[t])?!!e[t]:!1}function vf(){return Gb}var qb=ke({},ia,{key:function(t){if(t.key){var e=$b[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vf,charCode:function(t){return t.type==="keypress"?cl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Kb=Mt(qb),Qb=ke({},Cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vg=Mt(Qb),Yb=ke({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vf}),Jb=Mt(Yb),Xb=ke({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zb=Mt(Xb),eS=ke({},Cc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tS=Mt(eS),nS=[9,13,27,32],yf=Ln&&"CompositionEvent"in window,fo=null;Ln&&"documentMode"in document&&(fo=document.documentMode);var rS=Ln&&"TextEvent"in window&&!fo,i_=Ln&&(!yf||fo&&8<fo&&11>=fo),yg=" ",xg=!1;function o_(t,e){switch(t){case"keyup":return nS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ls=!1;function sS(t,e){switch(t){case"compositionend":return a_(e);case"keypress":return e.which!==32?null:(xg=!0,yg);case"textInput":return t=e.data,t===yg&&xg?null:t;default:return null}}function iS(t,e){if(Ls)return t==="compositionend"||!yf&&o_(t,e)?(t=s_(),ll=mf=cr=null,Ls=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return i_&&e.locale!=="ko"?null:e.data;default:return null}}var oS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _g(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oS[t.type]:e==="textarea"}function l_(t,e,n,r){Ux(r),e=Ml(e,"onChange"),0<e.length&&(n=new gf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var po=null,Do=null;function aS(t){x_(t,0)}function kc(t){var e=Bs(t);if(Rx(e))return t}function lS(t,e){if(t==="change")return e}var c_=!1;if(Ln){var Gu;if(Ln){var qu="oninput"in document;if(!qu){var wg=document.createElement("div");wg.setAttribute("oninput","return;"),qu=typeof wg.oninput=="function"}Gu=qu}else Gu=!1;c_=Gu&&(!document.documentMode||9<document.documentMode)}function Eg(){po&&(po.detachEvent("onpropertychange",u_),Do=po=null)}function u_(t){if(t.propertyName==="value"&&kc(Do)){var e=[];l_(e,Do,t,uf(t)),$x(aS,e)}}function cS(t,e,n){t==="focusin"?(Eg(),po=e,Do=n,po.attachEvent("onpropertychange",u_)):t==="focusout"&&Eg()}function uS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kc(Do)}function dS(t,e){if(t==="click")return kc(e)}function hS(t,e){if(t==="input"||t==="change")return kc(e)}function fS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var an=typeof Object.is=="function"?Object.is:fS;function Oo(t,e){if(an(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Id.call(e,s)||!an(t[s],e[s]))return!1}return!0}function Tg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bg(t,e){var n=Tg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tg(n)}}function d_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?d_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function h_(){for(var t=window,e=Nl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nl(t.document)}return e}function xf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pS(t){var e=h_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&d_(n.ownerDocument.documentElement,n)){if(r!==null&&xf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=bg(n,i);var o=bg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mS=Ln&&"documentMode"in document&&11>=document.documentMode,Us=null,Wd=null,mo=null,Gd=!1;function Sg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gd||Us==null||Us!==Nl(r)||(r=Us,"selectionStart"in r&&xf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),mo&&Oo(mo,r)||(mo=r,r=Ml(Wd,"onSelect"),0<r.length&&(e=new gf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Us)))}function $a(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fs={animationend:$a("Animation","AnimationEnd"),animationiteration:$a("Animation","AnimationIteration"),animationstart:$a("Animation","AnimationStart"),transitionend:$a("Transition","TransitionEnd")},Ku={},f_={};Ln&&(f_=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function Nc(t){if(Ku[t])return Ku[t];if(!Fs[t])return t;var e=Fs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in f_)return Ku[t]=e[n];return t}var p_=Nc("animationend"),m_=Nc("animationiteration"),g_=Nc("animationstart"),v_=Nc("transitionend"),y_=new Map,Ig="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,e){y_.set(t,e),vs(e,[t])}for(var Qu=0;Qu<Ig.length;Qu++){var Yu=Ig[Qu],gS=Yu.toLowerCase(),vS=Yu[0].toUpperCase()+Yu.slice(1);Mr(gS,"on"+vS)}Mr(p_,"onAnimationEnd");Mr(m_,"onAnimationIteration");Mr(g_,"onAnimationStart");Mr("dblclick","onDoubleClick");Mr("focusin","onFocus");Mr("focusout","onBlur");Mr(v_,"onTransitionEnd");ii("onMouseEnter",["mouseout","mouseover"]);ii("onMouseLeave",["mouseout","mouseover"]);ii("onPointerEnter",["pointerout","pointerover"]);ii("onPointerLeave",["pointerout","pointerover"]);vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ro));function Cg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gb(r,e,void 0,t),t.currentTarget=null}function x_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Cg(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Cg(s,l,d),i=c}}}if(Pl)throw t=Bd,Pl=!1,Bd=null,t}function _e(t,e){var n=e[Jd];n===void 0&&(n=e[Jd]=new Set);var r=t+"__bubble";n.has(r)||(__(e,t,2,!1),n.add(r))}function Ju(t,e,n){var r=0;e&&(r|=4),__(n,t,r,e)}var Ha="_reactListening"+Math.random().toString(36).slice(2);function Mo(t){if(!t[Ha]){t[Ha]=!0,Cx.forEach(function(n){n!=="selectionchange"&&(yS.has(n)||Ju(n,!1,t),Ju(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ha]||(e[Ha]=!0,Ju("selectionchange",!1,e))}}function __(t,e,n,r){switch(r_(e)){case 1:var s=Rb;break;case 4:s=jb;break;default:s=pf}n=s.bind(null,e,n,t),s=void 0,!Fd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Qr(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}$x(function(){var d=i,f=uf(n),m=[];e:{var g=y_.get(t);if(g!==void 0){var _=gf,I=t;switch(t){case"keypress":if(cl(n)===0)break e;case"keydown":case"keyup":_=Kb;break;case"focusin":I="focus",_=Wu;break;case"focusout":I="blur",_=Wu;break;case"beforeblur":case"afterblur":_=Wu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=mg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=Mb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Jb;break;case p_:case m_:case g_:_=Ub;break;case v_:_=Zb;break;case"scroll":_=Db;break;case"wheel":_=tS;break;case"copy":case"cut":case"paste":_=Bb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=vg}var k=(e&4)!==0,A=!k&&t==="scroll",E=k?g!==null?g+"Capture":null:g;k=[];for(var y=d,T;y!==null;){T=y;var R=T.stateNode;if(T.tag===5&&R!==null&&(T=R,E!==null&&(R=Ao(y,E),R!=null&&k.push(Vo(y,R,T)))),A)break;y=y.return}0<k.length&&(g=new _(g,I,null,n,f),m.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==Ld&&(I=n.relatedTarget||n.fromElement)&&(Qr(I)||I[Un]))break e;if((_||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,_?(I=n.relatedTarget||n.toElement,_=d,I=I?Qr(I):null,I!==null&&(A=ys(I),I!==A||I.tag!==5&&I.tag!==6)&&(I=null)):(_=null,I=d),_!==I)){if(k=mg,R="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(k=vg,R="onPointerLeave",E="onPointerEnter",y="pointer"),A=_==null?g:Bs(_),T=I==null?g:Bs(I),g=new k(R,y+"leave",_,n,f),g.target=A,g.relatedTarget=T,R=null,Qr(f)===d&&(k=new k(E,y+"enter",I,n,f),k.target=T,k.relatedTarget=A,R=k),A=R,_&&I)t:{for(k=_,E=I,y=0,T=k;T;T=As(T))y++;for(T=0,R=E;R;R=As(R))T++;for(;0<y-T;)k=As(k),y--;for(;0<T-y;)E=As(E),T--;for(;y--;){if(k===E||E!==null&&k===E.alternate)break t;k=As(k),E=As(E)}k=null}else k=null;_!==null&&kg(m,g,_,k,!1),I!==null&&A!==null&&kg(m,A,I,k,!0)}}e:{if(g=d?Bs(d):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var B=lS;else if(_g(g))if(c_)B=hS;else{B=uS;var F=cS}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(B=dS);if(B&&(B=B(t,d))){l_(m,B,n,f);break e}F&&F(t,g,d),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&jd(g,"number",g.value)}switch(F=d?Bs(d):window,t){case"focusin":(_g(F)||F.contentEditable==="true")&&(Us=F,Wd=d,mo=null);break;case"focusout":mo=Wd=Us=null;break;case"mousedown":Gd=!0;break;case"contextmenu":case"mouseup":case"dragend":Gd=!1,Sg(m,n,f);break;case"selectionchange":if(mS)break;case"keydown":case"keyup":Sg(m,n,f)}var b;if(yf)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ls?o_(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(i_&&n.locale!=="ko"&&(Ls||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ls&&(b=s_()):(cr=f,mf="value"in cr?cr.value:cr.textContent,Ls=!0)),F=Ml(d,x),0<F.length&&(x=new gg(x,t,null,n,f),m.push({event:x,listeners:F}),b?x.data=b:(b=a_(n),b!==null&&(x.data=b)))),(b=rS?sS(t,n):iS(t,n))&&(d=Ml(d,"onBeforeInput"),0<d.length&&(f=new gg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=b))}x_(m,e)})}function Vo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ml(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ao(t,n),i!=null&&r.unshift(Vo(t,i,s)),i=Ao(t,e),i!=null&&r.push(Vo(t,i,s))),t=t.return}return r}function As(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Ao(n,i),c!=null&&o.unshift(Vo(n,c,l))):s||(c=Ao(n,i),c!=null&&o.push(Vo(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xS=/\r\n?/g,_S=/\u0000|\uFFFD/g;function Ng(t){return(typeof t=="string"?t:""+t).replace(xS,`
`).replace(_S,"")}function Wa(t,e,n){if(e=Ng(e),Ng(t)!==e&&n)throw Error(H(425))}function Vl(){}var qd=null,Kd=null;function Qd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yd=typeof setTimeout=="function"?setTimeout:void 0,wS=typeof clearTimeout=="function"?clearTimeout:void 0,Ag=typeof Promise=="function"?Promise:void 0,ES=typeof queueMicrotask=="function"?queueMicrotask:typeof Ag<"u"?function(t){return Ag.resolve(null).then(t).catch(TS)}:Yd;function TS(t){setTimeout(function(){throw t})}function Zu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),jo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);jo(e)}function gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Pg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ei=Math.random().toString(36).slice(2),pn="__reactFiber$"+Ei,Lo="__reactProps$"+Ei,Un="__reactContainer$"+Ei,Jd="__reactEvents$"+Ei,bS="__reactListeners$"+Ei,SS="__reactHandles$"+Ei;function Qr(t){var e=t[pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Un]||n[pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Pg(t);t!==null;){if(n=t[pn])return n;t=Pg(t)}return e}t=n,n=t.parentNode}return null}function oa(t){return t=t[pn]||t[Un],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Ac(t){return t[Lo]||null}var Xd=[],zs=-1;function Vr(t){return{current:t}}function Ee(t){0>zs||(t.current=Xd[zs],Xd[zs]=null,zs--)}function ye(t,e){zs++,Xd[zs]=t.current,t.current=e}var Cr={},ht=Vr(Cr),bt=Vr(!1),is=Cr;function oi(t,e){var n=t.type.contextTypes;if(!n)return Cr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function St(t){return t=t.childContextTypes,t!=null}function Ll(){Ee(bt),Ee(ht)}function Rg(t,e,n){if(ht.current!==Cr)throw Error(H(168));ye(ht,e),ye(bt,n)}function w_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,cb(t)||"Unknown",s));return ke({},n,r)}function Ul(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,is=ht.current,ye(ht,t),ye(bt,bt.current),!0}function jg(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=w_(t,e,is),r.__reactInternalMemoizedMergedChildContext=t,Ee(bt),Ee(ht),ye(ht,t)):Ee(bt),ye(bt,n)}var Nn=null,Pc=!1,ed=!1;function E_(t){Nn===null?Nn=[t]:Nn.push(t)}function IS(t){Pc=!0,E_(t)}function Lr(){if(!ed&&Nn!==null){ed=!0;var t=0,e=ge;try{var n=Nn;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nn=null,Pc=!1}catch(s){throw Nn!==null&&(Nn=Nn.slice(t+1)),qx(df,Lr),s}finally{ge=e,ed=!1}}return null}var $s=[],Hs=0,Fl=null,Bl=0,Ft=[],Bt=0,os=null,Pn=1,Rn="";function Gr(t,e){$s[Hs++]=Bl,$s[Hs++]=Fl,Fl=t,Bl=e}function T_(t,e,n){Ft[Bt++]=Pn,Ft[Bt++]=Rn,Ft[Bt++]=os,os=t;var r=Pn;t=Rn;var s=32-rn(r)-1;r&=~(1<<s),n+=1;var i=32-rn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pn=1<<32-rn(e)+s|n<<s|r,Rn=i+t}else Pn=1<<i|n<<s|r,Rn=t}function _f(t){t.return!==null&&(Gr(t,1),T_(t,1,0))}function wf(t){for(;t===Fl;)Fl=$s[--Hs],$s[Hs]=null,Bl=$s[--Hs],$s[Hs]=null;for(;t===os;)os=Ft[--Bt],Ft[Bt]=null,Rn=Ft[--Bt],Ft[Bt]=null,Pn=Ft[--Bt],Ft[Bt]=null}var Rt=null,Pt=null,Te=!1,en=null;function b_(t,e){var n=Ht(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Dg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rt=t,Pt=gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rt=t,Pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=os!==null?{id:Pn,overflow:Rn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ht(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rt=t,Pt=null,!0):!1;default:return!1}}function Zd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function eh(t){if(Te){var e=Pt;if(e){var n=e;if(!Dg(t,e)){if(Zd(t))throw Error(H(418));e=gr(n.nextSibling);var r=Rt;e&&Dg(t,e)?b_(r,n):(t.flags=t.flags&-4097|2,Te=!1,Rt=t)}}else{if(Zd(t))throw Error(H(418));t.flags=t.flags&-4097|2,Te=!1,Rt=t}}}function Og(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rt=t}function Ga(t){if(t!==Rt)return!1;if(!Te)return Og(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qd(t.type,t.memoizedProps)),e&&(e=Pt)){if(Zd(t))throw S_(),Error(H(418));for(;e;)b_(t,e),e=gr(e.nextSibling)}if(Og(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pt=gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pt=null}}else Pt=Rt?gr(t.stateNode.nextSibling):null;return!0}function S_(){for(var t=Pt;t;)t=gr(t.nextSibling)}function ai(){Pt=Rt=null,Te=!1}function Ef(t){en===null?en=[t]:en.push(t)}var CS=Gn.ReactCurrentBatchConfig;function Ji(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function qa(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mg(t){var e=t._init;return e(t._payload)}function I_(t){function e(E,y){if(t){var T=E.deletions;T===null?(E.deletions=[y],E.flags|=16):T.push(y)}}function n(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function r(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function s(E,y){return E=_r(E,y),E.index=0,E.sibling=null,E}function i(E,y,T){return E.index=T,t?(T=E.alternate,T!==null?(T=T.index,T<y?(E.flags|=2,y):T):(E.flags|=2,y)):(E.flags|=1048576,y)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,y,T,R){return y===null||y.tag!==6?(y=ad(T,E.mode,R),y.return=E,y):(y=s(y,T),y.return=E,y)}function c(E,y,T,R){var B=T.type;return B===Vs?f(E,y,T.props.children,R,T.key):y!==null&&(y.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===nr&&Mg(B)===y.type)?(R=s(y,T.props),R.ref=Ji(E,y,T),R.return=E,R):(R=gl(T.type,T.key,T.props,null,E.mode,R),R.ref=Ji(E,y,T),R.return=E,R)}function d(E,y,T,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==T.containerInfo||y.stateNode.implementation!==T.implementation?(y=ld(T,E.mode,R),y.return=E,y):(y=s(y,T.children||[]),y.return=E,y)}function f(E,y,T,R,B){return y===null||y.tag!==7?(y=ns(T,E.mode,R,B),y.return=E,y):(y=s(y,T),y.return=E,y)}function m(E,y,T){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ad(""+y,E.mode,T),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ma:return T=gl(y.type,y.key,y.props,null,E.mode,T),T.ref=Ji(E,null,y),T.return=E,T;case Ms:return y=ld(y,E.mode,T),y.return=E,y;case nr:var R=y._init;return m(E,R(y._payload),T)}if(to(y)||Gi(y))return y=ns(y,E.mode,T,null),y.return=E,y;qa(E,y)}return null}function g(E,y,T,R){var B=y!==null?y.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return B!==null?null:l(E,y,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ma:return T.key===B?c(E,y,T,R):null;case Ms:return T.key===B?d(E,y,T,R):null;case nr:return B=T._init,g(E,y,B(T._payload),R)}if(to(T)||Gi(T))return B!==null?null:f(E,y,T,R,null);qa(E,T)}return null}function _(E,y,T,R,B){if(typeof R=="string"&&R!==""||typeof R=="number")return E=E.get(T)||null,l(y,E,""+R,B);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ma:return E=E.get(R.key===null?T:R.key)||null,c(y,E,R,B);case Ms:return E=E.get(R.key===null?T:R.key)||null,d(y,E,R,B);case nr:var F=R._init;return _(E,y,T,F(R._payload),B)}if(to(R)||Gi(R))return E=E.get(T)||null,f(y,E,R,B,null);qa(y,R)}return null}function I(E,y,T,R){for(var B=null,F=null,b=y,x=y=0,S=null;b!==null&&x<T.length;x++){b.index>x?(S=b,b=null):S=b.sibling;var C=g(E,b,T[x],R);if(C===null){b===null&&(b=S);break}t&&b&&C.alternate===null&&e(E,b),y=i(C,y,x),F===null?B=C:F.sibling=C,F=C,b=S}if(x===T.length)return n(E,b),Te&&Gr(E,x),B;if(b===null){for(;x<T.length;x++)b=m(E,T[x],R),b!==null&&(y=i(b,y,x),F===null?B=b:F.sibling=b,F=b);return Te&&Gr(E,x),B}for(b=r(E,b);x<T.length;x++)S=_(b,E,x,T[x],R),S!==null&&(t&&S.alternate!==null&&b.delete(S.key===null?x:S.key),y=i(S,y,x),F===null?B=S:F.sibling=S,F=S);return t&&b.forEach(function(j){return e(E,j)}),Te&&Gr(E,x),B}function k(E,y,T,R){var B=Gi(T);if(typeof B!="function")throw Error(H(150));if(T=B.call(T),T==null)throw Error(H(151));for(var F=B=null,b=y,x=y=0,S=null,C=T.next();b!==null&&!C.done;x++,C=T.next()){b.index>x?(S=b,b=null):S=b.sibling;var j=g(E,b,C.value,R);if(j===null){b===null&&(b=S);break}t&&b&&j.alternate===null&&e(E,b),y=i(j,y,x),F===null?B=j:F.sibling=j,F=j,b=S}if(C.done)return n(E,b),Te&&Gr(E,x),B;if(b===null){for(;!C.done;x++,C=T.next())C=m(E,C.value,R),C!==null&&(y=i(C,y,x),F===null?B=C:F.sibling=C,F=C);return Te&&Gr(E,x),B}for(b=r(E,b);!C.done;x++,C=T.next())C=_(b,E,x,C.value,R),C!==null&&(t&&C.alternate!==null&&b.delete(C.key===null?x:C.key),y=i(C,y,x),F===null?B=C:F.sibling=C,F=C);return t&&b.forEach(function(P){return e(E,P)}),Te&&Gr(E,x),B}function A(E,y,T,R){if(typeof T=="object"&&T!==null&&T.type===Vs&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Ma:e:{for(var B=T.key,F=y;F!==null;){if(F.key===B){if(B=T.type,B===Vs){if(F.tag===7){n(E,F.sibling),y=s(F,T.props.children),y.return=E,E=y;break e}}else if(F.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===nr&&Mg(B)===F.type){n(E,F.sibling),y=s(F,T.props),y.ref=Ji(E,F,T),y.return=E,E=y;break e}n(E,F);break}else e(E,F);F=F.sibling}T.type===Vs?(y=ns(T.props.children,E.mode,R,T.key),y.return=E,E=y):(R=gl(T.type,T.key,T.props,null,E.mode,R),R.ref=Ji(E,y,T),R.return=E,E=R)}return o(E);case Ms:e:{for(F=T.key;y!==null;){if(y.key===F)if(y.tag===4&&y.stateNode.containerInfo===T.containerInfo&&y.stateNode.implementation===T.implementation){n(E,y.sibling),y=s(y,T.children||[]),y.return=E,E=y;break e}else{n(E,y);break}else e(E,y);y=y.sibling}y=ld(T,E.mode,R),y.return=E,E=y}return o(E);case nr:return F=T._init,A(E,y,F(T._payload),R)}if(to(T))return I(E,y,T,R);if(Gi(T))return k(E,y,T,R);qa(E,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,y!==null&&y.tag===6?(n(E,y.sibling),y=s(y,T),y.return=E,E=y):(n(E,y),y=ad(T,E.mode,R),y.return=E,E=y),o(E)):n(E,y)}return A}var li=I_(!0),C_=I_(!1),zl=Vr(null),$l=null,Ws=null,Tf=null;function bf(){Tf=Ws=$l=null}function Sf(t){var e=zl.current;Ee(zl),t._currentValue=e}function th(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xs(t,e){$l=t,Tf=Ws=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tt=!0),t.firstContext=null)}function qt(t){var e=t._currentValue;if(Tf!==t)if(t={context:t,memoizedValue:e,next:null},Ws===null){if($l===null)throw Error(H(308));Ws=t,$l.dependencies={lanes:0,firstContext:t}}else Ws=Ws.next=t;return e}var Yr=null;function If(t){Yr===null?Yr=[t]:Yr.push(t)}function k_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,If(e)):(n.next=s.next,s.next=n),e.interleaved=n,Fn(t,r)}function Fn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var rr=!1;function Cf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function N_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function On(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Fn(t,n)}return s=r.interleaved,s===null?(e.next=e,If(r)):(e.next=s.next,s.next=e),r.interleaved=e,Fn(t,n)}function ul(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hf(t,n)}}function Vg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hl(t,e,n,r){var s=t.updateQueue;rr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,f=d=c=null,l=i;do{var g=l.lane,_=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var I=t,k=l;switch(g=e,_=n,k.tag){case 1:if(I=k.payload,typeof I=="function"){m=I.call(_,m,g);break e}m=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=k.payload,g=typeof I=="function"?I.call(_,m,g):I,g==null)break e;m=ke({},m,g);break e;case 2:rr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else _={eventTime:_,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=_,c=m):f=f.next=_,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ls|=o,t.lanes=o,t.memoizedState=m}}function Lg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var aa={},gn=Vr(aa),Uo=Vr(aa),Fo=Vr(aa);function Jr(t){if(t===aa)throw Error(H(174));return t}function kf(t,e){switch(ye(Fo,e),ye(Uo,t),ye(gn,aa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Od(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Od(e,t)}Ee(gn),ye(gn,e)}function ci(){Ee(gn),Ee(Uo),Ee(Fo)}function A_(t){Jr(Fo.current);var e=Jr(gn.current),n=Od(e,t.type);e!==n&&(ye(Uo,t),ye(gn,n))}function Nf(t){Uo.current===t&&(Ee(gn),Ee(Uo))}var be=Vr(0);function Wl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var td=[];function Af(){for(var t=0;t<td.length;t++)td[t]._workInProgressVersionPrimary=null;td.length=0}var dl=Gn.ReactCurrentDispatcher,nd=Gn.ReactCurrentBatchConfig,as=0,Ie=null,Ue=null,We=null,Gl=!1,go=!1,Bo=0,kS=0;function ot(){throw Error(H(321))}function Pf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!an(t[n],e[n]))return!1;return!0}function Rf(t,e,n,r,s,i){if(as=i,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dl.current=t===null||t.memoizedState===null?RS:jS,t=n(r,s),go){i=0;do{if(go=!1,Bo=0,25<=i)throw Error(H(301));i+=1,We=Ue=null,e.updateQueue=null,dl.current=DS,t=n(r,s)}while(go)}if(dl.current=ql,e=Ue!==null&&Ue.next!==null,as=0,We=Ue=Ie=null,Gl=!1,e)throw Error(H(300));return t}function jf(){var t=Bo!==0;return Bo=0,t}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Ie.memoizedState=We=t:We=We.next=t,We}function Kt(){if(Ue===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=We===null?Ie.memoizedState:We.next;if(e!==null)We=e,Ue=t;else{if(t===null)throw Error(H(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},We===null?Ie.memoizedState=We=t:We=We.next=t}return We}function zo(t,e){return typeof e=="function"?e(t):e}function rd(t){var e=Kt(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Ue,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var f=d.lane;if((as&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Ie.lanes|=f,ls|=f}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,an(r,e.memoizedState)||(Tt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ie.lanes|=i,ls|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sd(t){var e=Kt(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);an(i,e.memoizedState)||(Tt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function P_(){}function R_(t,e){var n=Ie,r=Kt(),s=e(),i=!an(r.memoizedState,s);if(i&&(r.memoizedState=s,Tt=!0),r=r.queue,Df(O_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||We!==null&&We.memoizedState.tag&1){if(n.flags|=2048,$o(9,D_.bind(null,n,r,s,e),void 0,null),qe===null)throw Error(H(349));as&30||j_(n,e,s)}return s}function j_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function D_(t,e,n,r){e.value=n,e.getSnapshot=r,M_(e)&&V_(t)}function O_(t,e,n){return n(function(){M_(e)&&V_(t)})}function M_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!an(t,n)}catch{return!0}}function V_(t){var e=Fn(t,1);e!==null&&sn(e,t,1,-1)}function Ug(t){var e=hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:t},e.queue=t,t=t.dispatch=PS.bind(null,Ie,t),[e.memoizedState,t]}function $o(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function L_(){return Kt().memoizedState}function hl(t,e,n,r){var s=hn();Ie.flags|=t,s.memoizedState=$o(1|e,n,void 0,r===void 0?null:r)}function Rc(t,e,n,r){var s=Kt();r=r===void 0?null:r;var i=void 0;if(Ue!==null){var o=Ue.memoizedState;if(i=o.destroy,r!==null&&Pf(r,o.deps)){s.memoizedState=$o(e,n,i,r);return}}Ie.flags|=t,s.memoizedState=$o(1|e,n,i,r)}function Fg(t,e){return hl(8390656,8,t,e)}function Df(t,e){return Rc(2048,8,t,e)}function U_(t,e){return Rc(4,2,t,e)}function F_(t,e){return Rc(4,4,t,e)}function B_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function z_(t,e,n){return n=n!=null?n.concat([t]):null,Rc(4,4,B_.bind(null,e,t),n)}function Of(){}function $_(t,e){var n=Kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function H_(t,e){var n=Kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function W_(t,e,n){return as&21?(an(n,e)||(n=Yx(),Ie.lanes|=n,ls|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=n)}function NS(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=nd.transition;nd.transition={};try{t(!1),e()}finally{ge=n,nd.transition=r}}function G_(){return Kt().memoizedState}function AS(t,e,n){var r=xr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},q_(t))K_(e,n);else if(n=k_(t,e,n,r),n!==null){var s=yt();sn(n,t,r,s),Q_(n,e,r)}}function PS(t,e,n){var r=xr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(q_(t))K_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,an(l,o)){var c=e.interleaved;c===null?(s.next=s,If(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=k_(t,e,s,r),n!==null&&(s=yt(),sn(n,t,r,s),Q_(n,e,r))}}function q_(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function K_(t,e){go=Gl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Q_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hf(t,n)}}var ql={readContext:qt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},RS={readContext:qt,useCallback:function(t,e){return hn().memoizedState=[t,e===void 0?null:e],t},useContext:qt,useEffect:Fg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hl(4194308,4,B_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hl(4194308,4,t,e)},useInsertionEffect:function(t,e){return hl(4,2,t,e)},useMemo:function(t,e){var n=hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AS.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=hn();return t={current:t},e.memoizedState=t},useState:Ug,useDebugValue:Of,useDeferredValue:function(t){return hn().memoizedState=t},useTransition:function(){var t=Ug(!1),e=t[0];return t=NS.bind(null,t[1]),hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,s=hn();if(Te){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),qe===null)throw Error(H(349));as&30||j_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Fg(O_.bind(null,r,i,t),[t]),r.flags|=2048,$o(9,D_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hn(),e=qe.identifierPrefix;if(Te){var n=Rn,r=Pn;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jS={readContext:qt,useCallback:$_,useContext:qt,useEffect:Df,useImperativeHandle:z_,useInsertionEffect:U_,useLayoutEffect:F_,useMemo:H_,useReducer:rd,useRef:L_,useState:function(){return rd(zo)},useDebugValue:Of,useDeferredValue:function(t){var e=Kt();return W_(e,Ue.memoizedState,t)},useTransition:function(){var t=rd(zo)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:P_,useSyncExternalStore:R_,useId:G_,unstable_isNewReconciler:!1},DS={readContext:qt,useCallback:$_,useContext:qt,useEffect:Df,useImperativeHandle:z_,useInsertionEffect:U_,useLayoutEffect:F_,useMemo:H_,useReducer:sd,useRef:L_,useState:function(){return sd(zo)},useDebugValue:Of,useDeferredValue:function(t){var e=Kt();return Ue===null?e.memoizedState=t:W_(e,Ue.memoizedState,t)},useTransition:function(){var t=sd(zo)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:P_,useSyncExternalStore:R_,useId:G_,unstable_isNewReconciler:!1};function Xt(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jc={isMounted:function(t){return(t=t._reactInternals)?ys(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yt(),s=xr(t),i=On(r,s);i.payload=e,n!=null&&(i.callback=n),e=vr(t,i,s),e!==null&&(sn(e,t,s,r),ul(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yt(),s=xr(t),i=On(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=vr(t,i,s),e!==null&&(sn(e,t,s,r),ul(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yt(),r=xr(t),s=On(n,r);s.tag=2,e!=null&&(s.callback=e),e=vr(t,s,r),e!==null&&(sn(e,t,r,n),ul(e,t,r))}};function Bg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Oo(n,r)||!Oo(s,i):!0}function Y_(t,e,n){var r=!1,s=Cr,i=e.contextType;return typeof i=="object"&&i!==null?i=qt(i):(s=St(e)?is:ht.current,r=e.contextTypes,i=(r=r!=null)?oi(t,s):Cr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function zg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jc.enqueueReplaceState(e,e.state,null)}function rh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Cf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=qt(i):(i=St(e)?is:ht.current,s.context=oi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(nh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&jc.enqueueReplaceState(s,s.state,null),Hl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ui(t,e){try{var n="",r=e;do n+=lb(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function id(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var OS=typeof WeakMap=="function"?WeakMap:Map;function J_(t,e,n){n=On(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ql||(Ql=!0,ph=r),sh(t,e)},n}function X_(t,e,n){n=On(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){sh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sh(t,e),typeof r!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $g(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new OS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=QS.bind(null,t,e,n),e.then(t,t))}function Hg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Wg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=On(-1,1),e.tag=2,vr(n,e,1))),n.lanes|=1),t)}var MS=Gn.ReactCurrentOwner,Tt=!1;function vt(t,e,n,r){e.child=t===null?C_(e,null,n,r):li(e,t.child,n,r)}function Gg(t,e,n,r,s){n=n.render;var i=e.ref;return Xs(e,s),r=Rf(t,e,n,r,i,s),n=jf(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bn(t,e,s)):(Te&&n&&_f(e),e.flags|=1,vt(t,e,r,s),e.child)}function qg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!$f(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Z_(t,e,i,r,s)):(t=gl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oo,n(o,r)&&t.ref===e.ref)return Bn(t,e,s)}return e.flags|=1,t=_r(i,r),t.ref=e.ref,t.return=e,e.child=t}function Z_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Oo(i,r)&&t.ref===e.ref)if(Tt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Tt=!0);else return e.lanes=t.lanes,Bn(t,e,s)}return ih(t,e,n,r,s)}function ew(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(qs,Nt),Nt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(qs,Nt),Nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ye(qs,Nt),Nt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ye(qs,Nt),Nt|=r;return vt(t,e,s,n),e.child}function tw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ih(t,e,n,r,s){var i=St(n)?is:ht.current;return i=oi(e,i),Xs(e,s),n=Rf(t,e,n,r,i,s),r=jf(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bn(t,e,s)):(Te&&r&&_f(e),e.flags|=1,vt(t,e,n,s),e.child)}function Kg(t,e,n,r,s){if(St(n)){var i=!0;Ul(e)}else i=!1;if(Xs(e,s),e.stateNode===null)fl(t,e),Y_(e,n,r),rh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=qt(d):(d=St(n)?is:ht.current,d=oi(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&zg(e,o,r,d),rr=!1;var g=e.memoizedState;o.state=g,Hl(e,r,o,s),c=e.memoizedState,l!==r||g!==c||bt.current||rr?(typeof f=="function"&&(nh(e,n,f,r),c=e.memoizedState),(l=rr||Bg(e,n,l,r,g,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,N_(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Xt(e.type,l),o.props=d,m=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=qt(c):(c=St(n)?is:ht.current,c=oi(e,c));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==c)&&zg(e,o,r,c),rr=!1,g=e.memoizedState,o.state=g,Hl(e,r,o,s);var I=e.memoizedState;l!==m||g!==I||bt.current||rr?(typeof _=="function"&&(nh(e,n,_,r),I=e.memoizedState),(d=rr||Bg(e,n,d,r,g,I,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return oh(t,e,n,r,i,s)}function oh(t,e,n,r,s,i){tw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&jg(e,n,!1),Bn(t,e,i);r=e.stateNode,MS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=li(e,t.child,null,i),e.child=li(e,null,l,i)):vt(t,e,l,i),e.memoizedState=r.state,s&&jg(e,n,!0),e.child}function nw(t){var e=t.stateNode;e.pendingContext?Rg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Rg(t,e.context,!1),kf(t,e.containerInfo)}function Qg(t,e,n,r,s){return ai(),Ef(s),e.flags|=256,vt(t,e,n,r),e.child}var ah={dehydrated:null,treeContext:null,retryLane:0};function lh(t){return{baseLanes:t,cachePool:null,transitions:null}}function rw(t,e,n){var r=e.pendingProps,s=be.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ye(be,s&1),t===null)return eh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Mc(o,r,0,null),t=ns(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=lh(n),e.memoizedState=ah,t):Mf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return VS(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=_r(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=_r(l,i):(i=ns(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?lh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ah,r}return i=t.child,t=i.sibling,r=_r(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Mf(t,e){return e=Mc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ka(t,e,n,r){return r!==null&&Ef(r),li(e,t.child,null,n),t=Mf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function VS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=id(Error(H(422))),Ka(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Mc({mode:"visible",children:r.children},s,0,null),i=ns(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&li(e,t.child,null,o),e.child.memoizedState=lh(o),e.memoizedState=ah,i);if(!(e.mode&1))return Ka(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(H(419)),r=id(i,r,void 0),Ka(t,e,o,r)}if(l=(o&t.childLanes)!==0,Tt||l){if(r=qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Fn(t,s),sn(r,t,s,-1))}return zf(),r=id(Error(H(421))),Ka(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=YS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Pt=gr(s.nextSibling),Rt=e,Te=!0,en=null,t!==null&&(Ft[Bt++]=Pn,Ft[Bt++]=Rn,Ft[Bt++]=os,Pn=t.id,Rn=t.overflow,os=e),e=Mf(e,r.children),e.flags|=4096,e)}function Yg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),th(t.return,e,n)}function od(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function sw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vt(t,e,r.children,n),r=be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yg(t,n,e);else if(t.tag===19)Yg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(be,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Wl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),od(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Wl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}od(e,!0,n,null,i);break;case"together":od(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ls|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=_r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function LS(t,e,n){switch(e.tag){case 3:nw(e),ai();break;case 5:A_(e);break;case 1:St(e.type)&&Ul(e);break;case 4:kf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ye(zl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(be,be.current&1),e.flags|=128,null):n&e.child.childLanes?rw(t,e,n):(ye(be,be.current&1),t=Bn(t,e,n),t!==null?t.sibling:null);ye(be,be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return sw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(be,be.current),r)break;return null;case 22:case 23:return e.lanes=0,ew(t,e,n)}return Bn(t,e,n)}var iw,ch,ow,aw;iw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ch=function(){};ow=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Jr(gn.current);var i=null;switch(n){case"input":s=Pd(t,s),r=Pd(t,r),i=[];break;case"select":s=ke({},s,{value:void 0}),r=ke({},r,{value:void 0}),i=[];break;case"textarea":s=Dd(t,s),r=Dd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vl)}Md(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ko.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ko.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&_e("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};aw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xi(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function US(t,e,n){var r=e.pendingProps;switch(wf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return St(e.type)&&Ll(),at(e),null;case 3:return r=e.stateNode,ci(),Ee(bt),Ee(ht),Af(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ga(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,en!==null&&(vh(en),en=null))),ch(t,e),at(e),null;case 5:Nf(e);var s=Jr(Fo.current);if(n=e.type,t!==null&&e.stateNode!=null)ow(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return at(e),null}if(t=Jr(gn.current),Ga(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[pn]=e,r[Lo]=i,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<ro.length;s++)_e(ro[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":ig(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":ag(r,i),_e("invalid",r)}Md(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Wa(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Wa(r.textContent,l,t),s=["children",""+l]):ko.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":Va(r),og(r,i,!0);break;case"textarea":Va(r),lg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Vl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ox(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pn]=e,t[Lo]=r,iw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Vd(n,r),n){case"dialog":_e("cancel",t),_e("close",t),s=r;break;case"iframe":case"object":case"embed":_e("load",t),s=r;break;case"video":case"audio":for(s=0;s<ro.length;s++)_e(ro[s],t);s=r;break;case"source":_e("error",t),s=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=r;break;case"details":_e("toggle",t),s=r;break;case"input":ig(t,r),s=Pd(t,r),_e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ke({},r,{value:void 0}),_e("invalid",t);break;case"textarea":ag(t,r),s=Dd(t,r),_e("invalid",t);break;default:s=r}Md(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Lx(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Mx(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&No(t,c):typeof c=="number"&&No(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ko.hasOwnProperty(i)?c!=null&&i==="onScroll"&&_e("scroll",t):c!=null&&of(t,i,c,o))}switch(n){case"input":Va(t),og(t,r,!1);break;case"textarea":Va(t),lg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ir(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ks(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ks(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Vl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)aw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Jr(Fo.current),Jr(gn.current),Ga(e)){if(r=e.stateNode,n=e.memoizedProps,r[pn]=e,(i=r.nodeValue!==n)&&(t=Rt,t!==null))switch(t.tag){case 3:Wa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=e,e.stateNode=r}return at(e),null;case 13:if(Ee(be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Pt!==null&&e.mode&1&&!(e.flags&128))S_(),ai(),e.flags|=98560,i=!1;else if(i=Ga(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[pn]=e}else ai(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),i=!1}else en!==null&&(vh(en),en=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||be.current&1?Be===0&&(Be=3):zf())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return ci(),ch(t,e),t===null&&Mo(e.stateNode.containerInfo),at(e),null;case 10:return Sf(e.type._context),at(e),null;case 17:return St(e.type)&&Ll(),at(e),null;case 19:if(Ee(be),i=e.memoizedState,i===null)return at(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Xi(i,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wl(t),o!==null){for(e.flags|=128,Xi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(be,be.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>di&&(e.flags|=128,r=!0,Xi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Wl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Te)return at(e),null}else 2*je()-i.renderingStartTime>di&&n!==1073741824&&(e.flags|=128,r=!0,Xi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,n=be.current,ye(be,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return Bf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function FS(t,e){switch(wf(e),e.tag){case 1:return St(e.type)&&Ll(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ci(),Ee(bt),Ee(ht),Af(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Nf(e),null;case 13:if(Ee(be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));ai()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(be),null;case 4:return ci(),null;case 10:return Sf(e.type._context),null;case 22:case 23:return Bf(),null;case 24:return null;default:return null}}var Qa=!1,ut=!1,BS=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Gs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function uh(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var Jg=!1;function zS(t,e){if(qd=Dl,t=h_(),xf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var _;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(_=m.firstChild)!==null;)g=m,m=_;for(;;){if(m===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(c=o),(_=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=_}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kd={focusedElem:t,selectionRange:n},Dl=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var k=I.memoizedProps,A=I.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?k:Xt(e.type,k),A);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(R){Pe(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return I=Jg,Jg=!1,I}function vo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&uh(e,n,i)}s=s.next}while(s!==r)}}function Dc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lw(t){var e=t.alternate;e!==null&&(t.alternate=null,lw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pn],delete e[Lo],delete e[Jd],delete e[bS],delete e[SS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cw(t){return t.tag===5||t.tag===3||t.tag===4}function Xg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vl));else if(r!==4&&(t=t.child,t!==null))for(hh(t,e,n),t=t.sibling;t!==null;)hh(t,e,n),t=t.sibling}function fh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fh(t,e,n),t=t.sibling;t!==null;)fh(t,e,n),t=t.sibling}var Ye=null,Zt=!1;function er(t,e,n){for(n=n.child;n!==null;)uw(t,e,n),n=n.sibling}function uw(t,e,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Ic,n)}catch{}switch(n.tag){case 5:ut||Gs(n,e);case 6:var r=Ye,s=Zt;Ye=null,er(t,e,n),Ye=r,Zt=s,Ye!==null&&(Zt?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Zt?(t=Ye,n=n.stateNode,t.nodeType===8?Zu(t.parentNode,n):t.nodeType===1&&Zu(t,n),jo(t)):Zu(Ye,n.stateNode));break;case 4:r=Ye,s=Zt,Ye=n.stateNode.containerInfo,Zt=!0,er(t,e,n),Ye=r,Zt=s;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&uh(n,e,o),s=s.next}while(s!==r)}er(t,e,n);break;case 1:if(!ut&&(Gs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pe(n,e,l)}er(t,e,n);break;case 21:er(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,er(t,e,n),ut=r):er(t,e,n);break;default:er(t,e,n)}}function Zg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new BS),e.forEach(function(r){var s=JS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ye=l.stateNode,Zt=!1;break e;case 3:Ye=l.stateNode.containerInfo,Zt=!0;break e;case 4:Ye=l.stateNode.containerInfo,Zt=!0;break e}l=l.return}if(Ye===null)throw Error(H(160));uw(i,o,s),Ye=null,Zt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Pe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dw(e,t),e=e.sibling}function dw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),un(t),r&4){try{vo(3,t,t.return),Dc(3,t)}catch(k){Pe(t,t.return,k)}try{vo(5,t,t.return)}catch(k){Pe(t,t.return,k)}}break;case 1:Jt(e,t),un(t),r&512&&n!==null&&Gs(n,n.return);break;case 5:if(Jt(e,t),un(t),r&512&&n!==null&&Gs(n,n.return),t.flags&32){var s=t.stateNode;try{No(s,"")}catch(k){Pe(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&jx(s,i),Vd(l,o);var d=Vd(l,i);for(o=0;o<c.length;o+=2){var f=c[o],m=c[o+1];f==="style"?Lx(s,m):f==="dangerouslySetInnerHTML"?Mx(s,m):f==="children"?No(s,m):of(s,f,m,d)}switch(l){case"input":Rd(s,i);break;case"textarea":Dx(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?Ks(s,!!i.multiple,_,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ks(s,!!i.multiple,i.defaultValue,!0):Ks(s,!!i.multiple,i.multiple?[]:"",!1))}s[Lo]=i}catch(k){Pe(t,t.return,k)}}break;case 6:if(Jt(e,t),un(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Pe(t,t.return,k)}}break;case 3:if(Jt(e,t),un(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jo(e.containerInfo)}catch(k){Pe(t,t.return,k)}break;case 4:Jt(e,t),un(t);break;case 13:Jt(e,t),un(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Uf=je())),r&4&&Zg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(d=ut)||f,Jt(e,t),ut=d):Jt(e,t),un(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Q=t,f=t.child;f!==null;){for(m=Q=f;Q!==null;){switch(g=Q,_=g.child,g.tag){case 0:case 11:case 14:case 15:vo(4,g,g.return);break;case 1:Gs(g,g.return);var I=g.stateNode;if(typeof I.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(k){Pe(r,n,k)}}break;case 5:Gs(g,g.return);break;case 22:if(g.memoizedState!==null){tv(m);continue}}_!==null?(_.return=g,Q=_):tv(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Vx("display",o))}catch(k){Pe(t,t.return,k)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(k){Pe(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Jt(e,t),un(t),r&4&&Zg(t);break;case 21:break;default:Jt(e,t),un(t)}}function un(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cw(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(No(s,""),r.flags&=-33);var i=Xg(t);fh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Xg(t);hh(t,l,o);break;default:throw Error(H(161))}}catch(c){Pe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $S(t,e,n){Q=t,hw(t)}function hw(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Qa;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ut;l=Qa;var d=ut;if(Qa=o,(ut=c)&&!d)for(Q=s;Q!==null;)o=Q,c=o.child,o.tag===22&&o.memoizedState!==null?nv(s):c!==null?(c.return=o,Q=c):nv(s);for(;i!==null;)Q=i,hw(i),i=i.sibling;Q=s,Qa=l,ut=d}ev(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):ev(t)}}function ev(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||Dc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Xt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Lg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Lg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&jo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}ut||e.flags&512&&dh(e)}catch(g){Pe(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function tv(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function nv(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Dc(4,e)}catch(c){Pe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Pe(e,s,c)}}var i=e.return;try{dh(e)}catch(c){Pe(e,i,c)}break;case 5:var o=e.return;try{dh(e)}catch(c){Pe(e,o,c)}}}catch(c){Pe(e,e.return,c)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var HS=Math.ceil,Kl=Gn.ReactCurrentDispatcher,Vf=Gn.ReactCurrentOwner,Wt=Gn.ReactCurrentBatchConfig,he=0,qe=null,Oe=null,Ze=0,Nt=0,qs=Vr(0),Be=0,Ho=null,ls=0,Oc=0,Lf=0,yo=null,Et=null,Uf=0,di=1/0,kn=null,Ql=!1,ph=null,yr=null,Ya=!1,ur=null,Yl=0,xo=0,mh=null,pl=-1,ml=0;function yt(){return he&6?je():pl!==-1?pl:pl=je()}function xr(t){return t.mode&1?he&2&&Ze!==0?Ze&-Ze:CS.transition!==null?(ml===0&&(ml=Yx()),ml):(t=ge,t!==0||(t=window.event,t=t===void 0?16:r_(t.type)),t):1}function sn(t,e,n,r){if(50<xo)throw xo=0,mh=null,Error(H(185));sa(t,n,r),(!(he&2)||t!==qe)&&(t===qe&&(!(he&2)&&(Oc|=n),Be===4&&ir(t,Ze)),It(t,r),n===1&&he===0&&!(e.mode&1)&&(di=je()+500,Pc&&Lr()))}function It(t,e){var n=t.callbackNode;Cb(t,e);var r=jl(t,t===qe?Ze:0);if(r===0)n!==null&&dg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&dg(n),e===1)t.tag===0?IS(rv.bind(null,t)):E_(rv.bind(null,t)),ES(function(){!(he&6)&&Lr()}),n=null;else{switch(Jx(r)){case 1:n=df;break;case 4:n=Kx;break;case 16:n=Rl;break;case 536870912:n=Qx;break;default:n=Rl}n=_w(n,fw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fw(t,e){if(pl=-1,ml=0,he&6)throw Error(H(327));var n=t.callbackNode;if(Zs()&&t.callbackNode!==n)return null;var r=jl(t,t===qe?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Jl(t,r);else{e=r;var s=he;he|=2;var i=mw();(qe!==t||Ze!==e)&&(kn=null,di=je()+500,ts(t,e));do try{qS();break}catch(l){pw(t,l)}while(!0);bf(),Kl.current=i,he=s,Oe!==null?e=0:(qe=null,Ze=0,e=Be)}if(e!==0){if(e===2&&(s=zd(t),s!==0&&(r=s,e=gh(t,s))),e===1)throw n=Ho,ts(t,0),ir(t,r),It(t,je()),n;if(e===6)ir(t,r);else{if(s=t.current.alternate,!(r&30)&&!WS(s)&&(e=Jl(t,r),e===2&&(i=zd(t),i!==0&&(r=i,e=gh(t,i))),e===1))throw n=Ho,ts(t,0),ir(t,r),It(t,je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:qr(t,Et,kn);break;case 3:if(ir(t,r),(r&130023424)===r&&(e=Uf+500-je(),10<e)){if(jl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){yt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Yd(qr.bind(null,t,Et,kn),e);break}qr(t,Et,kn);break;case 4:if(ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-rn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*HS(r/1960))-r,10<r){t.timeoutHandle=Yd(qr.bind(null,t,Et,kn),r);break}qr(t,Et,kn);break;case 5:qr(t,Et,kn);break;default:throw Error(H(329))}}}return It(t,je()),t.callbackNode===n?fw.bind(null,t):null}function gh(t,e){var n=yo;return t.current.memoizedState.isDehydrated&&(ts(t,e).flags|=256),t=Jl(t,e),t!==2&&(e=Et,Et=n,e!==null&&vh(e)),t}function vh(t){Et===null?Et=t:Et.push.apply(Et,t)}function WS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!an(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ir(t,e){for(e&=~Lf,e&=~Oc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function rv(t){if(he&6)throw Error(H(327));Zs();var e=jl(t,0);if(!(e&1))return It(t,je()),null;var n=Jl(t,e);if(t.tag!==0&&n===2){var r=zd(t);r!==0&&(e=r,n=gh(t,r))}if(n===1)throw n=Ho,ts(t,0),ir(t,e),It(t,je()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qr(t,Et,kn),It(t,je()),null}function Ff(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(di=je()+500,Pc&&Lr())}}function cs(t){ur!==null&&ur.tag===0&&!(he&6)&&Zs();var e=he;he|=1;var n=Wt.transition,r=ge;try{if(Wt.transition=null,ge=1,t)return t()}finally{ge=r,Wt.transition=n,he=e,!(he&6)&&Lr()}}function Bf(){Nt=qs.current,Ee(qs)}function ts(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wS(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(wf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ll();break;case 3:ci(),Ee(bt),Ee(ht),Af();break;case 5:Nf(r);break;case 4:ci();break;case 13:Ee(be);break;case 19:Ee(be);break;case 10:Sf(r.type._context);break;case 22:case 23:Bf()}n=n.return}if(qe=t,Oe=t=_r(t.current,null),Ze=Nt=e,Be=0,Ho=null,Lf=Oc=ls=0,Et=yo=null,Yr!==null){for(e=0;e<Yr.length;e++)if(n=Yr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Yr=null}return t}function pw(t,e){do{var n=Oe;try{if(bf(),dl.current=ql,Gl){for(var r=Ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Gl=!1}if(as=0,We=Ue=Ie=null,go=!1,Bo=0,Vf.current=null,n===null||n.return===null){Be=1,Ho=e,Oe=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Ze,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=Hg(o);if(_!==null){_.flags&=-257,Wg(_,o,l,i,e),_.mode&1&&$g(i,d,e),e=_,c=d;var I=e.updateQueue;if(I===null){var k=new Set;k.add(c),e.updateQueue=k}else I.add(c);break e}else{if(!(e&1)){$g(i,d,e),zf();break e}c=Error(H(426))}}else if(Te&&l.mode&1){var A=Hg(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Wg(A,o,l,i,e),Ef(ui(c,l));break e}}i=c=ui(c,l),Be!==4&&(Be=2),yo===null?yo=[i]:yo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=J_(i,c,e);Vg(i,E);break e;case 1:l=c;var y=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(yr===null||!yr.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=X_(i,l,e);Vg(i,R);break e}}i=i.return}while(i!==null)}vw(n)}catch(B){e=B,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(!0)}function mw(){var t=Kl.current;return Kl.current=ql,t===null?ql:t}function zf(){(Be===0||Be===3||Be===2)&&(Be=4),qe===null||!(ls&268435455)&&!(Oc&268435455)||ir(qe,Ze)}function Jl(t,e){var n=he;he|=2;var r=mw();(qe!==t||Ze!==e)&&(kn=null,ts(t,e));do try{GS();break}catch(s){pw(t,s)}while(!0);if(bf(),he=n,Kl.current=r,Oe!==null)throw Error(H(261));return qe=null,Ze=0,Be}function GS(){for(;Oe!==null;)gw(Oe)}function qS(){for(;Oe!==null&&!yb();)gw(Oe)}function gw(t){var e=xw(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,e===null?vw(t):Oe=e,Vf.current=null}function vw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=FS(n,e),n!==null){n.flags&=32767,Oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Be=6,Oe=null;return}}else if(n=US(n,e,Nt),n!==null){Oe=n;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);Be===0&&(Be=5)}function qr(t,e,n){var r=ge,s=Wt.transition;try{Wt.transition=null,ge=1,KS(t,e,n,r)}finally{Wt.transition=s,ge=r}return null}function KS(t,e,n,r){do Zs();while(ur!==null);if(he&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(kb(t,i),t===qe&&(Oe=qe=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ya||(Ya=!0,_w(Rl,function(){return Zs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Wt.transition,Wt.transition=null;var o=ge;ge=1;var l=he;he|=4,Vf.current=null,zS(t,n),dw(n,t),pS(Kd),Dl=!!qd,Kd=qd=null,t.current=n,$S(n),xb(),he=l,ge=o,Wt.transition=i}else t.current=n;if(Ya&&(Ya=!1,ur=t,Yl=s),i=t.pendingLanes,i===0&&(yr=null),Eb(n.stateNode),It(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ql)throw Ql=!1,t=ph,ph=null,t;return Yl&1&&t.tag!==0&&Zs(),i=t.pendingLanes,i&1?t===mh?xo++:(xo=0,mh=t):xo=0,Lr(),null}function Zs(){if(ur!==null){var t=Jx(Yl),e=Wt.transition,n=ge;try{if(Wt.transition=null,ge=16>t?16:t,ur===null)var r=!1;else{if(t=ur,ur=null,Yl=0,he&6)throw Error(H(331));var s=he;for(he|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Q=d;Q!==null;){var f=Q;switch(f.tag){case 0:case 11:case 15:vo(8,f,i)}var m=f.child;if(m!==null)m.return=f,Q=m;else for(;Q!==null;){f=Q;var g=f.sibling,_=f.return;if(lw(f),f===d){Q=null;break}if(g!==null){g.return=_,Q=g;break}Q=_}}}var I=i.alternate;if(I!==null){var k=I.child;if(k!==null){I.child=null;do{var A=k.sibling;k.sibling=null,k=A}while(k!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:vo(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,Q=E;break e}Q=i.return}}var y=t.current;for(Q=y;Q!==null;){o=Q;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Q=T;else e:for(o=y;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Dc(9,l)}}catch(B){Pe(l,l.return,B)}if(l===o){Q=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,Q=R;break e}Q=l.return}}if(he=s,Lr(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Ic,t)}catch{}r=!0}return r}finally{ge=n,Wt.transition=e}}return!1}function sv(t,e,n){e=ui(n,e),e=J_(t,e,1),t=vr(t,e,1),e=yt(),t!==null&&(sa(t,1,e),It(t,e))}function Pe(t,e,n){if(t.tag===3)sv(t,t,n);else for(;e!==null;){if(e.tag===3){sv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yr===null||!yr.has(r))){t=ui(n,t),t=X_(e,t,1),e=vr(e,t,1),t=yt(),e!==null&&(sa(e,1,t),It(e,t));break}}e=e.return}}function QS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yt(),t.pingedLanes|=t.suspendedLanes&n,qe===t&&(Ze&n)===n&&(Be===4||Be===3&&(Ze&130023424)===Ze&&500>je()-Uf?ts(t,0):Lf|=n),It(t,e)}function yw(t,e){e===0&&(t.mode&1?(e=Fa,Fa<<=1,!(Fa&130023424)&&(Fa=4194304)):e=1);var n=yt();t=Fn(t,e),t!==null&&(sa(t,e,n),It(t,n))}function YS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yw(t,n)}function JS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),yw(t,n)}var xw;xw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bt.current)Tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tt=!1,LS(t,e,n);Tt=!!(t.flags&131072)}else Tt=!1,Te&&e.flags&1048576&&T_(e,Bl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fl(t,e),t=e.pendingProps;var s=oi(e,ht.current);Xs(e,n),s=Rf(null,e,r,t,s,n);var i=jf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,St(r)?(i=!0,Ul(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cf(e),s.updater=jc,e.stateNode=s,s._reactInternals=e,rh(e,r,t,n),e=oh(null,e,r,!0,i,n)):(e.tag=0,Te&&i&&_f(e),vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=ZS(r),t=Xt(r,t),s){case 0:e=ih(null,e,r,t,n);break e;case 1:e=Kg(null,e,r,t,n);break e;case 11:e=Gg(null,e,r,t,n);break e;case 14:e=qg(null,e,r,Xt(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),ih(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),Kg(t,e,r,s,n);case 3:e:{if(nw(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,N_(t,e),Hl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ui(Error(H(423)),e),e=Qg(t,e,r,n,s);break e}else if(r!==s){s=ui(Error(H(424)),e),e=Qg(t,e,r,n,s);break e}else for(Pt=gr(e.stateNode.containerInfo.firstChild),Rt=e,Te=!0,en=null,n=C_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ai(),r===s){e=Bn(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return A_(e),t===null&&eh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Qd(r,s)?o=null:i!==null&&Qd(r,i)&&(e.flags|=32),tw(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&eh(e),null;case 13:return rw(t,e,n);case 4:return kf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=li(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),Gg(t,e,r,s,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ye(zl,r._currentValue),r._currentValue=o,i!==null)if(an(i.value,o)){if(i.children===s.children&&!bt.current){e=Bn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=On(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),th(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),th(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Xs(e,n),s=qt(s),r=r(s),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,s=Xt(r,e.pendingProps),s=Xt(r.type,s),qg(t,e,r,s,n);case 15:return Z_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),fl(t,e),e.tag=1,St(r)?(t=!0,Ul(e)):t=!1,Xs(e,n),Y_(e,r,s),rh(e,r,s,n),oh(null,e,r,!0,t,n);case 19:return sw(t,e,n);case 22:return ew(t,e,n)}throw Error(H(156,e.tag))};function _w(t,e){return qx(t,e)}function XS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(t,e,n,r){return new XS(t,e,n,r)}function $f(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZS(t){if(typeof t=="function")return $f(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lf)return 11;if(t===cf)return 14}return 2}function _r(t,e){var n=t.alternate;return n===null?(n=Ht(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")$f(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vs:return ns(n.children,s,i,e);case af:o=8,s|=8;break;case Cd:return t=Ht(12,n,e,s|2),t.elementType=Cd,t.lanes=i,t;case kd:return t=Ht(13,n,e,s),t.elementType=kd,t.lanes=i,t;case Nd:return t=Ht(19,n,e,s),t.elementType=Nd,t.lanes=i,t;case Ax:return Mc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kx:o=10;break e;case Nx:o=9;break e;case lf:o=11;break e;case cf:o=14;break e;case nr:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Ht(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ns(t,e,n,r){return t=Ht(7,t,r,e),t.lanes=n,t}function Mc(t,e,n,r){return t=Ht(22,t,r,e),t.elementType=Ax,t.lanes=n,t.stateNode={isHidden:!1},t}function ad(t,e,n){return t=Ht(6,t,null,e),t.lanes=n,t}function ld(t,e,n){return e=Ht(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zu(0),this.expirationTimes=zu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hf(t,e,n,r,s,i,o,l,c){return t=new eI(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ht(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cf(i),t}function tI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ms,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ww(t){if(!t)return Cr;t=t._reactInternals;e:{if(ys(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(St(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(St(n))return w_(t,n,e)}return e}function Ew(t,e,n,r,s,i,o,l,c){return t=Hf(n,r,!0,t,s,i,o,l,c),t.context=ww(null),n=t.current,r=yt(),s=xr(n),i=On(r,s),i.callback=e??null,vr(n,i,s),t.current.lanes=s,sa(t,s,r),It(t,r),t}function Vc(t,e,n,r){var s=e.current,i=yt(),o=xr(s);return n=ww(n),e.context===null?e.context=n:e.pendingContext=n,e=On(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=vr(s,e,o),t!==null&&(sn(t,s,o,i),ul(t,s,o)),o}function Xl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function iv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wf(t,e){iv(t,e),(t=t.alternate)&&iv(t,e)}function nI(){return null}var Tw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gf(t){this._internalRoot=t}Lc.prototype.render=Gf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Vc(t,e,null,null)};Lc.prototype.unmount=Gf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cs(function(){Vc(null,t,null,null)}),e[Un]=null}};function Lc(t){this._internalRoot=t}Lc.prototype.unstable_scheduleHydration=function(t){if(t){var e=e_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<sr.length&&e!==0&&e<sr[n].priority;n++);sr.splice(n,0,t),n===0&&n_(t)}};function qf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Uc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ov(){}function rI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Xl(o);i.call(d)}}var o=Ew(e,r,t,0,null,!1,!1,"",ov);return t._reactRootContainer=o,t[Un]=o.current,Mo(t.nodeType===8?t.parentNode:t),cs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Xl(c);l.call(d)}}var c=Hf(t,0,!1,null,null,!1,!1,"",ov);return t._reactRootContainer=c,t[Un]=c.current,Mo(t.nodeType===8?t.parentNode:t),cs(function(){Vc(e,c,n,r)}),c}function Fc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Xl(o);l.call(c)}}Vc(e,o,t,s)}else o=rI(n,e,t,s,r);return Xl(o)}Xx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=no(e.pendingLanes);n!==0&&(hf(e,n|1),It(e,je()),!(he&6)&&(di=je()+500,Lr()))}break;case 13:cs(function(){var r=Fn(t,1);if(r!==null){var s=yt();sn(r,t,1,s)}}),Wf(t,1)}};ff=function(t){if(t.tag===13){var e=Fn(t,134217728);if(e!==null){var n=yt();sn(e,t,134217728,n)}Wf(t,134217728)}};Zx=function(t){if(t.tag===13){var e=xr(t),n=Fn(t,e);if(n!==null){var r=yt();sn(n,t,e,r)}Wf(t,e)}};e_=function(){return ge};t_=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};Ud=function(t,e,n){switch(e){case"input":if(Rd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ac(r);if(!s)throw Error(H(90));Rx(r),Rd(r,s)}}}break;case"textarea":Dx(t,n);break;case"select":e=n.value,e!=null&&Ks(t,!!n.multiple,e,!1)}};Bx=Ff;zx=cs;var sI={usingClientEntryPoint:!1,Events:[oa,Bs,Ac,Ux,Fx,Ff]},Zi={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iI={bundleType:Zi.bundleType,version:Zi.version,rendererPackageName:Zi.rendererPackageName,rendererConfig:Zi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Wx(t),t===null?null:t.stateNode},findFiberByHostInstance:Zi.findFiberByHostInstance||nI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ja.isDisabled&&Ja.supportsFiber)try{Ic=Ja.inject(iI),mn=Ja}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sI;Ot.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qf(e))throw Error(H(200));return tI(t,e,null,n)};Ot.createRoot=function(t,e){if(!qf(t))throw Error(H(299));var n=!1,r="",s=Tw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Hf(t,1,!1,null,null,n,!1,r,s),t[Un]=e.current,Mo(t.nodeType===8?t.parentNode:t),new Gf(e)};Ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=Wx(e),t=t===null?null:t.stateNode,t};Ot.flushSync=function(t){return cs(t)};Ot.hydrate=function(t,e,n){if(!Uc(e))throw Error(H(200));return Fc(null,t,e,!0,n)};Ot.hydrateRoot=function(t,e,n){if(!qf(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Tw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ew(e,null,t,1,n??null,s,!1,i,o),t[Un]=e.current,Mo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Lc(e)};Ot.render=function(t,e,n){if(!Uc(e))throw Error(H(200));return Fc(null,t,e,!1,n)};Ot.unmountComponentAtNode=function(t){if(!Uc(t))throw Error(H(40));return t._reactRootContainer?(cs(function(){Fc(null,null,t,!1,function(){t._reactRootContainer=null,t[Un]=null})}),!0):!1};Ot.unstable_batchedUpdates=Ff;Ot.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Uc(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Fc(t,e,n,!1,r)};Ot.version="18.3.1-next-f1338f8080-20240426";function bw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bw)}catch(t){console.error(t)}}bw(),bx.exports=Ot;var oI=bx.exports,Sw,av=oI;Sw=av.createRoot,av.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wo(){return Wo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wo.apply(this,arguments)}var dr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dr||(dr={}));const lv="popstate";function aI(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return yh("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Zl(s)}return cI(e,n,null,t)}function Ce(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lI(){return Math.random().toString(36).substr(2,8)}function cv(t,e){return{usr:t.state,key:t.key,idx:e}}function yh(t,e,n,r){return n===void 0&&(n=null),Wo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ti(e):e,{state:n,key:e&&e.key||r||lI()})}function Zl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ti(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function cI(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=dr.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(Wo({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=dr.Pop;let A=f(),E=A==null?null:A-d;d=A,c&&c({action:l,location:k.location,delta:E})}function g(A,E){l=dr.Push;let y=yh(k.location,A,E);d=f()+1;let T=cv(y,d),R=k.createHref(y);try{o.pushState(T,"",R)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(R)}i&&c&&c({action:l,location:k.location,delta:1})}function _(A,E){l=dr.Replace;let y=yh(k.location,A,E);d=f();let T=cv(y,d),R=k.createHref(y);o.replaceState(T,"",R),i&&c&&c({action:l,location:k.location,delta:0})}function I(A){let E=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof A=="string"?A:Zl(A);return y=y.replace(/ $/,"%20"),Ce(E,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,E)}let k={get action(){return l},get location(){return t(s,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(lv,m),c=A,()=>{s.removeEventListener(lv,m),c=null}},createHref(A){return e(s,A)},createURL:I,encodeLocation(A){let E=I(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:_,go(A){return o.go(A)}};return k}var uv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(uv||(uv={}));function uI(t,e,n){return n===void 0&&(n="/"),dI(t,e,n)}function dI(t,e,n,r){let s=typeof e=="string"?Ti(e):e,i=hi(s.pathname||"/",n);if(i==null)return null;let o=Iw(t);hI(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=TI(i);l=wI(o[c],d)}return l}function Iw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ce(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=wr([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(Ce(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Iw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:xI(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of Cw(i.path))s(i,o,c)}),e}function Cw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Cw(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function hI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_I(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const fI=/^:[\w-]+$/,pI=3,mI=2,gI=1,vI=10,yI=-2,dv=t=>t==="*";function xI(t,e){let n=t.split("/"),r=n.length;return n.some(dv)&&(r+=yI),e&&(r+=mI),n.filter(s=>!dv(s)).reduce((s,i)=>s+(fI.test(i)?pI:i===""?gI:vI),r)}function _I(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function wI(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=xh({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:wr([i,m.pathname]),pathnameBase:kI(wr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=wr([i,m.pathnameBase]))}return o}function xh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=EI(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:_}=f;if(g==="*"){let k=l[m]||"";o=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const I=l[m];return _&&!I?d[g]=void 0:d[g]=(I||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function EI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Kf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function TI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function hi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const bI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SI=t=>bI.test(t);function II(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ti(t):t,i;if(n)if(SI(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Kf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=hv(n.substring(1),"/"):i=hv(n,e)}else i=e;return{pathname:i,search:NI(r),hash:AI(s)}}function hv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function cd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function CI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qf(t,e){let n=CI(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Yf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ti(t):(s=Wo({},t),Ce(!s.pathname||!s.pathname.includes("?"),cd("?","pathname","search",s)),Ce(!s.pathname||!s.pathname.includes("#"),cd("#","pathname","hash",s)),Ce(!s.search||!s.search.includes("#"),cd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let c=II(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const wr=t=>t.join("/").replace(/\/\/+/g,"/"),kI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),NI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,AI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function PI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kw=["post","put","patch","delete"];new Set(kw);const RI=["get",...kw];new Set(RI);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Go(){return Go=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Go.apply(this,arguments)}const Bc=N.createContext(null),Nw=N.createContext(null),qn=N.createContext(null),zc=N.createContext(null),Kn=N.createContext({outlet:null,matches:[],isDataRoute:!1}),Aw=N.createContext(null);function jI(t,e){let{relative:n}=e===void 0?{}:e;bi()||Ce(!1);let{basename:r,navigator:s}=N.useContext(qn),{hash:i,pathname:o,search:l}=$c(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:wr([r,o])),s.createHref({pathname:c,search:l,hash:i})}function bi(){return N.useContext(zc)!=null}function xs(){return bi()||Ce(!1),N.useContext(zc).location}function Pw(t){N.useContext(qn).static||N.useLayoutEffect(t)}function Rw(){let{isDataRoute:t}=N.useContext(Kn);return t?KI():DI()}function DI(){bi()||Ce(!1);let t=N.useContext(Bc),{basename:e,future:n,navigator:r}=N.useContext(qn),{matches:s}=N.useContext(Kn),{pathname:i}=xs(),o=JSON.stringify(Qf(s,n.v7_relativeSplatPath)),l=N.useRef(!1);return Pw(()=>{l.current=!0}),N.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=Yf(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:wr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,i,t])}const OI=N.createContext(null);function MI(t){let e=N.useContext(Kn).outlet;return e&&N.createElement(OI.Provider,{value:t},e)}function $c(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext(qn),{matches:s}=N.useContext(Kn),{pathname:i}=xs(),o=JSON.stringify(Qf(s,r.v7_relativeSplatPath));return N.useMemo(()=>Yf(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function VI(t,e){return LI(t,e)}function LI(t,e,n,r){bi()||Ce(!1);let{navigator:s}=N.useContext(qn),{matches:i}=N.useContext(Kn),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=xs(),f;if(e){var m;let A=typeof e=="string"?Ti(e):e;c==="/"||(m=A.pathname)!=null&&m.startsWith(c)||Ce(!1),f=A}else f=d;let g=f.pathname||"/",_=g;if(c!=="/"){let A=c.replace(/^\//,"").split("/");_="/"+g.replace(/^\//,"").split("/").slice(A.length).join("/")}let I=uI(t,{pathname:_}),k=$I(I&&I.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:wr([c,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?c:wr([c,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,n,r);return e&&k?N.createElement(zc.Provider,{value:{location:Go({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:dr.Pop}},k):k}function UI(){let t=qI(),e=PI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:s},n):null,null)}const FI=N.createElement(UI,null);class BI extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(Kn.Provider,{value:this.props.routeContext},N.createElement(Aw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zI(t){let{routeContext:e,match:n,children:r}=t,s=N.useContext(Bc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Kn.Provider,{value:e},r)}function $I(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||Ce(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:_}=n,I=m.route.loader&&g[m.route.id]===void 0&&(!_||_[m.route.id]===void 0);if(m.route.lazy||I){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let _,I=!1,k=null,A=null;n&&(_=l&&m.route.id?l[m.route.id]:void 0,k=m.route.errorElement||FI,c&&(d<0&&g===0?(QI("route-fallback"),I=!0,A=null):d===g&&(I=!0,A=m.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,g+1)),y=()=>{let T;return _?T=k:I?T=A:m.route.Component?T=N.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=f,N.createElement(zI,{match:m,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:T})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?N.createElement(BI,{location:n.location,revalidation:n.revalidation,component:k,error:_,children:y(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):y()},null)}var jw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(jw||{}),Dw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Dw||{});function HI(t){let e=N.useContext(Bc);return e||Ce(!1),e}function WI(t){let e=N.useContext(Nw);return e||Ce(!1),e}function GI(t){let e=N.useContext(Kn);return e||Ce(!1),e}function Ow(t){let e=GI(),n=e.matches[e.matches.length-1];return n.route.id||Ce(!1),n.route.id}function qI(){var t;let e=N.useContext(Aw),n=WI(),r=Ow();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function KI(){let{router:t}=HI(jw.UseNavigateStable),e=Ow(Dw.UseNavigateStable),n=N.useRef(!1);return Pw(()=>{n.current=!0}),N.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Go({fromRouteId:e},i)))},[t,e])}const fv={};function QI(t,e,n){fv[t]||(fv[t]=!0)}function YI(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function JI(t){let{to:e,replace:n,state:r,relative:s}=t;bi()||Ce(!1);let{future:i,static:o}=N.useContext(qn),{matches:l}=N.useContext(Kn),{pathname:c}=xs(),d=Rw(),f=Yf(e,Qf(l,i.v7_relativeSplatPath),c,s==="path"),m=JSON.stringify(f);return N.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function XI(t){return MI(t.context)}function Ps(t){Ce(!1)}function ZI(t){let{basename:e="/",children:n=null,location:r,navigationType:s=dr.Pop,navigator:i,static:o=!1,future:l}=t;bi()&&Ce(!1);let c=e.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:c,navigator:i,static:o,future:Go({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Ti(r));let{pathname:f="/",search:m="",hash:g="",state:_=null,key:I="default"}=r,k=N.useMemo(()=>{let A=hi(f,c);return A==null?null:{location:{pathname:A,search:m,hash:g,state:_,key:I},navigationType:s}},[c,f,m,g,_,I,s]);return k==null?null:N.createElement(qn.Provider,{value:d},N.createElement(zc.Provider,{children:n,value:k}))}function eC(t){let{children:e,location:n}=t;return VI(_h(e),n)}new Promise(()=>{});function _h(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,s)=>{if(!N.isValidElement(r))return;let i=[...e,s];if(r.type===N.Fragment){n.push.apply(n,_h(r.props.children,i));return}r.type!==Ps&&Ce(!1),!r.props.index||!r.props.children||Ce(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_h(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ec(){return ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ec.apply(this,arguments)}function Mw(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function tC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function nC(t,e){return t.button===0&&(!e||e==="_self")&&!tC(t)}const rC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],sC=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],iC="6";try{window.__reactRouterVersion=iC}catch{}const oC=N.createContext({isTransitioning:!1}),aC="startTransition",pv=QT[aC];function lC(t){let{basename:e,children:n,future:r,window:s}=t,i=N.useRef();i.current==null&&(i.current=aI({window:s,v5Compat:!0}));let o=i.current,[l,c]=N.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=N.useCallback(m=>{d&&pv?pv(()=>c(m)):c(m)},[c,d]);return N.useLayoutEffect(()=>o.listen(f),[o,f]),N.useEffect(()=>YI(r),[r]),N.createElement(ZI,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const cC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wh=N.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:f,viewTransition:m}=e,g=Mw(e,rC),{basename:_}=N.useContext(qn),I,k=!1;if(typeof d=="string"&&uC.test(d)&&(I=d,cC))try{let T=new URL(window.location.href),R=d.startsWith("//")?new URL(T.protocol+d):new URL(d),B=hi(R.pathname,_);R.origin===T.origin&&B!=null?d=B+R.search+R.hash:k=!0}catch{}let A=jI(d,{relative:s}),E=hC(d,{replace:o,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:m});function y(T){r&&r(T),T.defaultPrevented||E(T)}return N.createElement("a",ec({},g,{href:I||A,onClick:k||i?r:y,ref:n,target:c}))}),ud=N.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:d,children:f}=e,m=Mw(e,sC),g=$c(c,{relative:m.relative}),_=xs(),I=N.useContext(Nw),{navigator:k,basename:A}=N.useContext(qn),E=I!=null&&fC(g)&&d===!0,y=k.encodeLocation?k.encodeLocation(g).pathname:g.pathname,T=_.pathname,R=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;s||(T=T.toLowerCase(),R=R?R.toLowerCase():null,y=y.toLowerCase()),R&&A&&(R=hi(R,A)||R);const B=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let F=T===y||!o&&T.startsWith(y)&&T.charAt(B)==="/",b=R!=null&&(R===y||!o&&R.startsWith(y)&&R.charAt(y.length)==="/"),x={isActive:F,isPending:b,isTransitioning:E},S=F?r:void 0,C;typeof i=="function"?C=i(x):C=[i,F?"active":null,b?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let j=typeof l=="function"?l(x):l;return N.createElement(wh,ec({},m,{"aria-current":S,className:C,ref:n,style:j,to:c,viewTransition:d}),typeof f=="function"?f(x):f)});var Eh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Eh||(Eh={}));var mv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(mv||(mv={}));function dC(t){let e=N.useContext(Bc);return e||Ce(!1),e}function hC(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=Rw(),d=xs(),f=$c(t,{relative:o});return N.useCallback(m=>{if(nC(m,n)){m.preventDefault();let g=r!==void 0?r:Zl(d)===Zl(f);c(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,f,r,s,n,t,i,o,l])}function fC(t,e){e===void 0&&(e={});let n=N.useContext(oC);n==null&&Ce(!1);let{basename:r}=dC(Eh.useViewTransitionState),s=$c(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=hi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=hi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return xh(s.pathname,o)!=null||xh(s.pathname,i)!=null}const pC=()=>{};var gv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},mC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Lw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,_=d&63;c||(_=64,o||(g=64)),r.push(n[f],n[m],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Vw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new gC;const g=i<<2|l>>4;if(r.push(g),d!==64){const _=l<<4&240|d>>2;if(r.push(_),m!==64){const I=d<<6&192|m;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vC=function(t){const e=Vw(t);return Lw.encodeByteArray(e,!0)},tc=function(t){return vC(t).replace(/\./g,"")},Uw=function(t){try{return Lw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=()=>yC().__FIREBASE_DEFAULTS__,_C=()=>{if(typeof process>"u"||typeof gv>"u")return;const t=gv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Uw(t[1]);return e&&JSON.parse(e)},Hc=()=>{try{return pC()||xC()||_C()||wC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Fw=t=>{var e,n;return(n=(e=Hc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},EC=t=>{const e=Fw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Bw=()=>{var t;return(t=Hc())===null||t===void 0?void 0:t.config},zw=t=>{var e;return(e=Hc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $w(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[tc(JSON.stringify(n)),tc(JSON.stringify(o)),""].join(".")}const _o={};function SC(){const t={prod:[],emulator:[]};for(const e of Object.keys(_o))_o[e]?t.emulator.push(e):t.prod.push(e);return t}function IC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let vv=!1;function Hw(t,e){if(typeof window>"u"||typeof document>"u"||!Si(window.location.host)||_o[t]===e||_o[t]||vv)return;_o[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=SC().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{vv=!0,o()},g}function f(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=IC(r),_=n("text"),I=document.getElementById(_)||document.createElement("span"),k=n("learnmore"),A=document.getElementById(k)||document.createElement("a"),E=n("preprendIcon"),y=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const T=g.element;l(T),f(A,k);const R=d();c(y,E),T.append(y,I,A,R),document.body.appendChild(T)}i?(I.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function kC(){var t;const e=(t=Hc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ww(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PC(){const t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RC(){return!kC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gw(){try{return typeof indexedDB=="object"}catch{return!1}}function qw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function jC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="FirebaseError";class cn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DC,Object.setPrototypeOf(this,cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_s.prototype.create)}}class _s{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?OC(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new cn(s,l,r)}}function OC(t,e){return t.replace(MC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const MC=/\{\$([^}]+)}/g;function VC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function kr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(yv(i)&&yv(o)){if(!kr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function yv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function so(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function io(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function LC(t,e){const n=new UC(t,e);return n.subscribe.bind(n)}class UC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");FC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=dd),s.error===void 0&&(s.error=dd),s.complete===void 0&&(s.complete=dd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=1e3,zC=2,$C=4*60*60*1e3,HC=.5;function xv(t,e=BC,n=zC){const r=e*Math.pow(n,t),s=Math.round(HC*r*(Math.random()-.5)*2);return Math.min($C,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t){return t&&t._delegate?t._delegate:t}class ln{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new TC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qC(e))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kr){return this.instances.has(e)}getOptions(e=Kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Kr){return this.component?this.component.multipleInstances?e:Kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GC(t){return t===Kr?void 0:t}function qC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const QC={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},YC=ce.INFO,JC={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},XC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=JC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wc{constructor(e){this.name=e,this._logLevel=YC,this._logHandler=XC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const ZC=(t,e)=>e.some(n=>t instanceof n);let _v,wv;function ek(){return _v||(_v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tk(){return wv||(wv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kw=new WeakMap,Th=new WeakMap,Qw=new WeakMap,hd=new WeakMap,Jf=new WeakMap;function nk(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Er(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Kw.set(n,t)}).catch(()=>{}),Jf.set(e,t),e}function rk(t){if(Th.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Th.set(t,e)}let bh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Th.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sk(t){bh=t(bh)}function ik(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fd(this),e,...n);return Qw.set(r,e.sort?e.sort():[e]),Er(r)}:tk().includes(t)?function(...e){return t.apply(fd(this),e),Er(Kw.get(this))}:function(...e){return Er(t.apply(fd(this),e))}}function ok(t){return typeof t=="function"?ik(t):(t instanceof IDBTransaction&&rk(t),ZC(t,ek())?new Proxy(t,bh):t)}function Er(t){if(t instanceof IDBRequest)return nk(t);if(hd.has(t))return hd.get(t);const e=ok(t);return e!==t&&(hd.set(t,e),Jf.set(e,t)),e}const fd=t=>Jf.get(t);function Yw(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Er(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Er(o.result),c.oldVersion,c.newVersion,Er(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const ak=["get","getKey","getAll","getAllKeys","count"],lk=["put","add","delete","clear"],pd=new Map;function Ev(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pd.get(e))return pd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=lk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ak.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return pd.set(e,i),i}sk(t=>({...t,get:(e,n,r)=>Ev(e,n)||t.get(e,n,r),has:(e,n)=>!!Ev(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function uk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sh="@firebase/app",Tv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new Wc("@firebase/app"),dk="@firebase/app-compat",hk="@firebase/analytics-compat",fk="@firebase/analytics",pk="@firebase/app-check-compat",mk="@firebase/app-check",gk="@firebase/auth",vk="@firebase/auth-compat",yk="@firebase/database",xk="@firebase/data-connect",_k="@firebase/database-compat",wk="@firebase/functions",Ek="@firebase/functions-compat",Tk="@firebase/installations",bk="@firebase/installations-compat",Sk="@firebase/messaging",Ik="@firebase/messaging-compat",Ck="@firebase/performance",kk="@firebase/performance-compat",Nk="@firebase/remote-config",Ak="@firebase/remote-config-compat",Pk="@firebase/storage",Rk="@firebase/storage-compat",jk="@firebase/firestore",Dk="@firebase/ai",Ok="@firebase/firestore-compat",Mk="firebase",Vk="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="[DEFAULT]",Lk={[Sh]:"fire-core",[dk]:"fire-core-compat",[fk]:"fire-analytics",[hk]:"fire-analytics-compat",[mk]:"fire-app-check",[pk]:"fire-app-check-compat",[gk]:"fire-auth",[vk]:"fire-auth-compat",[yk]:"fire-rtdb",[xk]:"fire-data-connect",[_k]:"fire-rtdb-compat",[wk]:"fire-fn",[Ek]:"fire-fn-compat",[Tk]:"fire-iid",[bk]:"fire-iid-compat",[Sk]:"fire-fcm",[Ik]:"fire-fcm-compat",[Ck]:"fire-perf",[kk]:"fire-perf-compat",[Nk]:"fire-rc",[Ak]:"fire-rc-compat",[Pk]:"fire-gcs",[Rk]:"fire-gcs-compat",[jk]:"fire-fst",[Ok]:"fire-fst-compat",[Dk]:"fire-vertex","fire-js":"fire-js",[Mk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new Map,Uk=new Map,Ch=new Map;function bv(t,e){try{t.container.addComponent(e)}catch(n){zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function En(t){const e=t.name;if(Ch.has(e))return zn.debug(`There were multiple attempts to register component ${e}.`),!1;Ch.set(e,t);for(const n of nc.values())bv(n,t);for(const n of Uk.values())bv(n,t);return!0}function ws(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function At(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tr=new _s("app","Firebase",Fk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ln("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=Vk;function Jw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ih,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Tr.create("bad-app-name",{appName:String(s)});if(n||(n=Bw()),!n)throw Tr.create("no-options");const i=nc.get(s);if(i){if(kr(n,i.options)&&kr(r,i.config))return i;throw Tr.create("duplicate-app",{appName:s})}const o=new KC(s);for(const c of Ch.values())o.addComponent(c);const l=new Bk(n,r,o);return nc.set(s,l),l}function Xf(t=Ih){const e=nc.get(t);if(!e&&t===Ih&&Bw())return Jw();if(!e)throw Tr.create("no-app",{appName:t});return e}function Gt(t,e,n){var r;let s=(r=Lk[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zn.warn(l.join(" "));return}En(new ln(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="firebase-heartbeat-database",$k=1,qo="firebase-heartbeat-store";let md=null;function Xw(){return md||(md=Yw(zk,$k,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Tr.create("idb-open",{originalErrorMessage:t.message})})),md}async function Hk(t){try{const n=(await Xw()).transaction(qo),r=await n.objectStore(qo).get(Zw(t));return await n.done,r}catch(e){if(e instanceof cn)zn.warn(e.message);else{const n=Tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zn.warn(n.message)}}}async function Sv(t,e){try{const r=(await Xw()).transaction(qo,"readwrite");await r.objectStore(qo).put(e,Zw(t)),await r.done}catch(n){if(n instanceof cn)zn.warn(n.message);else{const r=Tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zn.warn(r.message)}}}function Zw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=1024,Gk=30;class qk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Qk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Iv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Gk){const o=Yk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){zn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Iv(),{heartbeatsToSend:r,unsentEntries:s}=Kk(this._heartbeatsCache.heartbeats),i=tc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return zn.warn(n),""}}}function Iv(){return new Date().toISOString().substring(0,10)}function Kk(t,e=Wk){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Cv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Cv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Qk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gw()?qw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Hk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Cv(t){return tc(JSON.stringify({version:2,heartbeats:t})).length}function Yk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t){En(new ln("platform-logger",e=>new ck(e),"PRIVATE")),En(new ln("heartbeat",e=>new qk(e),"PRIVATE")),Gt(Sh,Tv,t),Gt(Sh,Tv,"esm2017"),Gt("fire-js","")}Jk("");function Zf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function e0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Xk=e0,t0=new _s("auth","Firebase",e0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=new Wc("@firebase/auth");function Zk(t,...e){rc.logLevel<=ce.WARN&&rc.warn(`Auth (${Ii}): ${t}`,...e)}function vl(t,...e){rc.logLevel<=ce.ERROR&&rc.error(`Auth (${Ii}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t,...e){throw tp(t,...e)}function on(t,...e){return tp(t,...e)}function ep(t,e,n){const r=Object.assign(Object.assign({},Xk()),{[e]:n});return new _s("auth","Firebase",r).create(e,{appName:t.name})}function Mn(t){return ep(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eN(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Qt(t,"argument-error"),ep(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return t0.create(t,...e)}function ee(t,e,...n){if(!t)throw tp(e,...n)}function jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vl(e),new Error(e)}function $n(t,e){t||jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tN(){return kv()==="http:"||kv()==="https:"}function kv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tN()||Ww()||"connection"in navigator)?navigator.onLine:!0}function rN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.shortDelay=e,this.longDelay=n,$n(n>e,"Short delay should be less than long delay!"),this.isMobile=CC()||AC()}get(){return nN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t,e){$n(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oN=new ca(3e4,6e4);function Ur(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Qn(t,e,n,r,s={}){return r0(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=la(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return NC()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Si(t.emulatorConfig.host)&&(d.credentials="include"),n0.fetch()(await s0(t,t.config.apiHost,n,l),d)})}async function r0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},sN),e);try{const s=new lN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Xa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xa(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Xa(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Xa(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ep(t,f,d);Qt(t,f)}}catch(s){if(s instanceof cn)throw s;Qt(t,"network-request-failed",{message:String(s)})}}async function ua(t,e,n,r,s={}){const i=await Qn(t,e,n,r,s);return"mfaPendingCredential"in i&&Qt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function s0(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?np(t.config,s):`${t.config.apiScheme}://${s}`;return iN.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function aN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(on(this.auth,"network-request-failed")),oN.get())})}}function Xa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=on(t,e,r);return s.customData._tokenResponse=n,s}function Nv(t){return t!==void 0&&t.enterprise!==void 0}class cN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uN(t,e){return Qn(t,"GET","/v2/recaptchaConfig",Ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(t,e){return Qn(t,"POST","/v1/accounts:delete",e)}async function sc(t,e){return Qn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hN(t,e=!1){const n=pt(t),r=await n.getIdToken(e),s=rp(r);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:wo(gd(s.auth_time)),issuedAtTime:wo(gd(s.iat)),expirationTime:wo(gd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function gd(t){return Number(t)*1e3}function rp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Uw(n);return s?JSON.parse(s):(vl("Failed to decode base64 JWT payload"),null)}catch(s){return vl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Av(t){const e=rp(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cn&&fN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wo(this.lastLoginAt),this.creationTime=wo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(t){var e;const n=t.auth,r=await t.getIdToken(),s=await fi(t,sc(n,{idToken:r}));ee(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?i0(i.providerUserInfo):[],l=gN(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=c?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Nh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function mN(t){const e=pt(t);await ic(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function i0(t){return t.map(e=>{var{providerId:n}=e,r=Zf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(t,e){const n=await r0(t,{},async()=>{const r=la({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await s0(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Si(t.emulatorConfig.host)&&(c.credentials="include"),n0.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yN(t,e){return Qn(t,"POST","/v2/accounts:revokeToken",Ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Av(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=Av(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await vN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ei;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ei,this.toJSON())}_performRefresh(){return jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class tn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Zf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Nh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await fi(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hN(this,e)}reload(){return mN(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new tn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ic(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(At(this.auth.app))return Promise.reject(Mn(this.auth));const e=await this.getIdToken();return await fi(this,dN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,I=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(l=n.tenantId)!==null&&l!==void 0?l:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,y=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:T,emailVerified:R,isAnonymous:B,providerData:F,stsTokenManager:b}=n;ee(T&&b,e,"internal-error");const x=ei.fromJSON(this.name,b);ee(typeof T=="string",e,"internal-error"),tr(m,e.name),tr(g,e.name),ee(typeof R=="boolean",e,"internal-error"),ee(typeof B=="boolean",e,"internal-error"),tr(_,e.name),tr(I,e.name),tr(k,e.name),tr(A,e.name),tr(E,e.name),tr(y,e.name);const S=new tn({uid:T,auth:e,email:g,emailVerified:R,displayName:m,isAnonymous:B,photoURL:I,phoneNumber:_,tenantId:k,stsTokenManager:x,createdAt:E,lastLoginAt:y});return F&&Array.isArray(F)&&(S.providerData=F.map(C=>Object.assign({},C))),A&&(S._redirectEventId=A),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new ei;s.updateFromServerResponse(n);const i=new tn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ic(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?i0(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ei;l.updateFromIdToken(r);const c=new tn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Nh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=new Map;function Dn(t){$n(t instanceof Function,"Expected a class definition");let e=Pv.get(t);return e?($n(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Pv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}o0.type="NONE";const Rv=o0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t,e,n){return`firebase:${t}:${e}:${n}`}class ti{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=yl(this.userKey,s.apiKey,i),this.fullPersistenceKey=yl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await sc(this.auth,{idToken:e}).catch(()=>{});return n?tn._fromGetAccountInfoResponse(this.auth,n,e):null}return tn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ti(Dn(Rv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Dn(Rv);const o=yl(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await sc(e,{idToken:f}).catch(()=>{});if(!g)break;m=await tn._fromGetAccountInfoResponse(e,g,f)}else m=tn._fromJSON(e,f);d!==i&&(l=m),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ti(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new ti(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(u0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(h0(e))return"Blackberry";if(f0(e))return"Webos";if(l0(e))return"Safari";if((e.includes("chrome/")||c0(e))&&!e.includes("edge/"))return"Chrome";if(d0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function a0(t=ft()){return/firefox\//i.test(t)}function l0(t=ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function c0(t=ft()){return/crios\//i.test(t)}function u0(t=ft()){return/iemobile/i.test(t)}function d0(t=ft()){return/android/i.test(t)}function h0(t=ft()){return/blackberry/i.test(t)}function f0(t=ft()){return/webos/i.test(t)}function sp(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xN(t=ft()){var e;return sp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _N(){return PC()&&document.documentMode===10}function p0(t=ft()){return sp(t)||d0(t)||f0(t)||h0(t)||/windows phone/i.test(t)||u0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t,e=[]){let n;switch(t){case"Browser":n=jv(ft());break;case"Worker":n=`${jv(ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ii}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(t,e={}){return Qn(t,"GET","/v2/passwordPolicy",Ur(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=6;class bN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:TN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dv(this),this.idTokenSubscription=new Dv(this),this.beforeStateQueue=new wN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ti.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sc(this,{idToken:e}),r=await tn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(At(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ic(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(At(this.app))return Promise.reject(Mn(this));const n=e?pt(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return At(this.app)?Promise.reject(Mn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return At(this.app)?Promise.reject(Mn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EN(this),n=new bN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _s("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dn(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await ti.create(this,[Dn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(At(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Zk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Fr(t){return pt(t)}class Dv{constructor(e){this.auth=e,this.observer=null,this.addObserver=LC(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IN(t){Gc=t}function g0(t){return Gc.loadJS(t)}function CN(){return Gc.recaptchaEnterpriseScript}function kN(){return Gc.gapiScript}function NN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class AN{constructor(){this.enterprise=new PN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class PN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const RN="recaptcha-enterprise",v0="NO_RECAPTCHA";class jN{constructor(e){this.type=RN,this.auth=Fr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{uN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new cN(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;Nv(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(v0)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new AN().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Nv(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=CN();c.length!==0&&(c+=l),g0(c).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Ov(t,e,n,r=!1,s=!1){const i=new jN(t);let o;if(s)o=v0;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Ah(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Ov(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Ov(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t,e){const n=ws(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(kr(i,e??{}))return s;Qt(s,"already-initialized")}return n.initialize({options:e})}function ON(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function MN(t,e,n){const r=Fr(t);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=y0(e),{host:o,port:l}=VN(e),c=l===null?"":`:${l}`,d={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(kr(d,r.config.emulator)&&kr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Si(o)?($w(`${i}//${o}${c}`),Hw("Auth",!0)):LN()}function y0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function VN(t){const e=y0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Mv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Mv(o)}}}function Mv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function LN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jn("not implemented")}_getIdTokenResponse(e){return jn("not implemented")}_linkToIdToken(e,n){return jn("not implemented")}_getReauthenticationResolver(e){return jn("not implemented")}}async function UN(t,e){return Qn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(t,e){return ua(t,"POST","/v1/accounts:signInWithPassword",Ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",Ur(t,e))}async function zN(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",Ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends ip{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ko(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ko(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ah(e,n,"signInWithPassword",FN);case"emailLink":return BN(e,{email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ah(e,r,"signUpPassword",UN);case"emailLink":return zN(e,{idToken:n,email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ni(t,e){return ua(t,"POST","/v1/accounts:signInWithIdp",Ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="http://localhost";class us extends ip{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new us(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Zf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new us(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ni(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ni(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ni(e,n)}buildRequest(){const e={requestUri:$N,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=la(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WN(t){const e=so(io(t)).link,n=e?so(io(e)).deep_link_id:null,r=so(io(t)).deep_link_id;return(r?so(io(r)).link:null)||r||n||e||t}class op{constructor(e){var n,r,s,i,o,l;const c=so(io(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,m=HN((s=c.mode)!==null&&s!==void 0?s:null);ee(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=WN(e);try{return new op(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(){this.providerId=Ci.PROVIDER_ID}static credential(e,n){return Ko._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=op.parseLink(n);return ee(r,"argument-error"),Ko._fromEmailAndCode(e,r.code,r.tenantId)}}Ci.PROVIDER_ID="password";Ci.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ci.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends ap{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends da{constructor(){super("facebook.com")}static credential(e){return us._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.FACEBOOK_SIGN_IN_METHOD="facebook.com";or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An extends da{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return us._fromParams({providerId:An.PROVIDER_ID,signInMethod:An.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return An.credentialFromTaggedObject(e)}static credentialFromError(e){return An.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return An.credential(n,r)}catch{return null}}}An.GOOGLE_SIGN_IN_METHOD="google.com";An.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends da{constructor(){super("github.com")}static credential(e){return us._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends da{constructor(){super("twitter.com")}static credential(e,n){return us._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return lr.credential(n,r)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e){return ua(t,"POST","/v1/accounts:signUp",Ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await tn._fromIdTokenResponse(e,r,s),o=Vv(r);return new ds({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Vv(r);return new ds({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Vv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc extends cn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,oc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new oc(e,n,r,s)}}function x0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?oc._fromErrorAndOperation(t,i,e,r):i})}async function qN(t,e,n=!1){const r=await fi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ds._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(t,e,n=!1){const{auth:r}=t;if(At(r.app))return Promise.reject(Mn(r));const s="reauthenticate";try{const i=await fi(t,x0(r,s,e,t),n);ee(i.idToken,r,"internal-error");const o=rp(i.idToken);ee(o,r,"internal-error");const{sub:l}=o;return ee(t.uid===l,r,"user-mismatch"),ds._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Qt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _0(t,e,n=!1){if(At(t.app))return Promise.reject(Mn(t));const r="signIn",s=await x0(t,r,e),i=await ds._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function QN(t,e){return _0(Fr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w0(t){const e=Fr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YN(t,e,n){if(At(t.app))return Promise.reject(Mn(t));const r=Fr(t),o=await Ah(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GN).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&w0(t),c}),l=await ds._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function JN(t,e,n){return At(t.app)?Promise.reject(Mn(t)):QN(pt(t),Ci.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&w0(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(t,e){return Qn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=pt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await fi(r,XN(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function eA(t,e,n,r){return pt(t).onIdTokenChanged(e,n,r)}function tA(t,e,n){return pt(t).beforeAuthStateChanged(e,n)}function nA(t,e,n,r){return pt(t).onAuthStateChanged(e,n,r)}function rA(t){return pt(t).signOut()}const ac="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ac,"1"),this.storage.removeItem(ac),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=1e3,iA=10;class T0 extends E0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);_N()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,iA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}T0.type="LOCAL";const oA=T0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0 extends E0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}b0.type="SESSION";const S0=b0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new qc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await aA(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=lp("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return window}function cA(t){vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function uA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function hA(){return I0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="firebaseLocalStorageDb",fA=1,lc="firebaseLocalStorage",k0="fbase_key";class ha{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Kc(t,e){return t.transaction([lc],e?"readwrite":"readonly").objectStore(lc)}function pA(){const t=indexedDB.deleteDatabase(C0);return new ha(t).toPromise()}function Ph(){const t=indexedDB.open(C0,fA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(lc,{keyPath:k0})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(lc)?e(r):(r.close(),await pA(),e(await Ph()))})})}async function Lv(t,e,n){const r=Kc(t,!0).put({[k0]:e,value:n});return new ha(r).toPromise()}async function mA(t,e){const n=Kc(t,!1).get(e),r=await new ha(n).toPromise();return r===void 0?null:r.value}function Uv(t,e){const n=Kc(t,!0).delete(e);return new ha(n).toPromise()}const gA=800,vA=3;class N0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ph(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return I0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qc._getInstance(hA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await uA(),!this.activeServiceWorker)return;this.sender=new lA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ph();return await Lv(e,ac,"1"),await Uv(e,ac),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Lv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>mA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Uv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Kc(s,!1).getAll();return new ha(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}N0.type="LOCAL";const yA=N0;new ca(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t,e){return e?Dn(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp extends ip{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ni(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ni(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ni(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function xA(t){return _0(t.auth,new cp(t),t.bypassAuthState)}function _A(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),KN(n,new cp(t),t.bypassAuthState)}async function wA(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),qN(n,new cp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xA;case"linkViaPopup":case"linkViaRedirect":return wA;case"reauthViaPopup":case"reauthViaRedirect":return _A;default:Qt(this.auth,"internal-error")}}resolve(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=new ca(2e3,1e4);async function TA(t,e,n){if(At(t.app))return Promise.reject(on(t,"operation-not-supported-in-this-environment"));const r=Fr(t);eN(t,e,ap);const s=A0(r,n);return new Xr(r,"signInViaPopup",e,s).executeNotNull()}class Xr extends P0{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Xr.currentPopupAction&&Xr.currentPopupAction.cancel(),Xr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){$n(this.filter.length===1,"Popup operations only handle one event");const e=lp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(on(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(on(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(on(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EA.get())};e()}}Xr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="pendingRedirect",xl=new Map;class SA extends P0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=xl.get(this.auth._key());if(!e){try{const r=await IA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xl.set(this.auth._key(),e)}return this.bypassAuthState||xl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IA(t,e){const n=NA(e),r=kA(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function CA(t,e){xl.set(t._key(),e)}function kA(t){return Dn(t._redirectPersistence)}function NA(t){return yl(bA,t.config.apiKey,t.name)}async function AA(t,e,n=!1){if(At(t.app))return Promise.reject(Mn(t));const r=Fr(t),s=A0(r,e),o=await new SA(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=10*60*1e3;class RA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!R0(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(on(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fv(e))}saveEventToCache(e){this.cachedEventUids.add(Fv(e)),this.lastProcessedEventTime=Date.now()}}function Fv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function R0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return R0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(t,e={}){return Qn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MA=/^https?/;async function VA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DA(t);for(const n of e)try{if(LA(n))return}catch{}Qt(t,"unauthorized-domain")}function LA(t){const e=kh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!MA.test(n))return!1;if(OA.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=new ca(3e4,6e4);function Bv(){const t=vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function FA(t){return new Promise((e,n)=>{var r,s,i;function o(){Bv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bv(),n(on(t,"network-request-failed"))},timeout:UA.get()})}if(!((s=(r=vn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=vn().gapi)===null||i===void 0)&&i.load)o();else{const l=NN("iframefcb");return vn()[l]=()=>{gapi.load?o():n(on(t,"network-request-failed"))},g0(`${kN()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw _l=null,e})}let _l=null;function BA(t){return _l=_l||FA(t),_l}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new ca(5e3,15e3),$A="__/auth/iframe",HA="emulator/auth/iframe",WA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qA(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?np(e,HA):`https://${t.config.authDomain}/${$A}`,r={apiKey:e.apiKey,appName:t.name,v:Ii},s=GA.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${la(r).slice(1)}`}async function KA(t){const e=await BA(t),n=vn().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:qA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WA,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=on(t,"network-request-failed"),l=vn().setTimeout(()=>{i(o)},zA.get());function c(){vn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YA=500,JA=600,XA="_blank",ZA="http://localhost";class zv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function e2(t,e,n,r=YA,s=JA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},QA),{width:r.toString(),height:s.toString(),top:i,left:o}),d=ft().toLowerCase();n&&(l=c0(d)?XA:n),a0(d)&&(e=e||ZA,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[_,I])=>`${g}${_}=${I},`,"");if(xN(d)&&l!=="_self")return t2(e||"",l),new zv(null);const m=window.open(e||"",l,f);ee(m,t,"popup-blocked");try{m.focus()}catch{}return new zv(m)}function t2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="__/auth/handler",r2="emulator/auth/handler",s2=encodeURIComponent("fac");async function $v(t,e,n,r,s,i){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ii,eventId:s};if(e instanceof ap){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",VC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof da){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),d=c?`#${s2}=${encodeURIComponent(c)}`:"";return`${i2(t)}?${la(l).slice(1)}${d}`}function i2({config:t}){return t.emulator?np(t,r2):`https://${t.authDomain}/${n2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="webStorageSupport";class o2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S0,this._completeRedirectFn=AA,this._overrideRedirectResult=CA}async _openPopup(e,n,r,s){var i;$n((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await $v(e,n,r,kh(),s);return e2(e,o,lp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await $v(e,n,r,kh(),s);return cA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):($n(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await KA(e),r=new RA(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vd,{type:vd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[vd];o!==void 0&&n(!!o),Qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=VA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return p0()||l0()||sp()}}const a2=o2;var Hv="@firebase/auth",Wv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function u2(t){En(new ln("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m0(t)},d=new SN(r,s,i,c);return ON(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),En(new ln("auth-internal",e=>{const n=Fr(e.getProvider("auth").getImmediate());return(r=>new l2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gt(Hv,Wv,c2(t)),Gt(Hv,Wv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=5*60,h2=zw("authIdTokenMaxAge")||d2;let Gv=null;const f2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>h2)return;const s=n==null?void 0:n.token;Gv!==s&&(Gv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function p2(t=Xf()){const e=ws(t,"auth");if(e.isInitialized())return e.getImmediate();const n=DN(t,{popupRedirectResolver:a2,persistence:[yA,oA,S0]}),r=zw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=f2(i.toString());tA(n,o,()=>o(n.currentUser)),eA(n,l=>o(l))}}const s=Fw("auth");return s&&MN(n,`http://${s}`),n}function m2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}IN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=on("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",m2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});u2("Browser");var g2="firebase",v2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt(g2,v2,"app");const j0="@firebase/installations",up="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=1e4,O0=`w:${up}`,M0="FIS_v2",y2="https://firebaseinstallations.googleapis.com/v1",x2=60*60*1e3,_2="installations",w2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},hs=new _s(_2,w2,E2);function V0(t){return t instanceof cn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0({projectId:t}){return`${y2}/projects/${t}/installations`}function U0(t){return{token:t.token,requestStatus:2,expiresIn:b2(t.expiresIn),creationTime:Date.now()}}async function F0(t,e){const r=(await e.json()).error;return hs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function B0({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function T2(t,{refreshToken:e}){const n=B0(t);return n.append("Authorization",S2(e)),n}async function z0(t){const e=await t();return e.status>=500&&e.status<600?t():e}function b2(t){return Number(t.replace("s","000"))}function S2(t){return`${M0} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I2({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=L0(t),s=B0(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:M0,appId:t.appId,sdkVersion:O0},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await z0(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:U0(d.authToken)}}else throw await F0("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=/^[cdef][\w-]{21}$/,Rh="";function N2(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=A2(t);return k2.test(n)?n:Rh}catch{return Rh}}function A2(t){return C2(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=new Map;function W0(t,e){const n=Qc(t);G0(n,e),P2(n,e)}function G0(t,e){const n=H0.get(t);if(n)for(const r of n)r(e)}function P2(t,e){const n=R2();n&&n.postMessage({key:t,fid:e}),j2()}let Zr=null;function R2(){return!Zr&&"BroadcastChannel"in self&&(Zr=new BroadcastChannel("[Firebase] FID Change"),Zr.onmessage=t=>{G0(t.data.key,t.data.fid)}),Zr}function j2(){H0.size===0&&Zr&&(Zr.close(),Zr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="firebase-installations-database",O2=1,fs="firebase-installations-store";let yd=null;function dp(){return yd||(yd=Yw(D2,O2,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(fs)}}})),yd}async function cc(t,e){const n=Qc(t),s=(await dp()).transaction(fs,"readwrite"),i=s.objectStore(fs),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&W0(t,e.fid),e}async function q0(t){const e=Qc(t),r=(await dp()).transaction(fs,"readwrite");await r.objectStore(fs).delete(e),await r.done}async function Yc(t,e){const n=Qc(t),s=(await dp()).transaction(fs,"readwrite"),i=s.objectStore(fs),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&W0(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hp(t){let e;const n=await Yc(t.appConfig,r=>{const s=M2(r),i=V2(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Rh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function M2(t){const e=t||{fid:N2(),registrationStatus:0};return K0(e)}function V2(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(hs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=L2(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:U2(t)}:{installationEntry:e}}async function L2(t,e){try{const n=await I2(t,e);return cc(t.appConfig,n)}catch(n){throw V0(n)&&n.customData.serverCode===409?await q0(t.appConfig):await cc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function U2(t){let e=await qv(t.appConfig);for(;e.registrationStatus===1;)await $0(100),e=await qv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await hp(t);return r||n}return e}function qv(t){return Yc(t,e=>{if(!e)throw hs.create("installation-not-found");return K0(e)})}function K0(t){return F2(t)?{fid:t.fid,registrationStatus:0}:t}function F2(t){return t.registrationStatus===1&&t.registrationTime+D0<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2({appConfig:t,heartbeatServiceProvider:e},n){const r=z2(t,n),s=T2(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:O0,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await z0(()=>fetch(r,l));if(c.ok){const d=await c.json();return U0(d)}else throw await F0("Generate Auth Token",c)}function z2(t,{fid:e}){return`${L0(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fp(t,e=!1){let n;const r=await Yc(t.appConfig,i=>{if(!Q0(i))throw hs.create("not-registered");const o=i.authToken;if(!e&&W2(o))return i;if(o.requestStatus===1)return n=$2(t,e),i;{if(!navigator.onLine)throw hs.create("app-offline");const l=q2(i);return n=H2(t,l),l}});return n?await n:r.authToken}async function $2(t,e){let n=await Kv(t.appConfig);for(;n.authToken.requestStatus===1;)await $0(100),n=await Kv(t.appConfig);const r=n.authToken;return r.requestStatus===0?fp(t,e):r}function Kv(t){return Yc(t,e=>{if(!Q0(e))throw hs.create("not-registered");const n=e.authToken;return K2(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function H2(t,e){try{const n=await B2(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await cc(t.appConfig,r),n}catch(n){if(V0(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await q0(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await cc(t.appConfig,r)}throw n}}function Q0(t){return t!==void 0&&t.registrationStatus===2}function W2(t){return t.requestStatus===2&&!G2(t)}function G2(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+x2}function q2(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function K2(t){return t.requestStatus===1&&t.requestTime+D0<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q2(t){const e=t,{installationEntry:n,registrationPromise:r}=await hp(e);return r?r.catch(console.error):fp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(t,e=!1){const n=t;return await J2(n),(await fp(n,e)).token}async function J2(t){const{registrationPromise:e}=await hp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t){if(!t||!t.options)throw xd("App Configuration");if(!t.name)throw xd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw xd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function xd(t){return hs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="installations",Z2="installations-internal",eP=t=>{const e=t.getProvider("app").getImmediate(),n=X2(e),r=ws(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},tP=t=>{const e=t.getProvider("app").getImmediate(),n=ws(e,Y0).getImmediate();return{getId:()=>Q2(n),getToken:s=>Y2(n,s)}};function nP(){En(new ln(Y0,eP,"PUBLIC")),En(new ln(Z2,tP,"PRIVATE"))}nP();Gt(j0,up);Gt(j0,up,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc="analytics",rP="firebase_id",sP="origin",iP=60*1e3,oP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct=new Wc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},jt=new _s("analytics","Analytics",aP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t){if(!t.startsWith(pp)){const e=jt.create("invalid-gtag-resource",{gtagURL:t});return Ct.warn(e.message),""}return t}function J0(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function cP(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function uP(t,e){const n=cP("firebase-js-sdk-policy",{createScriptURL:lP}),r=document.createElement("script"),s=`${pp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function dP(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function hP(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await J0(n)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(l){Ct.error(l)}t("config",s,i)}async function fP(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await J0(n);for(const c of o){const d=l.find(m=>m.measurementId===c),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Ct.error(i)}}function pP(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[l,c]=o;await fP(t,e,n,l,c)}else if(i==="config"){const[l,c]=o;await hP(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,d]=o;t("get",l,c,d)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){Ct.error(l)}}return s}function mP(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=pP(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function gP(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(pp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=30,yP=1e3;class xP{constructor(e={},n=yP){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const X0=new xP;function _P(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function wP(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:_P(r)},i=oP.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw jt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function EP(t,e=X0,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw jt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw jt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new SP;return setTimeout(async()=>{l.abort()},iP),Z0({appId:r,apiKey:s,measurementId:i},o,l,e)}async function Z0(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=X0){var i;const{appId:o,measurementId:l}=t;try{await TP(r,e)}catch(c){if(l)return Ct.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await wP(t);return s.deleteThrottleMetadata(o),c}catch(c){const d=c;if(!bP(d)){if(s.deleteThrottleMetadata(o),l)return Ct.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw c}const f=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?xv(n,s.intervalMillis,vP):xv(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(o,m),Ct.debug(`Calling attemptFetch again in ${f} millis`),Z0(t,m,r,s)}}function TP(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(jt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function bP(t){if(!(t instanceof cn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class SP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function IP(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(){if(Gw())try{await qw()}catch(t){return Ct.warn(jt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ct.warn(jt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function kP(t,e,n,r,s,i,o){var l;const c=EP(t);c.then(_=>{n[_.measurementId]=_.appId,t.options.measurementId&&_.measurementId!==t.options.measurementId&&Ct.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>Ct.error(_)),e.push(c);const d=CP().then(_=>{if(_)return r.getId()}),[f,m]=await Promise.all([c,d]);gP(i)||uP(i,f.measurementId),s("js",new Date);const g=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return g[sP]="firebase",g.update=!0,m!=null&&(g[rP]=m),s("config",f.measurementId,g),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.app=e}_delete(){return delete Eo[this.app.options.appId],Promise.resolve()}}let Eo={},Qv=[];const Yv={};let _d="dataLayer",AP="gtag",Jv,eE,Xv=!1;function PP(){const t=[];if(Ww()&&t.push("This is a browser extension environment."),jC()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=jt.create("invalid-analytics-context",{errorInfo:e});Ct.warn(n.message)}}function RP(t,e,n){PP();const r=t.options.appId;if(!r)throw jt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ct.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw jt.create("no-api-key");if(Eo[r]!=null)throw jt.create("already-exists",{id:r});if(!Xv){dP(_d);const{wrappedGtag:i,gtagCore:o}=mP(Eo,Qv,Yv,_d,AP);eE=i,Jv=o,Xv=!0}return Eo[r]=kP(t,Qv,Yv,e,Jv,_d,n),new NP(t)}function jP(t=Xf()){t=pt(t);const e=ws(t,uc);return e.isInitialized()?e.getImmediate():DP(t)}function DP(t,e={}){const n=ws(t,uc);if(n.isInitialized()){const s=n.getImmediate();if(kr(e,n.getOptions()))return s;throw jt.create("already-initialized")}return n.initialize({options:e})}function OP(t,e,n,r){t=pt(t),IP(eE,Eo[t.app.options.appId],e,n,r).catch(s=>Ct.error(s))}const Zv="@firebase/analytics",ey="0.10.17";function MP(){En(new ln(uc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return RP(r,s,n)},"PUBLIC")),En(new ln("analytics-internal",t,"PRIVATE")),Gt(Zv,ey),Gt(Zv,ey,"esm2017");function t(e){try{const n=e.getProvider(uc).getImmediate();return{logEvent:(r,s,i)=>OP(n,r,s,i)}}catch(n){throw jt.create("interop-component-reg-failed",{reason:n})}}}MP();var ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var br,tE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,x){function S(){}S.prototype=x.prototype,b.D=x.prototype,b.prototype=new S,b.prototype.constructor=b,b.C=function(C,j,P){for(var w=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)w[ie-2]=arguments[ie];return x.prototype[j].apply(C,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,x,S){S||(S=0);var C=Array(16);if(typeof x=="string")for(var j=0;16>j;++j)C[j]=x.charCodeAt(S++)|x.charCodeAt(S++)<<8|x.charCodeAt(S++)<<16|x.charCodeAt(S++)<<24;else for(j=0;16>j;++j)C[j]=x[S++]|x[S++]<<8|x[S++]<<16|x[S++]<<24;x=b.g[0],S=b.g[1],j=b.g[2];var P=b.g[3],w=x+(P^S&(j^P))+C[0]+3614090360&4294967295;x=S+(w<<7&4294967295|w>>>25),w=P+(j^x&(S^j))+C[1]+3905402710&4294967295,P=x+(w<<12&4294967295|w>>>20),w=j+(S^P&(x^S))+C[2]+606105819&4294967295,j=P+(w<<17&4294967295|w>>>15),w=S+(x^j&(P^x))+C[3]+3250441966&4294967295,S=j+(w<<22&4294967295|w>>>10),w=x+(P^S&(j^P))+C[4]+4118548399&4294967295,x=S+(w<<7&4294967295|w>>>25),w=P+(j^x&(S^j))+C[5]+1200080426&4294967295,P=x+(w<<12&4294967295|w>>>20),w=j+(S^P&(x^S))+C[6]+2821735955&4294967295,j=P+(w<<17&4294967295|w>>>15),w=S+(x^j&(P^x))+C[7]+4249261313&4294967295,S=j+(w<<22&4294967295|w>>>10),w=x+(P^S&(j^P))+C[8]+1770035416&4294967295,x=S+(w<<7&4294967295|w>>>25),w=P+(j^x&(S^j))+C[9]+2336552879&4294967295,P=x+(w<<12&4294967295|w>>>20),w=j+(S^P&(x^S))+C[10]+4294925233&4294967295,j=P+(w<<17&4294967295|w>>>15),w=S+(x^j&(P^x))+C[11]+2304563134&4294967295,S=j+(w<<22&4294967295|w>>>10),w=x+(P^S&(j^P))+C[12]+1804603682&4294967295,x=S+(w<<7&4294967295|w>>>25),w=P+(j^x&(S^j))+C[13]+4254626195&4294967295,P=x+(w<<12&4294967295|w>>>20),w=j+(S^P&(x^S))+C[14]+2792965006&4294967295,j=P+(w<<17&4294967295|w>>>15),w=S+(x^j&(P^x))+C[15]+1236535329&4294967295,S=j+(w<<22&4294967295|w>>>10),w=x+(j^P&(S^j))+C[1]+4129170786&4294967295,x=S+(w<<5&4294967295|w>>>27),w=P+(S^j&(x^S))+C[6]+3225465664&4294967295,P=x+(w<<9&4294967295|w>>>23),w=j+(x^S&(P^x))+C[11]+643717713&4294967295,j=P+(w<<14&4294967295|w>>>18),w=S+(P^x&(j^P))+C[0]+3921069994&4294967295,S=j+(w<<20&4294967295|w>>>12),w=x+(j^P&(S^j))+C[5]+3593408605&4294967295,x=S+(w<<5&4294967295|w>>>27),w=P+(S^j&(x^S))+C[10]+38016083&4294967295,P=x+(w<<9&4294967295|w>>>23),w=j+(x^S&(P^x))+C[15]+3634488961&4294967295,j=P+(w<<14&4294967295|w>>>18),w=S+(P^x&(j^P))+C[4]+3889429448&4294967295,S=j+(w<<20&4294967295|w>>>12),w=x+(j^P&(S^j))+C[9]+568446438&4294967295,x=S+(w<<5&4294967295|w>>>27),w=P+(S^j&(x^S))+C[14]+3275163606&4294967295,P=x+(w<<9&4294967295|w>>>23),w=j+(x^S&(P^x))+C[3]+4107603335&4294967295,j=P+(w<<14&4294967295|w>>>18),w=S+(P^x&(j^P))+C[8]+1163531501&4294967295,S=j+(w<<20&4294967295|w>>>12),w=x+(j^P&(S^j))+C[13]+2850285829&4294967295,x=S+(w<<5&4294967295|w>>>27),w=P+(S^j&(x^S))+C[2]+4243563512&4294967295,P=x+(w<<9&4294967295|w>>>23),w=j+(x^S&(P^x))+C[7]+1735328473&4294967295,j=P+(w<<14&4294967295|w>>>18),w=S+(P^x&(j^P))+C[12]+2368359562&4294967295,S=j+(w<<20&4294967295|w>>>12),w=x+(S^j^P)+C[5]+4294588738&4294967295,x=S+(w<<4&4294967295|w>>>28),w=P+(x^S^j)+C[8]+2272392833&4294967295,P=x+(w<<11&4294967295|w>>>21),w=j+(P^x^S)+C[11]+1839030562&4294967295,j=P+(w<<16&4294967295|w>>>16),w=S+(j^P^x)+C[14]+4259657740&4294967295,S=j+(w<<23&4294967295|w>>>9),w=x+(S^j^P)+C[1]+2763975236&4294967295,x=S+(w<<4&4294967295|w>>>28),w=P+(x^S^j)+C[4]+1272893353&4294967295,P=x+(w<<11&4294967295|w>>>21),w=j+(P^x^S)+C[7]+4139469664&4294967295,j=P+(w<<16&4294967295|w>>>16),w=S+(j^P^x)+C[10]+3200236656&4294967295,S=j+(w<<23&4294967295|w>>>9),w=x+(S^j^P)+C[13]+681279174&4294967295,x=S+(w<<4&4294967295|w>>>28),w=P+(x^S^j)+C[0]+3936430074&4294967295,P=x+(w<<11&4294967295|w>>>21),w=j+(P^x^S)+C[3]+3572445317&4294967295,j=P+(w<<16&4294967295|w>>>16),w=S+(j^P^x)+C[6]+76029189&4294967295,S=j+(w<<23&4294967295|w>>>9),w=x+(S^j^P)+C[9]+3654602809&4294967295,x=S+(w<<4&4294967295|w>>>28),w=P+(x^S^j)+C[12]+3873151461&4294967295,P=x+(w<<11&4294967295|w>>>21),w=j+(P^x^S)+C[15]+530742520&4294967295,j=P+(w<<16&4294967295|w>>>16),w=S+(j^P^x)+C[2]+3299628645&4294967295,S=j+(w<<23&4294967295|w>>>9),w=x+(j^(S|~P))+C[0]+4096336452&4294967295,x=S+(w<<6&4294967295|w>>>26),w=P+(S^(x|~j))+C[7]+1126891415&4294967295,P=x+(w<<10&4294967295|w>>>22),w=j+(x^(P|~S))+C[14]+2878612391&4294967295,j=P+(w<<15&4294967295|w>>>17),w=S+(P^(j|~x))+C[5]+4237533241&4294967295,S=j+(w<<21&4294967295|w>>>11),w=x+(j^(S|~P))+C[12]+1700485571&4294967295,x=S+(w<<6&4294967295|w>>>26),w=P+(S^(x|~j))+C[3]+2399980690&4294967295,P=x+(w<<10&4294967295|w>>>22),w=j+(x^(P|~S))+C[10]+4293915773&4294967295,j=P+(w<<15&4294967295|w>>>17),w=S+(P^(j|~x))+C[1]+2240044497&4294967295,S=j+(w<<21&4294967295|w>>>11),w=x+(j^(S|~P))+C[8]+1873313359&4294967295,x=S+(w<<6&4294967295|w>>>26),w=P+(S^(x|~j))+C[15]+4264355552&4294967295,P=x+(w<<10&4294967295|w>>>22),w=j+(x^(P|~S))+C[6]+2734768916&4294967295,j=P+(w<<15&4294967295|w>>>17),w=S+(P^(j|~x))+C[13]+1309151649&4294967295,S=j+(w<<21&4294967295|w>>>11),w=x+(j^(S|~P))+C[4]+4149444226&4294967295,x=S+(w<<6&4294967295|w>>>26),w=P+(S^(x|~j))+C[11]+3174756917&4294967295,P=x+(w<<10&4294967295|w>>>22),w=j+(x^(P|~S))+C[2]+718787259&4294967295,j=P+(w<<15&4294967295|w>>>17),w=S+(P^(j|~x))+C[9]+3951481745&4294967295,b.g[0]=b.g[0]+x&4294967295,b.g[1]=b.g[1]+(j+(w<<21&4294967295|w>>>11))&4294967295,b.g[2]=b.g[2]+j&4294967295,b.g[3]=b.g[3]+P&4294967295}r.prototype.u=function(b,x){x===void 0&&(x=b.length);for(var S=x-this.blockSize,C=this.B,j=this.h,P=0;P<x;){if(j==0)for(;P<=S;)s(this,b,P),P+=this.blockSize;if(typeof b=="string"){for(;P<x;)if(C[j++]=b.charCodeAt(P++),j==this.blockSize){s(this,C),j=0;break}}else for(;P<x;)if(C[j++]=b[P++],j==this.blockSize){s(this,C),j=0;break}}this.h=j,this.o+=x},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var x=1;x<b.length-8;++x)b[x]=0;var S=8*this.o;for(x=b.length-8;x<b.length;++x)b[x]=S&255,S/=256;for(this.u(b),b=Array(16),x=S=0;4>x;++x)for(var C=0;32>C;C+=8)b[S++]=this.g[x]>>>C&255;return b};function i(b,x){var S=l;return Object.prototype.hasOwnProperty.call(S,b)?S[b]:S[b]=x(b)}function o(b,x){this.h=x;for(var S=[],C=!0,j=b.length-1;0<=j;j--){var P=b[j]|0;C&&P==x||(S[j]=P,C=!1)}this.g=S}var l={};function c(b){return-128<=b&&128>b?i(b,function(x){return new o([x|0],0>x?-1:0)}):new o([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return m;if(0>b)return A(d(-b));for(var x=[],S=1,C=0;b>=S;C++)x[C]=b/S|0,S*=4294967296;return new o(x,0)}function f(b,x){if(b.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(b.charAt(0)=="-")return A(f(b.substring(1),x));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(x,8)),C=m,j=0;j<b.length;j+=8){var P=Math.min(8,b.length-j),w=parseInt(b.substring(j,j+P),x);8>P?(P=d(Math.pow(x,P)),C=C.j(P).add(d(w))):(C=C.j(S),C=C.add(d(w)))}return C}var m=c(0),g=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(k(this))return-A(this).m();for(var b=0,x=1,S=0;S<this.g.length;S++){var C=this.i(S);b+=(0<=C?C:4294967296+C)*x,x*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(I(this))return"0";if(k(this))return"-"+A(this).toString(b);for(var x=d(Math.pow(b,6)),S=this,C="";;){var j=R(S,x).g;S=E(S,j.j(x));var P=((0<S.g.length?S.g[0]:S.h)>>>0).toString(b);if(S=j,I(S))return P+C;for(;6>P.length;)P="0"+P;C=P+C}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function I(b){if(b.h!=0)return!1;for(var x=0;x<b.g.length;x++)if(b.g[x]!=0)return!1;return!0}function k(b){return b.h==-1}t.l=function(b){return b=E(this,b),k(b)?-1:I(b)?0:1};function A(b){for(var x=b.g.length,S=[],C=0;C<x;C++)S[C]=~b.g[C];return new o(S,~b.h).add(g)}t.abs=function(){return k(this)?A(this):this},t.add=function(b){for(var x=Math.max(this.g.length,b.g.length),S=[],C=0,j=0;j<=x;j++){var P=C+(this.i(j)&65535)+(b.i(j)&65535),w=(P>>>16)+(this.i(j)>>>16)+(b.i(j)>>>16);C=w>>>16,P&=65535,w&=65535,S[j]=w<<16|P}return new o(S,S[S.length-1]&-2147483648?-1:0)};function E(b,x){return b.add(A(x))}t.j=function(b){if(I(this)||I(b))return m;if(k(this))return k(b)?A(this).j(A(b)):A(A(this).j(b));if(k(b))return A(this.j(A(b)));if(0>this.l(_)&&0>b.l(_))return d(this.m()*b.m());for(var x=this.g.length+b.g.length,S=[],C=0;C<2*x;C++)S[C]=0;for(C=0;C<this.g.length;C++)for(var j=0;j<b.g.length;j++){var P=this.i(C)>>>16,w=this.i(C)&65535,ie=b.i(j)>>>16,$e=b.i(j)&65535;S[2*C+2*j]+=w*$e,y(S,2*C+2*j),S[2*C+2*j+1]+=P*$e,y(S,2*C+2*j+1),S[2*C+2*j+1]+=w*ie,y(S,2*C+2*j+1),S[2*C+2*j+2]+=P*ie,y(S,2*C+2*j+2)}for(C=0;C<x;C++)S[C]=S[2*C+1]<<16|S[2*C];for(C=x;C<2*x;C++)S[C]=0;return new o(S,0)};function y(b,x){for(;(b[x]&65535)!=b[x];)b[x+1]+=b[x]>>>16,b[x]&=65535,x++}function T(b,x){this.g=b,this.h=x}function R(b,x){if(I(x))throw Error("division by zero");if(I(b))return new T(m,m);if(k(b))return x=R(A(b),x),new T(A(x.g),A(x.h));if(k(x))return x=R(b,A(x)),new T(A(x.g),x.h);if(30<b.g.length){if(k(b)||k(x))throw Error("slowDivide_ only works with positive integers.");for(var S=g,C=x;0>=C.l(b);)S=B(S),C=B(C);var j=F(S,1),P=F(C,1);for(C=F(C,2),S=F(S,2);!I(C);){var w=P.add(C);0>=w.l(b)&&(j=j.add(S),P=w),C=F(C,1),S=F(S,1)}return x=E(b,j.j(x)),new T(j,x)}for(j=m;0<=b.l(x);){for(S=Math.max(1,Math.floor(b.m()/x.m())),C=Math.ceil(Math.log(S)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),P=d(S),w=P.j(x);k(w)||0<w.l(b);)S-=C,P=d(S),w=P.j(x);I(P)&&(P=g),j=j.add(P),b=E(b,w)}return new T(j,b)}t.A=function(b){return R(this,b).h},t.and=function(b){for(var x=Math.max(this.g.length,b.g.length),S=[],C=0;C<x;C++)S[C]=this.i(C)&b.i(C);return new o(S,this.h&b.h)},t.or=function(b){for(var x=Math.max(this.g.length,b.g.length),S=[],C=0;C<x;C++)S[C]=this.i(C)|b.i(C);return new o(S,this.h|b.h)},t.xor=function(b){for(var x=Math.max(this.g.length,b.g.length),S=[],C=0;C<x;C++)S[C]=this.i(C)^b.i(C);return new o(S,this.h^b.h)};function B(b){for(var x=b.g.length+1,S=[],C=0;C<x;C++)S[C]=b.i(C)<<1|b.i(C-1)>>>31;return new o(S,b.h)}function F(b,x){var S=x>>5;x%=32;for(var C=b.g.length-S,j=[],P=0;P<C;P++)j[P]=0<x?b.i(P+S)>>>x|b.i(P+S+1)<<32-x:b.i(P+S);return new o(j,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,br=o}).apply(typeof ty<"u"?ty:typeof self<"u"?self:typeof window<"u"?window:{});var Za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nE,oo,rE,wl,jh,sE,iE,oE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Za=="object"&&Za];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var D=a[v];if(!(D in p))break e;p=p[D]}a=a[a.length-1],v=p[a],h=h(v),h!=v&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var p=0,v=!1,D={next:function(){if(!v&&p<a.length){var O=p++;return{value:h(O,a[O]),done:!1}}return v=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function m(a,h,p){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,v),a.apply(h,D)}}return function(){return a.apply(h,arguments)}}function g(a,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function _(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var v=p.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function I(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(v,D,O){for(var W=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)W[ve-2]=arguments[ve];return h.prototype[D].apply(v,W)}}function k(a){const h=a.length;if(0<h){const p=Array(h);for(let v=0;v<h;v++)p[v]=a[v];return p}return[]}function A(a,h){for(let p=1;p<arguments.length;p++){const v=arguments[p];if(c(v)){const D=a.length||0,O=v.length||0;a.length=D+O;for(let W=0;W<O;W++)a[D+W]=v[W]}else a.push(v)}}class E{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function y(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function R(a){return R[" "](a),a}R[" "]=function(){};var B=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function F(a,h,p){for(const v in a)h.call(p,a[v],v,a)}function b(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function x(a){const h={};for(const p in a)h[p]=a[p];return h}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(a,h){let p,v;for(let D=1;D<arguments.length;D++){v=arguments[D];for(p in v)a[p]=v[p];for(let O=0;O<S.length;O++)p=S[O],Object.prototype.hasOwnProperty.call(v,p)&&(a[p]=v[p])}}function j(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function P(a){l.setTimeout(()=>{throw a},0)}function w(){var a=X;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class ie{constructor(){this.h=this.g=null}add(h,p){const v=$e.get();v.set(h,p),this.h?this.h.next=v:this.g=v,this.h=v}}var $e=new E(()=>new Lt,a=>a.reset());class Lt{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,G=!1,X=new ie,$=()=>{const a=l.Promise.resolve(void 0);Ve=()=>{a.then(V)}};var V=()=>{for(var a;a=w();){try{a.h.call(a.g)}catch(p){P(p)}var h=$e;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}G=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return a}();function Ke(a,h){if(oe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(B){e:{try{R(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:M[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ke.aa.h.call(this)}}I(Ke,oe);var M={2:"touch",3:"pen",4:"mouse"};Ke.prototype.h=function(){Ke.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),q=0;function me(a,h,p,v,D){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!v,this.ha=D,this.key=++q,this.da=this.fa=!1}function nt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Yn(a){this.src=a,this.g={},this.h=0}Yn.prototype.add=function(a,h,p,v,D){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var W=mu(a,h,v,D);return-1<W?(h=a[W],p||(h.fa=!1)):(h=new me(h,this.src,O,!!v,D),h.fa=p,a.push(h)),h};function Ri(a,h){var p=h.type;if(p in a.g){var v=a.g[p],D=Array.prototype.indexOf.call(v,h,void 0),O;(O=0<=D)&&Array.prototype.splice.call(v,D,1),O&&(nt(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function mu(a,h,p,v){for(var D=0;D<a.length;++D){var O=a[D];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==v)return D}return-1}var gu="closure_lm_"+(1e6*Math.random()|0),vu={};function em(a,h,p,v,D){if(Array.isArray(h)){for(var O=0;O<h.length;O++)em(a,h[O],p,v,D);return null}return p=rm(p),a&&a[L]?a.K(h,p,d(v)?!!v.capture:!1,D):nT(a,h,p,!1,v,D)}function nT(a,h,p,v,D,O){if(!h)throw Error("Invalid event type");var W=d(D)?!!D.capture:!!D,ve=xu(a);if(ve||(a[gu]=ve=new Yn(a)),p=ve.add(h,p,v,W,O),p.proxy)return p;if(v=rT(),p.proxy=v,v.src=a,v.listener=p,a.addEventListener)Le||(D=W),D===void 0&&(D=!1),a.addEventListener(h.toString(),v,D);else if(a.attachEvent)a.attachEvent(nm(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return p}function rT(){function a(p){return h.call(a.src,a.listener,p)}const h=sT;return a}function tm(a,h,p,v,D){if(Array.isArray(h))for(var O=0;O<h.length;O++)tm(a,h[O],p,v,D);else v=d(v)?!!v.capture:!!v,p=rm(p),a&&a[L]?(a=a.i,h=String(h).toString(),h in a.g&&(O=a.g[h],p=mu(O,p,v,D),-1<p&&(nt(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete a.g[h],a.h--)))):a&&(a=xu(a))&&(h=a.g[h.toString()],a=-1,h&&(a=mu(h,p,v,D)),(p=-1<a?h[a]:null)&&yu(p))}function yu(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[L])Ri(h.i,a);else{var p=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(p,v,a.capture):h.detachEvent?h.detachEvent(nm(p),v):h.addListener&&h.removeListener&&h.removeListener(v),(p=xu(h))?(Ri(p,a),p.h==0&&(p.src=null,h[gu]=null)):nt(a)}}}function nm(a){return a in vu?vu[a]:vu[a]="on"+a}function sT(a,h){if(a.da)a=!0;else{h=new Ke(h,this);var p=a.listener,v=a.ha||a.src;a.fa&&yu(a),a=p.call(v,h)}return a}function xu(a){return a=a[gu],a instanceof Yn?a:null}var _u="__closure_events_fn_"+(1e9*Math.random()>>>0);function rm(a){return typeof a=="function"?a:(a[_u]||(a[_u]=function(h){return a.handleEvent(h)}),a[_u])}function rt(){J.call(this),this.i=new Yn(this),this.M=this,this.F=null}I(rt,J),rt.prototype[L]=!0,rt.prototype.removeEventListener=function(a,h,p,v){tm(this,a,h,p,v)};function mt(a,h){var p,v=a.F;if(v)for(p=[];v;v=v.F)p.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new oe(h,a);else if(h instanceof oe)h.target=h.target||a;else{var D=h;h=new oe(v,a),C(h,D)}if(D=!0,p)for(var O=p.length-1;0<=O;O--){var W=h.g=p[O];D=xa(W,v,!0,h)&&D}if(W=h.g=a,D=xa(W,v,!0,h)&&D,D=xa(W,v,!1,h)&&D,p)for(O=0;O<p.length;O++)W=h.g=p[O],D=xa(W,v,!1,h)&&D}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],v=0;v<p.length;v++)nt(p[v]);delete a.g[h],a.h--}}this.F=null},rt.prototype.K=function(a,h,p,v){return this.i.add(String(a),h,!1,p,v)},rt.prototype.L=function(a,h,p,v){return this.i.add(String(a),h,!0,p,v)};function xa(a,h,p,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,O=0;O<h.length;++O){var W=h[O];if(W&&!W.da&&W.capture==p){var ve=W.listener,Qe=W.ha||W.src;W.fa&&Ri(a.i,W),D=ve.call(Qe,v)!==!1&&D}}return D&&!v.defaultPrevented}function sm(a,h,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function im(a){a.g=sm(()=>{a.g=null,a.i&&(a.i=!1,im(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class iT extends J{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:im(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(a){J.call(this),this.h=a,this.g={}}I(ji,J);var om=[];function am(a){F(a.g,function(h,p){this.g.hasOwnProperty(p)&&yu(h)},a),a.g={}}ji.prototype.N=function(){ji.aa.N.call(this),am(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wu=l.JSON.stringify,oT=l.JSON.parse,aT=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Eu(){}Eu.prototype.h=null;function lm(a){return a.h||(a.h=a.i())}function cm(){}var Di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tu(){oe.call(this,"d")}I(Tu,oe);function bu(){oe.call(this,"c")}I(bu,oe);var zr={},um=null;function _a(){return um=um||new rt}zr.La="serverreachability";function dm(a){oe.call(this,zr.La,a)}I(dm,oe);function Oi(a){const h=_a();mt(h,new dm(h))}zr.STAT_EVENT="statevent";function hm(a,h){oe.call(this,zr.STAT_EVENT,a),this.stat=h}I(hm,oe);function gt(a){const h=_a();mt(h,new hm(h,a))}zr.Ma="timingevent";function fm(a,h){oe.call(this,zr.Ma,a),this.size=h}I(fm,oe);function Mi(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function Vi(){this.g=!0}Vi.prototype.xa=function(){this.g=!1};function lT(a,h,p,v,D,O){a.info(function(){if(a.g)if(O)for(var W="",ve=O.split("&"),Qe=0;Qe<ve.length;Qe++){var fe=ve[Qe].split("=");if(1<fe.length){var st=fe[0];fe=fe[1];var it=st.split("_");W=2<=it.length&&it[1]=="type"?W+(st+"="+fe+"&"):W+(st+"=redacted&")}}else W=null;else W=O;return"XMLHTTP REQ ("+v+") [attempt "+D+"]: "+h+`
`+p+`
`+W})}function cT(a,h,p,v,D,O,W){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+D+"]: "+h+`
`+p+`
`+O+" "+W})}function Is(a,h,p,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+dT(a,p)+(v?" "+v:"")})}function uT(a,h){a.info(function(){return"TIMEOUT: "+h})}Vi.prototype.info=function(){};function dT(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var v=p[a];if(!(2>v.length)){var D=v[1];if(Array.isArray(D)&&!(1>D.length)){var O=D[0];if(O!="noop"&&O!="stop"&&O!="close")for(var W=1;W<D.length;W++)D[W]=""}}}}return wu(p)}catch{return h}}var wa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Su;function Ea(){}I(Ea,Eu),Ea.prototype.g=function(){return new XMLHttpRequest},Ea.prototype.i=function(){return{}},Su=new Ea;function Jn(a,h,p,v){this.j=a,this.i=h,this.l=p,this.R=v||1,this.U=new ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mm}function mm(){this.i=null,this.g="",this.h=!1}var gm={},Iu={};function Cu(a,h,p){a.L=1,a.v=Ia(In(h)),a.m=p,a.P=!0,vm(a,null)}function vm(a,h){a.F=Date.now(),Ta(a),a.A=In(a.v);var p=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Pm(p.i,"t",v),a.C=0,p=a.j.J,a.h=new mm,a.g=Qm(a.j,p?h:null,!a.m),0<a.O&&(a.M=new iT(g(a.Y,a,a.g),a.O)),h=a.U,p=a.g,v=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(om[0]=D.toString()),D=om);for(var O=0;O<D.length;O++){var W=em(p,D[O],v||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=a.H?x(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Oi(),lT(a.i,a.u,a.A,a.l,a.R,a.m)}Jn.prototype.ca=function(a){a=a.target;const h=this.M;h&&Cn(a)==3?h.j():this.Y(a)},Jn.prototype.Y=function(a){try{if(a==this.g)e:{const it=Cn(this.g);var h=this.g.Ba();const Ns=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||Lm(this.g)))){this.J||it!=4||h==7||(h==8||0>=Ns?Oi(3):Oi(2)),ku(this);var p=this.g.Z();this.X=p;t:if(ym(this)){var v=Lm(this.g);a="";var D=v.length,O=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$r(this),Li(this);var W="";break t}this.h.i=new l.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,a+=this.h.i.decode(v[h],{stream:!(O&&h==D-1)});v.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=p==200,cT(this.i,this.u,this.A,this.l,this.R,it,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,Qe=this.g;if((ve=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(ve)){var fe=ve;break t}}fe=null}if(p=fe)Is(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nu(this,p);else{this.o=!1,this.s=3,gt(12),$r(this),Li(this);break e}}if(this.P){p=!0;let Yt;for(;!this.J&&this.C<W.length;)if(Yt=hT(this,W),Yt==Iu){it==4&&(this.s=4,gt(14),p=!1),Is(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==gm){this.s=4,gt(15),Is(this.i,this.l,W,"[Invalid Chunk]"),p=!1;break}else Is(this.i,this.l,Yt,null),Nu(this,Yt);if(ym(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||W.length!=0||this.h.h||(this.s=1,gt(16),p=!1),this.o=this.o&&p,!p)Is(this.i,this.l,W,"[Invalid Chunked Response]"),$r(this),Li(this);else if(0<W.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Ou(st),st.M=!0,gt(11))}}else Is(this.i,this.l,W,null),Nu(this,W);it==4&&$r(this),this.o&&!this.J&&(it==4?Wm(this.j,this):(this.o=!1,Ta(this)))}else NT(this.g),p==400&&0<W.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),$r(this),Li(this)}}}catch{}finally{}};function ym(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function hT(a,h){var p=a.C,v=h.indexOf(`
`,p);return v==-1?Iu:(p=Number(h.substring(p,v)),isNaN(p)?gm:(v+=1,v+p>h.length?Iu:(h=h.slice(v,v+p),a.C=v+p,h)))}Jn.prototype.cancel=function(){this.J=!0,$r(this)};function Ta(a){a.S=Date.now()+a.I,xm(a,a.I)}function xm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Mi(g(a.ba,a),h)}function ku(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Jn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(uT(this.i,this.A),this.L!=2&&(Oi(),gt(17)),$r(this),this.s=2,Li(this)):xm(this,this.S-a)};function Li(a){a.j.G==0||a.J||Wm(a.j,a)}function $r(a){ku(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,am(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Nu(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||Au(p.h,a))){if(!a.K&&Au(p.h,a)&&p.G==3){try{var v=p.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var D=v;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Ra(p),Aa(p);else break e;Du(p),gt(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=Mi(g(p.Za,p),6e3));if(1>=Em(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Wr(p,11)}else if((a.K||p.g==a)&&Ra(p),!y(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let fe=D[h];if(p.T=fe[0],fe=fe[1],p.G==2)if(fe[0]=="c"){p.K=fe[1],p.ia=fe[2];const st=fe[3];st!=null&&(p.la=st,p.j.info("VER="+p.la));const it=fe[4];it!=null&&(p.Aa=it,p.j.info("SVER="+p.Aa));const Ns=fe[5];Ns!=null&&typeof Ns=="number"&&0<Ns&&(v=1.5*Ns,p.L=v,p.j.info("backChannelRequestTimeoutMs_="+v)),v=p;const Yt=a.g;if(Yt){const Da=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Da){var O=v.h;O.g||Da.indexOf("spdy")==-1&&Da.indexOf("quic")==-1&&Da.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Pu(O,O.h),O.h=null))}if(v.D){const Mu=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;Mu&&(v.ya=Mu,xe(v.I,v.D,Mu))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),v=p;var W=a;if(v.qa=Km(v,v.J?v.ia:null,v.W),W.K){Tm(v.h,W);var ve=W,Qe=v.L;Qe&&(ve.I=Qe),ve.B&&(ku(ve),Ta(ve)),v.g=W}else $m(v);0<p.i.length&&Pa(p)}else fe[0]!="stop"&&fe[0]!="close"||Wr(p,7);else p.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Wr(p,7):ju(p):fe[0]!="noop"&&p.l&&p.l.ta(fe),p.v=0)}}Oi(4)}catch{}}var fT=class{constructor(a,h){this.g=a,this.map=h}};function _m(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Em(a){return a.h?1:a.g?a.g.size:0}function Au(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Pu(a,h){a.g?a.g.add(h):a.h=h}function Tm(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}_m.prototype.cancel=function(){if(this.i=bm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function bm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return k(a.i)}function pT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],p=a.length,v=0;v<p;v++)h.push(a[v]);return h}h=[],p=0;for(v in a)h[p++]=a[v];return h}function mT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const v in a)h[p++]=v;return h}}}function Sm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=mT(a),v=pT(a),D=v.length,O=0;O<D;O++)h.call(void 0,v[O],p&&p[O],a)}var Im=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gT(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var v=a[p].indexOf("="),D=null;if(0<=v){var O=a[p].substring(0,v);D=a[p].substring(v+1)}else O=a[p];h(O,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Hr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Hr){this.h=a.h,ba(this,a.j),this.o=a.o,this.g=a.g,Sa(this,a.s),this.l=a.l;var h=a.i,p=new Bi;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Cm(this,p),this.m=a.m}else a&&(h=String(a).match(Im))?(this.h=!1,ba(this,h[1]||"",!0),this.o=Ui(h[2]||""),this.g=Ui(h[3]||"",!0),Sa(this,h[4]),this.l=Ui(h[5]||"",!0),Cm(this,h[6]||"",!0),this.m=Ui(h[7]||"")):(this.h=!1,this.i=new Bi(null,this.h))}Hr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Fi(h,km,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Fi(h,km,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Fi(p,p.charAt(0)=="/"?xT:yT,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Fi(p,wT)),a.join("")};function In(a){return new Hr(a)}function ba(a,h,p){a.j=p?Ui(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Sa(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Cm(a,h,p){h instanceof Bi?(a.i=h,ET(a.i,a.h)):(p||(h=Fi(h,_T)),a.i=new Bi(h,a.h))}function xe(a,h,p){a.i.set(h,p)}function Ia(a){return xe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ui(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Fi(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,vT),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function vT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var km=/[#\/\?@]/g,yT=/[#\?:]/g,xT=/[#\?]/g,_T=/[#\?@]/g,wT=/#/g;function Bi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Xn(a){a.g||(a.g=new Map,a.h=0,a.i&&gT(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Bi.prototype,t.add=function(a,h){Xn(this),this.i=null,a=Cs(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function Nm(a,h){Xn(a),h=Cs(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Am(a,h){return Xn(a),h=Cs(a,h),a.g.has(h)}t.forEach=function(a,h){Xn(this),this.g.forEach(function(p,v){p.forEach(function(D){a.call(h,D,v,this)},this)},this)},t.na=function(){Xn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let v=0;v<h.length;v++){const D=a[v];for(let O=0;O<D.length;O++)p.push(h[v])}return p},t.V=function(a){Xn(this);let h=[];if(typeof a=="string")Am(this,a)&&(h=h.concat(this.g.get(Cs(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return Xn(this),this.i=null,a=Cs(this,a),Am(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Pm(a,h,p){Nm(a,h),0<p.length&&(a.i=null,a.g.set(Cs(a,h),k(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var v=h[p];const O=encodeURIComponent(String(v)),W=this.V(v);for(v=0;v<W.length;v++){var D=O;W[v]!==""&&(D+="="+encodeURIComponent(String(W[v]))),a.push(D)}}return this.i=a.join("&")};function Cs(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function ET(a,h){h&&!a.j&&(Xn(a),a.i=null,a.g.forEach(function(p,v){var D=v.toLowerCase();v!=D&&(Nm(this,v),Pm(this,D,p))},a)),a.j=h}function TT(a,h){const p=new Vi;if(l.Image){const v=new Image;v.onload=_(Zn,p,"TestLoadImage: loaded",!0,h,v),v.onerror=_(Zn,p,"TestLoadImage: error",!1,h,v),v.onabort=_(Zn,p,"TestLoadImage: abort",!1,h,v),v.ontimeout=_(Zn,p,"TestLoadImage: timeout",!1,h,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function bT(a,h){const p=new Vi,v=new AbortController,D=setTimeout(()=>{v.abort(),Zn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(O=>{clearTimeout(D),O.ok?Zn(p,"TestPingServer: ok",!0,h):Zn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),Zn(p,"TestPingServer: error",!1,h)})}function Zn(a,h,p,v,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),v(p)}catch{}}function ST(){this.g=new aT}function IT(a,h,p){const v=p||"";try{Sm(a,function(D,O){let W=D;d(D)&&(W=wu(D)),h.push(v+O+"="+encodeURIComponent(W))})}catch(D){throw h.push(v+"type="+encodeURIComponent("_badmap")),D}}function Ca(a){this.l=a.Ub||null,this.j=a.eb||!1}I(Ca,Eu),Ca.prototype.g=function(){return new ka(this.l,this.j)},Ca.prototype.i=function(a){return function(){return a}}({});function ka(a,h){rt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(ka,rt),t=ka.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,$i(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,$i(this)),this.g&&(this.readyState=3,$i(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?zi(this):$i(this),this.readyState==3&&Rm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,zi(this))},t.Qa=function(a){this.g&&(this.response=a,zi(this))},t.ga=function(){this.g&&zi(this)};function zi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,$i(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function $i(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function jm(a){let h="";return F(a,function(p,v){h+=v,h+=":",h+=p,h+=`\r
`}),h}function Ru(a,h,p){e:{for(v in p){var v=!1;break e}v=!0}v||(p=jm(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):xe(a,h,p))}function Ae(a){rt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ae,rt);var CT=/^https?$/i,kT=["POST","PUT"];t=Ae.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Su.g(),this.v=this.o?lm(this.o):lm(Su),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(O){Dm(this,O);return}if(a=p||"",p=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var D in v)p.set(D,v[D]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const O of v.keys())p.set(O,v.get(O));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),D=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(kT,h,void 0))||v||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,W]of p)this.g.setRequestHeader(O,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vm(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){Dm(this,O)}};function Dm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Om(a),Na(a)}function Om(a){a.A||(a.A=!0,mt(a,"complete"),mt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,mt(this,"complete"),mt(this,"abort"),Na(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Na(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Mm(this):this.bb())},t.bb=function(){Mm(this)};function Mm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Cn(a)!=4||a.Z()!=2)){if(a.u&&Cn(a)==4)sm(a.Ea,0,a);else if(mt(a,"readystatechange"),Cn(a)==4){a.h=!1;try{const W=a.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var v;if(v=W===0){var D=String(a.D).match(Im)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),v=!CT.test(D?D.toLowerCase():"")}p=v}if(p)mt(a,"complete"),mt(a,"success");else{a.m=6;try{var O=2<Cn(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",Om(a)}}finally{Na(a)}}}}function Na(a,h){if(a.g){Vm(a);const p=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||mt(a,"ready");try{p.onreadystatechange=v}catch{}}}function Vm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Cn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),oT(h)}};function Lm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function NT(a){const h={};a=(a.g&&2<=Cn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(y(a[v]))continue;var p=j(a[v]);const D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=h[D]||[];h[D]=O,O.push(p)}b(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hi(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function Um(a){this.Aa=0,this.i=[],this.j=new Vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hi("baseRetryDelayMs",5e3,a),this.cb=Hi("retryDelaySeedMs",1e4,a),this.Wa=Hi("forwardChannelMaxRetries",2,a),this.wa=Hi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new _m(a&&a.concurrentRequestLimit),this.Da=new ST,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Um.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,v){gt(0),this.W=a,this.H=h||{},p&&v!==void 0&&(this.H.OSID=p,this.H.OAID=v),this.F=this.X,this.I=Km(this,null,this.W),Pa(this)};function ju(a){if(Fm(a),a.G==3){var h=a.U++,p=In(a.I);if(xe(p,"SID",a.K),xe(p,"RID",h),xe(p,"TYPE","terminate"),Wi(a,p),h=new Jn(a,a.j,h),h.L=2,h.v=Ia(In(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=Qm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ta(h)}qm(a)}function Aa(a){a.g&&(Ou(a),a.g.cancel(),a.g=null)}function Fm(a){Aa(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ra(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Pa(a){if(!wm(a.h)&&!a.s){a.s=!0;var h=a.Ga;Ve||$(),G||(Ve(),G=!0),X.add(h,a),a.B=0}}function AT(a,h){return Em(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Mi(g(a.Ga,a,h),Gm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new Jn(this,this.j,a);let O=this.o;if(this.S&&(O?(O=x(O),C(O,this.S)):O=this.S),this.m!==null||this.O||(D.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var v=this.i[p];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=zm(this,D,h),p=In(this.I),xe(p,"RID",a),xe(p,"CVER",22),this.D&&xe(p,"X-HTTP-Session-Id",this.D),Wi(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(jm(O)))+"&"+h:this.m&&Ru(p,this.m,O)),Pu(this.h,D),this.Ua&&xe(p,"TYPE","init"),this.P?(xe(p,"$req",h),xe(p,"SID","null"),D.T=!0,Cu(D,p,null)):Cu(D,p,h),this.G=2}}else this.G==3&&(a?Bm(this,a):this.i.length==0||wm(this.h)||Bm(this))};function Bm(a,h){var p;h?p=h.l:p=a.U++;const v=In(a.I);xe(v,"SID",a.K),xe(v,"RID",p),xe(v,"AID",a.T),Wi(a,v),a.m&&a.o&&Ru(v,a.m,a.o),p=new Jn(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=zm(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Pu(a.h,p),Cu(p,v,h)}function Wi(a,h){a.H&&F(a.H,function(p,v){xe(h,v,p)}),a.l&&Sm({},function(p,v){xe(h,v,p)})}function zm(a,h,p){p=Math.min(a.i.length,p);var v=a.l?g(a.l.Na,a.l,a):null;e:{var D=a.i;let O=-1;for(;;){const W=["count="+p];O==-1?0<p?(O=D[0].g,W.push("ofs="+O)):O=0:W.push("ofs="+O);let ve=!0;for(let Qe=0;Qe<p;Qe++){let fe=D[Qe].g;const st=D[Qe].map;if(fe-=O,0>fe)O=Math.max(0,D[Qe].g-100),ve=!1;else try{IT(st,W,"req"+fe+"_")}catch{v&&v(st)}}if(ve){v=W.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,v}function $m(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Ve||$(),G||(Ve(),G=!0),X.add(h,a),a.v=0}}function Du(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Mi(g(a.Fa,a),Gm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Hm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Mi(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),Aa(this),Hm(this))};function Ou(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Hm(a){a.g=new Jn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=In(a.qa);xe(h,"RID","rpc"),xe(h,"SID",a.K),xe(h,"AID",a.T),xe(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&xe(h,"TO",a.ja),xe(h,"TYPE","xmlhttp"),Wi(a,h),a.m&&a.o&&Ru(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=Ia(In(h)),p.m=null,p.P=!0,vm(p,a)}t.Za=function(){this.C!=null&&(this.C=null,Aa(this),Du(this),gt(19))};function Ra(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Wm(a,h){var p=null;if(a.g==h){Ra(a),Ou(a),a.g=null;var v=2}else if(Au(a.h,h))p=h.D,Tm(a.h,h),v=1;else return;if(a.G!=0){if(h.o)if(v==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=a.B;v=_a(),mt(v,new fm(v,p)),Pa(a)}else $m(a);else if(D=h.s,D==3||D==0&&0<h.X||!(v==1&&AT(a,h)||v==2&&Du(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),D){case 1:Wr(a,5);break;case 4:Wr(a,10);break;case 3:Wr(a,6);break;default:Wr(a,2)}}}function Gm(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function Wr(a,h){if(a.j.info("Error code "+h),h==2){var p=g(a.fb,a),v=a.Xa;const D=!v;v=new Hr(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ba(v,"https"),Ia(v),D?TT(v.toString(),p):bT(v.toString(),p)}else gt(2);a.G=0,a.l&&a.l.sa(h),qm(a),Fm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function qm(a){if(a.G=0,a.ka=[],a.l){const h=bm(a.h);(h.length!=0||a.i.length!=0)&&(A(a.ka,h),A(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function Km(a,h,p){var v=p instanceof Hr?In(p):new Hr(p);if(v.g!="")h&&(v.g=h+"."+v.g),Sa(v,v.s);else{var D=l.location;v=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var O=new Hr(null);v&&ba(O,v),h&&(O.g=h),D&&Sa(O,D),p&&(O.l=p),v=O}return p=a.D,h=a.ya,p&&h&&xe(v,p,h),xe(v,"VER",a.la),Wi(a,v),v}function Qm(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ae(new Ca({eb:p})):new Ae(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ym(){}t=Ym.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ja(){}ja.prototype.g=function(a,h){return new kt(a,h)};function kt(a,h){rt.call(this),this.g=new Um(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!y(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!y(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new ks(this)}I(kt,rt),kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){ju(this.g)},kt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=wu(a),a=p);h.i.push(new fT(h.Ya++,a)),h.G==3&&Pa(h)},kt.prototype.N=function(){this.g.l=null,delete this.j,ju(this.g),delete this.g,kt.aa.N.call(this)};function Jm(a){Tu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}I(Jm,Tu);function Xm(){bu.call(this),this.status=1}I(Xm,bu);function ks(a){this.g=a}I(ks,Ym),ks.prototype.ua=function(){mt(this.g,"a")},ks.prototype.ta=function(a){mt(this.g,new Jm(a))},ks.prototype.sa=function(a){mt(this.g,new Xm)},ks.prototype.ra=function(){mt(this.g,"b")},ja.prototype.createWebChannel=ja.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,oE=function(){return new ja},iE=function(){return _a()},sE=zr,jh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wa.NO_ERROR=0,wa.TIMEOUT=8,wa.HTTP_ERROR=6,wl=wa,pm.COMPLETE="complete",rE=pm,cm.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",rt.prototype.listen=rt.prototype.K,oo=cm,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,nE=Ae}).apply(typeof Za<"u"?Za:typeof self<"u"?self:typeof window<"u"?window:{});const ny="@firebase/firestore",ry="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ki="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new Wc("@firebase/firestore");function Rs(){return ps.logLevel}function K(t,...e){if(ps.logLevel<=ce.DEBUG){const n=e.map(mp);ps.debug(`Firestore (${ki}): ${t}`,...n)}}function Hn(t,...e){if(ps.logLevel<=ce.ERROR){const n=e.map(mp);ps.error(`Firestore (${ki}): ${t}`,...n)}}function Nr(t,...e){if(ps.logLevel<=ce.WARN){const n=e.map(mp);ps.warn(`Firestore (${ki}): ${t}`,...n)}}function mp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,aE(t,r,n)}function aE(t,e,n){let r=`FIRESTORE (${ki}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Hn(r),new Error(r)}function pe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||aE(e,s,r)}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends cn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class LP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class UP{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Sr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Sr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string",31837,{l:r}),new lE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string",2055,{h:e}),new ct(e)}}class FP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new FP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,At(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){pe(this.o===void 0,3512);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=$P(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function Dh(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ae(r,s);{const i=cE(),o=HP(i.encode(iy(t,n)),i.encode(iy(e,n)));return o!==0?o:ae(r,s)}}n+=r>65535?2:1}return ae(t.length,e.length)}function iy(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function HP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ae(t[n],e[n]);return ae(t.length,e.length)}function pi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="__name__";class fn{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=fn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ae(e.length,n.length)}static compareSegments(e,n){const r=fn.isNumericId(e),s=fn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?fn.extractNumericId(e).compare(fn.extractNumericId(n)):Dh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return br.fromString(e.substring(4,e.length-2))}}class Se extends fn{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const WP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends fn{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return WP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===oy}static keyField(){return new Xe([oy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Y(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Y(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Se.fromString(e))}static fromName(e){return new Z(Se.fromString(e).popFirst(5))}static empty(){return new Z(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Se(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(t,e,n){if(!n)throw new Y(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qP(t,e,n,r){if(e===!0&&r===!0)throw new Y(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ay(t){if(!Z.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function Qo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vp(t);throw new Y(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e){const n={typeString:t};return e&&(n.value=e),n}function fa(t,e){if(!uE(t))throw new Y(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Y(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=-62135596800,cy=1e6;class we{static now(){return we.fromMillis(Date.now())}static fromDate(e){return we.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*cy);return new we(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ly)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cy}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:we._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fa(e,we._jsonSchema))return new we(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ly;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}we._jsonSchemaVersion="firestore/timestamp/1.0",we._jsonSchema={type:Me("string",we._jsonSchemaVersion),seconds:Me("number"),nanoseconds:Me("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new we(0,0))}static max(){return new re(new we(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=-1;function KP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=re.fromTimestamp(r===1e9?new we(n+1,0):new we(n,r));return new Ar(s,Z.empty(),e)}function QP(t){return new Ar(t.readTime,t.key,Yo)}class Ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ar(re.min(),Z.empty(),Yo)}static max(){return new Ar(re.max(),Z.empty(),Yo)}}function YP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ni(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==JP)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ZP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ai(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Jc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp=-1;function Xc(t){return t==null}function dc(t){return t===0&&1/t==-1/0}function eR(t){return typeof t=="number"&&Number.isInteger(t)&&!dc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="";function tR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=uy(e)),e=nR(t.get(n),e);return uy(e)}function nR(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case dE:n+="";break;default:n+=i}}return n}function uy(t){return t+dE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Es(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new el(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new el(this.root,e,this.comparator,!1)}getReverseIterator(){return new el(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new el(this.root,e,this.comparator,!0)}}class el{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hy(this.data.getIterator())}getIteratorFrom(e){return new hy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class hy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new nn([])}unionWith(e){let n=new ze(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new fE("Invalid base64 string: "+i):i}}(e);return new tt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const rR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(t){if(pe(!!t,39018),typeof t=="string"){let e=0;const n=rR.exec(t);if(pe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rr(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="server_timestamp",mE="__type__",gE="__previous_value__",vE="__local_write_time__";function xp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[mE])===null||n===void 0?void 0:n.stringValue)===pE}function Zc(t){const e=t.mapValue.fields[gE];return xp(e)?Zc(e):e}function Jo(t){const e=Pr(t.mapValue.fields[vE].timestampValue);return new we(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n,r,s,i,o,l,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const hc="(default)";class Xo{constructor(e,n){this.projectId=e,this.database=n||hc}static empty(){return new Xo("","")}get isDefaultDatabase(){return this.database===hc}isEqual(e){return e instanceof Xo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="__type__",iR="__max__",tl={mapValue:{}},xE="__vector__",fc="value";function jr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xp(t)?4:aR(t)?9007199254740991:oR(t)?10:11:te(28295,{value:t})}function Tn(t,e){if(t===e)return!0;const n=jr(t);if(n!==jr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jo(t).isEqual(Jo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Pr(s.timestampValue),l=Pr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Rr(s.bytesValue).isEqual(Rr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Re(s.geoPointValue.latitude)===Re(i.geoPointValue.latitude)&&Re(s.geoPointValue.longitude)===Re(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Re(s.integerValue)===Re(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Re(s.doubleValue),l=Re(i.doubleValue);return o===l?dc(o)===dc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return pi(t.arrayValue.values||[],e.arrayValue.values||[],Tn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(dy(o)!==dy(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Tn(o[c],l[c])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Zo(t,e){return(t.values||[]).find(n=>Tn(n,e))!==void 0}function mi(t,e){if(t===e)return 0;const n=jr(t),r=jr(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Re(i.integerValue||i.doubleValue),c=Re(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return fy(t.timestampValue,e.timestampValue);case 4:return fy(Jo(t),Jo(e));case 5:return Dh(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Rr(i),c=Rr(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=ae(l[d],c[d]);if(f!==0)return f}return ae(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ae(Re(i.latitude),Re(o.latitude));return l!==0?l:ae(Re(i.longitude),Re(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return py(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,d,f;const m=i.fields||{},g=o.fields||{},_=(l=m[fc])===null||l===void 0?void 0:l.arrayValue,I=(c=g[fc])===null||c===void 0?void 0:c.arrayValue,k=ae(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((f=I==null?void 0:I.values)===null||f===void 0?void 0:f.length)||0);return k!==0?k:py(_,I)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===tl.mapValue&&o===tl.mapValue)return 0;if(i===tl.mapValue)return 1;if(o===tl.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const g=Dh(c[m],f[m]);if(g!==0)return g;const _=mi(l[c[m]],d[f[m]]);if(_!==0)return _}return ae(c.length,f.length)}(t.mapValue,e.mapValue);default:throw te(23264,{le:n})}}function fy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Pr(t),r=Pr(e),s=ae(n.seconds,r.seconds);return s!==0?s:ae(n.nanos,r.nanos)}function py(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=mi(n[s],r[s]);if(i)return i}return ae(n.length,r.length)}function gi(t){return Oh(t)}function Oh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Pr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Rr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Oh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Oh(n.fields[o])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function El(t){switch(jr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zc(t);return e?16+El(e):16;case 5:return 2*t.stringValue.length;case 6:return Rr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+El(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Es(r.fields,(i,o)=>{s+=i.length+El(o)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function Mh(t){return!!t&&"integerValue"in t}function _p(t){return!!t&&"arrayValue"in t}function my(t){return!!t&&"nullValue"in t}function gy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tl(t){return!!t&&"mapValue"in t}function oR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[yE])===null||n===void 0?void 0:n.stringValue)===xE}function To(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Es(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=To(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=To(t.arrayValue.values[n]);return e}return Object.assign({},t)}function aR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===iR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=To(n)}setAll(e){let n=Xe.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=To(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Tl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Tl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Es(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new zt(To(this.value))}}function _E(t){const e=[];return Es(t.fields,(n,r)=>{const s=new Xe([n]);if(Tl(r)){const i=_E(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new dt(e,0,re.min(),re.min(),re.min(),zt.empty(),0)}static newFoundDocument(e,n,r,s){return new dt(e,1,n,re.min(),r,s,0)}static newNoDocument(e,n){return new dt(e,2,n,re.min(),re.min(),zt.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,re.min(),re.min(),zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.position=e,this.inclusive=n}}function vy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=mi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function yy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n="asc"){this.field=e,this.dir=n}}function lR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{}class Fe extends wE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uR(e,n,r):n==="array-contains"?new fR(e,r):n==="in"?new pR(e,r):n==="not-in"?new mR(e,r):n==="array-contains-any"?new gR(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new dR(e,r):new hR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(mi(n,this.value)):n!==null&&jr(this.value)===jr(n)&&this.matchesComparison(mi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bn extends wE{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new bn(e,n)}matches(e){return EE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function EE(t){return t.op==="and"}function TE(t){return cR(t)&&EE(t)}function cR(t){for(const e of t.filters)if(e instanceof bn)return!1;return!0}function Vh(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+gi(t.value);if(TE(t))return t.filters.map(e=>Vh(e)).join(",");{const e=t.filters.map(n=>Vh(n)).join(",");return`${t.op}(${e})`}}function bE(t,e){return t instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.field.isEqual(s.field)&&Tn(r.value,s.value)}(t,e):t instanceof bn?function(r,s){return s instanceof bn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&bE(o,s.filters[l]),!0):!1}(t,e):void te(19439)}function SE(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${gi(n.value)}`}(t):t instanceof bn?function(n){return n.op.toString()+" {"+n.getFilters().map(SE).join(" ,")+"}"}(t):"Filter"}class uR extends Fe{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class dR extends Fe{constructor(e,n){super(e,"in",n),this.keys=IE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hR extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=IE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function IE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class fR extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _p(n)&&Zo(n.arrayValue,this.value)}}class pR extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zo(this.value.arrayValue,n)}}class mR extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zo(this.value.arrayValue,n)}}class gR extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_p(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Pe=null}}function xy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new vR(t,e,n,r,s,i,o)}function wp(t){const e=se(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Vh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Xc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gi(r)).join(",")),e.Pe=n}return e.Pe}function Ep(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yy(t.startAt,e.startAt)&&yy(t.endAt,e.endAt)}function Lh(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function yR(t,e,n,r,s,i,o,l){return new eu(t,e,n,r,s,i,o,l)}function Tp(t){return new eu(t)}function _y(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xR(t){return t.collectionGroup!==null}function bo(t){const e=se(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ze(Xe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new mc(i,r))}),n.has(Xe.keyField().canonicalString())||e.Te.push(new mc(Xe.keyField(),r))}return e.Te}function yn(t){const e=se(t);return e.Ie||(e.Ie=_R(e,bo(t))),e.Ie}function _R(t,e){if(t.limitType==="F")return xy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new mc(s.field,i)});const n=t.endAt?new pc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pc(t.startAt.position,t.startAt.inclusive):null;return xy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Uh(t,e,n){return new eu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function tu(t,e){return Ep(yn(t),yn(e))&&t.limitType===e.limitType}function CE(t){return`${wp(yn(t))}|lt:${t.limitType}`}function js(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>SE(s)).join(", ")}]`),Xc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>gi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>gi(s)).join(",")),`Target(${r})`}(yn(t))}; limitType=${t.limitType})`}function nu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of bo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const d=vy(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,bo(r),s)||r.endAt&&!function(o,l,c){const d=vy(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,bo(r),s))}(t,e)}function wR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kE(t){return(e,n)=>{let r=!1;for(const s of bo(t)){const i=ER(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function ER(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?mi(c,d):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return hE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=new Ne(Z.comparator);function Wn(){return TR}const NE=new Ne(Z.comparator);function ao(...t){let e=NE;for(const n of t)e=e.insert(n.key,n);return e}function AE(t){let e=NE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function es(){return So()}function PE(){return So()}function So(){return new Ts(t=>t.toString(),(t,e)=>t.isEqual(e))}const bR=new Ne(Z.comparator),SR=new ze(Z.comparator);function ue(...t){let e=SR;for(const n of t)e=e.add(n);return e}const IR=new ze(ae);function CR(){return IR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dc(e)?"-0":e}}function RE(t){return{integerValue:""+t}}function kR(t,e){return eR(e)?RE(e):bp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(){this._=void 0}}function NR(t,e,n){return t instanceof gc?function(s,i){const o={fields:{[mE]:{stringValue:pE},[vE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&xp(i)&&(i=Zc(i)),i&&(o.fields[gE]=i),{mapValue:o}}(n,e):t instanceof ea?DE(t,e):t instanceof ta?OE(t,e):function(s,i){const o=jE(s,i),l=wy(o)+wy(s.Ee);return Mh(o)&&Mh(s.Ee)?RE(l):bp(s.serializer,l)}(t,e)}function AR(t,e,n){return t instanceof ea?DE(t,e):t instanceof ta?OE(t,e):n}function jE(t,e){return t instanceof vc?function(r){return Mh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class gc extends ru{}class ea extends ru{constructor(e){super(),this.elements=e}}function DE(t,e){const n=ME(e);for(const r of t.elements)n.some(s=>Tn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ta extends ru{constructor(e){super(),this.elements=e}}function OE(t,e){let n=ME(e);for(const r of t.elements)n=n.filter(s=>!Tn(s,r));return{arrayValue:{values:n}}}class vc extends ru{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function wy(t){return Re(t.integerValue||t.doubleValue)}function ME(t){return _p(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function PR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ea&&s instanceof ea||r instanceof ta&&s instanceof ta?pi(r.elements,s.elements,Tn):r instanceof vc&&s instanceof vc?Tn(r.Ee,s.Ee):r instanceof gc&&s instanceof gc}(t.transform,e.transform)}class RR{constructor(e,n){this.version=e,this.transformResults=n}}class Vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class su{}function VE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new UE(t.key,Vn.none()):new pa(t.key,t.data,Vn.none());{const n=t.data,r=zt.empty();let s=new ze(Xe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new bs(t.key,r,new nn(s.toArray()),Vn.none())}}function jR(t,e,n){t instanceof pa?function(s,i,o){const l=s.value.clone(),c=Ty(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof bs?function(s,i,o){if(!bl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Ty(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(LE(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Io(t,e,n,r){return t instanceof pa?function(i,o,l,c){if(!bl(i.precondition,o))return l;const d=i.value.clone(),f=by(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof bs?function(i,o,l,c){if(!bl(i.precondition,o))return l;const d=by(i.fieldTransforms,c,o),f=o.data;return f.setAll(LE(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return bl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function DR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=jE(r.transform,s||null);i!=null&&(n===null&&(n=zt.empty()),n.set(r.field,i))}return n||null}function Ey(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pi(r,s,(i,o)=>PR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pa extends su{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class bs extends su{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function LE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ty(t,e,n){const r=new Map;pe(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,AR(o,l,n[s]))}return r}function by(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,NR(i,o,e))}return r}class UE extends su{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OR extends su{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&jR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Io(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Io(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=PE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=VE(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&pi(this.mutations,e.mutations,(n,r)=>Ey(n,r))&&pi(this.baseMutations,e.baseMutations,(n,r)=>Ey(n,r))}}class Sp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){pe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return bR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Sp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,de;function UR(t){switch(t){case z.OK:return te(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function FE(t){if(t===void 0)return Hn("GRPC error has no .code"),z.UNKNOWN;switch(t){case De.OK:return z.OK;case De.CANCELLED:return z.CANCELLED;case De.UNKNOWN:return z.UNKNOWN;case De.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case De.INTERNAL:return z.INTERNAL;case De.UNAVAILABLE:return z.UNAVAILABLE;case De.UNAUTHENTICATED:return z.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case De.NOT_FOUND:return z.NOT_FOUND;case De.ALREADY_EXISTS:return z.ALREADY_EXISTS;case De.PERMISSION_DENIED:return z.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case De.ABORTED:return z.ABORTED;case De.OUT_OF_RANGE:return z.OUT_OF_RANGE;case De.UNIMPLEMENTED:return z.UNIMPLEMENTED;case De.DATA_LOSS:return z.DATA_LOSS;default:return te(39323,{code:t})}}(de=De||(De={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new br([4294967295,4294967295],0);function Sy(t){const e=cE().encode(t),n=new tE;return n.update(e),new Uint8Array(n.digest())}function Iy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new br([n,r],0),new br([s,i],0)]}class Ip{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lo(`Invalid padding: ${n}`);if(r<0)throw new lo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new lo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=br.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(br.fromNumber(r)));return s.compare(FR)===1&&(s=new br([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Sy(e),[r,s]=Iy(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ip(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.fe===0)return;const n=Sy(e),[r,s]=Iy(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class lo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ma.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new iu(re.min(),s,new Ne(ae),Wn(),ue())}}class ma{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ma(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class BE{constructor(e,n){this.targetId=e,this.De=n}}class zE{constructor(e,n,r=tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Cy{constructor(){this.ve=0,this.Ce=ky(),this.Fe=tt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ue(),n=ue(),r=ue();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:i})}}),new ma(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=ky()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,pe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class BR{constructor(e){this.We=e,this.Ge=new Map,this.ze=Wn(),this.je=nl(),this.Je=nl(),this.He=new Ne(ae)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(Lh(i))if(r===0){const o=new Z(i.path);this.Xe(n,o,dt.newNoDocument(o,re.min()))}else pe(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const l=this._t(e),c=l?this.ut(l,e,o):1;if(c!==0){this.rt(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Rr(r).toUint8Array()}catch(c){if(c instanceof fE)return Nr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ip(o,s,i)}catch(c){return Nr(c instanceof lo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const l=this.st(o);if(l){if(i.current&&Lh(l.target)){const c=new Z(l.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,dt.newNoDocument(c,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=ue();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new iu(e,n,this.He,this.ze,r);return this.ze=Wn(),this.je=nl(),this.Je=nl(),this.He=new Ne(ae),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Cy,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new ze(ae),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new ze(ae),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Cy),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function nl(){return new Ne(Z.comparator)}function ky(){return new Ne(Z.comparator)}const zR={asc:"ASCENDING",desc:"DESCENDING"},$R={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HR={and:"AND",or:"OR"};class WR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fh(t,e){return t.useProto3Json||Xc(e)?e:{value:e}}function yc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $E(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function GR(t,e){return yc(t,e.toTimestamp())}function xn(t){return pe(!!t,49232),re.fromTimestamp(function(n){const r=Pr(n);return new we(r.seconds,r.nanos)}(t))}function Cp(t,e){return Bh(t,e).canonicalString()}function Bh(t,e){const n=function(s){return new Se(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function HE(t){const e=Se.fromString(t);return pe(QE(e),10190,{key:e.toString()}),e}function zh(t,e){return Cp(t.databaseId,e.path)}function wd(t,e){const n=HE(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(GE(n))}function WE(t,e){return Cp(t.databaseId,e)}function qR(t){const e=HE(t);return e.length===4?Se.emptyPath():GE(e)}function $h(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GE(t){return pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ny(t,e,n){return{name:zh(t,e),fields:n.value.mapValue.fields}}function KR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(pe(f===void 0||typeof f=="string",58123),tt.fromBase64String(f||"")):(pe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),tt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?z.UNKNOWN:FE(d.code);return new Y(f,d.message||"")}(o);n=new zE(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=wd(t,r.document.name),i=xn(r.document.updateTime),o=r.document.createTime?xn(r.document.createTime):re.min(),l=new zt({mapValue:{fields:r.document.fields}}),c=dt.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Sl(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=wd(t,r.document),i=r.readTime?xn(r.readTime):re.min(),o=dt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Sl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=wd(t,r.document),i=r.removedTargetIds||[];n=new Sl([],i,s,null)}else{if(!("filter"in e))return te(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new LR(s,i),l=r.targetId;n=new BE(l,o)}}return n}function QR(t,e){let n;if(e instanceof pa)n={update:Ny(t,e.key,e.value)};else if(e instanceof UE)n={delete:zh(t,e.key)};else if(e instanceof bs)n={update:Ny(t,e.key,e.data),updateMask:sj(e.fieldMask)};else{if(!(e instanceof OR))return te(16599,{Rt:e.type});n={verify:zh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof gc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ea)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ta)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof vc)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:GR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)}(t,e.precondition)),n}function YR(t,e){return t&&t.length>0?(pe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?xn(s.updateTime):xn(i);return o.isEqual(re.min())&&(o=xn(i)),new RR(o,s.transformResults||[])}(n,e))):[]}function JR(t,e){return{documents:[WE(t,e.path)]}}function XR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=WE(t,s);const i=function(d){if(d.length!==0)return KE(bn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Ds(g.field),direction:tj(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Fh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:s}}function ZR(t){let e=qR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){pe(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=qE(m);return g instanceof bn&&TE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(I){return new mc(Os(I.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Xc(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(m){const g=!!m.before,_=m.values||[];return new pc(_,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,_=m.values||[];return new pc(_,g)}(n.endAt)),yR(e,s,o,i,l,"F",c,d)}function ej(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Os(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Os(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Os(n.unaryFilter.field);return Fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Os(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Os(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return bn.create(n.compositeFilter.filters.map(r=>qE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function tj(t){return zR[t]}function nj(t){return $R[t]}function rj(t){return HR[t]}function Ds(t){return{fieldPath:t.canonicalString()}}function Os(t){return Xe.fromServerFormat(t.fieldPath)}function KE(t){return t instanceof Fe?function(n){if(n.op==="=="){if(gy(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NAN"}};if(my(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gy(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NOT_NAN"}};if(my(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ds(n.field),op:nj(n.op),value:n.value}}}(t):t instanceof bn?function(n){const r=n.getFilters().map(s=>KE(s));return r.length===1?r[0]:{compositeFilter:{op:rj(n.op),filters:r}}}(t):te(54877,{filter:t})}function sj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function QE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,r,s,i=re.min(),o=re.min(),l=tt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.gt=e}}function oj(t){const e=ZR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.Dn=new lj}addToCollectionParentIndex(e,n){return this.Dn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Ar.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Ar.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class lj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ze(Se.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ze(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YE=41943040;class wt{static withCacheSize(e){return new wt(e,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wt.DEFAULT_COLLECTION_PERCENTILE=10,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wt.DEFAULT=new wt(YE,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wt.DISABLED=new wt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new vi(0)}static ur(){return new vi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="LruGarbageCollector",cj=1048576;function Ry([t,e],[n,r]){const s=ae(t,n);return s===0?ae(e,r):s}class uj{constructor(e){this.Tr=e,this.buffer=new ze(Ry),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ry(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){K(Py,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ai(n)?K(Py,"Ignoring IndexedDB error during garbage collection: ",n):await Ni(n)}await this.Rr(3e5)})}}class hj{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Jc.ue);const r=new uj(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Ay)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ay):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,l,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Rs()<=ce.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function fj(t,e){return new hj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this.changes=new Ts(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Io(r.mutation,s,nn.empty(),we.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const s=es();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ao();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=es();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Wn();const o=So(),l=function(){return So()}();return n.forEach((c,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof bs)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Io(f.mutation,d,f.mutation.getFieldMask(),we.now())):o.set(d.key,nn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return l.set(d,new mj(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=So();let s=new Ne((o,l)=>o-l),i=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||nn.empty();f=l.applyToLocalView(d,f),r.set(c,f);const m=(s.get(l.batchId)||ue()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,m=PE();f.forEach(g=>{if(!i.has(g)){const _=VE(n.get(g),r.get(g));_!==null&&m.set(g,_),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(es());let l=Yo,c=i;return o.next(d=>U.forEach(d,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ue())).next(f=>({batchId:l,changes:AE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let s=ao();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ao();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,c=>{const d=function(m,g){return new eu(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,dt.newInvalidDocument(f)))});let l=ao();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&Io(f.mutation,d,nn.empty(),we.now()),nu(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return U.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:xn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:oj(s.bundledQuery),readTime:xn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(){this.overlays=new Ne(Z.comparator),this.kr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=es();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=es(),i=n.length+1,o=new Z(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ne((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=es(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=es(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return U.resolve(l)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new VR(n,r));let i=this.kr.get(n);i===void 0&&(i=ue(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(){this.qr=new ze(He.Qr),this.$r=new ze(He.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new He(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new He(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Z(new Se([])),r=new He(n,e),s=new He(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Z(new Se([])),r=new He(n,e),s=new He(n,e+1);let i=ue();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new He(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class He{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Z.comparator(e.key,n.key)||ae(e.Hr,n.Hr)}static Ur(e,n){return ae(e.Hr,n.Hr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new ze(He.Qr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new MR(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Yr=this.Yr.add(new He(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?yp:this.er-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new He(n,0),s=new He(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(ae);return n.forEach(s=>{const i=new He(s,0),o=new He(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),U.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const o=new He(new Z(i),0);let l=new ze(ae);return this.Yr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Hr)),!0)},o),U.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){pe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return U.forEach(n.mutations,s=>{const i=new He(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new He(n,0),s=this.Yr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e){this.ni=e,this.docs=function(){return new Ne(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=Wn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():dt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Wn();const o=n.path,l=new Z(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||YP(QP(f),r)<=0||(s.has(f.key)||nu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te(9500)}ri(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ej(this)}getSize(e){return U.resolve(this.size)}}class Ej extends pj{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this.persistence=e,this.ii=new Ts(n=>wp(n),Ep),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.si=0,this.oi=new kp,this.targetCount=0,this._i=vi.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),U.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new vi(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.hr(n),U.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n){this.ai={},this.overlays={},this.ui=new Jc(0),this.ci=!1,this.ci=!0,this.li=new xj,this.referenceDelegate=e(this),this.hi=new Tj(this),this.indexManager=new aj,this.remoteDocumentCache=function(s){return new wj(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new ij(n),this.Ti=new vj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new _j(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new bj(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return U.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class bj extends XP{constructor(e){super(),this.currentSequenceNumber=e}}class Np{constructor(e){this.persistence=e,this.Ai=new kp,this.Ri=null}static Vi(e){return new Np(e)}get mi(){if(this.Ri)return this.Ri;throw te(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.mi,r=>{const s=Z.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,re.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return U.or([()=>U.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class xc{constructor(e,n){this.persistence=e,this.gi=new Ts(r=>tR(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=fj(this,n)}static Vi(e,n){return new xc(e,n)}Ii(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return U.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,re.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),U.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=El(e.data.value)),n}Sr(e,n,r){return U.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=ue(),s=ue();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ap(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return RC()?8:ZP(ft())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Sj;return this.ws(e,n,o).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,n,o,l.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(Rs()<=ce.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",js(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(Rs()<=ce.DEBUG&&K("QueryEngine","Query:",js(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Rs()<=ce.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",js(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yn(n))):U.resolve())}ps(e,n){if(_y(n))return U.resolve(null);let r=yn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Uh(n,null,"F"),r=yn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ue(...i);return this.gs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.bs(n,l);return this.Ds(n,d,o,c.readTime)?this.ps(e,Uh(n,null,"F")):this.vs(e,d,n,c)}))})))}ys(e,n,r,s){return _y(n)||s.isEqual(re.min())?U.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?U.resolve(null):(Rs()<=ce.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),js(n)),this.vs(e,o,n,KP(s,Yo)).next(l=>l))})}bs(e,n){let r=new ze(kE(e));return n.forEach((s,i)=>{nu(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return Rs()<=ce.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",js(n)),this.gs.getDocumentsMatchingQuery(e,n,Ar.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="LocalStore",Cj=3e8;class kj{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Ne(ae),this.Ms=new Ts(i=>wp(i),Ep),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gj(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Nj(t,e,n,r){return new kj(t,e,n,r)}async function XE(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=ue();for(const d of s){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:l}))})})}function Aj(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const m=d.batch,g=m.keys();let _=U.resolve();return g.forEach(I=>{_=_.next(()=>f.getEntry(c,I)).next(k=>{const A=d.docVersions.get(I);pe(A!==null,48541),k.version.compareTo(A)<0&&(m.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),f.addEntry(k)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ue();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ZE(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Pj(t,e){const n=se(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const l=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;l.push(n.hi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.hi.addMatchingKeys(i,f.addedDocuments,m)));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(tt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),s=s.insert(m,_),function(k,A,E){return k.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=Cj?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,_,f)&&l.push(n.hi.updateTargetData(i,_))});let c=Wn(),d=ue();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(Rj(i,o,e.documentUpdates).next(f=>{c=f.Ls,d=f.ks})),!r.isEqual(re.min())){const f=n.hi.getLastRemoteSnapshotVersion(i).next(m=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return U.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Fs=s,i))}function Rj(t,e,n){let r=ue(),s=ue();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Wn();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(re.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):K(Pp,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ls:o,ks:s}})}function jj(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=yp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Dj(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new hr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Hh(t,e,n){const r=se(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ai(o))throw o;K(Pp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function jy(t,e,n){const r=se(t);let s=re.min(),i=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const m=se(c),g=m.Ms.get(f);return g!==void 0?U.resolve(m.Fs.get(g)):m.hi.getTargetData(d,f)}(r,o,yn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:re.min(),n?i:ue())).next(l=>(Oj(r,wR(e),l),{documents:l,qs:i})))}function Oj(t,e,n){let r=t.xs.get(e)||re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class Dy{constructor(){this.activeTargetIds=CR()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mj{constructor(){this.Fo=new Dy,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Dy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="ConnectivityMonitor";class My{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){K(Oy,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){K(Oy,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl=null;function Wh(){return rl===null?rl=function(){return 268435456+Math.round(2147483648*Math.random())}():rl++,"0x"+rl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="RestConnection",Lj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Uj{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===hc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Wh(),l=this.Go(e,n.toUriEncodedString());K(Ed,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:d}=new URL(l),f=Si(d);return this.jo(e,l,c,r,f).then(m=>(K(Ed,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Nr(Ed,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ki}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=Lj[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class Bj extends Uj{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=Wh();return new Promise((l,c)=>{const d=new nE;d.setWithCredentials(!0),d.listenOnce(rE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case wl.NO_ERROR:const m=d.getResponseJson();K(lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case wl.TIMEOUT:K(lt,`RPC '${e}' ${o} timed out`),c(new Y(z.DEADLINE_EXCEEDED,"Request time out"));break;case wl.HTTP_ERROR:const g=d.getStatus();if(K(lt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const I=_==null?void 0:_.error;if(I&&I.status&&I.message){const k=function(E){const y=E.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(y)>=0?y:z.UNKNOWN}(I.status);c(new Y(k,I.message))}else c(new Y(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Y(z.UNAVAILABLE,"Connection failed."));break;default:te(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{K(lt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);K(lt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}P_(e,n,r){const s=Wh(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=oE(),l=iE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=i.join("");K(lt,`Creating RPC '${e}' stream ${s}: ${f}`,c);const m=o.createWebChannel(f,c);this.T_(m);let g=!1,_=!1;const I=new Fj({Ho:A=>{_?K(lt,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(g||(K(lt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),K(lt,`RPC '${e}' stream ${s} sending:`,A),m.send(A))},Yo:()=>m.close()}),k=(A,E,y)=>{A.listen(E,T=>{try{y(T)}catch(R){setTimeout(()=>{throw R},0)}})};return k(m,oo.EventType.OPEN,()=>{_||(K(lt,`RPC '${e}' stream ${s} transport opened.`),I.s_())}),k(m,oo.EventType.CLOSE,()=>{_||(_=!0,K(lt,`RPC '${e}' stream ${s} transport closed`),I.__(),this.I_(m))}),k(m,oo.EventType.ERROR,A=>{_||(_=!0,Nr(lt,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),I.__(new Y(z.UNAVAILABLE,"The operation could not be completed")))}),k(m,oo.EventType.MESSAGE,A=>{var E;if(!_){const y=A.data[0];pe(!!y,16349);const T=y,R=(T==null?void 0:T.error)||((E=T[0])===null||E===void 0?void 0:E.error);if(R){K(lt,`RPC '${e}' stream ${s} received error:`,R);const B=R.status;let F=function(S){const C=De[S];if(C!==void 0)return FE(C)}(B),b=R.message;F===void 0&&(F=z.INTERNAL,b="Unknown error status: "+B+" with message "+R.message),_=!0,I.__(new Y(F,b)),m.close()}else K(lt,`RPC '${e}' stream ${s} received:`,y),I.a_(y)}}),k(l,sE.STAT_EVENT,A=>{A.stat===jh.PROXY?K(lt,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===jh.NOPROXY&&K(lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.o_()},0),I}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t){return new WR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="PersistentStream";class t1{constructor(e,n,r,s,i,o,l,c){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new e1(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Hn(n.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new Y(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return K(Vy,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(K(Vy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zj extends t1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=KR(this.serializer,e),r=function(i){if(!("targetChange"in i))return re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?xn(o.readTime):re.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=$h(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Lh(c)?{documents:JR(i,c)}:{query:XR(i,c).Vt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=$E(i,o.resumeToken);const d=Fh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(re.min())>0){l.readTime=yc(i,o.snapshotVersion.toTimestamp());const d=Fh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=ej(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=$h(this.serializer),n.removeTarget=e,this.k_(n)}}class $j extends t1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=YR(e.writeResults,e.commitTime),r=xn(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=$h(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>QR(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{}class Wj extends Hj{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Bh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(z.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Jo(e,Bh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(z.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Gj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Hn(n),this._a=!1):K("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="RemoteStore";class qj{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Ss(this)&&(K(ms,"Restarting streams for network reachability change."),await async function(c){const d=se(c);d.Ia.add(4),await ga(d),d.Aa.set("Unknown"),d.Ia.delete(4),await au(d)}(this))})}),this.Aa=new Gj(r,s)}}async function au(t){if(Ss(t))for(const e of t.da)await e(!0)}async function ga(t){for(const e of t.da)await e(!1)}function n1(t,e){const n=se(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Op(n)?Dp(n):Pi(n).x_()&&jp(n,e))}function Rp(t,e){const n=se(t),r=Pi(n);n.Ta.delete(e),r.x_()&&r1(n,e),n.Ta.size===0&&(r.x_()?r.B_():Ss(n)&&n.Aa.set("Unknown"))}function jp(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pi(t).H_(e)}function r1(t,e){t.Ra.$e(e),Pi(t).Y_(e)}function Dp(t){t.Ra=new BR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Pi(t).start(),t.Aa.aa()}function Op(t){return Ss(t)&&!Pi(t).M_()&&t.Ta.size>0}function Ss(t){return se(t).Ia.size===0}function s1(t){t.Ra=void 0}async function Kj(t){t.Aa.set("Online")}async function Qj(t){t.Ta.forEach((e,n)=>{jp(t,e)})}async function Yj(t,e){s1(t),Op(t)?(t.Aa.la(e),Dp(t)):t.Aa.set("Unknown")}async function Jj(t,e,n){if(t.Aa.set("Online"),e instanceof zE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ta.delete(l),s.Ra.removeTarget(l))}(t,e)}catch(r){K(ms,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _c(t,r)}else if(e instanceof Sl?t.Ra.Ye(e):e instanceof BE?t.Ra.it(e):t.Ra.et(e),!n.isEqual(re.min()))try{const r=await ZE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Ra.Pt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ta.get(d);f&&i.Ta.set(d,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const f=i.Ta.get(c);if(!f)return;i.Ta.set(c,f.withResumeToken(tt.EMPTY_BYTE_STRING,f.snapshotVersion)),r1(i,c);const m=new hr(f.target,c,d,f.sequenceNumber);jp(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K(ms,"Failed to raise snapshot:",r),await _c(t,r)}}async function _c(t,e,n){if(!Ai(e))throw e;t.Ia.add(1),await ga(t),t.Aa.set("Offline"),n||(n=()=>ZE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(ms,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await au(t)})}function i1(t,e){return e().catch(n=>_c(t,n,e))}async function lu(t){const e=se(t),n=Dr(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:yp;for(;Xj(e);)try{const s=await jj(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,Zj(e,s)}catch(s){await _c(e,s)}o1(e)&&a1(e)}function Xj(t){return Ss(t)&&t.Pa.length<10}function Zj(t,e){t.Pa.push(e);const n=Dr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function o1(t){return Ss(t)&&!Dr(t).M_()&&t.Pa.length>0}function a1(t){Dr(t).start()}async function eD(t){Dr(t).na()}async function tD(t){const e=Dr(t);for(const n of t.Pa)e.X_(n.mutations)}async function nD(t,e,n){const r=t.Pa.shift(),s=Sp.from(r,e,n);await i1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await lu(t)}async function rD(t,e){e&&Dr(t).Z_&&await async function(r,s){if(function(o){return UR(o)&&o!==z.ABORTED}(s.code)){const i=r.Pa.shift();Dr(r).N_(),await i1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await lu(r)}}(t,e),o1(t)&&a1(t)}async function Ly(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),K(ms,"RemoteStore received new credentials");const r=Ss(n);n.Ia.add(3),await ga(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await au(n)}async function sD(t,e){const n=se(t);e?(n.Ia.delete(2),await au(n)):e||(n.Ia.add(2),await ga(n),n.Aa.set("Unknown"))}function Pi(t){return t.Va||(t.Va=function(n,r,s){const i=se(n);return i.ia(),new zj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:Kj.bind(null,t),e_:Qj.bind(null,t),n_:Yj.bind(null,t),J_:Jj.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Op(t)?Dp(t):t.Aa.set("Unknown")):(await t.Va.stop(),s1(t))})),t.Va}function Dr(t){return t.ma||(t.ma=function(n,r,s){const i=se(n);return i.ia(),new $j(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:eD.bind(null,t),n_:rD.bind(null,t),ea:tD.bind(null,t),ta:nD.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await lu(t)):(await t.ma.stop(),t.Pa.length>0&&(K(ms,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Mp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vp(t,e){if(Hn("AsyncQueue",`${e}: ${t}`),Ai(t))return new Y(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{static emptySet(e){return new ri(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=ao(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ri)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ri;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this.fa=new Ne(Z.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):te(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class yi{constructor(e,n,r,s,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new yi(e,n,ri.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class oD{constructor(){this.queries=Fy(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=se(n),i=s.queries;s.queries=Fy(),i.forEach((o,l)=>{for(const c of l.wa)c.onError(r)})})(this,new Y(z.ABORTED,"Firestore shutting down"))}}function Fy(){return new Ts(t=>CE(t),tu)}async function aD(t,e){const n=se(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new iD,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Vp(o,`Initialization of query '${js(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&Lp(n)}async function lD(t,e){const n=se(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cD(t,e){const n=se(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.wa)l.Ca(s)&&(r=!0);o.ya=s}}r&&Lp(n)}function uD(t,e,n){const r=se(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function Lp(t){t.Da.forEach(e=>{e.next()})}var Gh,By;(By=Gh||(Gh={})).Fa="default",By.Cache="cache";class dD{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new yi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=yi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Gh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.key=e}}class c1{constructor(e){this.key=e}}class hD{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ue(),this.mutatedKeys=ue(),this.Xa=kE(e),this.eu=new ri(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Uy,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),_=nu(this.query,m)?m:null,I=!!g&&this.mutatedKeys.has(g.key),k=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let A=!1;g&&_?g.data.isEqual(_.data)?I!==k&&(r.track({type:3,doc:_}),A=!0):this.iu(g,_)||(r.track({type:2,doc:_}),A=!0,(c&&this.Xa(_,c)>0||d&&this.Xa(_,d)<0)&&(l=!0)):!g&&_?(r.track({type:0,doc:_}),A=!0):g&&!_&&(r.track({type:1,doc:g}),A=!0,(c||d)&&(l=!0)),A&&(_?(o=o.add(_),i=k?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{eu:o,ru:r,Ds:l,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((f,m)=>function(_,I){const k=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{At:A})}};return k(_)-k(I)}(f.type,m.type)||this.Xa(f.doc,m.doc)),this.su(r),s=s!=null&&s;const l=n&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,d=c!==this.Ya;return this.Ya=c,o.length!==0||d?{snapshot:new yi(this.query,e.eu,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Uy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ue(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new c1(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new l1(r))}),n}uu(e){this.Ha=e.qs,this.Za=ue();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return yi.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Up="SyncEngine";class fD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class pD{constructor(e){this.key=e,this.lu=!1}}class mD{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Ts(l=>CE(l),tu),this.Tu=new Map,this.Iu=new Set,this.du=new Ne(Z.comparator),this.Eu=new Map,this.Au=new kp,this.Ru={},this.Vu=new Map,this.mu=vi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function gD(t,e,n=!0){const r=m1(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await u1(r,e,n,!0),s}async function vD(t,e){const n=m1(t);await u1(n,e,!0,!1)}async function u1(t,e,n,r){const s=await Dj(t.localStore,yn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await yD(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&n1(t.remoteStore,s),l}async function yD(t,e,n,r,s){t.gu=(m,g,_)=>async function(k,A,E,y){let T=A.view.nu(E);T.Ds&&(T=await jy(k.localStore,A.query,!1).then(({documents:b})=>A.view.nu(b,T)));const R=y&&y.targetChanges.get(A.targetId),B=y&&y.targetMismatches.get(A.targetId)!=null,F=A.view.applyChanges(T,k.isPrimaryClient,R,B);return $y(k,A.targetId,F._u),F.snapshot}(t,m,g,_);const i=await jy(t.localStore,e,!0),o=new hD(e,i.qs),l=o.nu(i.documents),c=ma.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);$y(t,n,d._u);const f=new fD(e,n,o);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function xD(t,e,n){const r=se(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!tu(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Hh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Rp(r.remoteStore,s.targetId),qh(r,s.targetId)}).catch(Ni)):(qh(r,s.targetId),await Hh(r.localStore,s.targetId,!0))}async function _D(t,e){const n=se(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rp(n.remoteStore,r.targetId))}async function wD(t,e,n){const r=kD(t);try{const s=await function(o,l){const c=se(o),d=we.now(),f=l.reduce((_,I)=>_.add(I.key),ue());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let I=Wn(),k=ue();return c.Os.getEntries(_,f).next(A=>{I=A,I.forEach((E,y)=>{y.isValidDocument()||(k=k.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,I)).next(A=>{m=A;const E=[];for(const y of l){const T=DR(y,m.get(y.key).overlayedDocument);T!=null&&E.push(new bs(y.key,T,_E(T.value.mapValue),Vn.exists(!0)))}return c.mutationQueue.addMutationBatch(_,d,E,l)}).next(A=>{g=A;const E=A.applyToLocalDocumentSet(m,k);return c.documentOverlayCache.saveOverlays(_,A.batchId,E)})}).then(()=>({batchId:g.batchId,changes:AE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.Ru[o.currentUser.toKey()];d||(d=new Ne(ae)),d=d.insert(l,c),o.Ru[o.currentUser.toKey()]=d}(r,s.batchId,n),await va(r,s.changes),await lu(r.remoteStore)}catch(s){const i=Vp(s,"Failed to persist write");n.reject(i)}}async function d1(t,e){const n=se(t);try{const r=await Pj(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?pe(o.lu,14607):s.removedDocuments.size>0&&(pe(o.lu,42227),o.lu=!1))}),await va(n,r,e)}catch(r){await Ni(r)}}function zy(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=se(o);c.onlineState=l;let d=!1;c.queries.forEach((f,m)=>{for(const g of m.wa)g.va(l)&&(d=!0)}),d&&Lp(c)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ED(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Ne(Z.comparator);o=o.insert(i,dt.newNoDocument(i,re.min()));const l=ue().add(i),c=new iu(re.min(),new Map,new Ne(ae),o,l);await d1(r,c),r.du=r.du.remove(i),r.Eu.delete(e),Fp(r)}else await Hh(r.localStore,e,!1).then(()=>qh(r,e,n)).catch(Ni)}async function TD(t,e){const n=se(t),r=e.batch.batchId;try{const s=await Aj(n.localStore,e);f1(n,r,null),h1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await va(n,s)}catch(s){await Ni(s)}}async function bD(t,e,n){const r=se(t);try{const s=await function(o,l){const c=se(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(m=>(pe(m!==null,37113),f=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);f1(r,e,n),h1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await va(r,s)}catch(s){await Ni(s)}}function h1(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function f1(t,e,n){const r=se(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function qh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||p1(t,r)})}function p1(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Rp(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Fp(t))}function $y(t,e,n){for(const r of n)r instanceof l1?(t.Au.addReference(r.key,e),SD(t,r)):r instanceof c1?(K(Up,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||p1(t,r.key)):te(19791,{yu:r})}function SD(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(K(Up,"New document in limbo: "+n),t.Iu.add(r),Fp(t))}function Fp(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Z(Se.fromString(e)),r=t.mu.next();t.Eu.set(r,new pD(n)),t.du=t.du.insert(n,r),n1(t.remoteStore,new hr(yn(Tp(n.path)),r,"TargetPurposeLimboResolution",Jc.ue))}}async function va(t,e,n){const r=se(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((l,c)=>{o.push(r.gu(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Ap.Es(c.targetId,d);i.push(m)}}))}),await Promise.all(o),r.hu.J_(s),await async function(c,d){const f=se(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(d,g=>U.forEach(g.Is,_=>f.persistence.referenceDelegate.addReference(m,g.targetId,_)).next(()=>U.forEach(g.ds,_=>f.persistence.referenceDelegate.removeReference(m,g.targetId,_)))))}catch(m){if(!Ai(m))throw m;K(Pp,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const _=f.Fs.get(g),I=_.snapshotVersion,k=_.withLastLimboFreeSnapshotVersion(I);f.Fs=f.Fs.insert(g,k)}}}(r.localStore,i))}async function ID(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){K(Up,"User change. New user:",e.toKey());const r=await XE(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(l=>{l.forEach(c=>{c.reject(new Y(z.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await va(n,r.Bs)}}function CD(t,e){const n=se(t),r=n.Eu.get(e);if(r&&r.lu)return ue().add(r.key);{let s=ue();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const l=n.Pu.get(o);s=s.unionWith(l.view.tu)}return s}}function m1(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=d1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ED.bind(null,e),e.hu.J_=cD.bind(null,e.eventManager),e.hu.pu=uD.bind(null,e.eventManager),e}function kD(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bD.bind(null,e),e}class wc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ou(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Nj(this.persistence,new Ij,e.initialUser,this.serializer)}Du(e){return new JE(Np.Vi,this.serializer)}bu(e){return new Mj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wc.provider={build:()=>new wc};class ND extends wc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){pe(this.persistence.referenceDelegate instanceof xc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new dj(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?wt.withCacheSize(this.cacheSizeBytes):wt.DEFAULT;return new JE(r=>xc.Vi(r,n),this.serializer)}}class Kh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ID.bind(null,this.syncEngine),await sD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oD}()}createDatastore(e){const n=ou(e.databaseInfo.databaseId),r=function(i){return new Bj(i)}(e.databaseInfo);return function(i,o,l,c){return new Wj(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new qj(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>zy(this.syncEngine,n,0),function(){return My.C()?new My:new Vj}())}createSyncEngine(e,n){return function(s,i,o,l,c,d,f){const m=new mD(s,i,o,l,c,d);return f&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=se(s);K(ms,"RemoteStore shutting down."),i.Ia.add(5),await ga(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Kh.provider={build:()=>new Kh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="FirestoreClient";class PD{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ct.UNAUTHENTICATED,this.clientId=gp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K(Or,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(Or,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Vp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bd(t,e){t.asyncQueue.verifyOperationInProgress(),K(Or,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await XE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Nr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{K("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Nr("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function Hy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await RD(t);K(Or,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ly(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ly(e.remoteStore,s)),t._onlineComponents=e}async function RD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(Or,"Using user provided OfflineComponentProvider");try{await bd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Nr("Error using user provided cache. Falling back to memory cache: "+n),await bd(t,new wc)}}else K(Or,"Using default OfflineComponentProvider"),await bd(t,new ND(void 0));return t._offlineComponents}async function g1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(Or,"Using user provided OnlineComponentProvider"),await Hy(t,t._uninitializedComponentsProvider._online)):(K(Or,"Using default OnlineComponentProvider"),await Hy(t,new Kh))),t._onlineComponents}function jD(t){return g1(t).then(e=>e.syncEngine)}async function DD(t){const e=await g1(t),n=e.eventManager;return n.onListen=gD.bind(null,e.syncEngine),n.onUnlisten=xD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_D.bind(null,e.syncEngine),n}function OD(t,e,n={}){const r=new Sr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const f=new AD({next:g=>{f.Ou(),o.enqueueAndForget(()=>lD(i,m));const _=g.docs.has(l);!_&&g.fromCache?d.reject(new Y(z.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&c&&c.source==="server"?d.reject(new Y(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new dD(Tp(l.path),f,{includeMetadataChanges:!0,ka:!0});return aD(i,m)}(await DD(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="firestore.googleapis.com",Gy=!0;class qy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=y1,this.ssl=Gy}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Gy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cj)throw new Y(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new VP;switch(r.type){case"firstParty":return new BP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Wy.get(n);r&&(K("ComponentProvider","Removing Datastore"),Wy.delete(n),r.terminate())}(this),Promise.resolve()}}function MD(t,e,n,r={}){var s;t=Qo(t,Bp);const i=Si(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&($w(`https://${c}`),Hw("Firestore",!0)),o.host!==y1&&o.host!==c&&Nr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!kr(d,l)&&(t._setSettings(d),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=ct.MOCK_USER;else{f=bC(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Y(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ct(g)}t._authCredentials=new LP(new lE(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zp(this.firestore,e,this._query)}}class Ge{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ge(this.firestore,e,this._key)}toJSON(){return{type:Ge._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(fa(n,Ge._jsonSchema))return new Ge(e,r||null,new Z(Se.fromString(n.referencePath)))}}Ge._jsonSchemaVersion="firestore/documentReference/1.0",Ge._jsonSchema={type:Me("string",Ge._jsonSchemaVersion),referencePath:Me("string")};class na extends zp{constructor(e,n,r){super(e,n,Tp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new Z(e))}withConverter(e){return new na(this.firestore,e,this._path)}}function x1(t,e,...n){if(t=pt(t),arguments.length===1&&(e=gp.newId()),GP("doc","path",e),t instanceof Bp){const r=Se.fromString(e,...n);return ay(r),new Ge(t,null,new Z(r))}{if(!(t instanceof Ge||t instanceof na))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return ay(r),new Ge(t.firestore,t instanceof na?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="AsyncQueue";class Qy{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new e1(this,"async_queue_retry"),this.oc=()=>{const r=Td();r&&K(Ky,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Td();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Td();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Sr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ai(e))throw e;K(Ky,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Hn("INTERNAL UNHANDLED ERROR: ",Yy(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Mp.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&te(47125,{hc:Yy(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Yy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class $p extends Bp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Qy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qy(e),this._firestoreClient=void 0,await e}}}function VD(t,e){const n=typeof t=="object"?t:Xf(),r=typeof t=="string"?t:hc,s=ws(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=EC("firestore");i&&MD(s,...i)}return s}function _1(t){if(t._terminated)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LD(t),t._firestoreClient}function LD(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,d,f){return new sR(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,v1(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new PD(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $t(tt.fromBase64String(e))}catch(n){throw new Y(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $t(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fa(e,$t._jsonSchema))return $t.fromBase64String(e.bytes)}}$t._jsonSchemaVersion="firestore/bytes/1.0",$t._jsonSchema={type:Me("string",$t._jsonSchemaVersion),bytes:Me("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_n._jsonSchemaVersion}}static fromJSON(e){if(fa(e,_n._jsonSchema))return new _n(e.latitude,e.longitude)}}_n._jsonSchemaVersion="firestore/geoPoint/1.0",_n._jsonSchema={type:Me("string",_n._jsonSchemaVersion),latitude:Me("number"),longitude:Me("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:wn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fa(e,wn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new wn(e.vectorValues);throw new Y(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wn._jsonSchemaVersion="firestore/vectorValue/1.0",wn._jsonSchema={type:Me("string",wn._jsonSchemaVersion),vectorValues:Me("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=/^__.*__$/;class FD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new bs(e,this.data,this.fieldMask,n,this.fieldTransforms):new pa(e,this.data,n,this.fieldTransforms)}}function E1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ec:t})}}class Wp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Wp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ec(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(E1(this.Ec)&&UD.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class BD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ou(e)}Dc(e,n,r,s=!1){return new Wp({Ec:e,methodName:n,bc:r,path:Xe.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zD(t){const e=t._freezeSettings(),n=ou(t._databaseId);return new BD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $D(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);I1("Data must be an object, but it was:",o,r);const l=b1(r,o);let c,d;if(i.merge)c=new nn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=HD(e,m,n);if(!o.contains(g))throw new Y(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);GD(f,g)||f.push(g)}c=new nn(f),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new FD(new zt(l),c,d)}function T1(t,e){if(S1(t=pt(t)))return I1("Unsupported field value:",e,t),b1(t,e);if(t instanceof w1)return function(r,s){if(!E1(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=T1(l,s.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=we.fromDate(r);return{timestampValue:yc(s.serializer,i)}}if(r instanceof we){const i=new we(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yc(s.serializer,i)}}if(r instanceof _n)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $t)return{bytesValue:$E(s.serializer,r._byteString)};if(r instanceof Ge){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Cp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof wn)return function(o,l){return{mapValue:{fields:{[yE]:{stringValue:xE},[fc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.wc("VectorValues must only contain numeric values.");return bp(l.serializer,d)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${vp(r)}`)}(t,e)}function b1(t,e){const n={};return hE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(t,(r,s)=>{const i=T1(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function S1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof we||t instanceof _n||t instanceof $t||t instanceof Ge||t instanceof w1||t instanceof wn)}function I1(t,e,n){if(!S1(n)||!uE(n)){const r=vp(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function HD(t,e,n){if((e=pt(e))instanceof Hp)return e._internalPath;if(typeof e=="string")return C1(t,e);throw Ec("Field path arguments must be of type string or ",t,!1,void 0,n)}const WD=new RegExp("[~\\*/\\[\\]]");function C1(t,e,n){if(e.search(WD)>=0)throw Ec(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hp(...e.split("."))._internalPath}catch{throw Ec(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ec(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Y(z.INVALID_ARGUMENT,l+t+c)}function GD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(N1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qD extends k1{data(){return super.data()}}function N1(t,e){return typeof e=="string"?C1(t,e):e instanceof Hp?e._internalPath:e._delegate._internalPath}class KD{convertValue(e,n="none"){switch(jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Es(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[fc].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Re(o.doubleValue));return new wn(i)}convertGeoPoint(e){return new _n(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Jo(e));default:return null}}convertTimestamp(e){const n=Pr(e);return new we(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);pe(QE(r),9688,{name:e});const s=new Xo(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(n)||Hn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class co{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rs extends k1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Il(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(N1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=rs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}rs._jsonSchemaVersion="firestore/documentSnapshot/1.0",rs._jsonSchema={type:Me("string",rs._jsonSchemaVersion),bundleSource:Me("string","DocumentSnapshot"),bundleName:Me("string"),bundle:Me("string")};class Il extends rs{data(e={}){return super.data(e)}}class Co{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new co(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Il(this._firestore,this._userDataWriter,r.key,r,new co(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Il(s._firestore,s._userDataWriter,l.doc.key,l.doc,new co(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Il(s._firestore,s._userDataWriter,l.doc.key,l.doc,new co(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:YD(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(t){t=Qo(t,Ge);const e=Qo(t.firestore,$p);return OD(_1(e),t._key).then(n=>tO(e,t,n))}Co._jsonSchemaVersion="firestore/querySnapshot/1.0",Co._jsonSchema={type:Me("string",Co._jsonSchemaVersion),bundleSource:Me("string","QuerySnapshot"),bundleName:Me("string"),bundle:Me("string")};class XD extends KD{constructor(e){super(),this.firestore=e}convertBytes(e){return new $t(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}function ZD(t,e,n){t=Qo(t,Ge);const r=Qo(t.firestore,$p),s=QD(t.converter,e);return eO(r,[$D(zD(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Vn.none())])}function eO(t,e){return function(r,s){const i=new Sr;return r.asyncQueue.enqueueAndForget(async()=>wD(await jD(r),s,i)),i.promise}(_1(t),e)}function tO(t,e,n){const r=n.docs.get(e._key),s=new XD(t);return new rs(t,s,e._key,r,new co(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ki=s})(Ii),En(new ln("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new $p(new UP(r.getProvider("auth-internal")),new zP(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Y(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Gt(ny,ry,e),Gt(ny,ry,"esm2017")})();const nO={apiKey:"AIzaSyCiwB1htquwW3GT5h57rwM35Ei4T9MG0_8",authDomain:"seamunssite.firebaseapp.com",projectId:"seamunssite",storageBucket:"seamunssite.firebasestorage.app",messagingSenderId:"834316126529",appId:"1:834316126529:web:983e1745ef677df16cf9c0",measurementId:"G-GJZXN823XL"},rO=!0,xi=rO?Jw(nO):null,dn=xi?p2(xi):null,Tc=xi?VD(xi):null;xi&&typeof window<"u"&&jP(xi);const Gp=N.createContext(null);function Jy(t){return t.includes("auth/invalid-credential")||t.includes("auth/wrong-password")?"Invalid email or password.":t.includes("auth/user-not-found")?"No account found for this email.":t.includes("auth/email-already-in-use")?"This email is already registered.":t.includes("auth/weak-password")?"Password should be at least 6 characters.":t.includes("auth/invalid-email")?"Please enter a valid email address.":t.includes("auth/too-many-requests")?"Too many attempts. Try again later.":t}function sO(t){return t?{uid:t.uid,name:t.displayName??null,email:t.email??null,picture:t.photoURL??null}:null}function iO({children:t}){const[e,n]=N.useState(null),[r,s]=N.useState(!0),[i,o]=N.useState(null);N.useEffect(()=>{if(!dn)return;const _=nA(dn,I=>{n(sO(I)),s(!1)});return()=>_()},[]);const l=N.useCallback(async()=>{if(dn){o(null),s(!0);try{const _=new An;await TA(dn,_)}catch(_){n(null),o(_ instanceof Error?_.message:"Google sign-in failed")}finally{s(!1)}}},[]),c=N.useCallback(async(_,I)=>{if(dn){o(null),s(!0);try{await JN(dn,_.trim(),I)}catch(k){const A=k instanceof Error?k.message:"Sign-in failed";o(A.includes("auth/")?Jy(A):A)}finally{s(!1)}}},[]),d=N.useCallback(async(_,I,k)=>{if(dn){o(null),s(!0);try{const A=await YN(dn,_.trim(),I);k!=null&&k.trim()&&A.user&&await ZN(A.user,{displayName:k.trim()})}catch(A){const E=A instanceof Error?A.message:"Sign-up failed";o(E.includes("auth/")?Jy(E):E)}finally{s(!1)}}},[]),f=N.useCallback(async()=>{dn&&await rA(dn),n(null),o(null)},[]),m=N.useCallback(()=>o(null),[]),g={user:e,isAuthenticated:!!e,isLoading:r,login:l,loginWithEmail:c,signUpWithEmail:d,logout:f,authError:i,clearAuthError:m};return u.jsx(Gp.Provider,{value:g,children:t})}const A1={user:null,isAuthenticated:!1,isLoading:!1,login:async()=>{},loginWithEmail:async()=>{},signUpWithEmail:async()=>{},logout:async()=>{},authError:null,clearAuthError:()=>{}};function oO({children:t}){return u.jsx(Gp.Provider,{value:A1,children:t})}function qp(){return N.useContext(Gp)??A1}const Xy="seamuns-dashboard-theme",Zy="seamuns-dashboard-color-mode",ex="seamuns-dashboard-color-theme",P1=[{id:"default",label:"Default",emoji:"",brand:"#2563eb"},{id:"health",label:"Health",emoji:"",brand:"#0d9488"},{id:"war",label:"War & conflict",emoji:"",brand:"#b91c1c"},{id:"women",label:"Women",emoji:"",brand:"#a855f7"},{id:"nature",label:"Nature",emoji:"",brand:"#16a34a"},{id:"peace",label:"Peace",emoji:"",brand:"#0284c7"},{id:"economy",label:"Economy",emoji:"",brand:"#d97706"},{id:"education",label:"Education",emoji:"",brand:"#4f46e5"},{id:"rights",label:"Human rights",emoji:"",brand:"#dc2626"}],Qh="gold-blue",R1=[{id:"gold-blue",label:"Gold & Blue",emoji:""},{id:"red",label:"Red",emoji:""},{id:"orange",label:"Orange",emoji:""},{id:"yellow",label:"Yellow",emoji:""},{id:"green",label:"Green",emoji:""},{id:"light-blue",label:"Light Blue",emoji:""},{id:"blue",label:"Blue",emoji:""},{id:"purple",label:"Purple",emoji:""},{id:"pink",label:"Pink",emoji:""},{id:"brown",label:"Brown",emoji:""},{id:"monochromatic",label:"Monochromatic",emoji:""}],j1=N.createContext(null),aO=t=>P1.some(e=>e.id===t),lO=t=>R1.some(e=>e.id===t),cO=t=>t==="light"||t==="dark";function uO({children:t}){const[e,n]=N.useState(()=>{if(typeof window>"u")return"default";const f=localStorage.getItem(Xy);return f&&aO(f)?f:"default"}),[r,s]=N.useState(()=>{if(typeof window>"u")return Qh;const f=localStorage.getItem(ex);return f&&lO(f)?f:Qh}),[i,o]=N.useState(()=>{if(typeof window>"u")return"light";const f=localStorage.getItem(Zy);return f&&cO(f)?f:"light"});N.useEffect(()=>{document.documentElement.setAttribute("data-theme",e),localStorage.setItem(Xy,e)},[e]),N.useEffect(()=>{document.documentElement.setAttribute("data-color-theme",r),localStorage.setItem(ex,r)},[r]),N.useEffect(()=>{document.documentElement.setAttribute("data-color-mode",i),localStorage.setItem(Zy,i)},[i]);const l=f=>n(f),c=f=>s(f),d=f=>o(f);return u.jsx(j1.Provider,{value:{themeId:e,setThemeId:l,themes:P1,colorThemeId:r,setColorThemeId:c,colorThemes:R1,colorMode:i,setColorMode:d},children:t})}function dO(){const t=N.useContext(j1);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),D1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...fO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:D1("lucide",s),...l},[...o.map(([d,f])=>N.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=(t,e)=>{const n=N.forwardRef(({className:r,...s},i)=>N.createElement(pO,{ref:i,iconNode:e,className:D1(`lucide-${hO(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=ne("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=ne("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=ne("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=ne("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=ne("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=ne("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=ne("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=ne("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=ne("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=ne("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=ne("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=ne("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=ne("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=ne("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=ne("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=ne("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=ne("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=ne("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=ne("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=ne("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=ne("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=ne("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=ne("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=ne("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=ne("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=ne("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=ne("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=ne("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=ne("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=ne("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=ne("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=ne("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=ne("Vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ix(){const{login:t,loginWithEmail:e,signUpWithEmail:n,logout:r,isAuthenticated:s,user:i,isLoading:o,authError:l,clearAuthError:c}=qp(),[d,f]=N.useState(!1),[m,g]=N.useState("login"),[_,I]=N.useState(""),[k,A]=N.useState(""),[E,y]=N.useState(""),T=N.useRef(null);N.useEffect(()=>{if(!d)return;const F=b=>{T.current&&!T.current.contains(b.target)&&f(!1)};return document.addEventListener("click",F),()=>document.removeEventListener("click",F)},[d]);const R=()=>{f(F=>!F),d||(c(),I(""),A(""),y(""))},B=F=>{F.preventDefault(),m==="login"?e(_,k):n(_,k,E||void 0)};return o&&!d?u.jsx("span",{className:"text-xs text-[var(--text-muted)] px-2 py-1.5",children:"Loading"}):s&&i?u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-xs text-[var(--text-muted)]",children:[i.picture?u.jsx("img",{src:i.picture,alt:i.name??"User",className:"w-6 h-6 rounded-lg object-cover border border-[var(--border)]"}):u.jsx("div",{className:"w-6 h-6 rounded-lg bg-[var(--brand-soft)] flex items-center justify-center",children:u.jsx(fu,{className:"w-3 h-3 text-[var(--brand)]"})}),u.jsx("span",{className:"text-[var(--text)] max-w-[120px] truncate",children:i.name??i.email})]}),u.jsxs("button",{type:"button",onClick:()=>r(),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors",children:[u.jsx(bO,{className:"w-3 h-3"}),"Log out"]})]}):u.jsxs("div",{className:"relative",ref:T,children:[u.jsxs("button",{type:"button",onClick:R,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--brand)] text-white hover:opacity-90 transition-opacity",children:[u.jsx(TO,{className:"w-3 h-3"}),"Log in / Sign up",u.jsx(cu,{className:`w-3 h-3 transition-transform ${d?"rotate-180":""}`})]}),d&&u.jsxs("div",{className:"absolute right-0 top-full mt-1 z-50 w-72 rounded-lg border border-[var(--border)] bg-[var(--bg-elevated)] shadow-lg p-3",children:[u.jsxs("button",{type:"button",onClick:()=>{t(),f(!1)},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-[var(--text)] bg-[var(--bg-card)] hover:bg-[var(--border)] border border-[var(--border)] transition-colors",children:[u.jsx(L1,{className:"w-4 h-4 text-[var(--brand)]"}),"Continue with Gmail"]}),u.jsx("div",{className:"my-3 border-t border-[var(--border)]"}),u.jsxs("div",{className:"flex gap-1 p-0.5 rounded-lg bg-[var(--bg-card)] border border-[var(--border)]",children:[u.jsx("button",{type:"button",onClick:()=>{g("login"),c()},className:`flex-1 px-2 py-1.5 rounded-md text-xs font-medium transition-colors ${m==="login"?"bg-[var(--brand)] text-white":"text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:"Log in"}),u.jsx("button",{type:"button",onClick:()=>{g("signup"),c()},className:`flex-1 px-2 py-1.5 rounded-md text-xs font-medium transition-colors ${m==="signup"?"bg-[var(--brand)] text-white":"text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:"Sign up"})]}),u.jsxs("form",{onSubmit:B,className:"space-y-2 mt-2",children:[m==="signup"&&u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Name (optional)"}),u.jsx("input",{type:"text",value:E,onChange:F=>y(F.target.value),placeholder:"Your name",className:"mt-0.5 w-full px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)]"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Email"}),u.jsx("input",{type:"email",value:_,onChange:F=>I(F.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email",className:"mt-0.5 w-full px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)]"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Password"}),u.jsx("input",{type:"password",value:k,onChange:F=>A(F.target.value),placeholder:m==="signup"?"At least 6 characters":"",required:!0,minLength:m==="signup"?6:void 0,autoComplete:m==="login"?"current-password":"new-password",className:"mt-0.5 w-full px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)]"})]}),l&&u.jsx("p",{className:"text-xs text-[var(--danger)]",children:l}),u.jsx("button",{type:"submit",disabled:o,className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium bg-[var(--brand)] text-white hover:opacity-90 transition-opacity disabled:opacity-60",children:o?"Please wait":m==="login"?"Log in with email":"Create account"})]})]})]})}function ox(){const{colorThemeId:t,setColorThemeId:e,colorThemes:n,colorMode:r,setColorMode:s,setThemeId:i}=dO(),[o,l]=N.useState(!1),c=N.useRef(null);N.useEffect(()=>{function f(m){c.current&&!c.current.contains(m.target)&&l(!1)}return o&&document.addEventListener("click",f),()=>document.removeEventListener("click",f)},[o]);const d=n.find(f=>f.id===t)??n[0];return u.jsxs("div",{className:"relative",ref:c,children:[u.jsxs("button",{type:"button",onClick:()=>l(!o),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text)] hover:bg-[var(--bg-card)] border border-[var(--border)] bg-[var(--bg-elevated)] transition-colors","aria-expanded":o,"aria-haspopup":"listbox","aria-label":"Theme",children:[u.jsx(CO,{className:"w-4 h-4 flex-shrink-0 text-[var(--text-muted)]"}),u.jsx("span",{className:"hidden sm:inline",children:"Theme"}),u.jsx("span",{className:"text-[var(--brand)]",title:d.label,"aria-hidden":!0,children:d.emoji}),u.jsx(cu,{className:`w-4 h-4 flex-shrink-0 text-[var(--text-muted)] transition-transform ${o?"rotate-180":""}`,"aria-hidden":!0})]}),o&&u.jsxs("div",{className:"absolute right-0 top-full mt-1.5 py-2 rounded-xl border border-[var(--border)] bg-[var(--bg-card)] shadow-[var(--shadow-card)] shadow-lg z-50 min-w-[200px]",role:"dialog","aria-label":"Theme options",children:[u.jsx("div",{className:"px-3 py-1.5 text-xs font-medium text-[var(--text-muted)] border-b border-[var(--border)] mb-2",children:"Appearance"}),u.jsxs("div",{className:"flex gap-1 px-2 pb-2",children:[u.jsxs("button",{type:"button",onClick:()=>s("light"),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${r==="light"?"bg-[var(--brand)] text-white shadow-sm":"text-[var(--text-muted)] hover:bg-[var(--bg-elevated)] hover:text-[var(--text)]"}`,"aria-pressed":r==="light",children:[u.jsx(jO,{className:"w-4 h-4"}),"Light"]}),u.jsxs("button",{type:"button",onClick:()=>s("dark"),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${r==="dark"?"bg-[var(--brand)] text-white shadow-sm":"text-[var(--text-muted)] hover:bg-[var(--bg-elevated)] hover:text-[var(--text)]"}`,"aria-pressed":r==="dark",children:[u.jsx(IO,{className:"w-4 h-4"}),"Dark"]})]}),u.jsxs("div",{className:"px-3 py-1.5 text-xs font-medium text-[var(--text-muted)] border-b border-[var(--border)] mb-2",children:["Theme color ",u.jsx("span",{className:"font-normal",children:"(default: Gold & Blue)"})]}),u.jsx("div",{className:"max-h-[260px] overflow-y-auto",role:"listbox","aria-label":"Theme color",children:n.map(f=>{const m=f.id===Qh,g=t===f.id;return u.jsxs("button",{type:"button",role:"option","aria-selected":g,onClick:()=>{e(f.id),i("default"),l(!1)},className:`flex items-center gap-2 w-full px-3 py-2 text-left text-sm transition-colors whitespace-nowrap min-w-0 ${g?"bg-[var(--brand)] text-white":"text-[var(--text)] hover:bg-[var(--bg-elevated)]"}`,children:[u.jsx("span",{className:"text-base flex-shrink-0","aria-hidden":!0,children:f.emoji}),u.jsx("span",{className:"truncate",children:f.label}),m&&u.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded text-[10px] font-medium flex-shrink-0 ${g?"bg-white/20 text-white":"bg-[var(--accent-soft)] text-[var(--accent)]"}`,children:"Default"}),g&&u.jsx("span",{className:"ml-auto text-white","aria-hidden":!0,children:""})]},f.id)})})]})]})}function W1({className:t="h-8 w-auto"}){return u.jsx("img",{src:"/logo.png",alt:"SEAMUNs",className:t,fetchPriority:"high"})}const ax=[{to:"/",label:" Home"},{to:"/chair",label:" Chair Room"},{to:"/delegate",label:" Delegate"}];function OO(){const[t,e]=N.useState(!1),n=xs(),r=()=>e(!1);return N.useEffect(()=>{r()},[n.pathname]),u.jsxs("div",{className:"min-h-screen flex flex-col",children:[u.jsxs("header",{className:"sticky top-0 z-50 border-b border-[var(--border)] bg-[var(--bg-base)]/95 backdrop-blur-sm shadow-[0_1px_0_0_var(--border)]",children:[u.jsxs("div",{className:"max-w-[1600px] mx-auto px-2 sm:px-4 py-1.5 sm:py-2 flex items-center justify-between gap-2 min-h-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3 min-w-0",children:[u.jsxs(ud,{to:"/",className:"font-semibold text-base sm:text-lg md:text-xl text-[var(--text)] hover:text-[var(--brand)] transition-colors flex items-center gap-1.5 sm:gap-2 whitespace-nowrap min-w-0 py-1",onClick:r,children:[u.jsx(W1,{className:"h-5 sm:h-7 w-auto flex-shrink-0"}),u.jsx("span",{className:"hidden sm:inline truncate",children:"SEAMUNs Dashboard"}),u.jsx("span",{className:"sm:hidden truncate",children:"SEAMUNs"}),u.jsx("span",{className:"text-[var(--brand)]/80 text-sm hidden sm:inline",children:""})]}),u.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[var(--text-muted)] hover:text-[var(--brand)] transition-colors hidden md:inline",children:"seamuns.site"})]}),u.jsxs("div",{className:"hidden md:flex items-center gap-1.5",children:[u.jsx(ox,{}),u.jsx("nav",{className:"flex items-center gap-0.5 p-0.5 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] flex-nowrap",children:ax.map(({to:s,label:i})=>u.jsx(ud,{to:s,className:({isActive:o})=>`px-2.5 py-1 rounded-md text-xs font-medium transition-colors whitespace-nowrap ${o?"bg-[var(--brand)] text-white shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:i},s))}),u.jsx(ix,{})]}),u.jsxs("div",{className:"flex md:hidden items-center gap-0.5",children:[u.jsx(ox,{}),u.jsx("button",{type:"button",onClick:()=>e(!t),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors","aria-expanded":t,"aria-label":t?"Close menu":"Open menu",children:t?u.jsx(pu,{className:"w-4 h-4"}):u.jsx(SO,{className:"w-4 h-4"})}),u.jsx(ix,{})]})]}),t&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40 bg-black/30 md:hidden",onClick:r,"aria-hidden":!0}),u.jsx("div",{className:"fixed top-11 right-0 bottom-0 left-0 z-50 md:hidden bg-[var(--bg-elevated)] border-l border-[var(--border)] shadow-xl overflow-y-auto",role:"dialog","aria-label":"Navigation menu",children:u.jsxs("nav",{className:"flex flex-col p-4 gap-1",children:[ax.map(({to:s,label:i})=>u.jsx(ud,{to:s,onClick:r,className:({isActive:o})=>`px-4 py-3 rounded-lg text-sm font-medium transition-colors ${o?"bg-[var(--brand)] text-white":"text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:i},s)),u.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",onClick:r,className:"px-4 py-3 rounded-lg text-sm text-[var(--text-muted)] hover:text-[var(--brand)] hover:bg-[var(--bg-card)]",children:"seamuns.site "})]})})]})]}),u.jsx("main",{className:"main-content flex-1 min-w-0",children:u.jsx(XI,{})}),u.jsxs("footer",{className:"border-t border-[var(--border)] py-2 sm:py-3 px-3 sm:px-4 text-center text-[10px] sm:text-xs text-[var(--text-muted)] bg-[var(--bg-elevated)]/50",children:["Part of ",u.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",className:"text-[var(--brand)] hover:underline",children:"SEAMUNs"}),"  Model UN conferences across South East Asia"]})]})}const MO={Afghanistan:"AF",Albania:"AL",Algeria:"DZ",Andorra:"AD",Angola:"AO","Antigua and Barbuda":"AG",Argentina:"AR",Armenia:"AM",Australia:"AU",Austria:"AT",Azerbaijan:"AZ",Bahamas:"BS",Bahrain:"BH",Bangladesh:"BD",Barbados:"BB",Belarus:"BY",Belgium:"BE",Belize:"BZ",Benin:"BJ",Bhutan:"BT",Bolivia:"BO","Bosnia and Herzegovina":"BA",Botswana:"BW",Brazil:"BR","Brunei Darussalam":"BN",Bulgaria:"BG","Burkina Faso":"BF",Burundi:"BI","Cabo Verde":"CV",Cambodia:"KH",Cameroon:"CM",Canada:"CA","Central African Republic":"CF",Chad:"TD",Chile:"CL",China:"CN",Colombia:"CO",Comoros:"KM",Congo:"CG","Costa Rica":"CR",Croatia:"HR",Cuba:"CU",Cyprus:"CY","Czech Republic":"CZ","Cte d'Ivoire":"CI","Democratic People's Republic of Korea":"KP","Democratic Republic of the Congo":"CD",Denmark:"DK",Djibouti:"DJ",Dominica:"DM","Dominican Republic":"DO",Ecuador:"EC",Egypt:"EG","El Salvador":"SV","Equatorial Guinea":"GQ",Eritrea:"ER",Estonia:"EE",Eswatini:"SZ",Ethiopia:"ET",Fiji:"FJ",Finland:"FI",France:"FR",Gabon:"GA",Gambia:"GM",Georgia:"GE",Germany:"DE",Ghana:"GH",Greece:"GR",Grenada:"GD",Guatemala:"GT",Guinea:"GN","Guinea-Bissau":"GW",Guyana:"GY",Haiti:"HT",Honduras:"HN",Hungary:"HU",Iceland:"IS",India:"IN",Indonesia:"ID",Iran:"IR",Iraq:"IQ",Ireland:"IE",Israel:"IL",Italy:"IT",Jamaica:"JM",Japan:"JP",Jordan:"JO",Kazakhstan:"KZ",Kenya:"KE",Kiribati:"KI",Kuwait:"KW",Kyrgyzstan:"KG","Lao People's Democratic Republic":"LA",Latvia:"LV",Lebanon:"LB",Lesotho:"LS",Liberia:"LR",Libya:"LY",Liechtenstein:"LI",Lithuania:"LT",Luxembourg:"LU",Madagascar:"MG",Malawi:"MW",Malaysia:"MY",Maldives:"MV",Mali:"ML",Malta:"MT","Marshall Islands":"MH",Mauritania:"MR",Mauritius:"MU",Mexico:"MX","Micronesia (Federated States of)":"FM",Moldova:"MD",Monaco:"MC",Mongolia:"MN",Montenegro:"ME",Morocco:"MA",Mozambique:"MZ",Myanmar:"MM",Namibia:"NA",Nauru:"NR",Nepal:"NP",Netherlands:"NL","New Zealand":"NZ",Nicaragua:"NI",Niger:"NE",Nigeria:"NG","North Macedonia":"MK",Norway:"NO",Oman:"OM",Pakistan:"PK",Palau:"PW",Panama:"PA","Papua New Guinea":"PG",Paraguay:"PY",Peru:"PE",Philippines:"PH",Poland:"PL",Portugal:"PT",Qatar:"QA","Republic of Korea":"KR",Romania:"RO","Russian Federation":"RU",Rwanda:"RW","Saint Kitts and Nevis":"KN","Saint Lucia":"LC","Saint Vincent and the Grenadines":"VC",Samoa:"WS","San Marino":"SM","Sao Tome and Principe":"ST","Saudi Arabia":"SA",Senegal:"SN",Serbia:"RS",Seychelles:"SC","Sierra Leone":"SL",Singapore:"SG",Slovakia:"SK",Slovenia:"SI","Solomon Islands":"SB",Somalia:"SO","South Africa":"ZA","South Sudan":"SS",Spain:"ES","Sri Lanka":"LK",Sudan:"SD",Suriname:"SR",Sweden:"SE",Switzerland:"CH","Syrian Arab Republic":"SY",Tajikistan:"TJ",Thailand:"TH","Timor-Leste":"TL",Togo:"TG",Tonga:"TO","Trinidad and Tobago":"TT",Tunisia:"TN",Turkey:"TR",Turkmenistan:"TM",Tuvalu:"TV",Uganda:"UG",Ukraine:"UA","United Arab Emirates":"AE","United Kingdom":"GB","United Republic of Tanzania":"TZ","United States":"US",Uruguay:"UY",Uzbekistan:"UZ",Vanuatu:"VU",Venezuela:"VE","Viet Nam":"VN",Yemen:"YE",Zambia:"ZM",Zimbabwe:"ZW"};function VO(t){return/^[A-Z]{2}$/i.test(t)?Array.from(t.toUpperCase()).map(e=>String.fromCodePoint(127397+e.charCodeAt(0))).join(""):""}function G1(t){const e=MO[t];return e?VO(e):""}const LO={committee:"UNSC",topic:"Cybersecurity and International Peace",universe:"",sessionStarted:!1,sessionStartTime:null,delegates:[],delegateStrikes:[],delegateFeedback:[],motions:[],speakers:[],activeSpeaker:null,speakerDuration:60,rollCallComplete:!1,crisisSlides:[],crisisSpeakers:[],crisisFacts:[],crisisPathways:[],archive:[],voteInProgress:null,delegateVotes:{},flowChecklist:{},prepChecklist:{},delegationEmojiOverrides:{},chairName:"",chairEmail:""},q1=N.createContext(null);function UO({children:t}){const[e,n]=N.useState(LO),r=N.useCallback(M=>{n(L=>({...L,committee:M}))},[]),s=N.useCallback(M=>{n(L=>({...L,topic:M}))},[]),i=N.useCallback(M=>{n(L=>({...L,universe:M}))},[]),o=N.useCallback(M=>{n(L=>({...L,chairName:M}))},[]),l=N.useCallback(M=>{n(L=>({...L,chairEmail:M}))},[]),c=N.useCallback(()=>{n(M=>({...M,sessionStarted:!0,sessionStartTime:new Date().toISOString()}))},[]),d=N.useCallback(()=>{n(M=>({...M,sessionStarted:!1,sessionStartTime:null}))},[]),f=N.useCallback(M=>{n(L=>({...L,delegates:[...L.delegates,{...M,id:crypto.randomUUID()}]}))},[]),m=N.useCallback(M=>{n(L=>({...L,delegates:L.delegates.filter(q=>q.id!==M),delegateStrikes:L.delegateStrikes.filter(q=>q.delegateId!==M),delegateFeedback:L.delegateFeedback.filter(q=>q.delegateId!==M)}))},[]),g=N.useCallback((M,L)=>{n(q=>({...q,delegates:q.delegates.map(me=>me.id===M?{...me,...L}:me)}))},[]),_=N.useCallback((M,L)=>{n(q=>({...q,motions:[...q.motions,{id:crypto.randomUUID(),text:M,type:L,starred:!1,timestamp:new Date().toISOString(),status:"active"}]}))},[]),I=N.useCallback(M=>{n(L=>({...L,motions:L.motions.map(q=>q.id===M?{...q,starred:!q.starred}:q)}))},[]),k=N.useCallback((M,L)=>{n(q=>({...q,motions:q.motions.map(me=>me.id===M?{...me,status:L}:me)}))},[]),A=N.useCallback(M=>{n(L=>{const q=L.motions.find(me=>me.id===M);return!q||q.type==="point"?L:{...L,voteInProgress:q,delegateVotes:{}}})},[]),E=N.useCallback((M,L)=>{n(q=>({...q,delegateVotes:{...q.delegateVotes,[M]:L}}))},[]),y=N.useCallback(()=>{n(M=>{if(!M.voteInProgress)return M;const L=Object.values(M.delegateVotes).filter(nt=>nt==="yes").length,q=Object.values(M.delegateVotes).filter(nt=>nt==="no").length,me=Object.values(M.delegateVotes).filter(nt=>nt==="abstain").length;return{...M,motions:M.motions.map(nt=>nt.id===M.voteInProgress.id?{...nt,votes:{yes:L,no:q,abstain:me},status:L>q?"passed":"failed"}:nt),voteInProgress:null,delegateVotes:{}}})},[]),T=N.useCallback((M,L,q)=>{n(me=>({...me,speakers:[...me.speakers,{id:crypto.randomUUID(),delegateId:M,country:L,name:q,duration:me.speakerDuration,speaking:!1}]}))},[]),R=N.useCallback(M=>{n(L=>{var q;return{...L,speakers:L.speakers.filter(me=>me.id!==M),activeSpeaker:((q=L.activeSpeaker)==null?void 0:q.id)===M?null:L.activeSpeaker}})},[]),B=N.useCallback(M=>{n(L=>({...L,activeSpeaker:M,speakers:L.speakers.map(q=>q.id===(M==null?void 0:M.id)?{...q,speaking:!0,startTime:Date.now()}:{...q,speaking:!1})}))},[]),F=N.useCallback(M=>{n(L=>({...L,speakerDuration:M}))},[]),b=N.useCallback(M=>{n(L=>({...L,rollCallComplete:M}))},[]),x=N.useCallback(M=>{n(L=>({...L,crisisSlides:[...L.crisisSlides,M]}))},[]),S=N.useCallback(M=>{n(L=>({...L,crisisSpeakers:[...L.crisisSpeakers,M]}))},[]),C=N.useCallback(M=>{n(L=>({...L,crisisFacts:[...L.crisisFacts,M]}))},[]),j=N.useCallback(M=>{n(L=>({...L,crisisPathways:[...L.crisisPathways,M]}))},[]),P=N.useCallback((M,L,q)=>{n(me=>({...me,archive:[...me.archive,{type:M,name:L,content:q}]}))},[]),w=N.useCallback((M,L)=>{n(q=>({...q,delegateStrikes:[...q.delegateStrikes,{delegateId:M,type:L,timestamp:new Date().toISOString()}]}))},[]),ie=N.useCallback((M,L)=>{n(q=>{const me=[...q.delegateStrikes].reverse().findIndex(Yn=>Yn.delegateId===M&&Yn.type===L);if(me===-1)return q;const nt=q.delegateStrikes.length-1-me;return{...q,delegateStrikes:q.delegateStrikes.filter((Yn,Ri)=>Ri!==nt)}})},[]),$e=N.useCallback((M,L)=>{n(q=>({...q,delegateFeedback:[...q.delegateFeedback,{delegateId:M,type:L,timestamp:new Date().toISOString()}]}))},[]),Lt=N.useCallback(M=>{const L={compliment:0,concern:0};return e.delegateFeedback.filter(q=>q.delegateId===M).forEach(q=>{L[q.type]=(L[q.type]??0)+1}),L},[e.delegateFeedback]),Ve=N.useCallback(M=>{n(L=>({...L,flowChecklist:{...L.flowChecklist,[M]:!L.flowChecklist[M]}}))},[]),G=N.useCallback(M=>!!e.flowChecklist[M],[e.flowChecklist]),X=N.useCallback(()=>{n(M=>({...M,flowChecklist:{}}))},[]),$=N.useCallback(M=>{n(L=>({...L,prepChecklist:{...L.prepChecklist,[M]:!L.prepChecklist[M]}}))},[]),V=N.useCallback(M=>!!e.prepChecklist[M],[e.prepChecklist]),J=N.useCallback(()=>{n(M=>({...M,prepChecklist:{}}))},[]),oe=N.useCallback((M,L)=>{n(q=>{const me={...q.delegationEmojiOverrides};return L===null||L===""?delete me[M]:me[M]=L,{...q,delegationEmojiOverrides:me}})},[]),Le=N.useCallback(M=>{const L=e.delegationEmojiOverrides[M];return L!==void 0&&L!==""?L:G1(M)},[e.delegationEmojiOverrides]),Ke={...e,setCommittee:r,setTopic:s,setUniverse:i,setChairName:o,setChairEmail:l,startSession:c,stopSession:d,addDelegate:f,removeDelegate:m,updateDelegate:g,addMotion:_,starMotion:I,setMotionStatus:k,startVote:A,recordVote:E,endVote:y,addToSpeakers:T,removeFromSpeakers:R,setActiveSpeaker:B,setSpeakerDuration:F,setRollCallComplete:b,addCrisisSlide:x,addCrisisSpeaker:S,addCrisisFact:C,addCrisisPathway:j,addToArchive:P,addStrike:w,removeStrike:ie,getStrikeCount:(M,L)=>e.delegateStrikes.filter(q=>q.delegateId===M&&q.type===L).length,getStrikeCountsByType:M=>{const L={};return e.delegateStrikes.filter(q=>q.delegateId===M).forEach(q=>{L[q.type]=(L[q.type]??0)+1}),L},addDelegateFeedback:$e,getFeedbackCountsByType:Lt,toggleFlowStep:Ve,isFlowStepDone:G,resetFlowChecklist:X,togglePrepStep:$,isPrepStepDone:V,resetPrepChecklist:J,setDelegationEmoji:oe,getDelegationEmoji:Le};return u.jsx(q1.Provider,{value:Ke,children:t})}function Vt(){const t=N.useContext(q1);if(!t)throw new Error("useChair must be used within ChairProvider");return t}const FO=["Point of order abuse","Unparliamentary language","Speaking out of turn","Disruption","Failure to yield","Other"],Jh=3;function BO(t){return t.rollCallStatus?t.rollCallStatus:t.present?"present":"absent"}function zO(){const{delegates:t,committee:e,topic:n,universe:r,getStrikeCountsByType:s,addDelegateFeedback:i,getFeedbackCountsByType:o,getDelegationEmoji:l}=Vt(),[c,d]=N.useState(null),f=N.useRef(null);return N.useEffect(()=>{if(!c)return;const m=g=>{f.current&&!f.current.contains(g.target)&&d(null)};return document.addEventListener("click",m),()=>document.removeEventListener("click",m)},[c]),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Digital Room View"}),u.jsxs("p",{className:"text-[var(--text-muted)] text-sm",children:[e,r?`  ${r}  ${n}`:`  ${n}`]}),u.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:"Click a delegate to give a compliment or concern reminder."})]}),u.jsx("div",{className:"card-block p-6 min-h-[320px]",children:t.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-[var(--text-muted)]",children:[u.jsx("p",{className:"text-sm",children:" No delegates in the room yet."}),u.jsx("p",{className:"text-xs mt-1",children:"Add delegates from the Delegates section."})]}):u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:[...t].sort((m,g)=>m.country.localeCompare(g.country,void 0,{sensitivity:"base"})).map(m=>{const g=s(m.id),_=Object.values(g).reduce((T,R)=>T+R,0),I=Object.values(g).some(T=>T>=Jh),k=o(m.id),A=k.compliment??0,E=k.concern??0,y=c===m.id;return u.jsxs("div",{ref:y?f:void 0,className:"relative",children:[u.jsxs("button",{type:"button",onClick:()=>d(y?null:m.id),className:`w-full rounded-lg border p-3 text-center transition-colors text-left ${I?"border-[var(--danger)] bg-[var(--danger)]/10 hover:bg-[var(--danger)]/15":"border-[var(--border)] bg-[var(--bg-elevated)] hover:bg-[var(--bg-card)] hover:border-[var(--accent)]/50"} ${y?"ring-2 ring-[var(--accent)]":""}`,"aria-expanded":y,"aria-haspopup":"menu","aria-label":`${m.country}  give compliment or concern`,children:[u.jsxs("div",{className:"text-xs font-medium text-[var(--accent)] uppercase tracking-wide flex items-center justify-center gap-1",children:[u.jsx("span",{children:l(m.country)||""}),u.jsx("span",{children:m.country})]}),u.jsx("div",{className:"text-sm text-[var(--text)] mt-1 font-medium",children:m.name||""}),m.committee&&u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-0.5",children:m.committee}),u.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2 flex-wrap",children:[(()=>{const T=BO(m),R={absent:"Absent",present:"Present (may abstain)","present-and-voting":"Present and voting"};return u.jsxs("span",{className:`inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[10px] font-medium ${T==="absent"?"bg-[var(--text-muted)]/20 text-[var(--text-muted)]":T==="present"?"bg-[var(--success)]/20 text-[var(--success)]":"bg-[var(--accent)]/20 text-[var(--accent)]"}`,title:R[T],children:[u.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${T==="absent"?"bg-[var(--text-muted)]":T==="present"?"bg-[var(--success)]":"bg-[var(--accent)]"}`}),T==="present-and-voting"?"P&V":T==="present"?"Present":"Absent"]})})(),_>0&&u.jsxs("span",{className:`inline-flex items-center gap-0.5 text-xs ${I?"text-[var(--danger)]":"text-[var(--accent)]"}`,title:Object.entries(g).map(([T,R])=>`${T}: ${R}`).join(", "),children:[u.jsx(bc,{className:"w-3 h-3"}),_]}),A>0&&u.jsxs("span",{className:"inline-flex items-center gap-0.5 text-xs text-[var(--success)]",title:"Compliments",children:[u.jsx(sx,{className:"w-3 h-3"}),A]}),E>0&&u.jsxs("span",{className:"inline-flex items-center gap-0.5 text-xs text-[var(--danger)]",title:"Concern reminders",children:[u.jsx(nx,{className:"w-3 h-3"}),E]}),u.jsx(cu,{className:`w-3 h-3 text-[var(--text-muted)] flex-shrink-0 transition-transform ${y?"rotate-180":""}`,"aria-hidden":!0})]})]}),y&&u.jsxs("div",{className:"absolute left-0 right-0 top-full mt-1 z-10 rounded-lg border border-[var(--border)] bg-[var(--bg-card)] shadow-lg py-1 min-w-[10rem]",role:"menu","aria-label":"Delegate actions",children:[u.jsxs("button",{type:"button",role:"menuitem",onClick:()=>{i(m.id,"compliment"),d(null)},className:"flex items-center gap-2 w-full px-3 py-2 text-left text-sm text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[u.jsx(sx,{className:"w-4 h-4 text-[var(--success)]"}),"Give compliment"]}),u.jsxs("button",{type:"button",role:"menuitem",onClick:()=>{i(m.id,"concern"),d(null)},className:"flex items-center gap-2 w-full px-3 py-2 text-left text-sm text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[u.jsx(nx,{className:"w-4 h-4 text-[var(--danger)]"}),"Give concern reminder"]})]})]},m.id)})})})]})}const Xh=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Cte d'Ivoire","Democratic People's Republic of Korea","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Lao People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia (Federated States of)","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Macedonia","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Republic of Korea","Romania","Russian Federation","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syrian Arab Republic","Tajikistan","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United Republic of Tanzania","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela","Viet Nam","Yemen","Zambia","Zimbabwe"],si="__OTHER__";function $O(){const{delegates:t,addDelegate:e,removeDelegate:n,updateDelegate:r,committee:s,addStrike:i,removeStrike:o,getStrikeCountsByType:l,getDelegationEmoji:c,setDelegationEmoji:d}=Vt(),[f,m]=N.useState(""),[g,_]=N.useState(""),[I,k]=N.useState(""),[A,E]=N.useState(""),[y,T]=N.useState(!1),[R,B]=N.useState(null),[F,b]=N.useState(""),[x,S]=N.useState(null),[C,j]=N.useState(""),[P,w]=N.useState(""),[ie,$e]=N.useState(null),[Lt,Ve]=N.useState(""),G=f===si?g.trim():f,X=()=>{G&&(e({country:G,name:I.trim()||void 0,email:A.trim()||void 0,committee:s||void 0,rollCallStatus:"absent"}),m(""),_(""),k(""),E(""))},$=()=>{Xh.forEach(V=>{t.some(J=>J.country===V)||e({country:V,committee:s||void 0,rollCallStatus:"absent"})}),T(!1)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Delegates"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Add or remove delegates. Preset UNGA flags shown; use the  button to set a custom emoji for delegations (e.g. FWC)."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add delegate"}),u.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Country"}),u.jsxs("select",{value:f,onChange:V=>m(V.target.value),className:"min-w-[12rem] max-w-[20rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",children:[u.jsx("option",{value:"",children:" Select country "}),Xh.map(V=>u.jsx("option",{value:V,children:V},V)),u.jsx("option",{value:si,children:" Other "})]})]}),f===si&&u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Custom country"}),u.jsx("input",{type:"text",value:g,onChange:V=>_(V.target.value),placeholder:"e.g. Observer State",className:"w-40 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Name (optional)"}),u.jsx("input",{type:"text",value:I,onChange:V=>k(V.target.value),placeholder:"Delegate name",className:"w-40 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Email (optional)"}),u.jsx("input",{type:"email",value:A,onChange:V=>E(V.target.value),placeholder:"delegate@example.com",className:"w-48 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("button",{onClick:X,disabled:!G,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap items-center gap-2",children:u.jsx("button",{onClick:()=>T(!0),className:"px-3 py-1.5 rounded-lg bg-[var(--accent-soft)] text-[var(--accent)] text-sm font-medium hover:bg-[var(--accent-soft)]/80 transition-colors",children:"Add all UNGA members not in list"})})]}),y&&u.jsxs("div",{className:"rounded-xl border border-[var(--accent)] bg-[var(--accent-soft)] p-4 flex items-center justify-between flex-wrap gap-2",children:[u.jsx("p",{className:"text-sm text-[var(--text)]",children:"Add all 193 UNGA member states not yet in the list?"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>T(!1),className:"px-3 py-1.5 rounded-lg bg-[var(--bg-card)] text-sm",children:"Cancel"}),u.jsx("button",{onClick:$,className:"px-3 py-1.5 rounded-lg bg-[var(--accent)] text-white text-sm font-medium",children:"Add all"})]})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border)] flex items-center gap-2",children:[u.jsx(fu,{className:"w-4 h-4 text-[var(--text-muted)]"}),u.jsxs("span",{className:"text-sm font-medium text-[var(--text)]",children:[" Current delegates (",t.length,")"]})]}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-[28rem] overflow-auto",children:[...t].sort((V,J)=>V.country.localeCompare(J.country,void 0,{sensitivity:"base"})).map(V=>{const J=l(V.id),oe=Object.values(J).some(M=>M>=Jh),Le=Object.values(J).reduce((M,L)=>M+L,0),Ke=x===V.id;return u.jsxs("li",{className:`px-4 py-3 flex flex-col gap-2 ${oe?"bg-[var(--danger)]/10 border-l-4 border-[var(--danger)]":""}`,children:[u.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[u.jsxs("span",{className:"text-sm text-[var(--text)] flex items-center gap-2 min-w-0",children:[u.jsx("span",{className:"text-base shrink-0",title:"Delegation flag/emoji",children:c(V.country)||""}),u.jsx("strong",{className:"text-[var(--accent)] truncate",children:V.country}),V.name&&u.jsxs("span",{className:"text-[var(--text-muted)] ml-1 shrink-0",children:[" ",V.name]}),V.email&&u.jsxs("span",{className:"text-xs text-[var(--text-muted)] ml-1 shrink-0 truncate",title:V.email,children:[" ",V.email]}),Le>0&&u.jsxs("span",{className:"ml-2 inline-flex items-center gap-1 text-xs",title:"Strikes",children:[u.jsx(bc,{className:`w-3.5 h-3.5 ${oe?"text-[var(--danger)]":"text-[var(--accent)]"}`}),Le]})]}),u.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[u.jsx("button",{onClick:()=>{B(R===V.id?null:V.id),b(V.email??"")},className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors",title:"Edit delegate email",children:u.jsx(L1,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>{$e(ie===V.country?null:V.country),Ve(c(V.country))},className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors",title:"Set custom emoji/flag for this delegation",children:u.jsx(RO,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>S(Ke?null:V.id),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors",title:"Add strike",children:u.jsx(bc,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>n(V.id),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)] transition-colors",title:"Remove delegate",children:u.jsx(gs,{className:"w-4 h-4"})})]})]}),ie===V.country&&u.jsxs("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap gap-2 items-center",children:[u.jsx("label",{className:"text-xs text-[var(--text-muted)]",children:"Custom emoji for this delegation:"}),u.jsx("input",{type:"text",value:Lt,onChange:M=>Ve(M.target.value),placeholder:"e.g.  or paste any emoji",className:"w-24 px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm"}),u.jsx("button",{onClick:()=>{d(V.country,Lt.trim()||null),$e(null),Ve("")},className:"px-2 py-1.5 rounded-lg bg-[var(--accent)] text-white text-xs font-medium",children:"Apply"}),u.jsx("button",{onClick:()=>{d(V.country,null),$e(null),Ve("")},className:"px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] text-[var(--text-muted)] text-xs",children:"Clear (use preset)"}),u.jsx("button",{onClick:()=>{$e(null),Ve("")},className:"px-2 py-1.5 rounded-lg text-[var(--text-muted)] text-xs",children:"Cancel"})]}),R===V.id&&u.jsxs("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap gap-2 items-center",children:[u.jsx("label",{className:"text-xs text-[var(--text-muted)]",children:"Delegate email:"}),u.jsx("input",{type:"email",value:F,onChange:M=>b(M.target.value),placeholder:"delegate@example.com",className:"flex-1 min-w-[12rem] px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm"}),u.jsx("button",{onClick:()=>{r(V.id,{email:F.trim()||void 0}),B(null),b("")},className:"px-2 py-1.5 rounded-lg bg-[var(--accent)] text-white text-xs font-medium",children:"Apply"}),u.jsx("button",{onClick:()=>{r(V.id,{email:void 0}),B(null),b("")},className:"px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] text-[var(--text-muted)] text-xs",children:"Clear"}),u.jsx("button",{onClick:()=>{B(null),b("")},className:"px-2 py-1.5 rounded-lg text-[var(--text-muted)] text-xs",children:"Cancel"})]}),Object.keys(J).length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 text-xs",children:Object.entries(J).map(([M,L])=>u.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-md ${L>=Jh?"bg-[var(--danger)]/20 text-[var(--danger)]":"bg-[var(--accent-soft)] text-[var(--accent)]"}`,children:[M,": ",L,u.jsx("button",{onClick:()=>o(V.id,M),className:"p-0.5 rounded hover:bg-black/10",title:"Remove one strike",children:u.jsx(Jp,{className:"w-3 h-3"})})]},M))}),Ke&&u.jsxs("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap gap-2 items-end",children:[u.jsxs("select",{value:P,onChange:M=>{const L=M.target.value;w(L),L&&(i(V.id,L),S(null),w(""),j(""))},className:"px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",children:[u.jsx("option",{value:"",children:" Select misbehaviour"}),FO.map(M=>u.jsx("option",{value:M,children:M},M))]}),u.jsx("input",{type:"text",value:C,onChange:M=>j(M.target.value),placeholder:"Or type custom",className:"w-36 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsx("button",{onClick:()=>{const M=C.trim();M&&(i(V.id,M),S(null),j(""),w(""))},disabled:!C.trim(),className:"px-3 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add strike (custom)"}),u.jsx("button",{onClick:()=>{S(null),j(""),w("")},className:"px-3 py-2 rounded-lg bg-[var(--bg-elevated)] text-[var(--text-muted)] text-sm",children:"Cancel"})]})]},V.id)})})]})]})}const HO=[{id:"mod-caucus",label:"Moderated caucus",type:"motion",template:t=>`Motion for moderated caucus for ${t.duration||"___"} on the topic of ${t.topic||"___"} with ${t.speakerTime||"___"} per speaker`,fields:[{key:"duration",label:"Total time",placeholder:"e.g. 10 minutes"},{key:"topic",label:"Topic",placeholder:"e.g. causes of conflict"},{key:"speakerTime",label:"Time per speaker",placeholder:"e.g. 45 seconds"}]},{id:"unmod-caucus",label:"Unmoderated caucus",type:"motion",template:t=>`Motion for unmoderated caucus for ${t.duration||"___"}`,fields:[{key:"duration",label:"Duration",placeholder:"e.g. 5 minutes"}]},{id:"open-speaker-list",label:"Open speaker list",type:"motion",template:()=>"Motion to open the speaker list",fields:[]},{id:"close-speaker-list",label:"Close speaker list",type:"motion",template:()=>"Motion to close the speaker list",fields:[]},{id:"point-order",label:"Point of order",type:"point",template:()=>"Point of order",fields:[]},{id:"point-information",label:"Point of information",type:"point",template:()=>"Point of information",fields:[]},{id:"point-personal",label:"Point of personal privilege",type:"point",template:()=>"Point of personal privilege",fields:[]}];function WO(){const{motions:t,addMotion:e,starMotion:n,setMotionStatus:r,startVote:s}=Vt(),[i,o]=N.useState(""),[l,c]=N.useState("motion"),[d,f]=N.useState(!1),[m,g]=N.useState(null),[_,I]=N.useState({}),k=()=>{i.trim()&&(e(i.trim(),l),o(""))},A=R=>{g(R),I({}),c(R.type)},E=()=>{if(!m)return;const R=m.template(_);e(R,m.type),g(null),I({}),f(!1)},y=t.filter(R=>R.status==="active"),T=t.filter(R=>R.status!=="active");return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Motions & Points"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Record and star motions and points."})]}),u.jsxs("div",{className:"card-block p-4 space-y-3",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>c("motion"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${l==="motion"?"bg-[var(--accent-soft)] text-[var(--accent)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)]"}`,children:" Motion"}),u.jsx("button",{onClick:()=>c("point"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${l==="point"?"bg-[var(--accent-soft)] text-[var(--accent)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)]"}`,children:" Point"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:i,onChange:R=>o(R.target.value),onKeyDown:R=>R.key==="Enter"&&k(),placeholder:l==="motion"?"e.g. Motion to open the speaker list":"e.g. Point of order",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(Sn,{className:"w-4 h-4"}),"  Add"]})]}),u.jsxs("div",{className:"border-t border-[var(--border)] pt-3 mt-3",children:[u.jsxs("button",{type:"button",onClick:()=>f(!d),className:"flex items-center gap-1.5 text-xs font-medium text-[var(--text-muted)] hover:text-[var(--accent)]",children:[d?u.jsx(vO,{className:"w-3.5 h-3.5"}):u.jsx(cu,{className:"w-3.5 h-3.5"}),"Preset options"]}),d&&u.jsxs("div",{className:"mt-2 space-y-2",children:[u.jsx("div",{className:"flex flex-wrap gap-1.5",children:HO.map(R=>u.jsx("button",{type:"button",onClick:()=>A(R),className:`px-2.5 py-1.5 rounded-md text-xs font-medium transition-colors ${(m==null?void 0:m.id)===R.id?"bg-[var(--accent)] text-white":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)] border border-[var(--border)]"}`,children:R.label},R.id))}),m&&u.jsxs("div",{className:"rounded-lg border border-[var(--border)] bg-[var(--bg-elevated)] p-3 space-y-2",children:[m.fields.length===0?u.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:m.template({})}):m.fields.map(R=>u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-0.5",children:R.label}),u.jsx("input",{type:"text",value:_[R.key]??"",onChange:B=>I(F=>({...F,[R.key]:B.target.value})),placeholder:R.placeholder,className:"w-full px-2.5 py-1.5 rounded-md bg-[var(--bg-card)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]},R.key)),u.jsxs("div",{className:"flex gap-2 pt-1",children:[u.jsxs("button",{type:"button",onClick:E,className:"px-3 py-1.5 rounded-md bg-[var(--accent)] text-white text-xs font-medium hover:opacity-90",children:["Add ",m.type==="motion"?"motion":"point"]}),u.jsx("button",{type:"button",onClick:()=>g(null),className:"px-3 py-1.5 rounded-md text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] text-xs font-medium",children:"Cancel"})]})]})]})]})]}),y.length>0&&u.jsxs("div",{className:"rounded-xl border border-[var(--accent)]/40 bg-[var(--accent-soft)]/30 p-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-3",children:" Active"}),u.jsx("ul",{className:"space-y-2",children:y.map(R=>u.jsxs("li",{className:"flex items-center gap-2 flex-wrap",children:[u.jsx("button",{onClick:()=>n(R.id),className:"p-1 rounded text-[var(--text-muted)] hover:text-[var(--accent)]",title:R.starred?"Unstar":"Star",children:u.jsx(rx,{className:`w-4 h-4 ${R.starred?"fill-[var(--accent)] text-[var(--accent)]":""}`})}),u.jsx("span",{className:"text-xs text-[var(--text-muted)] uppercase",children:R.type}),u.jsx("span",{className:"text-sm text-[var(--text)] flex-1",children:R.text}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>r(R.id,"passed"),className:"p-1.5 rounded-lg bg-[var(--success)]/20 text-[var(--success)] hover:bg-[var(--success)]/30",title:"Passed",children:u.jsx(Qp,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>r(R.id,"failed"),className:"p-1.5 rounded-lg bg-[var(--danger)]/20 text-[var(--danger)] hover:bg-[var(--danger)]/30",title:"Failed",children:u.jsx(pu,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>r(R.id,"tabled"),className:"p-1.5 rounded-lg bg-[var(--text-muted)]/20 text-[var(--text-muted)]",title:"Tabled",children:u.jsx(Jp,{className:"w-4 h-4"})}),R.type==="motion"&&u.jsx("button",{onClick:()=>s(R.id),className:"px-2 py-1 rounded-lg bg-[var(--accent)] text-white text-xs font-medium",children:"Vote"})]})]},R.id))})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Log"})}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:[...T].reverse().map(R=>u.jsxs("li",{className:"px-4 py-3 flex items-start gap-2",children:[u.jsx("button",{onClick:()=>n(R.id),className:"p-1 rounded mt-0.5 text-[var(--text-muted)] hover:text-[var(--accent)] flex-shrink-0",children:u.jsx(rx,{className:`w-4 h-4 ${R.starred?"fill-[var(--accent)] text-[var(--accent)]":""}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] uppercase",children:R.type}),u.jsx("p",{className:"text-sm text-[var(--text)]",children:R.text}),u.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-[var(--text-muted)]",children:[u.jsx("span",{children:new Date(R.timestamp).toLocaleString()}),u.jsx("span",{className:"capitalize",children:R.status}),R.type==="motion"&&R.votes&&u.jsxs("span",{children:["Yes ",R.votes.yes," / No ",R.votes.no," / Abstain ",R.votes.abstain]})]})]})]},R.id))})]})]})}function lx(t){return t.rollCallStatus?t.rollCallStatus:t.present?"present":"absent"}function GO(){const{voteInProgress:t,delegates:e,delegateVotes:n,recordVote:r,endVote:s,getDelegationEmoji:i}=Vt();if(!t)return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Voting"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Start a vote from a motion in Motions & Points."})]}),u.jsx("div",{className:"card-block p-8 text-center text-[var(--text-muted)]",children:' No active vote. Go to Motions & Points and click "Vote" on a motion.'})]});const o=Object.values(n).filter(g=>g==="yes").length,l=Object.values(n).filter(g=>g==="no").length,c=Object.values(n).filter(g=>g==="abstain").length,f=e.filter(g=>lx(g)!=="absent").length,m=Object.keys(n).length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Active Voting"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Record each delegate's vote."})]}),u.jsxs("div",{className:"rounded-xl border-2 border-[var(--accent)] bg-[var(--accent-soft)]/30 p-4",children:[u.jsx("p",{className:"text-sm font-medium text-[var(--text)] mb-2",children:" Motion:"}),u.jsx("p",{className:"text-[var(--text)]",children:t.text}),u.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[u.jsxs("span",{className:"text-[var(--success)]",children:["Yes: ",o]}),u.jsxs("span",{className:"text-[var(--danger)]",children:["No: ",l]}),u.jsxs("span",{className:"text-[var(--text-muted)]",children:["Abstain: ",c]}),u.jsxs("span",{className:"text-[var(--text-muted)]",children:["Recorded: ",m," / ",f]})]}),u.jsx("button",{onClick:s,className:"mt-4 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:"End vote & record result"})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Delegate votes"})}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:[...e].sort((g,_)=>g.country.localeCompare(_.country,void 0,{sensitivity:"base"})).map(g=>{const _=n[g.id],I=lx(g),k=I==="absent",A=I==="present";return u.jsxs("li",{className:`px-4 py-3 flex items-center justify-between ${k?"opacity-60":""}`,children:[u.jsxs("span",{className:"text-sm text-[var(--text)] flex items-center gap-2",children:[u.jsx("span",{className:"shrink-0",children:i(g.country)||""}),u.jsx("strong",{className:"text-[var(--accent)]",children:g.country}),g.name&&u.jsx("span",{className:"text-[var(--text-muted)]",children:g.name}),k&&u.jsx("span",{className:"ml-2 text-xs text-[var(--text-muted)]",children:"(Absent)"})]}),k?u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:""}):u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>r(g.id,"yes"),className:`p-2 rounded-lg transition-colors ${_==="yes"?"bg-[var(--success)]/30 text-[var(--success)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--success)]"}`,title:"Yes",children:u.jsx(Qp,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>r(g.id,"no"),className:`p-2 rounded-lg transition-colors ${_==="no"?"bg-[var(--danger)]/30 text-[var(--danger)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--danger)]"}`,title:"No",children:u.jsx(pu,{className:"w-4 h-4"})}),A&&u.jsx("button",{onClick:()=>r(g.id,"abstain"),className:`p-2 rounded-lg transition-colors ${_==="abstain"?"bg-[var(--text-muted)]/30 text-[var(--text)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)]"}`,title:"Abstain (present only)",children:u.jsx(Jp,{className:"w-4 h-4"})})]})]},g.id)})})]})]})}const ss=[{value:"AL",label:"AL  Arab League"},{value:"ASEAN",label:"ASEAN  Association of Southeastern Asian Nations"},{value:"AU",label:"AU  African Union"},{value:"CCPCJ",label:"CCPCJ  Commission on Crime Prevention and Criminal Justice"},{value:"CERN",label:"CERN  European Organization for Nuclear Research"},{value:"CND",label:"CND  United Nations Commission on Narcotic Drugs"},{value:"CoM",label:"CoM  Council of Marvels (Fictional)"},{value:"CPD",label:"CPD  Commission on Population and Development"},{value:"CSTD",label:"CSTD  Commission on Science and Technology for Development"},{value:"DGC",label:"DGC  United Nations Department of Global Communications"},{value:"DISEC",label:"DISEC  Disarmament and International Security Committee (UNGA 1st)"},{value:"ECOFIN",label:"ECOFIN  Economic and Financial Committee (UNGA 2nd)"},{value:"ECOSOC",label:"ECOSOC  Economic and Social Council"},{value:"EP",label:"EP  European Parliament"},{value:"FAO",label:"FAO  Food and Agriculture Organization"},{value:"FIFA",label:"FIFA  Fdration Internationale de Football Association"},{value:"GA6",label:"GA6  Legal (UNGA 6th Committee)"},{value:"HRC",label:"HRC  Human Rights Council"},{value:"UNHRC",label:"UNHRC  Human Rights Council"},{value:"HSC",label:"HSC  Historical Security Council"},{value:"IAEA",label:"IAEA  International Atomic Energy Agency"},{value:"ICAO",label:"ICAO  International Civil Aviation Organisation"},{value:"ICC",label:"ICC  International Criminal Court"},{value:"ICC-Commerce",label:"ICC  International Chamber of Commerce"},{value:"ICJ",label:"ICJ  International Court of Justice"},{value:"ICRC",label:"ICRC  International Committee of the Red Cross"},{value:"ILO",label:"ILO  International Labour Organization"},{value:"IMF",label:"IMF  International Monetary Fund"},{value:"IMO",label:"IMO  International Maritime Organisation"},{value:"Interpol",label:"Interpol  International Criminal Police Organization"},{value:"IOPC",label:"IOPC  International Olympic and Paralympic Committee"},{value:"NATO",label:"NATO  North Atlantic Treaty Organization"},{value:"PBC",label:"PBC  Peacebuilding Commission"},{value:"PC",label:"PC  Press Corps"},{value:"UNSC",label:"SC / UNSC  Security Council"},{value:"SCSHT",label:"SCSHT  Special Conference on Slavery and Human Trafficking"},{value:"SOCHUM",label:"SOCHUM  Social, Cultural, and Humanitarian Committee (UNGA 3rd)"},{value:"SPECPOL",label:"SPECPOL  Special Political and Decolonization (UNGA 4th)"},{value:"UNCSA",label:"UNCSA  Commission on Superhuman Activities (Fictional)"},{value:"UNCTAD",label:"UNCTAD  United Nations Conference on Trade and Development"},{value:"UNEP",label:"UNEP  United Nations Environmental Program"},{value:"UNESCO",label:"UNESCO  UN Educational, Scientific, and Cultural Organization"},{value:"UNHCR",label:"UNHCR  UN High Commissioner for Refugees"},{value:"UNICEF",label:"UNICEF  United Nations Children's Fund"},{value:"UNIDO",label:"UNIDO  UN Industrial Development Organization"},{value:"UNISDR",label:"UNISDR  United Nations Office for Disaster Risk Reduction"},{value:"UNODC",label:"UNODC  United Nations Office on Drugs and Crime"},{value:"UNOOSA",label:"UNOOSA  United Nations Office for Outer Space Affairs"},{value:"UNPFII",label:"UNPFII  UN Permanent Forum on Indigenous Issues"},{value:"UN-Women",label:"UN Women  United Nations Entity for Gender Equality and the Empowerment of Women"},{value:"UNWTO",label:"UNWTO  World Tourism Organization"},{value:"US-Senate",label:"US Senate  United States Senate"},{value:"WFP",label:"WFP  World Food Program"},{value:"WHO",label:"WHO  World Health Organization"},{value:"WMO",label:"WMO  World Meteorological Organization"},{value:"WIPO",label:"WIPO  World Intellectual Property Organization"},{value:"WB",label:"WB  World Bank"},{value:"WTO",label:"WTO  World Trade Organization"},{value:"Crisis",label:"Crisis Committee"}];ss.map(t=>t.value);const Ut="__OTHER__";function cx({onClose:t}){const{committee:e,topic:n,universe:r,chairName:s,chairEmail:i,setCommittee:o,setTopic:l,setUniverse:c,setChairName:d,setChairEmail:f}=Vt(),m=N.useMemo(()=>ss.find(I=>I.value===e)?e:e?Ut:"",[e]),g=_=>{o(_===Ut?"":_)};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"font-semibold text-lg text-[var(--text)]",children:" Committee & topic"}),t&&u.jsx("button",{onClick:t,className:"text-[var(--text-muted)] hover:text-[var(--text)] text-sm",children:"Close"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Set committee"}),u.jsxs("select",{value:m,onChange:_=>g(_.target.value),className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Committee",children:[u.jsx("option",{value:"",children:"Select committee"}),ss.map(_=>u.jsx("option",{value:_.value,children:_.label},_.value)),u.jsx("option",{value:Ut,children:"Other (custom)"})]}),m===Ut&&u.jsx("input",{type:"text",value:e,onChange:_=>o(_.target.value),placeholder:"e.g. Custom committee name",className:"mt-2 w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Custom committee name"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Universe (optional, for fictional committees)"}),u.jsx("input",{type:"text",value:r,onChange:_=>c(_.target.value),placeholder:"e.g. Star Wars, Harry Potter  leave blank for real-world",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Universe (optional)"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Topic"}),u.jsx("input",{type:"text",value:n,onChange:_=>l(_.target.value),placeholder:"e.g. Cybersecurity and International Peace",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("div",{className:"pt-2 border-t border-[var(--border)]",children:[u.jsx("h4",{className:"text-sm font-medium text-[var(--text)] mb-2",children:" Chair"}),u.jsxs("label",{className:"block mb-2",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Chair name (optional)"}),u.jsx("input",{type:"text",value:s,onChange:_=>d(_.target.value),placeholder:"e.g. Jane Smith",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Chair name"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Chair email (optional)"}),u.jsx("input",{type:"email",value:i,onChange:_=>f(_.target.value),placeholder:"e.g. chair@conference.org",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Chair email"})]})]})]})}function qO(){const{motions:t}=Vt(),e=t.filter(o=>o.status==="passed").length,n=t.filter(o=>o.status==="failed").length,r=t.filter(o=>o.status==="tabled").length,s=t.filter(o=>o.type==="motion").length,i=t.filter(o=>o.type==="point").length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Score"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Motions and points summary."})]}),u.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--success)]",children:e}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Passed"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--danger)]",children:n}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Failed"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--text-muted)]",children:r}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Tabled"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:t.length}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Total"})]})]}),u.jsxs("div",{className:"card-block p-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)] mb-2",children:" Breakdown"}),u.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["Motions: ",s,"  Points: ",i]})]})]})}function sl(t){return t.rollCallStatus?t.rollCallStatus:t.present?"present":"absent"}const KO={absent:"present",present:"present-and-voting","present-and-voting":"absent"},ux={absent:"Absent",present:"Present (may abstain)","present-and-voting":"Present and voting"};function QO(){const{delegates:t,rollCallComplete:e,setRollCallComplete:n,updateDelegate:r,getDelegationEmoji:s}=Vt(),i=(m,g)=>{r(m,{rollCallStatus:g})},o=(m,g)=>{i(m,KO[g])},l=t.filter(m=>sl(m)==="present").length,c=t.filter(m=>sl(m)==="present-and-voting").length,d=t.filter(m=>sl(m)==="absent").length,f=l+c;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Roll Call Tracker"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Present (may abstain from voting), Present and voting (must vote, cannot abstain), or Absent. Click to cycle."})]}),u.jsx("div",{className:"flex items-center gap-3",children:u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e,onChange:m=>n(m.target.checked),className:"rounded border-[var(--border)] bg-[var(--bg-elevated)] text-[var(--accent)] focus:ring-[var(--accent)]"}),u.jsx("span",{className:"text-sm text-[var(--text)]",children:"Roll call complete"})]})}),u.jsxs("div",{className:"card-block p-4 flex flex-wrap gap-4 text-sm",children:[u.jsxs("span",{className:"text-[var(--success)]",children:["Present (may abstain): ",u.jsx("strong",{children:l})]}),u.jsxs("span",{className:"text-[var(--accent)]",children:["Present and voting: ",u.jsx("strong",{children:c})]}),u.jsxs("span",{className:"text-[var(--text-muted)]",children:["Absent: ",u.jsx("strong",{children:d})]}),u.jsxs("span",{className:"text-[var(--text-muted)]",children:["Total present: ",u.jsx("strong",{children:f})," / ",t.length]})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Delegates"})}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:[...t].sort((m,g)=>m.country.localeCompare(g.country,void 0,{sensitivity:"base"})).map(m=>{const g=sl(m),_=g==="present",I=g==="present-and-voting",k=g==="absent";return u.jsxs("li",{className:"px-4 py-3 flex items-center justify-between gap-2",children:[u.jsxs("span",{className:"text-sm text-[var(--text)] min-w-0 flex items-center gap-2",children:[u.jsx("span",{className:"text-base shrink-0",children:s(m.country)||""}),u.jsx("strong",{className:"text-[var(--accent)] truncate",children:m.country}),m.name&&u.jsx("span",{className:"text-[var(--text-muted)] shrink-0",children:m.name})]}),u.jsxs("button",{onClick:()=>o(m.id,g),className:`flex items-center gap-1.5 text-xs px-2.5 py-1.5 rounded-lg transition-colors shrink-0 ${k?"text-[var(--text-muted)] bg-[var(--bg-elevated)] hover:bg-[var(--border)]":_?"text-[var(--success)] bg-[var(--success)]/10 hover:bg-[var(--success)]/20":"text-[var(--accent)] bg-[var(--accent-soft)] hover:bg-[var(--accent-soft)]/80"}`,title:ux[g],children:[k&&u.jsx(pu,{className:"w-4 h-4"}),_&&u.jsx(Qp,{className:"w-4 h-4"}),I&&u.jsx(H1,{className:"w-4 h-4"}),ux[g]]})]},m.id)})})]}),u.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Click a delegate's status to cycle: Absent  Present (may abstain)  Present and voting  Absent."})]})}function YO(){const{sessionStarted:t,sessionStartTime:e,startSession:n,stopSession:r}=Vt();return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Committee Session"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Start or stop the committee session."})]}),u.jsxs("div",{className:"card-block p-6 flex flex-col sm:flex-row items-center gap-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:`w-3 h-3 rounded-md ${t?"bg-[var(--success)] animate-pulse":"bg-[var(--text-muted)]"}`}),u.jsx("span",{className:"text-sm font-medium text-[var(--text)]",children:t?" Session in progress":" Session not started"})]}),e&&u.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Started: ",new Date(e).toLocaleString()]}),u.jsx("div",{className:"flex gap-3",children:t?u.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--danger)] text-white text-sm font-medium hover:opacity-90 transition-opacity",children:[u.jsx(hu,{className:"w-4 h-4"}),"  Stop session"]}):u.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--success)] text-white text-sm font-medium hover:opacity-90 transition-opacity",children:[u.jsx(B1,{className:"w-4 h-4"}),"  Start session"]})})]})]})}function JO(){const{delegates:t,speakers:e,activeSpeaker:n,speakerDuration:r,setSpeakerDuration:s,addToSpeakers:i,removeFromSpeakers:o,setActiveSpeaker:l,getDelegationEmoji:c}=Vt(),[d,f]=N.useState(""),[m,g]=N.useState(0);N.useEffect(()=>{if(!(n!=null&&n.startTime))return;const k=setInterval(()=>{g(Math.floor((Date.now()-n.startTime)/1e3))},1e3);return()=>clearInterval(k)},[n==null?void 0:n.startTime,n==null?void 0:n.id]);const _=()=>{const k=t.find(A=>A.id===d);k&&(i(k.id,k.country,k.name||k.country),f(""))},I=n?Math.max(0,r-m):0;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Speakers"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Mod Speakers List, Active Speaker (Timed), Consultation Speakers."})]}),u.jsxs("div",{className:"rounded-xl border-2 border-[var(--accent)]/50 bg-[var(--accent-soft)]/30 p-4",children:[u.jsxs("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2 flex items-center gap-2",children:[u.jsx(du,{className:"w-4 h-4"}),"  Active speaker"]}),n?u.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[u.jsxs("span",{className:"text-lg font-semibold text-[var(--text)] flex items-center gap-2",children:[u.jsx("span",{children:c(n.country)||""}),n.country,"  ",n.name]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx(Yp,{className:"w-4 h-4 text-[var(--text-muted)]"}),u.jsxs("span",{className:I===0?"text-[var(--danger)]":"text-[var(--text)]",children:[Math.floor(I/60),":",String(I%60).padStart(2,"0")," remaining"]})]}),u.jsx("button",{onClick:()=>l(null),className:"px-3 py-1.5 rounded-lg bg-[var(--bg-card)] text-sm text-[var(--text)] hover:bg-[var(--border)]",children:"End speech"})]}):u.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No active speaker. Start one from the list below."})]}),u.jsxs("div",{className:"card-block p-4 space-y-3",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Speaker duration (seconds)"}),u.jsx("input",{type:"number",min:30,max:300,value:r,onChange:k=>s(Number(k.target.value)||60),className:"w-24 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("div",{className:"card-block p-4 space-y-3",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add to speakers list"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsxs("select",{value:d,onChange:k=>f(k.target.value),className:"px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",children:[u.jsx("option",{value:"",children:"Select delegate"}),[...t].sort((k,A)=>k.country.localeCompare(A.country,void 0,{sensitivity:"base"})).map(k=>u.jsxs("option",{value:k.id,children:[k.country," ",k.name?` ${k.name}`:""]},k.id))]}),u.jsxs("button",{onClick:_,disabled:!d,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Mod speakers list"})}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-80 overflow-auto",children:e.map((k,A)=>u.jsxs("li",{className:"px-4 py-3 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:"text-xs text-[var(--text-muted)] w-6",children:[A+1,"."]}),u.jsxs("span",{className:"text-sm text-[var(--text)] flex items-center gap-2",children:[u.jsx("span",{className:"shrink-0",children:c(k.country)||""}),u.jsx("strong",{className:"text-[var(--accent)]",children:k.country}),"  ",k.name]}),k.speaking&&u.jsx("span",{className:"px-2 py-0.5 rounded bg-[var(--accent-soft)] text-[var(--accent)] text-xs font-medium",children:"Speaking"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[!k.speaking&&u.jsx("button",{onClick:()=>l(k),className:"px-2 py-1 rounded-lg bg-[var(--accent)] text-white text-xs font-medium hover:opacity-90",children:"Start"}),u.jsx("button",{onClick:()=>o(k.id),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)]",title:"Remove",children:u.jsx(gs,{className:"w-4 h-4"})})]})]},k.id))})]})]})}const XO=[{id:"slides",label:"Slides",icon:V1},{id:"speakers",label:"Speakers",icon:du},{id:"facts",label:"Facts",icon:uu},{id:"pathways",label:"Pathways",icon:kO}];function ZO(){const{crisisSlides:t,crisisSpeakers:e,crisisFacts:n,crisisPathways:r,addCrisisSlide:s,addCrisisSpeaker:i,addCrisisFact:o,addCrisisPathway:l}=Vt(),[c,d]=N.useState("slides"),[f,m]=N.useState(""),g=()=>{f.trim()&&(c==="slides"&&s(f.trim()),c==="speakers"&&i(f.trim()),c==="facts"&&o(f.trim()),c==="pathways"&&l(f.trim()),m(""))},I={slides:t,speakers:e,facts:n,pathways:r}[c];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Crisis Dashboard"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Slides  Speakers  Facts  Pathways."})]}),u.jsx("div",{className:"flex gap-2 border-b border-[var(--border)] pb-2",children:XO.map(({id:k,label:A,icon:E})=>u.jsxs("button",{onClick:()=>d(k),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${c===k?"bg-[var(--accent-soft)] text-[var(--accent)]":"text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:[u.jsx(E,{className:"w-4 h-4"})," ",A]},k))}),u.jsxs("div",{className:"card-block p-4 space-y-3",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:f,onChange:k=>m(k.target.value),onKeyDown:k=>k.key==="Enter"&&g(),placeholder:c==="slides"?"Slide title or URL":c==="speakers"?"Speaker name":c==="facts"?"Fact":"Pathway description",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-64 overflow-auto",children:I.map((k,A)=>u.jsx("li",{className:"px-3 py-2 flex items-center justify-between text-sm text-[var(--text)]",children:k},A))})]})]})}const e4=[{id:"position",label:" Position papers",icon:uu},{id:"chair-report",label:" Chair reports",icon:Kp},{id:"slides",label:" Slides (ceremony or crisis)",icon:V1},{id:"speeches",label:" Speeches",icon:du},{id:"prep",label:" Prep document",icon:xO}];function t4(){const{archive:t,addToArchive:e}=Vt(),[n,r]=N.useState("position"),[s,i]=N.useState(""),[o,l]=N.useState(""),c=()=>{s.trim()&&(e(n,s.trim(),o.trim()||void 0),i(""),l(""))};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Archive"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Position papers, chair reports, slides, speeches, prep docs."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add to archive"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:e4.map(({id:d,label:f,icon:m})=>u.jsxs("button",{onClick:()=>r(d),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n===d?"bg-[var(--accent-soft)] text-[var(--accent)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)]"}`,children:[u.jsx(m,{className:"w-4 h-4"})," ",f]},d))}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"text",value:s,onChange:d=>i(d.target.value),placeholder:"Document name",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsx("textarea",{value:o,onChange:d=>l(d.target.value),placeholder:"Optional content or link",rows:2,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"}),u.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Archive"})}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:t.length===0?u.jsx("li",{className:"px-4 py-8 text-center text-[var(--text-muted)] text-sm",children:"No items in archive yet."}):t.slice().reverse().map((d,f)=>u.jsxs("li",{className:"px-4 py-3",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] uppercase",children:d.type}),u.jsx("p",{className:"text-sm font-medium text-[var(--text)]",children:d.name}),d.content&&u.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:d.content})]},f))})]})]})}const Sd=[{id:"rollcall",label:"Roll call"},{id:"open-floor",label:"Open the floor (points & motions)"},{id:"recognize-motions",label:"Recognize motions"},{id:"vote-motions",label:"Vote on motion(s)"},{id:"engage-or-gsl",label:"Engage in chosen motion or move to GSL"},{id:"open-floor-again",label:"Open the floor again"},{id:"recognize-motions-2",label:"Recognize motions (repeat as needed)"},{id:"vote-motions-2",label:"Vote on motion(s)"},{id:"continue-cycle",label:"Continue cycle (engage motion / GSL  open floor)"}];function n4(){const{toggleFlowStep:t,isFlowStepDone:e,resetFlowChecklist:n}=Vt(),r=Sd.filter(s=>e(s.id)).length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Committee flow checklist"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Normal committee flow  tick steps as you go. Reset when starting a new session or cycle."})]}),u.jsxs("div",{className:"card-block p-4 space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[u.jsxs("span",{className:"text-xs font-medium text-[var(--text-muted)]",children:[r," / ",Sd.length," done"]}),u.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[u.jsx(z1,{className:"w-3.5 h-3.5"}),"Reset checklist"]})]}),u.jsx("ul",{className:"space-y-1",children:Sd.map(s=>{const i=e(s.id);return u.jsx("li",{children:u.jsxs("label",{className:`flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer transition-colors ${i?"bg-[var(--success)]/10 text-[var(--text)]":"hover:bg-[var(--bg-elevated)]"}`,children:[u.jsx("span",{className:"text-[var(--accent)] flex-shrink-0",children:i?u.jsx(ya,{className:"w-5 h-5 fill-[var(--success)] text-[var(--success)]"}):u.jsx(hu,{className:"w-5 h-5"})}),u.jsx("span",{className:`text-sm ${i?"line-through text-[var(--text-muted)]":"text-[var(--text)]"}`,children:s.label}),u.jsx("input",{type:"checkbox",checked:i,onChange:()=>t(s.id),className:"sr-only","aria-label":s.label})]})},s.id)})})]})]})}const dx=[{title:" Rules & procedure",steps:[{id:"prep-rules-read",label:"Read and understand committee rules of procedure"},{id:"prep-parliamentary",label:"Review parliamentary procedure (motions, points, voting)"},{id:"prep-time-limits",label:"Confirm speaking times and time limits"},{id:"prep-quorum",label:"Know quorum and voting requirements"}]},{title:" Committee & topic",steps:[{id:"prep-topic-research",label:"Research committee topic and background"},{id:"prep-study-guide",label:"Read study guide and key documents"},{id:"prep-committee-set",label:"Set committee name and topic in dashboard"},{id:"prep-agenda",label:"Prepare session agenda and flow"}]},{title:" Room & tech",steps:[{id:"prep-room-setup",label:"Set up digital room (delegates list, placards)"},{id:"prep-tech-check",label:"Tech check: platform, audio, screen share"},{id:"prep-backup",label:"Have backup plan if tech fails"}]},{title:" Materials & logistics",steps:[{id:"prep-rollcall-list",label:"Prepare roll call list and attendance"},{id:"prep-speakers-list",label:"Plan speakers list management"},{id:"prep-motions-templates",label:"Prepare common motions / points (if using templates)"},{id:"prep-timing",label:"Confirm session start time and breaks"}]},{title:" Crisis (if applicable)",steps:[{id:"prep-crisis-brief",label:"Review crisis elements and update slides"},{id:"prep-crisis-speakers",label:"Plan crisis speaker order / cues"},{id:"prep-crisis-pathways",label:"Prepare crisis pathways and facts"}]},{title:" Team & communication",steps:[{id:"prep-co-chair",label:"Coordinate with co-chair(s) on roles"},{id:"prep-staff",label:"Confirm staff / dais support and cues"},{id:"prep-delegate-brief",label:"Prepare brief for delegates (rules, timing)"}]}];function r4(){const{togglePrepStep:t,isPrepStepDone:e,resetPrepChecklist:n}=Vt(),r=dx.flatMap(i=>i.steps),s=r.filter(i=>e(i.id)).length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Chair preparation checklist"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Before the conference: rules, topic, room, materials, and team. Reset when prepping a new session."})]}),u.jsxs("div",{className:"card-block p-4 flex items-center justify-between gap-2 mb-4",children:[u.jsxs("span",{className:"text-xs font-medium text-[var(--text-muted)]",children:[s," / ",r.length," done"]}),u.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[u.jsx(z1,{className:"w-3.5 h-3.5"}),"Reset checklist"]})]}),u.jsx("div",{className:"space-y-5",children:dx.map(i=>u.jsxs("div",{className:"card-block p-4",children:[u.jsx("h3",{className:"font-medium text-[var(--text)] mb-3",children:i.title}),u.jsx("ul",{className:"space-y-1",children:i.steps.map(o=>{const l=e(o.id);return u.jsx("li",{children:u.jsxs("label",{className:`flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer transition-colors ${l?"bg-[var(--success)]/10 text-[var(--text)]":"hover:bg-[var(--bg-elevated)]"}`,children:[u.jsx("span",{className:"text-[var(--accent)] flex-shrink-0",children:l?u.jsx(ya,{className:"w-5 h-5 fill-[var(--success)] text-[var(--success)]"}):u.jsx(hu,{className:"w-5 h-5"})}),u.jsx("span",{className:`text-sm ${l?"line-through text-[var(--text-muted)]":"text-[var(--text)]"}`,children:o.label}),u.jsx("input",{type:"checkbox",checked:l,onChange:()=>t(o.id),className:"sr-only","aria-label":o.label})]})},o.id)})})]},i.title))})]})}const Xp=[{category:"Documents & articles",sources:[{name:"UN Official Document System (ODS)",url:"https://documents.un.org/"},{name:"UN Digital Library",url:"https://digitallibrary.un.org/"},{name:"UN News",url:"https://news.un.org/"},{name:"UN Yearbook",url:"https://www.un.org/en/yearbook/"},{name:"UN Press",url:"https://press.un.org/"}]},{category:"Legislation & treaties",sources:[{name:"UN Treaty Collection",url:"https://treaties.un.org/"},{name:"UN Audiovisual Library of International Law",url:"https://legal.un.org/avl/"},{name:"UNCITRAL (International Trade Law)",url:"https://uncitral.un.org/"},{name:"UN Charter",url:"https://www.un.org/en/about-us/un-charter"}]},{category:"Main bodies",sources:[{name:"UN General Assembly",url:"https://www.un.org/ga/"},{name:"UN Security Council",url:"https://www.un.org/securitycouncil/"},{name:"UN ECOSOC",url:"https://www.un.org/ecosoc/"},{name:"International Court of Justice (ICJ)",url:"https://www.icj-cij.org/"},{name:"UN Secretariat",url:"https://www.un.org/sg/"},{name:"UN Trusteeship Council",url:"https://www.un.org/en/about-us/trusteeship-council"}]},{category:"Programmes & funds",sources:[{name:"UNDP",url:"https://www.undp.org/"},{name:"UNICEF",url:"https://www.unicef.org/"},{name:"UNHCR",url:"https://www.unhcr.org/"},{name:"WFP (World Food Programme)",url:"https://www.wfp.org/"},{name:"UNFPA",url:"https://www.unfpa.org/"},{name:"UN Environment Programme (UNEP)",url:"https://www.unep.org/"},{name:"UN Women",url:"https://www.unwomen.org/"},{name:"UN-Habitat",url:"https://unhabitat.org/"}]},{category:"Specialized agencies & related",sources:[{name:"WHO",url:"https://www.who.int/"},{name:"UNESCO",url:"https://www.unesco.org/"},{name:"IOM (International Organization for Migration)",url:"https://www.iom.int/"},{name:"UN Office on Drugs and Crime (UNODC)",url:"https://www.unodc.org/"},{name:"UN Office for Disarmament Affairs (UNODA)",url:"https://www.un.org/disarmament/"},{name:"UN Human Rights (OHCHR)",url:"https://www.ohchr.org/"},{name:"World Bank",url:"https://www.worldbank.org/"},{name:"IMF",url:"https://www.imf.org/"},{name:"ILO",url:"https://www.ilo.org/"},{name:"FAO",url:"https://www.fao.org/"}]},{category:"Peacekeeping & missions",sources:[{name:"UN Peacekeeping",url:"https://peacekeeping.un.org/"},{name:"UN Peacekeeping  current missions",url:"https://peacekeeping.un.org/en/missions"},{name:"UN Special Political Missions",url:"https://dppa.un.org/en/special-political-missions"}]},{category:"Founders & members",sources:[{name:"UN Member States",url:"https://www.un.org/en/about-us/member-states"},{name:"UN System (founders & members)",url:"https://www.un.org/en/about-us/un-system"},{name:"UN History",url:"https://www.un.org/en/about-us/history"}]}],K1=Xp.flatMap(t=>t.sources);function Zp({compact:t=!1,showHeading:e=!0}){return u.jsxs("div",{className:"space-y-4",children:[e&&u.jsxs("div",{children:[u.jsx("h2",{className:"section-heading text-[var(--text)] mb-0.5",children:" Official UN links"}),u.jsx("p",{className:"text-[var(--text-muted)] text-xs sm:text-sm",children:"Documents, treaties, main bodies, programmes, missions, and member info. Open in new tab."})]}),u.jsx("div",{className:t?"space-y-3":"space-y-5",children:Xp.map(({category:n,sources:r})=>u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wide mb-1.5 sm:mb-2",children:n}),u.jsx("ul",{className:t?"flex flex-wrap gap-1.5":"flex flex-wrap gap-2",children:r.map(({name:s,url:i})=>u.jsx("li",{children:u.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:`inline-block rounded-md border border-[var(--border)] bg-[var(--bg-elevated)] text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors ${t?"px-2 py-1 text-xs":"px-2.5 py-1.5 text-sm"}`,children:[s," "]})},s))})]},n))})]})}const Q1="seamuns-dashboard-sidebar-expanded";function s4(){try{const t=localStorage.getItem(Q1);return t===null?!0:t==="true"}catch{return!0}}const i4=[{id:"prep",label:" Prep checklist",icon:EO},{id:"flow",label:" Flow checklist",icon:ya},{id:"room",label:" Digital Room",icon:wO},{id:"delegates",label:" Delegates",icon:$1},{id:"motions",label:" Motions & Points",icon:uu},{id:"voting",label:" Voting",icon:H1},{id:"committee",label:" Committee & Topic",icon:Kp},{id:"score",label:" Score",icon:tx},{id:"rollcall",label:" Roll Call",icon:tx},{id:"session",label:" Session",icon:B1},{id:"speakers",label:" Speakers",icon:du},{id:"crisis",label:" Crisis",icon:bc},{id:"archive",label:" Archive",icon:mO},{id:"links",label:" Official links",icon:Yh}];function o4(){const[t,e]=N.useState("prep"),[n,r]=N.useState(!1),[s,i]=N.useState(s4);N.useEffect(()=>{localStorage.setItem(Q1,String(s))},[s]);const o=()=>i(l=>!l);return u.jsxs("div",{className:"flex flex-col lg:flex-row min-h-[calc(100vh-3rem)] sm:min-h-[calc(100vh-3.5rem)] lg:min-h-[calc(100vh-4rem)]",children:[u.jsx("aside",{className:`border-b lg:border-b-0 lg:border-r border-[var(--border)] bg-[var(--bg-elevated)] flex-shrink-0 overflow-x-auto overflow-y-hidden transition-[width] duration-200 ${s?"lg:w-max lg:min-w-[11rem] lg:max-w-[14rem]":"lg:w-10"}`,children:u.jsxs("div",{className:"flex lg:flex-col gap-0.5 p-1 sm:p-1.5 items-stretch lg:items-stretch",children:[i4.map(({id:l,label:c,icon:d})=>u.jsxs("button",{onClick:()=>e(l),title:c,className:`flex items-center gap-1.5 px-2 py-1.5 rounded-md text-xs font-medium transition-colors text-left whitespace-nowrap min-w-0 shrink-0 ${s?"w-full lg:w-max lg:min-w-0":"w-full lg:justify-center lg:px-1.5 lg:w-full"} ${t===l?"bg-[var(--accent)] text-white shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:[u.jsx(d,{className:"w-3.5 h-3.5 flex-shrink-0"}),u.jsx("span",{className:s?"lg:whitespace-nowrap":"truncate lg:sr-only lg:overflow-hidden lg:w-0",children:c})]},l)),u.jsxs("button",{onClick:()=>r(!n),title:"Settings",className:`flex items-center gap-1.5 px-2 py-1.5 rounded-md text-xs text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] mt-auto shrink-0 ${s?"w-full lg:w-max lg:min-w-0":"w-full lg:justify-center lg:px-1.5 lg:w-full"}`,children:[u.jsx(PO,{className:"w-3.5 h-3.5"}),u.jsx("span",{className:s?"lg:whitespace-nowrap":"truncate lg:sr-only lg:overflow-hidden lg:w-0",children:" Settings"})]}),u.jsxs("button",{type:"button",onClick:o,title:s?"Collapse sidebar":"Expand sidebar",className:"hidden lg:flex items-center justify-center gap-1.5 px-1.5 py-1.5 rounded-md text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors w-max",children:[s?u.jsx(U1,{className:"w-4 h-4 flex-shrink-0"}):u.jsx(F1,{className:"w-4 h-4 flex-shrink-0"}),s&&u.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:"Hide labels"})]})]})}),u.jsxs("main",{className:"flex-1 p-2 sm:p-3 md:p-5 overflow-auto min-w-0",children:[n&&u.jsx("div",{className:"mb-6 p-4 card-block",children:u.jsx(cx,{onClose:()=>r(!1)})}),t==="prep"&&u.jsx(r4,{}),t==="flow"&&u.jsx(n4,{}),t==="room"&&u.jsx(zO,{}),t==="delegates"&&u.jsx($O,{}),t==="motions"&&u.jsx(WO,{}),t==="voting"&&u.jsx(GO,{}),t==="committee"&&u.jsx(cx,{}),t==="score"&&u.jsx(qO,{}),t==="rollcall"&&u.jsx(QO,{}),t==="session"&&u.jsx(YO,{}),t==="speakers"&&u.jsx(JO,{}),t==="crisis"&&u.jsx(ZO,{}),t==="archive"&&u.jsx(t4,{}),t==="links"&&u.jsx("div",{className:"card-block p-4 sm:p-6",children:u.jsx(Zp,{showHeading:!0})})]})]})}function a4(){return u.jsxs(UO,{children:[u.jsxs("div",{className:"border-b border-[var(--border)] bg-[var(--bg-elevated)] px-3 sm:px-4 py-2 sm:py-3 flex items-center gap-2 sm:gap-3 shadow-[0_1px_0_0_var(--border)]",children:[u.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-[var(--accent-soft)] flex items-center justify-center flex-shrink-0",children:u.jsx(M1,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--accent)]"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("h1",{className:"page-title text-[var(--text)] whitespace-nowrap truncate",children:" Chair Room"}),u.jsx("p",{className:"text-xs sm:text-sm text-[var(--text-muted)] whitespace-nowrap truncate",children:" Digital Room   Motions   Voting   Speakers"})]})]}),u.jsx(o4,{})]})}const Y1="delegateData";async function l4(t){if(!Tc)return null;const e=x1(Tc,Y1,t),n=await JD(e);return n.exists()?n.data():null}async function c4(t,e){if(!Tc)return;const n=x1(Tc,Y1,t);await ZD(n,e)}function u4(t){const e=t.committeeMatrix&&Object.keys(t.committeeMatrix).length>0,n=t.committeeMatrixEntries&&t.committeeMatrixEntries.length>0;return{...t,committeeCount:t.committeeCount??0,committees:t.committees??[],committeeMatrixEntries:e&&!n&&t.committeeMatrix?Object.entries(t.committeeMatrix).map(([s,i])=>({committee:s,firstName:i,delegation:""})):t.committeeMatrixEntries??[],checklist:{...J1,...t.checklist||{}}}}const J1={positionPaper:!1,researchTopic:!1,researchCountryStance:!1,researchResolutions:!1,researchAllies:!1,researchNews:!1,positionPaperDraft:!1,positionPaperFinal:!1,positionPaperSubmit:!1,openingSpeechDraft:!1,openingSpeechTimed:!1,openingSpeech:!1,modSpeeches:!1,modCaucusPoints:!1,knowRules:!1,knowAgenda:!1,materialsReady:!1},Cl=t=>({id:t,name:"New Conference",country:"",stanceOverview:"",committeeCount:0,committees:[],committeeMatrixEntries:[],countdownDate:"",checklist:{...J1},trustedSources:[],nationSources:[],uploadedResources:[]});function kl(){var t;return((t=crypto.randomUUID)==null?void 0:t.call(crypto))??`conf-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}const X1=N.createContext(null);function d4(t,e){const n=t.find(r=>r.id===e);return n||(t.length>0?t[0]:Cl(kl()))}function h4({children:t,userId:e=null}){var X;const[n,r]=N.useState(()=>[Cl(kl())]),[s,i]=N.useState(()=>{var $;return(($=n[0])==null?void 0:$.id)??""}),[o,l]=N.useState(!1),[c,d]=N.useState(null),[f,m]=N.useState(!1),g=s||((X=n[0])==null?void 0:X.id),_=d4(n,g??"");N.useEffect(()=>{!g&&n[0]&&i(n[0].id)},[g,n]),N.useEffect(()=>{if(!e){m(!0);return}let $=!1;return l4(e).then(V=>{$||!V||V.conferences.length>0&&(r(V.conferences.map(u4)),i(V.activeConferenceId||V.conferences[0].id))}).catch(()=>{}).finally(()=>{$||m(!0)}),()=>{$=!0}},[e]);const I=N.useCallback($=>{r(V=>{const J=V.findIndex(Le=>Le.id===g);if(J<0)return V;const oe=[...V];return oe[J]=$(V[J]),oe})},[g]),k=N.useCallback($=>I(V=>({...V,name:$})),[I]),A=N.useCallback($=>I(V=>({...V,country:$})),[I]),E=N.useCallback($=>I(V=>({...V,stanceOverview:$})),[I]),y=N.useCallback($=>I(V=>({...V,committeeCount:Math.max(0,Math.min(20,$))})),[I]),T=N.useCallback($=>I(V=>({...V,committees:$})),[I]),R=N.useCallback($=>I(V=>({...V,committeeMatrixEntries:[...V.committeeMatrixEntries??[],$]})),[I]),B=N.useCallback($=>I(V=>({...V,committeeMatrixEntries:(V.committeeMatrixEntries??[]).filter((J,oe)=>oe!==$)})),[I]),F=N.useCallback($=>I(V=>({...V,countdownDate:$})),[I]),b=N.useCallback($=>I(V=>({...V,checklist:{...V.checklist,[$]:!V.checklist[$]}})),[I]),x=N.useCallback($=>I(V=>({...V,trustedSources:[...V.trustedSources,$]})),[I]),S=N.useCallback($=>I(V=>({...V,trustedSources:V.trustedSources.filter((J,oe)=>oe!==$)})),[I]),C=N.useCallback($=>I(V=>({...V,nationSources:[...V.nationSources,$]})),[I]),j=N.useCallback($=>I(V=>({...V,nationSources:V.nationSources.filter((J,oe)=>oe!==$)})),[I]),P=N.useCallback(($,V)=>I(J=>({...J,uploadedResources:[...J.uploadedResources,{name:$,url:V}]})),[I]),w=N.useCallback($=>I(V=>({...V,uploadedResources:V.uploadedResources.filter((J,oe)=>oe!==$)})),[I]),ie=N.useCallback(()=>{const $=kl(),V=Cl($);r(J=>[...J,V]),i($)},[]),$e=N.useCallback($=>{var Le,Ke;const V=n.filter(M=>M.id!==$),J=V.length>0?V:[Cl(kl())],oe=g===$?((Le=J[0])==null?void 0:Le.id)??"":g??((Ke=J[0])==null?void 0:Ke.id)??"";r(J),i(oe)},[n,g]),Lt=N.useCallback($=>{i($)},[]),Ve=N.useCallback(async()=>{var $;if(e){l(!0);try{await c4(e,{conferences:n,activeConferenceId:g??(($=n[0])==null?void 0:$.id)??""}),d(new Date)}finally{l(!1)}}},[e,n,g]),G={..._,conferences:n,activeConferenceId:g??"",setName:k,setCountry:A,setStanceOverview:E,setCommitteeCount:y,setCommittees:T,addCommitteeMatrixEntry:R,removeCommitteeMatrixEntry:B,setCountdownDate:F,toggleChecklist:b,addTrustedSource:x,removeTrustedSource:S,addNationSource:C,removeNationSource:j,addUploadedResource:P,removeUploadedResource:w,addConference:ie,removeConference:$e,setActiveConference:Lt,saveToAccount:Ve,isSaving:o,lastSaved:c,isLoaded:f};return u.jsx(X1.Provider,{value:G,children:t})}function Br(){const t=N.useContext(X1);if(!t)throw new Error("useDelegate must be used within DelegateProvider");return t}function f4(){const{name:t,country:e,stanceOverview:n,setName:r,setCountry:s,setStanceOverview:i}=Br();return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Country Assignment"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Your country and brief stance overview for this conference."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Conference name"}),u.jsx("input",{type:"text",value:t,onChange:o=>r(o.target.value),placeholder:"e.g. NMUN 2025",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Country"}),u.jsx("input",{type:"text",value:e,onChange:o=>s(o.target.value),placeholder:"e.g. France, United Kingdom",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Brief stance overview"}),u.jsx("textarea",{value:n,onChange:o=>i(o.target.value),placeholder:"Summarize your country's position on the committee topic(s)...",rows:5,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]})]})]})}function p4(t){if(t===Ut)return"Other";const e=ss.find(n=>n.value===t);return e?e.label:t}function m4(){const{committeeCount:t,committees:e,setCommitteeCount:n,setCommittees:r,committeeMatrixEntries:s,addCommitteeMatrixEntry:i,removeCommitteeMatrixEntry:o}=Br(),[l,c]=N.useState(""),[d,f]=N.useState(""),[m,g]=N.useState(""),[_,I]=N.useState({}),[k,A]=N.useState(0),E=Math.max(0,Math.min(20,t)),y=e.length>0?e:Array.from({length:E},(P,w)=>_[w]??""),T=P=>{const w=Math.max(0,Math.min(20,P));n(w),w<e.length?r(e.slice(0,w)):w>e.length&&r([...e,...Array(w-e.length).fill("")])},R=(P,w)=>{const ie=[...y];ie[P]=w===Ut?Ut:w,r(ie)},B=(P,w)=>{I($e=>({...$e,[P]:w}));const ie=[...e];ie.length<=P||(ie[P]=w,r(ie))},F=P=>P===Ut?"Other":p4(P),b=y.filter(Boolean),x=Math.min(Math.max(0,k),Math.max(0,b.length-1)),S=b[x]??"",C=P=>s.map((w,ie)=>({entry:w,i:ie})).filter(({entry:w})=>w.committee===P),j=P=>{const w=d===si?m.trim():d;!P||!l.trim()||(i({committee:P,firstName:l.trim(),delegation:w||""}),c(""),f(""),g(""))};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Committee Matrix"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Set how many committees for this conference, which committees, then add delegates (first name + delegation)."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Conference committees"}),u.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"When registering this conference: how many committees, and which ones?"}),u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"How many committees?"}),u.jsx("input",{type:"number",min:0,max:20,value:E,onChange:P=>T(parseInt(P.target.value,10)||0),className:"w-24 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Number of committees"})]}),E>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block",children:"Which committees?"}),Array.from({length:E},(P,w)=>u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsxs("span",{className:"text-xs text-[var(--text-muted)] w-20",children:["Committee ",w+1]}),u.jsxs("select",{value:y[w]&&ss.some(ie=>ie.value===y[w])?y[w]:y[w]?Ut:"",onChange:ie=>R(w,ie.target.value),className:"min-w-[12rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":`Committee ${w+1}`,children:[u.jsx("option",{value:"",children:"Select"}),ss.map(ie=>u.jsx("option",{value:ie.value,children:ie.label},ie.value)),u.jsx("option",{value:Ut,children:"Other (custom)"})]}),(y[w]===Ut||y[w]&&!ss.some(ie=>ie.value===y[w]))&&u.jsx("input",{type:"text",value:y[w]&&y[w]!==Ut?y[w]:_[w]??"",onChange:ie=>B(w,ie.target.value),placeholder:"Committee name",className:"min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]},w))]})]}),u.jsx("div",{className:"card-block overflow-hidden",children:b.length===0?u.jsx("div",{className:"px-4 py-8 text-center text-[var(--text-muted)] text-sm",children:"Set committees above, then use the tabs to add and view matrix entries per committee."}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex border-b border-[var(--border)] overflow-x-auto",children:b.map((P,w)=>u.jsx("button",{type:"button",onClick:()=>A(w),className:`px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${w===x?"border-[var(--accent)] text-[var(--accent)] bg-[var(--accent-soft)]/30":"border-transparent text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-elevated)]"}`,children:F(P)},P))}),S&&u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] mr-2",children:" Add to this committee:"}),u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"First name"}),u.jsx("input",{type:"text",value:l,onChange:P=>c(P.target.value),placeholder:"e.g. Alex",className:"w-28 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Delegation"}),u.jsxs("select",{value:d,onChange:P=>f(P.target.value),className:"min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Delegation",children:[u.jsx("option",{value:"",children:"Select"}),Xh.map(P=>u.jsx("option",{value:P,children:P},P)),u.jsx("option",{value:si,children:"Other"})]}),d===si&&u.jsx("input",{type:"text",value:m,onChange:P=>g(P.target.value),placeholder:"Delegation name",className:"mt-1 min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("button",{onClick:()=>j(S),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-[var(--border)] bg-[var(--bg-elevated)]",children:[u.jsx("th",{className:"text-left px-4 py-2 font-medium text-[var(--text-muted)]",children:"First name"}),u.jsx("th",{className:"text-left px-4 py-2 font-medium text-[var(--text-muted)]",children:"Delegation"}),u.jsx("th",{className:"w-10 px-2 py-2","aria-label":"Remove"})]})}),u.jsx("tbody",{children:C(S).length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-[var(--text-muted)]",children:"No entries for this committee yet."})}):C(S).map(({entry:P,i:w})=>u.jsxs("tr",{className:"border-b border-[var(--border)]",children:[u.jsx("td",{className:"px-4 py-3 text-[var(--text)]",children:P.firstName}),u.jsx("td",{className:"px-4 py-3 text-[var(--text)]",children:u.jsxs("span",{className:"inline-flex items-center gap-2",children:[u.jsx("span",{className:"text-base shrink-0",title:P.delegation||void 0,children:G1(P.delegation||"")||""}),P.delegation||""]})}),u.jsx("td",{className:"px-2 py-3",children:u.jsx("button",{type:"button",onClick:()=>o(w),className:"p-1.5 rounded text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)]","aria-label":"Remove entry",children:u.jsx(gs,{className:"w-4 h-4"})})})]},w))})]})})]})]})})]})}const Z1="https://docs.google.com/document/d/1SuV8e971dG78pm6_P6Z62MZQTjRKgBn2lyclq148Ifw/edit?usp=sharing";function g4(){const{country:t}=Br();return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Prep Template"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Use this template to structure your research and speaking prep."})]}),u.jsxs("div",{className:"card-block p-4 sm:p-5 border-2 border-[var(--accent)]/30 bg-[var(--accent-soft)]/50",children:[u.jsxs("h3",{className:"text-sm font-medium text-[var(--text)] mb-1 flex items-center gap-2",children:[u.jsx(yO,{className:"w-4 h-4 text-[var(--accent)]"}),"Make a copy to guide your prep"]}),u.jsxs("p",{className:"text-sm text-[var(--text-muted)] mb-3",children:["Open the MUN Prep Template in Google Docs, then use ",u.jsx("strong",{children:"File  Make a copy"})," to create your own copy for research and speaking prep."]}),u.jsxs("a",{href:Z1,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 transition-opacity",children:[u.jsx(O1,{className:"w-4 h-4"}),"Open MUN Prep Template (Google Doc)"]})]}),u.jsxs("div",{className:"card-block p-6 space-y-4",children:[u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Country"}),u.jsx("p",{className:"text-sm text-[var(--text)]",children:t||""})]}),u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Topic research"}),u.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Key facts, UN resolutions, recent developments."}),u.jsx("textarea",{placeholder:"Notes...",rows:4,className:"mt-2 w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]}),u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Country stance"}),u.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"How your country views the topic; red lines and priorities."}),u.jsx("textarea",{placeholder:"Notes...",rows:4,className:"mt-2 w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]}),u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Opening speech (draft)"}),u.jsx("textarea",{placeholder:"Draft opening statement...",rows:5,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]}),u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Mod speeches (optional)"}),u.jsx("textarea",{placeholder:"Talking points for moderated caucus...",rows:3,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]})]})]})}const eT=["Reuters","BBC News","Al Jazeera","Associated Press (AP)","The Guardian","Council on Foreign Relations (CFR)","Human Rights Watch","Amnesty International"],hx=[...K1.map(t=>t.name),...eT],v4=Object.fromEntries(K1.map(t=>[t.name,t.url])),y4={health:["WHO","UN News"],disease:["WHO","UN News"],refugee:["UNHCR","UN News","Amnesty International"],refugees:["UNHCR","UN News","Amnesty International"],migration:["UNHCR","UN News","IOM (International Organization for Migration)"],climate:["UN News","UN Environment Programme (UNEP)","Reuters","The Guardian"],environment:["UN News","UN Environment Programme (UNEP)","Reuters","The Guardian"],economy:["World Bank","IMF","UN News"],economic:["World Bank","IMF","UN News"],finance:["IMF","World Bank"],rights:["Human Rights Watch","Amnesty International","UN News","UN Human Rights (OHCHR)"],"human-rights":["Human Rights Watch","Amnesty International","UN News","UN Human Rights (OHCHR)"],conflict:["Reuters","BBC News","Council on Foreign Relations (CFR)","UN News","UN Peacekeeping"],security:["Reuters","BBC News","Council on Foreign Relations (CFR)","UN News","UN Security Council"],peace:["UN News","UN Peacekeeping","Reuters","BBC News"],education:["UN News","UNESCO"],women:["UN News","Amnesty International","UN Women"],gender:["UN News","Amnesty International","UN Women"],disarmament:["UN News","UN Office for Disarmament Affairs (UNODA)","Reuters"],arms:["UN News","UN Office for Disarmament Affairs (UNODA)","Reuters"],drugs:["UN Office on Drugs and Crime (UNODC)","UN News"],crime:["UN Office on Drugs and Crime (UNODC)","UN News"],treaties:["UN Treaty Collection","UN Official Document System (ODS)","UN Audiovisual Library of International Law"],documents:["UN Official Document System (ODS)","UN Digital Library","UN Treaty Collection"],food:["WFP (World Food Programme)","FAO","UN News"],labour:["ILO","UN News"],habitat:["UN-Habitat","UN News"],charter:["UN Charter","UN Official Document System (ODS)"],missions:["UN Peacekeeping","UN Peacekeeping  current missions","UN Special Political Missions"]};function x4(t){const e=t.toLowerCase().trim().split(/\s+/).filter(Boolean);if(e.length===0)return[];const n=new Set;for(const i of e){const o=[];for(const[c,d]of Object.entries(y4))(c.includes(i)||i.includes(c))&&o.push(...d);const l=hx.filter(c=>c.toLowerCase().includes(i));[...o,...l].forEach(c=>n.add(c))}const r=e.join(" ");return hx.filter(i=>i.toLowerCase().includes(r)).forEach(i=>n.add(i)),Array.from(n)}function _4(){const{trustedSources:t,nationSources:e,addTrustedSource:n,removeTrustedSource:r,addNationSource:s,removeNationSource:i}=Br(),[o,l]=N.useState(""),[c,d]=N.useState(""),[f,m]=N.useState(""),g=N.useMemo(()=>x4(f),[f]),_=()=>{o.trim()&&(n(o.trim()),l(""))},I=()=>{c.trim()&&(s(c.trim()),d(""))},k=A=>{t.includes(A)||n(A)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Trusted & Nation Sources"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Trusted sources and nation-specific sources for research."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Search by key terms (topic-related)"}),u.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Enter terms related to your topic (e.g. health, refugees, climate, economy) to see suggested sources."}),u.jsx("div",{className:"flex gap-2",children:u.jsxs("div",{className:"relative flex-1",children:[u.jsx(AO,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--text-muted)] pointer-events-none"}),u.jsx("input",{type:"text",value:f,onChange:A=>m(A.target.value),placeholder:"e.g. health refugees climate",className:"w-full pl-9 pr-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]})}),g.length>0&&u.jsxs("div",{className:"rounded-lg border border-[var(--border)] bg-[var(--bg-elevated)] p-3",children:[u.jsx("p",{className:"text-xs font-medium text-[var(--text-muted)] mb-2",children:"Suggested sources for your topic"}),u.jsx("div",{className:"flex flex-wrap gap-1.5",children:g.map(A=>u.jsxs("button",{type:"button",onClick:()=>k(A),disabled:t.includes(A),className:"px-2.5 py-1 rounded-md text-xs font-medium transition-colors bg-[var(--accent-soft)] text-[var(--accent)] hover:opacity-90 border border-[var(--accent)]/30 disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",A]},A))})]}),u.jsx("h3",{className:"text-sm font-medium text-[var(--text)] pt-2 border-t border-[var(--border)]",children:" Trusted sources"}),u.jsx("p",{className:"text-xs text-[var(--text-muted)] mb-2",children:"Official UN links by category (click to add; open link in new tab)."}),Xp.map(({category:A,sources:E})=>u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wide mb-1.5",children:A}),u.jsx("div",{className:"flex flex-wrap gap-1.5",children:E.map(({name:y,url:T})=>u.jsxs("span",{className:"inline-flex items-center gap-1",children:[u.jsxs("button",{type:"button",onClick:()=>k(y),disabled:t.includes(y),className:"px-2.5 py-1 rounded-md text-xs font-medium transition-colors bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--accent-soft)] border border-[var(--border)] disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",y]}),u.jsx("a",{href:T,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--accent)] hover:underline text-xs",title:"Open in new tab",children:""})]},y))})]},A)),u.jsx("h4",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wide mb-1.5 mt-4",children:"Other trusted"}),u.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:eT.map(A=>u.jsxs("button",{type:"button",onClick:()=>k(A),disabled:t.includes(A),className:"px-2.5 py-1 rounded-md text-xs font-medium transition-colors bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--accent-soft)] border border-[var(--border)] disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",A]},A))}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:o,onChange:A=>l(A.target.value),onKeyDown:A=>A.key==="Enter"&&_(),placeholder:"URL or name",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("ul",{className:"space-y-2",children:t.map((A,E)=>{const y=v4[A];return u.jsxs("li",{className:"flex items-center justify-between gap-2 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] text-sm text-[var(--text)]",children:[y?u.jsxs("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--accent)] hover:underline truncate min-w-0",children:[A," "]}):u.jsx("span",{className:"truncate min-w-0",children:A}),u.jsx("button",{onClick:()=>r(E),className:"p-1 rounded text-[var(--text-muted)] hover:text-[var(--danger)] shrink-0",children:u.jsx(gs,{className:"w-4 h-4"})})]},E)})})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Nation-specific sources"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:c,onChange:A=>d(A.target.value),onKeyDown:A=>A.key==="Enter"&&I(),placeholder:"URL or name",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("ul",{className:"space-y-2",children:e.map((A,E)=>u.jsxs("li",{className:"flex items-center justify-between px-3 py-2 rounded-lg bg-[var(--bg-elevated)] text-sm text-[var(--text)]",children:[A,u.jsx("button",{onClick:()=>i(E),className:"p-1 rounded text-[var(--text-muted)] hover:text-[var(--danger)]",children:u.jsx(gs,{className:"w-4 h-4"})})]},E))})]})]})}function w4(){const{uploadedResources:t,addUploadedResource:e,removeUploadedResource:n}=Br(),[r,s]=N.useState(""),[i,o]=N.useState(""),l=()=>{r.trim()&&(e(r.trim(),i.trim()||void 0),s(""),o(""))};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Chair Report & Delegate Resources"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Handbook, position paper guidelines, chair report  upload or link."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsxs("h3",{className:"text-sm font-medium text-[var(--text)] flex items-center gap-2",children:[u.jsx(DO,{className:"w-4 h-4 text-[var(--accent)]"}),"  Add resource"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"text",value:r,onChange:c=>s(c.target.value),placeholder:"Resource name (e.g. Chair report, Pos paper guidelines)",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsx("input",{type:"text",value:i,onChange:c=>o(c.target.value),placeholder:"URL (optional)",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(Sn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-64 overflow-auto",children:t.map((c,d)=>u.jsxs("li",{className:"px-3 py-3 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-[var(--text)]",children:c.name}),c.url&&u.jsx("p",{className:"text-xs text-[var(--text-muted)] truncate max-w-xs",children:c.url})]}),u.jsx("button",{onClick:()=>n(d),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)]",children:u.jsx(gs,{className:"w-4 h-4"})})]},d))})]})]})}const E4=[{title:" Topic research",docSection:"Complete the Topic research section in your prep doc",keys:[{key:"researchTopic",label:"Topic and background (key facts, history)"},{key:"researchResolutions",label:"Existing UN resolutions and draft ideas"},{key:"researchNews",label:"Recent news and developments on the topic"}]},{title:" Country stance",docSection:"Complete the Country stance section in your prep doc",keys:[{key:"researchCountryStance",label:"Your countrys stance, policy, and red lines"},{key:"researchAllies",label:"Likely allies and blocs"}]},{title:" Position paper",docSection:"Use the Position paper section in your prep doc",keys:[{key:"positionPaperDraft",label:"Draft (structure and main points)"},{key:"positionPaperFinal",label:"Finalise (edit and cite sources)"},{key:"positionPaperSubmit",label:"Submit by deadline"},{key:"positionPaper",label:"Complete and approved"}]},{title:" Opening speech",docSection:"Use the Opening speech section in your prep doc",keys:[{key:"openingSpeechDraft",label:"Draft opening statement"},{key:"openingSpeechTimed",label:"Time and trim to speaking limit"},{key:"openingSpeech",label:"Ready and practised"}]},{title:" Mod & unmod speeches",docSection:"Use the Mod / unmod section in your prep doc",keys:[{key:"modSpeeches",label:"Moderated caucus talking points"},{key:"modCaucusPoints",label:"Unmoderated caucus / bloc discussion points"}]},{title:" Rules & materials",docSection:"Check off before conference",keys:[{key:"knowRules",label:"Committee rules and parliamentary procedure"},{key:"knowAgenda",label:"Agenda, timing, and conference schedule"},{key:"materialsReady",label:"Materials ready (placard, paper, laptop, etc.)"}]}];function T4(){const{checklist:t,toggleChecklist:e}=Br();return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Preparation checklist"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm mb-2",children:"This checklist follows the sections of the MUN Prep Template. Make a copy of the template and work through each section in your doc."}),u.jsxs("a",{href:Z1,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 text-sm font-medium text-[var(--accent)] hover:underline",children:[u.jsx(O1,{className:"w-4 h-4"}),"Open MUN Prep Template (Google Doc)"]})]}),u.jsx("div",{className:"space-y-5",children:E4.map(n=>u.jsxs("div",{className:"card-block p-4",children:[u.jsx("h3",{className:"font-medium text-[var(--text)] mb-1",children:n.title}),u.jsx("p",{className:"text-xs text-[var(--text-muted)] mb-3",children:n.docSection}),u.jsx("ul",{className:"space-y-1",children:n.keys.map(({key:r,label:s})=>u.jsx("li",{children:u.jsxs("label",{className:"flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer hover:bg-[var(--bg-elevated)] transition-colors",children:[u.jsx("span",{className:"text-[var(--accent)] flex-shrink-0",children:t[r]?u.jsx(ya,{className:"w-5 h-5 fill-[var(--accent)]"}):u.jsx(hu,{className:"w-5 h-5"})}),u.jsx("span",{className:`text-sm text-[var(--text)] ${t[r]?"line-through text-[var(--text-muted)]":""}`,children:s}),u.jsx("input",{type:"checkbox",checked:t[r],onChange:()=>e(r),className:"sr-only","aria-label":s})]})},r))})]},n.title))})]})}function b4(){const{countdownDate:t,setCountdownDate:e}=Br(),[n,r]=N.useState(null);return N.useEffect(()=>{if(!t){r(null);return}const s=new Date(t).getTime(),i=()=>{const l=Date.now();if(l>=s){r({days:0,hours:0,minutes:0,seconds:0});return}const c=Math.floor((s-l)/1e3);r({days:Math.floor(c/86400),hours:Math.floor(c%86400/3600),minutes:Math.floor(c%3600/60),seconds:c%60})};i();const o=setInterval(i,1e3);return()=>clearInterval(o)},[t]),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Conference Countdown"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Set the conference start date and see time remaining."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Conference start (date & time)"}),u.jsx("input",{type:"datetime-local",value:t?t.slice(0,16):"",onChange:s=>e(s.target.value?new Date(s.target.value).toISOString():""),className:"w-full max-w-xs px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),n&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--text-muted)]",children:[u.jsx(Yp,{className:"w-4 h-4 text-[var(--accent)]"}),u.jsx("span",{children:" Time until conference:"})]})]}),n&&u.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:n.days}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Days"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:n.hours}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Hours"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:n.minutes}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Minutes"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:n.seconds}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Seconds"})]})]})]})}const tT="seamuns-dashboard-sidebar-expanded";function S4(){try{const t=localStorage.getItem(tT);return t===null?!0:t==="true"}catch{return!0}}function I4(){const{conferences:t,activeConferenceId:e,setActiveConference:n,addConference:r,removeConference:s,saveToAccount:i,isSaving:o,lastSaved:l,isLoaded:c}=Br(),{isAuthenticated:d}=qp(),f=t.length>1,m=g=>{const _=Date.now()-g.getTime();return _<6e4?"Saved just now":_<36e5?`Saved ${Math.floor(_/6e4)}m ago`:g.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})};return u.jsxs("div",{className:"border-b border-[var(--border)] bg-[var(--bg-elevated)] px-3 sm:px-4 py-2 sm:py-3 flex flex-wrap items-center gap-2 sm:gap-3 shadow-[0_1px_0_0_var(--border)]",children:[u.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-[var(--accent-soft)] flex items-center justify-center flex-shrink-0",children:u.jsx(fu,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--accent)]"})}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("h1",{className:"page-title text-[var(--text)] whitespace-nowrap truncate",children:" Delegate Dashboard"}),u.jsx("p",{className:"text-xs sm:text-sm text-[var(--text-muted)] whitespace-nowrap truncate",children:" Country   Matrix   Prep   Checklist   Countdown"})]}),c&&u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsxs("label",{className:"flex items-center gap-1.5 text-xs text-[var(--text-muted)]",children:[u.jsx("span",{className:"hidden sm:inline",children:"Conference"}),u.jsx("select",{value:e,onChange:g=>n(g.target.value),className:"min-w-[8rem] px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Select conference",children:t.map(g=>u.jsx("option",{value:g.id,children:g.name||"Unnamed"},g.id))})]}),u.jsxs("button",{type:"button",onClick:r,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--accent)] text-white hover:opacity-90 transition-opacity",children:[u.jsx(Sn,{className:"w-3.5 h-3.5"})," Add conference"]}),f&&u.jsx("button",{type:"button",onClick:()=>s(e),title:"Remove this conference",className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-card)] transition-colors","aria-label":"Remove conference",children:u.jsx(gs,{className:"w-3.5 h-3.5"})}),d&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>i(),disabled:o,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--brand)] text-white hover:opacity-90 transition-opacity disabled:opacity-60",children:[u.jsx(NO,{className:"w-3.5 h-3.5"}),o?"Saving":"Save to account"]}),l&&!o&&u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:m(l)})]})]})]})}const C4=[{id:"country",label:" Country & Stance",icon:_O},{id:"matrix",label:" Committee Matrix",icon:$1},{id:"prep",label:" Prep Template",icon:uu},{id:"sources",label:" Trusted & Nation Sources",icon:Yh},{id:"links",label:" Official links",icon:Yh},{id:"resources",label:" Chair Report & Resources",icon:Kp},{id:"checklist",label:" Checklist",icon:ya},{id:"countdown",label:" Conference Countdown",icon:Yp}];function k4(){const[t,e]=N.useState("country"),[n,r]=N.useState(S4);N.useEffect(()=>{localStorage.setItem(tT,String(n))},[n]);const s=()=>r(i=>!i);return u.jsxs("div",{className:"flex flex-col lg:flex-row min-h-[calc(100vh-3rem)] sm:min-h-[calc(100vh-3.5rem)] lg:min-h-[calc(100vh-4rem)]",children:[u.jsx("aside",{className:`border-b lg:border-b-0 lg:border-r border-[var(--border)] bg-[var(--bg-elevated)] flex-shrink-0 overflow-x-auto overflow-y-hidden transition-[width] duration-200 ${n?"lg:w-max lg:min-w-[11rem] lg:max-w-[14rem]":"lg:w-10"}`,children:u.jsxs("div",{className:"flex lg:flex-col gap-0.5 p-1 sm:p-1.5 items-stretch lg:items-stretch",children:[C4.map(({id:i,label:o,icon:l})=>u.jsxs("button",{onClick:()=>e(i),title:o,className:`flex items-center gap-1.5 px-2 py-1.5 rounded-md text-xs font-medium transition-colors text-left whitespace-nowrap min-w-0 shrink-0 ${n?"w-full lg:w-max lg:min-w-0":"w-full lg:justify-center lg:px-1.5 lg:w-full"} ${t===i?"bg-[var(--accent)] text-white shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:[u.jsx(l,{className:"w-3.5 h-3.5 flex-shrink-0"}),u.jsx("span",{className:n?"lg:whitespace-nowrap":"truncate lg:sr-only lg:overflow-hidden lg:w-0",children:o})]},i)),u.jsxs("button",{type:"button",onClick:s,title:n?"Collapse sidebar":"Expand sidebar",className:"hidden lg:flex items-center justify-center gap-1.5 px-1.5 py-1.5 rounded-md text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors w-max",children:[n?u.jsx(U1,{className:"w-4 h-4 flex-shrink-0"}):u.jsx(F1,{className:"w-4 h-4 flex-shrink-0"}),n&&u.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:"Hide labels"})]})]})}),u.jsxs("main",{className:"flex-1 p-2 sm:p-3 md:p-5 overflow-auto min-w-0",children:[t==="country"&&u.jsx(f4,{}),t==="matrix"&&u.jsx(m4,{}),t==="prep"&&u.jsx(g4,{}),t==="sources"&&u.jsx(_4,{}),t==="links"&&u.jsx("div",{className:"card-block p-4 sm:p-6",children:u.jsx(Zp,{showHeading:!0})}),t==="resources"&&u.jsx(w4,{}),t==="checklist"&&u.jsx(T4,{}),t==="countdown"&&u.jsx(b4,{})]})]})}function N4(){const{user:t}=qp(),e=(t==null?void 0:t.uid)??null;return u.jsxs(h4,{userId:e,children:[u.jsx(I4,{}),u.jsx(k4,{})]})}function A4(){return u.jsxs("div",{className:"max-w-[1000px] mx-auto px-3 sm:px-6 py-8 sm:py-12 md:py-16 text-center",children:[u.jsx(W1,{className:"h-10 sm:h-12 md:h-14 w-auto mx-auto mb-4 sm:mb-5"}),u.jsxs("h1",{className:"font-semibold text-2xl sm:text-3xl md:text-4xl text-[var(--text)] mb-2 sm:mb-3",children:["SEAMUNs Dashboard ",u.jsx("span",{className:"text-[var(--brand)]",children:""})]}),u.jsxs("p",{className:"text-[var(--text-muted)] text-sm sm:text-base md:text-lg mb-6 sm:mb-10 max-w-xl mx-auto",children:["Part of ",u.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",className:"text-[var(--brand)] hover:underline",children:"SEAMUNs"}),"  run committee sessions and prepare for conferences. Choose your role below."]}),u.jsxs("div",{className:"grid sm:grid-cols-2 gap-3 sm:gap-6",children:[u.jsxs(wh,{to:"/chair",className:"group block p-4 sm:p-6 md:p-8 rounded-[var(--radius-card)] border border-[var(--border)] bg-[var(--bg-card)] shadow-[var(--shadow-card)] hover:border-[var(--brand)] hover:bg-[var(--brand-soft)] transition-all text-left",children:[u.jsx("div",{className:"w-9 h-9 sm:w-11 sm:h-11 rounded-lg sm:rounded-xl bg-[var(--brand-soft)] flex items-center justify-center mb-3 sm:mb-4 group-hover:scale-105 transition-transform",children:u.jsx(M1,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--brand)]"})}),u.jsx("h2",{className:"font-semibold text-lg sm:text-xl text-[var(--text)] mb-1.5 sm:mb-2",children:" Chair Room"}),u.jsx("p",{className:"text-[var(--text-muted)] text-xs sm:text-sm",children:" Digital Room   Delegates   Motions   Voting   Speakers   Crisis   Archive"})]}),u.jsxs(wh,{to:"/delegate",className:"group block p-4 sm:p-6 md:p-8 rounded-[var(--radius-card)] border border-[var(--border)] bg-[var(--bg-card)] shadow-[var(--shadow-card)] hover:border-[var(--accent)] hover:bg-[var(--accent-soft)] transition-all text-left",children:[u.jsx("div",{className:"w-9 h-9 sm:w-11 sm:h-11 rounded-lg sm:rounded-xl bg-[var(--accent-soft)] flex items-center justify-center mb-3 sm:mb-4 group-hover:scale-105 transition-transform",children:u.jsx(fu,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--accent)]"})}),u.jsx("h2",{className:"font-semibold text-lg sm:text-xl text-[var(--text)] mb-1.5 sm:mb-2",children:" Delegate Dashboard"}),u.jsx("p",{className:"text-[var(--text-muted)] text-xs sm:text-sm",children:" Country   Matrix   Prep   Checklist   Countdown"})]})]}),u.jsxs("p",{className:"mt-6 sm:mt-10 text-[var(--text-muted)] text-xs sm:text-sm flex items-center justify-center gap-2",children:[u.jsx(gO,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),u.jsx("span",{children:" Per-conference setup for chairs and delegates"})]}),u.jsx("section",{className:"mt-10 sm:mt-14 pt-8 sm:pt-12 border-t border-[var(--border)] text-left",children:u.jsx(Zp,{showHeading:!0})})]})}function P4(){return u.jsx(uO,{children:u.jsx(eC,{children:u.jsxs(Ps,{path:"/",element:u.jsx(OO,{}),children:[u.jsx(Ps,{index:!0,element:u.jsx(A4,{})}),u.jsx(Ps,{path:"chair",element:u.jsx(a4,{})}),u.jsx(Ps,{path:"delegate",element:u.jsx(N4,{})}),u.jsx(Ps,{path:"*",element:u.jsx(JI,{to:"/",replace:!0})})]})})})}const R4=!0,j4=R4?iO:oO,D4=u.jsx(N.StrictMode,{children:u.jsx(lC,{children:u.jsx(j4,{children:u.jsx(P4,{})})})});Sw(document.getElementById("root")).render(D4);
