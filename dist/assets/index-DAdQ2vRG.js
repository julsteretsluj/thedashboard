function NT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function AT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dx={exports:{}},Ec={},hx={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xo=Symbol.for("react.element"),PT=Symbol.for("react.portal"),RT=Symbol.for("react.fragment"),jT=Symbol.for("react.strict_mode"),OT=Symbol.for("react.profiler"),DT=Symbol.for("react.provider"),MT=Symbol.for("react.context"),VT=Symbol.for("react.forward_ref"),LT=Symbol.for("react.suspense"),UT=Symbol.for("react.memo"),FT=Symbol.for("react.lazy"),Jm=Symbol.iterator;function zT(t){return t===null||typeof t!="object"?null:(t=Jm&&t[Jm]||t["@@iterator"],typeof t=="function"?t:null)}var fx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},px=Object.assign,mx={};function gi(t,e,n){this.props=t,this.context=e,this.refs=mx,this.updater=n||fx}gi.prototype.isReactComponent={};gi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gx(){}gx.prototype=gi.prototype;function Jh(t,e,n){this.props=t,this.context=e,this.refs=mx,this.updater=n||fx}var Xh=Jh.prototype=new gx;Xh.constructor=Jh;px(Xh,gi.prototype);Xh.isPureReactComponent=!0;var Xm=Array.isArray,vx=Object.prototype.hasOwnProperty,Zh={current:null},yx={key:!0,ref:!0,__self:!0,__source:!0};function xx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)vx.call(e,r)&&!yx.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Xo,type:t,key:i,ref:o,props:s,_owner:Zh.current}}function BT(t,e){return{$$typeof:Xo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ef(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xo}function $T(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zm=/\/+/g;function Du(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$T(""+t.key):e.toString(36)}function nl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xo:case PT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Du(o,0):r,Xm(s)?(n="",t!=null&&(n=t.replace(Zm,"$&/")+"/"),nl(s,e,n,"",function(d){return d})):s!=null&&(ef(s)&&(s=BT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Zm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Xm(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Du(i,l);o+=nl(i,e,n,c,s)}else if(c=zT(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Du(i,l++),o+=nl(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ra(t,e,n){if(t==null)return t;var r=[],s=0;return nl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function HT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pt={current:null},rl={transition:null},WT={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:rl,ReactCurrentOwner:Zh};function _x(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Ra,forEach:function(t,e,n){Ra(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ra(t,function(){e++}),e},toArray:function(t){return Ra(t,function(e){return e})||[]},only:function(t){if(!ef(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=gi;ie.Fragment=RT;ie.Profiler=OT;ie.PureComponent=Jh;ie.StrictMode=jT;ie.Suspense=LT;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WT;ie.act=_x;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=px({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Zh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)vx.call(e,c)&&!yx.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Xo,type:t.type,key:s,ref:i,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:MT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DT,_context:t},t.Consumer=t};ie.createElement=xx;ie.createFactory=function(t){var e=xx.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:VT,render:t}};ie.isValidElement=ef;ie.lazy=function(t){return{$$typeof:FT,_payload:{_status:-1,_result:t},_init:HT}};ie.memo=function(t,e){return{$$typeof:UT,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=rl.transition;rl.transition={};try{t()}finally{rl.transition=e}};ie.unstable_act=_x;ie.useCallback=function(t,e){return pt.current.useCallback(t,e)};ie.useContext=function(t){return pt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return pt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return pt.current.useEffect(t,e)};ie.useId=function(){return pt.current.useId()};ie.useImperativeHandle=function(t,e,n){return pt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return pt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return pt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return pt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return pt.current.useReducer(t,e,n)};ie.useRef=function(t){return pt.current.useRef(t)};ie.useState=function(t){return pt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return pt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return pt.current.useTransition()};ie.version="18.3.1";hx.exports=ie;var N=hx.exports;const qT=AT(N),GT=NT({__proto__:null,default:qT},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT=N,QT=Symbol.for("react.element"),YT=Symbol.for("react.fragment"),JT=Object.prototype.hasOwnProperty,XT=KT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZT={key:!0,ref:!0,__self:!0,__source:!0};function wx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)JT.call(e,r)&&!ZT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:QT,type:t,key:i,ref:o,props:s,_owner:XT.current}}Ec.Fragment=YT;Ec.jsx=wx;Ec.jsxs=wx;dx.exports=Ec;var u=dx.exports,Ex={exports:{}},Pt={},Tx={exports:{}},Ix={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,J){var $=q.length;q.push(J);e:for(;0<$;){var D=$-1>>>1,V=q[D];if(0<s(V,J))q[D]=J,q[$]=V,$=D;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var J=q[0],$=q.pop();if($!==J){q[0]=$;e:for(var D=0,V=q.length,B=V>>>1;D<B;){var se=2*(D+1)-1,_e=q[se],lt=se+1,Wt=q[lt];if(0>s(_e,$))lt<V&&0>s(Wt,_e)?(q[D]=Wt,q[lt]=$,D=lt):(q[D]=_e,q[se]=$,D=se);else if(lt<V&&0>s(Wt,$))q[D]=Wt,q[lt]=$,D=lt;else break e}}return J}function s(q,J){var $=q.sortIndex-J.sortIndex;return $!==0?$:q.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,m=null,g=3,T=!1,w=!1,R=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(q){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=q)r(d),J.sortIndex=J.expirationTime,e(c,J);else break;J=n(d)}}function P(q){if(R=!1,C(q),!w)if(n(c)!==null)w=!0,En(z);else{var J=n(d);J!==null&&Tt(P,J.startTime-q)}}function z(q,J){w=!1,R&&(R=!1,E(v),v=-1),T=!0;var $=g;try{for(C(J),m=n(c);m!==null&&(!(m.expirationTime>J)||q&&!k());){var D=m.callback;if(typeof D=="function"){m.callback=null,g=m.priorityLevel;var V=D(m.expirationTime<=J);J=t.unstable_now(),typeof V=="function"?m.callback=V:m===n(c)&&r(c),C(J)}else r(c);m=n(c)}if(m!==null)var B=!0;else{var se=n(d);se!==null&&Tt(P,se.startTime-J),B=!1}return B}finally{m=null,g=$,T=!1}}var U=!1,b=null,v=-1,I=5,_=-1;function k(){return!(t.unstable_now()-_<I)}function j(){if(b!==null){var q=t.unstable_now();_=q;var J=!0;try{J=b(!0,q)}finally{J?S():(U=!1,b=null)}}else U=!1}var S;if(typeof x=="function")S=function(){x(j)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Ht=me.port2;me.port1.onmessage=j,S=function(){Ht.postMessage(null)}}else S=function(){A(j,0)};function En(q){b=q,U||(U=!0,S())}function Tt(q,J){v=A(function(){q(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){w||T||(w=!0,En(z))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var J=3;break;default:J=g}var $=g;g=J;try{return q()}finally{g=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,J){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var $=g;g=q;try{return J()}finally{g=$}},t.unstable_scheduleCallback=function(q,J,$){var D=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?D+$:D):$=D,q){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=$+V,q={id:f++,callback:J,priorityLevel:q,startTime:$,expirationTime:V,sortIndex:-1},$>D?(q.sortIndex=$,e(d,q),n(c)===null&&q===n(d)&&(R?(E(v),v=-1):R=!0,Tt(P,$-D))):(q.sortIndex=V,e(c,q),w||T||(w=!0,En(z))),q},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(q){var J=g;return function(){var $=g;g=J;try{return q.apply(this,arguments)}finally{g=$}}}})(Ix);Tx.exports=Ix;var eI=Tx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tI=N,At=eI;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sx=new Set,To={};function fs(t,e){ti(t,e),ti(t+"Capture",e)}function ti(t,e){for(To[t]=e,t=0;t<e.length;t++)Sx.add(e[t])}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Id=Object.prototype.hasOwnProperty,nI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eg={},tg={};function rI(t){return Id.call(tg,t)?!0:Id.call(eg,t)?!1:nI.test(t)?tg[t]=!0:(eg[t]=!0,!1)}function sI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iI(t,e,n,r){if(e===null||typeof e>"u"||sI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ke[t]=new mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ke[e]=new mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ke[t]=new mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ke[t]=new mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ke[t]=new mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ke[t]=new mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ke[t]=new mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ke[t]=new mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ke[t]=new mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var tf=/[\-:]([a-z])/g;function nf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tf,nf);Ke[e]=new mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tf,nf);Ke[e]=new mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tf,nf);Ke[e]=new mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ke[t]=new mt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ke[t]=new mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function rf(t,e,n,r){var s=Ke.hasOwnProperty(e)?Ke[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iI(e,n,s,r)&&(n=null),r||s===null?rI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $n=tI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ja=Symbol.for("react.element"),Rs=Symbol.for("react.portal"),js=Symbol.for("react.fragment"),sf=Symbol.for("react.strict_mode"),Sd=Symbol.for("react.profiler"),bx=Symbol.for("react.provider"),Cx=Symbol.for("react.context"),of=Symbol.for("react.forward_ref"),bd=Symbol.for("react.suspense"),Cd=Symbol.for("react.suspense_list"),af=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),kx=Symbol.for("react.offscreen"),ng=Symbol.iterator;function zi(t){return t===null||typeof t!="object"?null:(t=ng&&t[ng]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,Mu;function Qi(t){if(Mu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mu=e&&e[1]||""}return`
`+Mu+t}var Vu=!1;function Lu(t,e){if(!t||Vu)return"";Vu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Vu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qi(t):""}function oI(t){switch(t.tag){case 5:return Qi(t.type);case 16:return Qi("Lazy");case 13:return Qi("Suspense");case 19:return Qi("SuspenseList");case 0:case 2:case 15:return t=Lu(t.type,!1),t;case 11:return t=Lu(t.type.render,!1),t;case 1:return t=Lu(t.type,!0),t;default:return""}}function kd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case js:return"Fragment";case Rs:return"Portal";case Sd:return"Profiler";case sf:return"StrictMode";case bd:return"Suspense";case Cd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cx:return(t.displayName||"Context")+".Consumer";case bx:return(t._context.displayName||"Context")+".Provider";case of:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case af:return e=t.displayName||null,e!==null?e:kd(t.type)||"Memo";case Xn:e=t._payload,t=t._init;try{return kd(t(e))}catch{}}return null}function aI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kd(e);case 8:return e===sf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Nx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lI(t){var e=Nx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Oa(t){t._valueTracker||(t._valueTracker=lI(t))}function Ax(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Nx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nd(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Px(t,e){e=e.checked,e!=null&&rf(t,"checked",e,!1)}function Ad(t,e){Px(t,e);var n=Tr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Pd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Pd(t,e.type,Tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Pd(t,e,n){(e!=="number"||bl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yi=Array.isArray;function Hs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Tr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Rd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ig(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(Yi(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tr(n)}}function Rx(t,e){var n=Tr(e.value),r=Tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function og(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Da,Ox=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Da=Da||document.createElement("div"),Da.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Da.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Io(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var io={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cI=["Webkit","ms","Moz","O"];Object.keys(io).forEach(function(t){cI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),io[e]=io[t]})});function Dx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||io.hasOwnProperty(t)&&io[t]?(""+e).trim():e+"px"}function Mx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Dx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var uI=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Od(t,e){if(e){if(uI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Dd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Md=null;function lf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vd=null,Ws=null,qs=null;function ag(t){if(t=ta(t)){if(typeof Vd!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Cc(e),Vd(t.stateNode,t.type,e))}}function Vx(t){Ws?qs?qs.push(t):qs=[t]:Ws=t}function Lx(){if(Ws){var t=Ws,e=qs;if(qs=Ws=null,ag(t),e)for(t=0;t<e.length;t++)ag(e[t])}}function Ux(t,e){return t(e)}function Fx(){}var Uu=!1;function zx(t,e,n){if(Uu)return t(e,n);Uu=!0;try{return Ux(t,e,n)}finally{Uu=!1,(Ws!==null||qs!==null)&&(Fx(),Lx())}}function So(t,e){var n=t.stateNode;if(n===null)return null;var r=Cc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Ld=!1;if(Dn)try{var Bi={};Object.defineProperty(Bi,"passive",{get:function(){Ld=!0}}),window.addEventListener("test",Bi,Bi),window.removeEventListener("test",Bi,Bi)}catch{Ld=!1}function dI(t,e,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var oo=!1,Cl=null,kl=!1,Ud=null,hI={onError:function(t){oo=!0,Cl=t}};function fI(t,e,n,r,s,i,o,l,c){oo=!1,Cl=null,dI.apply(hI,arguments)}function pI(t,e,n,r,s,i,o,l,c){if(fI.apply(this,arguments),oo){if(oo){var d=Cl;oo=!1,Cl=null}else throw Error(H(198));kl||(kl=!0,Ud=d)}}function ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lg(t){if(ps(t)!==t)throw Error(H(188))}function mI(t){var e=t.alternate;if(!e){if(e=ps(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return lg(s),t;if(i===r)return lg(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function $x(t){return t=mI(t),t!==null?Hx(t):null}function Hx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hx(t);if(e!==null)return e;t=t.sibling}return null}var Wx=At.unstable_scheduleCallback,cg=At.unstable_cancelCallback,gI=At.unstable_shouldYield,vI=At.unstable_requestPaint,Pe=At.unstable_now,yI=At.unstable_getCurrentPriorityLevel,cf=At.unstable_ImmediatePriority,qx=At.unstable_UserBlockingPriority,Nl=At.unstable_NormalPriority,xI=At.unstable_LowPriority,Gx=At.unstable_IdlePriority,Tc=null,dn=null;function _I(t){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Tc,t,void 0,(t.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:TI,wI=Math.log,EI=Math.LN2;function TI(t){return t>>>=0,t===0?32:31-(wI(t)/EI|0)|0}var Ma=64,Va=4194304;function Ji(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Al(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Ji(l):(i&=o,i!==0&&(r=Ji(i)))}else o=n&~s,o!==0?r=Ji(o):i!==0&&(r=Ji(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zt(e),s=1<<n,r|=t[n],e&=~s;return r}function II(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Zt(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=II(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Fd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kx(){var t=Ma;return Ma<<=1,!(Ma&4194240)&&(Ma=64),t}function Fu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zt(e),t[e]=n}function bI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Zt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function uf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var he=0;function Qx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yx,df,Jx,Xx,Zx,zd=!1,La=[],ur=null,dr=null,hr=null,bo=new Map,Co=new Map,er=[],CI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ug(t,e){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":bo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Co.delete(e.pointerId)}}function $i(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ta(e),e!==null&&df(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function kI(t,e,n,r,s){switch(e){case"focusin":return ur=$i(ur,t,e,n,r,s),!0;case"dragenter":return dr=$i(dr,t,e,n,r,s),!0;case"mouseover":return hr=$i(hr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return bo.set(i,$i(bo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Co.set(i,$i(Co.get(i)||null,t,e,n,r,s)),!0}return!1}function e_(t){var e=qr(t.target);if(e!==null){var n=ps(e);if(n!==null){if(e=n.tag,e===13){if(e=Bx(n),e!==null){t.blockedOn=e,Zx(t.priority,function(){Jx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Md=r,n.target.dispatchEvent(r),Md=null}else return e=ta(n),e!==null&&df(e),t.blockedOn=n,!1;e.shift()}return!0}function dg(t,e,n){sl(t)&&n.delete(e)}function NI(){zd=!1,ur!==null&&sl(ur)&&(ur=null),dr!==null&&sl(dr)&&(dr=null),hr!==null&&sl(hr)&&(hr=null),bo.forEach(dg),Co.forEach(dg)}function Hi(t,e){t.blockedOn===e&&(t.blockedOn=null,zd||(zd=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,NI)))}function ko(t){function e(s){return Hi(s,t)}if(0<La.length){Hi(La[0],t);for(var n=1;n<La.length;n++){var r=La[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ur!==null&&Hi(ur,t),dr!==null&&Hi(dr,t),hr!==null&&Hi(hr,t),bo.forEach(e),Co.forEach(e),n=0;n<er.length;n++)r=er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<er.length&&(n=er[0],n.blockedOn===null);)e_(n),n.blockedOn===null&&er.shift()}var Gs=$n.ReactCurrentBatchConfig,Pl=!0;function AI(t,e,n,r){var s=he,i=Gs.transition;Gs.transition=null;try{he=1,hf(t,e,n,r)}finally{he=s,Gs.transition=i}}function PI(t,e,n,r){var s=he,i=Gs.transition;Gs.transition=null;try{he=4,hf(t,e,n,r)}finally{he=s,Gs.transition=i}}function hf(t,e,n,r){if(Pl){var s=Bd(t,e,n,r);if(s===null)Yu(t,e,r,Rl,n),ug(t,r);else if(kI(s,t,e,n,r))r.stopPropagation();else if(ug(t,r),e&4&&-1<CI.indexOf(t)){for(;s!==null;){var i=ta(s);if(i!==null&&Yx(i),i=Bd(t,e,n,r),i===null&&Yu(t,e,r,Rl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yu(t,e,r,null,n)}}var Rl=null;function Bd(t,e,n,r){if(Rl=null,t=lf(r),t=qr(t),t!==null)if(e=ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rl=t,null}function t_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yI()){case cf:return 1;case qx:return 4;case Nl:case xI:return 16;case Gx:return 536870912;default:return 16}default:return 16}}var ir=null,ff=null,il=null;function n_(){if(il)return il;var t,e=ff,n=e.length,r,s="value"in ir?ir.value:ir.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return il=s.slice(t,1<r?1-r:void 0)}function ol(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ua(){return!0}function hg(){return!1}function Rt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ua:hg,this.isPropagationStopped=hg,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),e}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pf=Rt(vi),ea=be({},vi,{view:0,detail:0}),RI=Rt(ea),zu,Bu,Wi,Ic=be({},ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wi&&(Wi&&t.type==="mousemove"?(zu=t.screenX-Wi.screenX,Bu=t.screenY-Wi.screenY):Bu=zu=0,Wi=t),zu)},movementY:function(t){return"movementY"in t?t.movementY:Bu}}),fg=Rt(Ic),jI=be({},Ic,{dataTransfer:0}),OI=Rt(jI),DI=be({},ea,{relatedTarget:0}),$u=Rt(DI),MI=be({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),VI=Rt(MI),LI=be({},vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UI=Rt(LI),FI=be({},vi,{data:0}),pg=Rt(FI),zI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$I={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$I[t])?!!e[t]:!1}function mf(){return HI}var WI=be({},ea,{key:function(t){if(t.key){var e=zI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ol(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mf,charCode:function(t){return t.type==="keypress"?ol(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ol(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qI=Rt(WI),GI=be({},Ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mg=Rt(GI),KI=be({},ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mf}),QI=Rt(KI),YI=be({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),JI=Rt(YI),XI=be({},Ic,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZI=Rt(XI),eS=[9,13,27,32],gf=Dn&&"CompositionEvent"in window,ao=null;Dn&&"documentMode"in document&&(ao=document.documentMode);var tS=Dn&&"TextEvent"in window&&!ao,r_=Dn&&(!gf||ao&&8<ao&&11>=ao),gg=" ",vg=!1;function s_(t,e){switch(t){case"keyup":return eS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Os=!1;function nS(t,e){switch(t){case"compositionend":return i_(e);case"keypress":return e.which!==32?null:(vg=!0,gg);case"textInput":return t=e.data,t===gg&&vg?null:t;default:return null}}function rS(t,e){if(Os)return t==="compositionend"||!gf&&s_(t,e)?(t=n_(),il=ff=ir=null,Os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return r_&&e.locale!=="ko"?null:e.data;default:return null}}var sS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sS[t.type]:e==="textarea"}function o_(t,e,n,r){Vx(r),e=jl(e,"onChange"),0<e.length&&(n=new pf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var lo=null,No=null;function iS(t){v_(t,0)}function Sc(t){var e=Vs(t);if(Ax(e))return t}function oS(t,e){if(t==="change")return e}var a_=!1;if(Dn){var Hu;if(Dn){var Wu="oninput"in document;if(!Wu){var xg=document.createElement("div");xg.setAttribute("oninput","return;"),Wu=typeof xg.oninput=="function"}Hu=Wu}else Hu=!1;a_=Hu&&(!document.documentMode||9<document.documentMode)}function _g(){lo&&(lo.detachEvent("onpropertychange",l_),No=lo=null)}function l_(t){if(t.propertyName==="value"&&Sc(No)){var e=[];o_(e,No,t,lf(t)),zx(iS,e)}}function aS(t,e,n){t==="focusin"?(_g(),lo=e,No=n,lo.attachEvent("onpropertychange",l_)):t==="focusout"&&_g()}function lS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sc(No)}function cS(t,e){if(t==="click")return Sc(e)}function uS(t,e){if(t==="input"||t==="change")return Sc(e)}function dS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nn=typeof Object.is=="function"?Object.is:dS;function Ao(t,e){if(nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Id.call(e,s)||!nn(t[s],e[s]))return!1}return!0}function wg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Eg(t,e){var n=wg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wg(n)}}function c_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?c_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function u_(){for(var t=window,e=bl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bl(t.document)}return e}function vf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hS(t){var e=u_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&c_(n.ownerDocument.documentElement,n)){if(r!==null&&vf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Eg(n,i);var o=Eg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fS=Dn&&"documentMode"in document&&11>=document.documentMode,Ds=null,$d=null,co=null,Hd=!1;function Tg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hd||Ds==null||Ds!==bl(r)||(r=Ds,"selectionStart"in r&&vf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),co&&Ao(co,r)||(co=r,r=jl($d,"onSelect"),0<r.length&&(e=new pf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ds)))}function Fa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ms={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionend:Fa("Transition","TransitionEnd")},qu={},d_={};Dn&&(d_=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function bc(t){if(qu[t])return qu[t];if(!Ms[t])return t;var e=Ms[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in d_)return qu[t]=e[n];return t}var h_=bc("animationend"),f_=bc("animationiteration"),p_=bc("animationstart"),m_=bc("transitionend"),g_=new Map,Ig="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(t,e){g_.set(t,e),fs(e,[t])}for(var Gu=0;Gu<Ig.length;Gu++){var Ku=Ig[Gu],pS=Ku.toLowerCase(),mS=Ku[0].toUpperCase()+Ku.slice(1);jr(pS,"on"+mS)}jr(h_,"onAnimationEnd");jr(f_,"onAnimationIteration");jr(p_,"onAnimationStart");jr("dblclick","onDoubleClick");jr("focusin","onFocus");jr("focusout","onBlur");jr(m_,"onTransitionEnd");ti("onMouseEnter",["mouseout","mouseover"]);ti("onMouseLeave",["mouseout","mouseover"]);ti("onPointerEnter",["pointerout","pointerover"]);ti("onPointerLeave",["pointerout","pointerover"]);fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xi));function Sg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pI(r,e,void 0,t),t.currentTarget=null}function v_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Sg(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Sg(s,l,d),i=c}}}if(kl)throw t=Ud,kl=!1,Ud=null,t}function ve(t,e){var n=e[Qd];n===void 0&&(n=e[Qd]=new Set);var r=t+"__bubble";n.has(r)||(y_(e,t,2,!1),n.add(r))}function Qu(t,e,n){var r=0;e&&(r|=4),y_(n,t,r,e)}var za="_reactListening"+Math.random().toString(36).slice(2);function Po(t){if(!t[za]){t[za]=!0,Sx.forEach(function(n){n!=="selectionchange"&&(gS.has(n)||Qu(n,!1,t),Qu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[za]||(e[za]=!0,Qu("selectionchange",!1,e))}}function y_(t,e,n,r){switch(t_(e)){case 1:var s=AI;break;case 4:s=PI;break;default:s=hf}n=s.bind(null,e,n,t),s=void 0,!Ld||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Yu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=qr(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}zx(function(){var d=i,f=lf(n),m=[];e:{var g=g_.get(t);if(g!==void 0){var T=pf,w=t;switch(t){case"keypress":if(ol(n)===0)break e;case"keydown":case"keyup":T=qI;break;case"focusin":w="focus",T=$u;break;case"focusout":w="blur",T=$u;break;case"beforeblur":case"afterblur":T=$u;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=fg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=OI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=QI;break;case h_:case f_:case p_:T=VI;break;case m_:T=JI;break;case"scroll":T=RI;break;case"wheel":T=ZI;break;case"copy":case"cut":case"paste":T=UI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=mg}var R=(e&4)!==0,A=!R&&t==="scroll",E=R?g!==null?g+"Capture":null:g;R=[];for(var x=d,C;x!==null;){C=x;var P=C.stateNode;if(C.tag===5&&P!==null&&(C=P,E!==null&&(P=So(x,E),P!=null&&R.push(Ro(x,P,C)))),A)break;x=x.return}0<R.length&&(g=new T(g,w,null,n,f),m.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",g&&n!==Md&&(w=n.relatedTarget||n.fromElement)&&(qr(w)||w[Mn]))break e;if((T||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,T?(w=n.relatedTarget||n.toElement,T=d,w=w?qr(w):null,w!==null&&(A=ps(w),w!==A||w.tag!==5&&w.tag!==6)&&(w=null)):(T=null,w=d),T!==w)){if(R=fg,P="onMouseLeave",E="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(R=mg,P="onPointerLeave",E="onPointerEnter",x="pointer"),A=T==null?g:Vs(T),C=w==null?g:Vs(w),g=new R(P,x+"leave",T,n,f),g.target=A,g.relatedTarget=C,P=null,qr(f)===d&&(R=new R(E,x+"enter",w,n,f),R.target=C,R.relatedTarget=A,P=R),A=P,T&&w)t:{for(R=T,E=w,x=0,C=R;C;C=bs(C))x++;for(C=0,P=E;P;P=bs(P))C++;for(;0<x-C;)R=bs(R),x--;for(;0<C-x;)E=bs(E),C--;for(;x--;){if(R===E||E!==null&&R===E.alternate)break t;R=bs(R),E=bs(E)}R=null}else R=null;T!==null&&bg(m,g,T,R,!1),w!==null&&A!==null&&bg(m,A,w,R,!0)}}e:{if(g=d?Vs(d):window,T=g.nodeName&&g.nodeName.toLowerCase(),T==="select"||T==="input"&&g.type==="file")var z=oS;else if(yg(g))if(a_)z=uS;else{z=lS;var U=aS}else(T=g.nodeName)&&T.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(z=cS);if(z&&(z=z(t,d))){o_(m,z,n,f);break e}U&&U(t,g,d),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&Pd(g,"number",g.value)}switch(U=d?Vs(d):window,t){case"focusin":(yg(U)||U.contentEditable==="true")&&(Ds=U,$d=d,co=null);break;case"focusout":co=$d=Ds=null;break;case"mousedown":Hd=!0;break;case"contextmenu":case"mouseup":case"dragend":Hd=!1,Tg(m,n,f);break;case"selectionchange":if(fS)break;case"keydown":case"keyup":Tg(m,n,f)}var b;if(gf)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Os?s_(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(r_&&n.locale!=="ko"&&(Os||v!=="onCompositionStart"?v==="onCompositionEnd"&&Os&&(b=n_()):(ir=f,ff="value"in ir?ir.value:ir.textContent,Os=!0)),U=jl(d,v),0<U.length&&(v=new pg(v,t,null,n,f),m.push({event:v,listeners:U}),b?v.data=b:(b=i_(n),b!==null&&(v.data=b)))),(b=tS?nS(t,n):rS(t,n))&&(d=jl(d,"onBeforeInput"),0<d.length&&(f=new pg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=b))}v_(m,e)})}function Ro(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=So(t,n),i!=null&&r.unshift(Ro(t,i,s)),i=So(t,e),i!=null&&r.push(Ro(t,i,s))),t=t.return}return r}function bs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function bg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=So(n,i),c!=null&&o.unshift(Ro(n,c,l))):s||(c=So(n,i),c!=null&&o.push(Ro(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var vS=/\r\n?/g,yS=/\u0000|\uFFFD/g;function Cg(t){return(typeof t=="string"?t:""+t).replace(vS,`
`).replace(yS,"")}function Ba(t,e,n){if(e=Cg(e),Cg(t)!==e&&n)throw Error(H(425))}function Ol(){}var Wd=null,qd=null;function Gd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kd=typeof setTimeout=="function"?setTimeout:void 0,xS=typeof clearTimeout=="function"?clearTimeout:void 0,kg=typeof Promise=="function"?Promise:void 0,_S=typeof queueMicrotask=="function"?queueMicrotask:typeof kg<"u"?function(t){return kg.resolve(null).then(t).catch(wS)}:Kd;function wS(t){setTimeout(function(){throw t})}function Ju(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ko(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ko(e)}function fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ng(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yi=Math.random().toString(36).slice(2),un="__reactFiber$"+yi,jo="__reactProps$"+yi,Mn="__reactContainer$"+yi,Qd="__reactEvents$"+yi,ES="__reactListeners$"+yi,TS="__reactHandles$"+yi;function qr(t){var e=t[un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mn]||n[un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ng(t);t!==null;){if(n=t[un])return n;t=Ng(t)}return e}t=n,n=t.parentNode}return null}function ta(t){return t=t[un]||t[Mn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Cc(t){return t[jo]||null}var Yd=[],Ls=-1;function Or(t){return{current:t}}function xe(t){0>Ls||(t.current=Yd[Ls],Yd[Ls]=null,Ls--)}function pe(t,e){Ls++,Yd[Ls]=t.current,t.current=e}var Ir={},it=Or(Ir),xt=Or(!1),ts=Ir;function ni(t,e){var n=t.type.contextTypes;if(!n)return Ir;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function _t(t){return t=t.childContextTypes,t!=null}function Dl(){xe(xt),xe(it)}function Ag(t,e,n){if(it.current!==Ir)throw Error(H(168));pe(it,e),pe(xt,n)}function x_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,aI(t)||"Unknown",s));return be({},n,r)}function Ml(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ir,ts=it.current,pe(it,t),pe(xt,xt.current),!0}function Pg(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=x_(t,e,ts),r.__reactInternalMemoizedMergedChildContext=t,xe(xt),xe(it),pe(it,t)):xe(xt),pe(xt,n)}var bn=null,kc=!1,Xu=!1;function __(t){bn===null?bn=[t]:bn.push(t)}function IS(t){kc=!0,__(t)}function Dr(){if(!Xu&&bn!==null){Xu=!0;var t=0,e=he;try{var n=bn;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bn=null,kc=!1}catch(s){throw bn!==null&&(bn=bn.slice(t+1)),Wx(cf,Dr),s}finally{he=e,Xu=!1}}return null}var Us=[],Fs=0,Vl=null,Ll=0,Ot=[],Dt=0,ns=null,kn=1,Nn="";function $r(t,e){Us[Fs++]=Ll,Us[Fs++]=Vl,Vl=t,Ll=e}function w_(t,e,n){Ot[Dt++]=kn,Ot[Dt++]=Nn,Ot[Dt++]=ns,ns=t;var r=kn;t=Nn;var s=32-Zt(r)-1;r&=~(1<<s),n+=1;var i=32-Zt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,kn=1<<32-Zt(e)+s|n<<s|r,Nn=i+t}else kn=1<<i|n<<s|r,Nn=t}function yf(t){t.return!==null&&($r(t,1),w_(t,1,0))}function xf(t){for(;t===Vl;)Vl=Us[--Fs],Us[Fs]=null,Ll=Us[--Fs],Us[Fs]=null;for(;t===ns;)ns=Ot[--Dt],Ot[Dt]=null,Nn=Ot[--Dt],Ot[Dt]=null,kn=Ot[--Dt],Ot[Dt]=null}var kt=null,Ct=null,we=!1,Yt=null;function E_(t,e){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Rg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kt=t,Ct=fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kt=t,Ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ns!==null?{id:kn,overflow:Nn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kt=t,Ct=null,!0):!1;default:return!1}}function Jd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xd(t){if(we){var e=Ct;if(e){var n=e;if(!Rg(t,e)){if(Jd(t))throw Error(H(418));e=fr(n.nextSibling);var r=kt;e&&Rg(t,e)?E_(r,n):(t.flags=t.flags&-4097|2,we=!1,kt=t)}}else{if(Jd(t))throw Error(H(418));t.flags=t.flags&-4097|2,we=!1,kt=t}}}function jg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kt=t}function $a(t){if(t!==kt)return!1;if(!we)return jg(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gd(t.type,t.memoizedProps)),e&&(e=Ct)){if(Jd(t))throw T_(),Error(H(418));for(;e;)E_(t,e),e=fr(e.nextSibling)}if(jg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ct=fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ct=null}}else Ct=kt?fr(t.stateNode.nextSibling):null;return!0}function T_(){for(var t=Ct;t;)t=fr(t.nextSibling)}function ri(){Ct=kt=null,we=!1}function _f(t){Yt===null?Yt=[t]:Yt.push(t)}var SS=$n.ReactCurrentBatchConfig;function qi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Ha(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Og(t){var e=t._init;return e(t._payload)}function I_(t){function e(E,x){if(t){var C=E.deletions;C===null?(E.deletions=[x],E.flags|=16):C.push(x)}}function n(E,x){if(!t)return null;for(;x!==null;)e(E,x),x=x.sibling;return null}function r(E,x){for(E=new Map;x!==null;)x.key!==null?E.set(x.key,x):E.set(x.index,x),x=x.sibling;return E}function s(E,x){return E=vr(E,x),E.index=0,E.sibling=null,E}function i(E,x,C){return E.index=C,t?(C=E.alternate,C!==null?(C=C.index,C<x?(E.flags|=2,x):C):(E.flags|=2,x)):(E.flags|=1048576,x)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,x,C,P){return x===null||x.tag!==6?(x=id(C,E.mode,P),x.return=E,x):(x=s(x,C),x.return=E,x)}function c(E,x,C,P){var z=C.type;return z===js?f(E,x,C.props.children,P,C.key):x!==null&&(x.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Xn&&Og(z)===x.type)?(P=s(x,C.props),P.ref=qi(E,x,C),P.return=E,P):(P=fl(C.type,C.key,C.props,null,E.mode,P),P.ref=qi(E,x,C),P.return=E,P)}function d(E,x,C,P){return x===null||x.tag!==4||x.stateNode.containerInfo!==C.containerInfo||x.stateNode.implementation!==C.implementation?(x=od(C,E.mode,P),x.return=E,x):(x=s(x,C.children||[]),x.return=E,x)}function f(E,x,C,P,z){return x===null||x.tag!==7?(x=Zr(C,E.mode,P,z),x.return=E,x):(x=s(x,C),x.return=E,x)}function m(E,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return x=id(""+x,E.mode,C),x.return=E,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ja:return C=fl(x.type,x.key,x.props,null,E.mode,C),C.ref=qi(E,null,x),C.return=E,C;case Rs:return x=od(x,E.mode,C),x.return=E,x;case Xn:var P=x._init;return m(E,P(x._payload),C)}if(Yi(x)||zi(x))return x=Zr(x,E.mode,C,null),x.return=E,x;Ha(E,x)}return null}function g(E,x,C,P){var z=x!==null?x.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return z!==null?null:l(E,x,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ja:return C.key===z?c(E,x,C,P):null;case Rs:return C.key===z?d(E,x,C,P):null;case Xn:return z=C._init,g(E,x,z(C._payload),P)}if(Yi(C)||zi(C))return z!==null?null:f(E,x,C,P,null);Ha(E,C)}return null}function T(E,x,C,P,z){if(typeof P=="string"&&P!==""||typeof P=="number")return E=E.get(C)||null,l(x,E,""+P,z);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case ja:return E=E.get(P.key===null?C:P.key)||null,c(x,E,P,z);case Rs:return E=E.get(P.key===null?C:P.key)||null,d(x,E,P,z);case Xn:var U=P._init;return T(E,x,C,U(P._payload),z)}if(Yi(P)||zi(P))return E=E.get(C)||null,f(x,E,P,z,null);Ha(x,P)}return null}function w(E,x,C,P){for(var z=null,U=null,b=x,v=x=0,I=null;b!==null&&v<C.length;v++){b.index>v?(I=b,b=null):I=b.sibling;var _=g(E,b,C[v],P);if(_===null){b===null&&(b=I);break}t&&b&&_.alternate===null&&e(E,b),x=i(_,x,v),U===null?z=_:U.sibling=_,U=_,b=I}if(v===C.length)return n(E,b),we&&$r(E,v),z;if(b===null){for(;v<C.length;v++)b=m(E,C[v],P),b!==null&&(x=i(b,x,v),U===null?z=b:U.sibling=b,U=b);return we&&$r(E,v),z}for(b=r(E,b);v<C.length;v++)I=T(b,E,v,C[v],P),I!==null&&(t&&I.alternate!==null&&b.delete(I.key===null?v:I.key),x=i(I,x,v),U===null?z=I:U.sibling=I,U=I);return t&&b.forEach(function(k){return e(E,k)}),we&&$r(E,v),z}function R(E,x,C,P){var z=zi(C);if(typeof z!="function")throw Error(H(150));if(C=z.call(C),C==null)throw Error(H(151));for(var U=z=null,b=x,v=x=0,I=null,_=C.next();b!==null&&!_.done;v++,_=C.next()){b.index>v?(I=b,b=null):I=b.sibling;var k=g(E,b,_.value,P);if(k===null){b===null&&(b=I);break}t&&b&&k.alternate===null&&e(E,b),x=i(k,x,v),U===null?z=k:U.sibling=k,U=k,b=I}if(_.done)return n(E,b),we&&$r(E,v),z;if(b===null){for(;!_.done;v++,_=C.next())_=m(E,_.value,P),_!==null&&(x=i(_,x,v),U===null?z=_:U.sibling=_,U=_);return we&&$r(E,v),z}for(b=r(E,b);!_.done;v++,_=C.next())_=T(b,E,v,_.value,P),_!==null&&(t&&_.alternate!==null&&b.delete(_.key===null?v:_.key),x=i(_,x,v),U===null?z=_:U.sibling=_,U=_);return t&&b.forEach(function(j){return e(E,j)}),we&&$r(E,v),z}function A(E,x,C,P){if(typeof C=="object"&&C!==null&&C.type===js&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case ja:e:{for(var z=C.key,U=x;U!==null;){if(U.key===z){if(z=C.type,z===js){if(U.tag===7){n(E,U.sibling),x=s(U,C.props.children),x.return=E,E=x;break e}}else if(U.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Xn&&Og(z)===U.type){n(E,U.sibling),x=s(U,C.props),x.ref=qi(E,U,C),x.return=E,E=x;break e}n(E,U);break}else e(E,U);U=U.sibling}C.type===js?(x=Zr(C.props.children,E.mode,P,C.key),x.return=E,E=x):(P=fl(C.type,C.key,C.props,null,E.mode,P),P.ref=qi(E,x,C),P.return=E,E=P)}return o(E);case Rs:e:{for(U=C.key;x!==null;){if(x.key===U)if(x.tag===4&&x.stateNode.containerInfo===C.containerInfo&&x.stateNode.implementation===C.implementation){n(E,x.sibling),x=s(x,C.children||[]),x.return=E,E=x;break e}else{n(E,x);break}else e(E,x);x=x.sibling}x=od(C,E.mode,P),x.return=E,E=x}return o(E);case Xn:return U=C._init,A(E,x,U(C._payload),P)}if(Yi(C))return w(E,x,C,P);if(zi(C))return R(E,x,C,P);Ha(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,x!==null&&x.tag===6?(n(E,x.sibling),x=s(x,C),x.return=E,E=x):(n(E,x),x=id(C,E.mode,P),x.return=E,E=x),o(E)):n(E,x)}return A}var si=I_(!0),S_=I_(!1),Ul=Or(null),Fl=null,zs=null,wf=null;function Ef(){wf=zs=Fl=null}function Tf(t){var e=Ul.current;xe(Ul),t._currentValue=e}function Zd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ks(t,e){Fl=t,wf=zs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yt=!0),t.firstContext=null)}function zt(t){var e=t._currentValue;if(wf!==t)if(t={context:t,memoizedValue:e,next:null},zs===null){if(Fl===null)throw Error(H(308));zs=t,Fl.dependencies={lanes:0,firstContext:t}}else zs=zs.next=t;return e}var Gr=null;function If(t){Gr===null?Gr=[t]:Gr.push(t)}function b_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,If(e)):(n.next=s.next,s.next=n),e.interleaved=n,Vn(t,r)}function Vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zn=!1;function Sf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Vn(t,n)}return s=r.interleaved,s===null?(e.next=e,If(r)):(e.next=s.next,s.next=e),r.interleaved=e,Vn(t,n)}function al(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uf(t,n)}}function Dg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zl(t,e,n,r){var s=t.updateQueue;Zn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,f=d=c=null,l=i;do{var g=l.lane,T=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,R=l;switch(g=e,T=n,R.tag){case 1:if(w=R.payload,typeof w=="function"){m=w.call(T,m,g);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=R.payload,g=typeof w=="function"?w.call(T,m,g):w,g==null)break e;m=be({},m,g);break e;case 2:Zn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else T={eventTime:T,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=T,c=m):f=f.next=T,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ss|=o,t.lanes=o,t.memoizedState=m}}function Mg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var na={},hn=Or(na),Oo=Or(na),Do=Or(na);function Kr(t){if(t===na)throw Error(H(174));return t}function bf(t,e){switch(pe(Do,e),pe(Oo,t),pe(hn,na),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jd(e,t)}xe(hn),pe(hn,e)}function ii(){xe(hn),xe(Oo),xe(Do)}function k_(t){Kr(Do.current);var e=Kr(hn.current),n=jd(e,t.type);e!==n&&(pe(Oo,t),pe(hn,n))}function Cf(t){Oo.current===t&&(xe(hn),xe(Oo))}var Ee=Or(0);function Bl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zu=[];function kf(){for(var t=0;t<Zu.length;t++)Zu[t]._workInProgressVersionPrimary=null;Zu.length=0}var ll=$n.ReactCurrentDispatcher,ed=$n.ReactCurrentBatchConfig,rs=0,Ie=null,De=null,Fe=null,$l=!1,uo=!1,Mo=0,bS=0;function Ze(){throw Error(H(321))}function Nf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nn(t[n],e[n]))return!1;return!0}function Af(t,e,n,r,s,i){if(rs=i,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ll.current=t===null||t.memoizedState===null?AS:PS,t=n(r,s),uo){i=0;do{if(uo=!1,Mo=0,25<=i)throw Error(H(301));i+=1,Fe=De=null,e.updateQueue=null,ll.current=RS,t=n(r,s)}while(uo)}if(ll.current=Hl,e=De!==null&&De.next!==null,rs=0,Fe=De=Ie=null,$l=!1,e)throw Error(H(300));return t}function Pf(){var t=Mo!==0;return Mo=0,t}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Ie.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function Bt(){if(De===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=De.next;var e=Fe===null?Ie.memoizedState:Fe.next;if(e!==null)Fe=e,De=t;else{if(t===null)throw Error(H(310));De=t,t={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Fe===null?Ie.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}function Vo(t,e){return typeof e=="function"?e(t):e}function td(t){var e=Bt(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=De,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var f=d.lane;if((rs&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Ie.lanes|=f,ss|=f}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,nn(r,e.memoizedState)||(yt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ie.lanes|=i,ss|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nd(t){var e=Bt(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);nn(i,e.memoizedState)||(yt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function N_(){}function A_(t,e){var n=Ie,r=Bt(),s=e(),i=!nn(r.memoizedState,s);if(i&&(r.memoizedState=s,yt=!0),r=r.queue,Rf(j_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Fe!==null&&Fe.memoizedState.tag&1){if(n.flags|=2048,Lo(9,R_.bind(null,n,r,s,e),void 0,null),Be===null)throw Error(H(349));rs&30||P_(n,e,s)}return s}function P_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function R_(t,e,n,r){e.value=n,e.getSnapshot=r,O_(e)&&D_(t)}function j_(t,e,n){return n(function(){O_(e)&&D_(t)})}function O_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nn(t,n)}catch{return!0}}function D_(t){var e=Vn(t,1);e!==null&&en(e,t,1,-1)}function Vg(t){var e=ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:t},e.queue=t,t=t.dispatch=NS.bind(null,Ie,t),[e.memoizedState,t]}function Lo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function M_(){return Bt().memoizedState}function cl(t,e,n,r){var s=ln();Ie.flags|=t,s.memoizedState=Lo(1|e,n,void 0,r===void 0?null:r)}function Nc(t,e,n,r){var s=Bt();r=r===void 0?null:r;var i=void 0;if(De!==null){var o=De.memoizedState;if(i=o.destroy,r!==null&&Nf(r,o.deps)){s.memoizedState=Lo(e,n,i,r);return}}Ie.flags|=t,s.memoizedState=Lo(1|e,n,i,r)}function Lg(t,e){return cl(8390656,8,t,e)}function Rf(t,e){return Nc(2048,8,t,e)}function V_(t,e){return Nc(4,2,t,e)}function L_(t,e){return Nc(4,4,t,e)}function U_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function F_(t,e,n){return n=n!=null?n.concat([t]):null,Nc(4,4,U_.bind(null,e,t),n)}function jf(){}function z_(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function B_(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $_(t,e,n){return rs&21?(nn(n,e)||(n=Kx(),Ie.lanes|=n,ss|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yt=!0),t.memoizedState=n)}function CS(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=ed.transition;ed.transition={};try{t(!1),e()}finally{he=n,ed.transition=r}}function H_(){return Bt().memoizedState}function kS(t,e,n){var r=gr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},W_(t))q_(e,n);else if(n=b_(t,e,n,r),n!==null){var s=ft();en(n,t,r,s),G_(n,e,r)}}function NS(t,e,n){var r=gr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(W_(t))q_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,nn(l,o)){var c=e.interleaved;c===null?(s.next=s,If(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=b_(t,e,s,r),n!==null&&(s=ft(),en(n,t,r,s),G_(n,e,r))}}function W_(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function q_(t,e){uo=$l=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function G_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uf(t,n)}}var Hl={readContext:zt,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},AS={readContext:zt,useCallback:function(t,e){return ln().memoizedState=[t,e===void 0?null:e],t},useContext:zt,useEffect:Lg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cl(4194308,4,U_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cl(4194308,4,t,e)},useInsertionEffect:function(t,e){return cl(4,2,t,e)},useMemo:function(t,e){var n=ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kS.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=ln();return t={current:t},e.memoizedState=t},useState:Vg,useDebugValue:jf,useDeferredValue:function(t){return ln().memoizedState=t},useTransition:function(){var t=Vg(!1),e=t[0];return t=CS.bind(null,t[1]),ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,s=ln();if(we){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Be===null)throw Error(H(349));rs&30||P_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Lg(j_.bind(null,r,i,t),[t]),r.flags|=2048,Lo(9,R_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ln(),e=Be.identifierPrefix;if(we){var n=Nn,r=kn;n=(r&~(1<<32-Zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PS={readContext:zt,useCallback:z_,useContext:zt,useEffect:Rf,useImperativeHandle:F_,useInsertionEffect:V_,useLayoutEffect:L_,useMemo:B_,useReducer:td,useRef:M_,useState:function(){return td(Vo)},useDebugValue:jf,useDeferredValue:function(t){var e=Bt();return $_(e,De.memoizedState,t)},useTransition:function(){var t=td(Vo)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:N_,useSyncExternalStore:A_,useId:H_,unstable_isNewReconciler:!1},RS={readContext:zt,useCallback:z_,useContext:zt,useEffect:Rf,useImperativeHandle:F_,useInsertionEffect:V_,useLayoutEffect:L_,useMemo:B_,useReducer:nd,useRef:M_,useState:function(){return nd(Vo)},useDebugValue:jf,useDeferredValue:function(t){var e=Bt();return De===null?e.memoizedState=t:$_(e,De.memoizedState,t)},useTransition:function(){var t=nd(Vo)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:N_,useSyncExternalStore:A_,useId:H_,unstable_isNewReconciler:!1};function Kt(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function eh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ac={isMounted:function(t){return(t=t._reactInternals)?ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ft(),s=gr(t),i=Rn(r,s);i.payload=e,n!=null&&(i.callback=n),e=pr(t,i,s),e!==null&&(en(e,t,s,r),al(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ft(),s=gr(t),i=Rn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=pr(t,i,s),e!==null&&(en(e,t,s,r),al(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ft(),r=gr(t),s=Rn(n,r);s.tag=2,e!=null&&(s.callback=e),e=pr(t,s,r),e!==null&&(en(e,t,r,n),al(e,t,r))}};function Ug(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ao(n,r)||!Ao(s,i):!0}function K_(t,e,n){var r=!1,s=Ir,i=e.contextType;return typeof i=="object"&&i!==null?i=zt(i):(s=_t(e)?ts:it.current,r=e.contextTypes,i=(r=r!=null)?ni(t,s):Ir),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ac,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Fg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ac.enqueueReplaceState(e,e.state,null)}function th(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Sf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=zt(i):(i=_t(e)?ts:it.current,s.context=ni(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(eh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ac.enqueueReplaceState(s,s.state,null),zl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function oi(t,e){try{var n="",r=e;do n+=oI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function rd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jS=typeof WeakMap=="function"?WeakMap:Map;function Q_(t,e,n){n=Rn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ql||(ql=!0,hh=r),nh(t,e)},n}function Y_(t,e,n){n=Rn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){nh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){nh(t,e),typeof r!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=GS.bind(null,t,e,n),e.then(t,t))}function Bg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $g(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rn(-1,1),e.tag=2,pr(n,e,1))),n.lanes|=1),t)}var OS=$n.ReactCurrentOwner,yt=!1;function ht(t,e,n,r){e.child=t===null?S_(e,null,n,r):si(e,t.child,n,r)}function Hg(t,e,n,r,s){n=n.render;var i=e.ref;return Ks(e,s),r=Af(t,e,n,r,i,s),n=Pf(),t!==null&&!yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ln(t,e,s)):(we&&n&&yf(e),e.flags|=1,ht(t,e,r,s),e.child)}function Wg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!zf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,J_(t,e,i,r,s)):(t=fl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ao,n(o,r)&&t.ref===e.ref)return Ln(t,e,s)}return e.flags|=1,t=vr(i,r),t.ref=e.ref,t.return=e,e.child=t}function J_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ao(i,r)&&t.ref===e.ref)if(yt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(yt=!0);else return e.lanes=t.lanes,Ln(t,e,s)}return rh(t,e,n,r,s)}function X_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe($s,St),St|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pe($s,St),St|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pe($s,St),St|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,pe($s,St),St|=r;return ht(t,e,s,n),e.child}function Z_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rh(t,e,n,r,s){var i=_t(n)?ts:it.current;return i=ni(e,i),Ks(e,s),n=Af(t,e,n,r,i,s),r=Pf(),t!==null&&!yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ln(t,e,s)):(we&&r&&yf(e),e.flags|=1,ht(t,e,n,s),e.child)}function qg(t,e,n,r,s){if(_t(n)){var i=!0;Ml(e)}else i=!1;if(Ks(e,s),e.stateNode===null)ul(t,e),K_(e,n,r),th(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=zt(d):(d=_t(n)?ts:it.current,d=ni(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Fg(e,o,r,d),Zn=!1;var g=e.memoizedState;o.state=g,zl(e,r,o,s),c=e.memoizedState,l!==r||g!==c||xt.current||Zn?(typeof f=="function"&&(eh(e,n,f,r),c=e.memoizedState),(l=Zn||Ug(e,n,l,r,g,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,C_(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Kt(e.type,l),o.props=d,m=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=zt(c):(c=_t(n)?ts:it.current,c=ni(e,c));var T=n.getDerivedStateFromProps;(f=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==c)&&Fg(e,o,r,c),Zn=!1,g=e.memoizedState,o.state=g,zl(e,r,o,s);var w=e.memoizedState;l!==m||g!==w||xt.current||Zn?(typeof T=="function"&&(eh(e,n,T,r),w=e.memoizedState),(d=Zn||Ug(e,n,d,r,g,w,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return sh(t,e,n,r,i,s)}function sh(t,e,n,r,s,i){Z_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Pg(e,n,!1),Ln(t,e,i);r=e.stateNode,OS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=si(e,t.child,null,i),e.child=si(e,null,l,i)):ht(t,e,l,i),e.memoizedState=r.state,s&&Pg(e,n,!0),e.child}function ew(t){var e=t.stateNode;e.pendingContext?Ag(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ag(t,e.context,!1),bf(t,e.containerInfo)}function Gg(t,e,n,r,s){return ri(),_f(s),e.flags|=256,ht(t,e,n,r),e.child}var ih={dehydrated:null,treeContext:null,retryLane:0};function oh(t){return{baseLanes:t,cachePool:null,transitions:null}}function tw(t,e,n){var r=e.pendingProps,s=Ee.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pe(Ee,s&1),t===null)return Xd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=jc(o,r,0,null),t=Zr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=oh(n),e.memoizedState=ih,t):Of(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return DS(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=vr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=vr(l,i):(i=Zr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?oh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ih,r}return i=t.child,t=i.sibling,r=vr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Of(t,e){return e=jc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wa(t,e,n,r){return r!==null&&_f(r),si(e,t.child,null,n),t=Of(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=rd(Error(H(422))),Wa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=jc({mode:"visible",children:r.children},s,0,null),i=Zr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&si(e,t.child,null,o),e.child.memoizedState=oh(o),e.memoizedState=ih,i);if(!(e.mode&1))return Wa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(H(419)),r=rd(i,r,void 0),Wa(t,e,o,r)}if(l=(o&t.childLanes)!==0,yt||l){if(r=Be,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vn(t,s),en(r,t,s,-1))}return Ff(),r=rd(Error(H(421))),Wa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=KS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ct=fr(s.nextSibling),kt=e,we=!0,Yt=null,t!==null&&(Ot[Dt++]=kn,Ot[Dt++]=Nn,Ot[Dt++]=ns,kn=t.id,Nn=t.overflow,ns=e),e=Of(e,r.children),e.flags|=4096,e)}function Kg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Zd(t.return,e,n)}function sd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function nw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ht(t,e,r.children,n),r=Ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Kg(t,n,e);else if(t.tag===19)Kg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pe(Ee,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Bl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),sd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Bl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}sd(e,!0,n,null,i);break;case"together":sd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ul(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ln(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ss|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=vr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MS(t,e,n){switch(e.tag){case 3:ew(e),ri();break;case 5:k_(e);break;case 1:_t(e.type)&&Ml(e);break;case 4:bf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;pe(Ul,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pe(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?tw(t,e,n):(pe(Ee,Ee.current&1),t=Ln(t,e,n),t!==null?t.sibling:null);pe(Ee,Ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pe(Ee,Ee.current),r)break;return null;case 22:case 23:return e.lanes=0,X_(t,e,n)}return Ln(t,e,n)}var rw,ah,sw,iw;rw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ah=function(){};sw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Kr(hn.current);var i=null;switch(n){case"input":s=Nd(t,s),r=Nd(t,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=Rd(t,s),r=Rd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ol)}Od(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(To.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(To.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ve("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};iw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Gi(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function VS(t,e,n){var r=e.pendingProps;switch(xf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(e),null;case 1:return _t(e.type)&&Dl(),et(e),null;case 3:return r=e.stateNode,ii(),xe(xt),xe(it),kf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($a(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yt!==null&&(mh(Yt),Yt=null))),ah(t,e),et(e),null;case 5:Cf(e);var s=Kr(Do.current);if(n=e.type,t!==null&&e.stateNode!=null)sw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return et(e),null}if(t=Kr(hn.current),$a(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[un]=e,r[jo]=i,t=(e.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(s=0;s<Xi.length;s++)ve(Xi[s],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":rg(r,i),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ve("invalid",r);break;case"textarea":ig(r,i),ve("invalid",r)}Od(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ba(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ba(r.textContent,l,t),s=["children",""+l]):To.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ve("scroll",r)}switch(n){case"input":Oa(r),sg(r,i,!0);break;case"textarea":Oa(r),og(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ol)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[un]=e,t[jo]=r,rw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Dd(n,r),n){case"dialog":ve("cancel",t),ve("close",t),s=r;break;case"iframe":case"object":case"embed":ve("load",t),s=r;break;case"video":case"audio":for(s=0;s<Xi.length;s++)ve(Xi[s],t);s=r;break;case"source":ve("error",t),s=r;break;case"img":case"image":case"link":ve("error",t),ve("load",t),s=r;break;case"details":ve("toggle",t),s=r;break;case"input":rg(t,r),s=Nd(t,r),ve("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),ve("invalid",t);break;case"textarea":ig(t,r),s=Rd(t,r),ve("invalid",t);break;default:s=r}Od(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Mx(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ox(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Io(t,c):typeof c=="number"&&Io(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(To.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ve("scroll",t):c!=null&&rf(t,i,c,o))}switch(n){case"input":Oa(t),sg(t,r,!1);break;case"textarea":Oa(t),og(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Tr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Hs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Hs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ol)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return et(e),null;case 6:if(t&&e.stateNode!=null)iw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Kr(Do.current),Kr(hn.current),$a(e)){if(r=e.stateNode,n=e.memoizedProps,r[un]=e,(i=r.nodeValue!==n)&&(t=kt,t!==null))switch(t.tag){case 3:Ba(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ba(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=e,e.stateNode=r}return et(e),null;case 13:if(xe(Ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&Ct!==null&&e.mode&1&&!(e.flags&128))T_(),ri(),e.flags|=98560,i=!1;else if(i=$a(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[un]=e}else ri(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;et(e),i=!1}else Yt!==null&&(mh(Yt),Yt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?Ve===0&&(Ve=3):Ff())),e.updateQueue!==null&&(e.flags|=4),et(e),null);case 4:return ii(),ah(t,e),t===null&&Po(e.stateNode.containerInfo),et(e),null;case 10:return Tf(e.type._context),et(e),null;case 17:return _t(e.type)&&Dl(),et(e),null;case 19:if(xe(Ee),i=e.memoizedState,i===null)return et(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Gi(i,!1);else{if(Ve!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bl(t),o!==null){for(e.flags|=128,Gi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pe(Ee,Ee.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pe()>ai&&(e.flags|=128,r=!0,Gi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Bl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!we)return et(e),null}else 2*Pe()-i.renderingStartTime>ai&&n!==1073741824&&(e.flags|=128,r=!0,Gi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pe(),e.sibling=null,n=Ee.current,pe(Ee,r?n&1|2:n&1),e):(et(e),null);case 22:case 23:return Uf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?St&1073741824&&(et(e),e.subtreeFlags&6&&(e.flags|=8192)):et(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function LS(t,e){switch(xf(e),e.tag){case 1:return _t(e.type)&&Dl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ii(),xe(xt),xe(it),kf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cf(e),null;case 13:if(xe(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));ri()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(Ee),null;case 4:return ii(),null;case 10:return Tf(e.type._context),null;case 22:case 23:return Uf(),null;case 24:return null;default:return null}}var qa=!1,rt=!1,US=typeof WeakSet=="function"?WeakSet:Set,K=null;function Bs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function lh(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var Qg=!1;function FS(t,e){if(Wd=Pl,t=u_(),vf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var T;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(T=m.firstChild)!==null;)g=m,m=T;for(;;){if(m===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(c=o),(T=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=T}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(qd={focusedElem:t,selectionRange:n},Pl=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var R=w.memoizedProps,A=w.memoizedState,E=e.stateNode,x=E.getSnapshotBeforeUpdate(e.elementType===e.type?R:Kt(e.type,R),A);E.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(P){Ne(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return w=Qg,Qg=!1,w}function ho(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&lh(e,n,i)}s=s.next}while(s!==r)}}function Pc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ch(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ow(t){var e=t.alternate;e!==null&&(t.alternate=null,ow(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[un],delete e[jo],delete e[Qd],delete e[ES],delete e[TS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aw(t){return t.tag===5||t.tag===3||t.tag===4}function Yg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ol));else if(r!==4&&(t=t.child,t!==null))for(uh(t,e,n),t=t.sibling;t!==null;)uh(t,e,n),t=t.sibling}function dh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(dh(t,e,n),t=t.sibling;t!==null;)dh(t,e,n),t=t.sibling}var He=null,Qt=!1;function Yn(t,e,n){for(n=n.child;n!==null;)lw(t,e,n),n=n.sibling}function lw(t,e,n){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Tc,n)}catch{}switch(n.tag){case 5:rt||Bs(n,e);case 6:var r=He,s=Qt;He=null,Yn(t,e,n),He=r,Qt=s,He!==null&&(Qt?(t=He,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&(Qt?(t=He,n=n.stateNode,t.nodeType===8?Ju(t.parentNode,n):t.nodeType===1&&Ju(t,n),ko(t)):Ju(He,n.stateNode));break;case 4:r=He,s=Qt,He=n.stateNode.containerInfo,Qt=!0,Yn(t,e,n),He=r,Qt=s;break;case 0:case 11:case 14:case 15:if(!rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&lh(n,e,o),s=s.next}while(s!==r)}Yn(t,e,n);break;case 1:if(!rt&&(Bs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ne(n,e,l)}Yn(t,e,n);break;case 21:Yn(t,e,n);break;case 22:n.mode&1?(rt=(r=rt)||n.memoizedState!==null,Yn(t,e,n),rt=r):Yn(t,e,n);break;default:Yn(t,e,n)}}function Jg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new US),e.forEach(function(r){var s=QS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:He=l.stateNode,Qt=!1;break e;case 3:He=l.stateNode.containerInfo,Qt=!0;break e;case 4:He=l.stateNode.containerInfo,Qt=!0;break e}l=l.return}if(He===null)throw Error(H(160));lw(i,o,s),He=null,Qt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ne(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cw(e,t),e=e.sibling}function cw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gt(e,t),on(t),r&4){try{ho(3,t,t.return),Pc(3,t)}catch(R){Ne(t,t.return,R)}try{ho(5,t,t.return)}catch(R){Ne(t,t.return,R)}}break;case 1:Gt(e,t),on(t),r&512&&n!==null&&Bs(n,n.return);break;case 5:if(Gt(e,t),on(t),r&512&&n!==null&&Bs(n,n.return),t.flags&32){var s=t.stateNode;try{Io(s,"")}catch(R){Ne(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Px(s,i),Dd(l,o);var d=Dd(l,i);for(o=0;o<c.length;o+=2){var f=c[o],m=c[o+1];f==="style"?Mx(s,m):f==="dangerouslySetInnerHTML"?Ox(s,m):f==="children"?Io(s,m):rf(s,f,m,d)}switch(l){case"input":Ad(s,i);break;case"textarea":Rx(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?Hs(s,!!i.multiple,T,!1):g!==!!i.multiple&&(i.defaultValue!=null?Hs(s,!!i.multiple,i.defaultValue,!0):Hs(s,!!i.multiple,i.multiple?[]:"",!1))}s[jo]=i}catch(R){Ne(t,t.return,R)}}break;case 6:if(Gt(e,t),on(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Ne(t,t.return,R)}}break;case 3:if(Gt(e,t),on(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ko(e.containerInfo)}catch(R){Ne(t,t.return,R)}break;case 4:Gt(e,t),on(t);break;case 13:Gt(e,t),on(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vf=Pe())),r&4&&Jg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(rt=(d=rt)||f,Gt(e,t),rt=d):Gt(e,t),on(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(K=t,f=t.child;f!==null;){for(m=K=f;K!==null;){switch(g=K,T=g.child,g.tag){case 0:case 11:case 14:case 15:ho(4,g,g.return);break;case 1:Bs(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(R){Ne(r,n,R)}}break;case 5:Bs(g,g.return);break;case 22:if(g.memoizedState!==null){Zg(m);continue}}T!==null?(T.return=g,K=T):Zg(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Dx("display",o))}catch(R){Ne(t,t.return,R)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(R){Ne(t,t.return,R)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Gt(e,t),on(t),r&4&&Jg(t);break;case 21:break;default:Gt(e,t),on(t)}}function on(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aw(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Io(s,""),r.flags&=-33);var i=Yg(t);dh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Yg(t);uh(t,l,o);break;default:throw Error(H(161))}}catch(c){Ne(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zS(t,e,n){K=t,uw(t)}function uw(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var s=K,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||qa;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||rt;l=qa;var d=rt;if(qa=o,(rt=c)&&!d)for(K=s;K!==null;)o=K,c=o.child,o.tag===22&&o.memoizedState!==null?ev(s):c!==null?(c.return=o,K=c):ev(s);for(;i!==null;)K=i,uw(i),i=i.sibling;K=s,qa=l,rt=d}Xg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,K=i):Xg(t)}}function Xg(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rt||Pc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!rt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Mg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Mg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&ko(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}rt||e.flags&512&&ch(e)}catch(g){Ne(e,e.return,g)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Zg(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function ev(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Pc(4,e)}catch(c){Ne(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ne(e,s,c)}}var i=e.return;try{ch(e)}catch(c){Ne(e,i,c)}break;case 5:var o=e.return;try{ch(e)}catch(c){Ne(e,o,c)}}}catch(c){Ne(e,e.return,c)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var BS=Math.ceil,Wl=$n.ReactCurrentDispatcher,Df=$n.ReactCurrentOwner,Ut=$n.ReactCurrentBatchConfig,ce=0,Be=null,je=null,Ge=0,St=0,$s=Or(0),Ve=0,Uo=null,ss=0,Rc=0,Mf=0,fo=null,vt=null,Vf=0,ai=1/0,Sn=null,ql=!1,hh=null,mr=null,Ga=!1,or=null,Gl=0,po=0,fh=null,dl=-1,hl=0;function ft(){return ce&6?Pe():dl!==-1?dl:dl=Pe()}function gr(t){return t.mode&1?ce&2&&Ge!==0?Ge&-Ge:SS.transition!==null?(hl===0&&(hl=Kx()),hl):(t=he,t!==0||(t=window.event,t=t===void 0?16:t_(t.type)),t):1}function en(t,e,n,r){if(50<po)throw po=0,fh=null,Error(H(185));Zo(t,n,r),(!(ce&2)||t!==Be)&&(t===Be&&(!(ce&2)&&(Rc|=n),Ve===4&&tr(t,Ge)),wt(t,r),n===1&&ce===0&&!(e.mode&1)&&(ai=Pe()+500,kc&&Dr()))}function wt(t,e){var n=t.callbackNode;SI(t,e);var r=Al(t,t===Be?Ge:0);if(r===0)n!==null&&cg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&cg(n),e===1)t.tag===0?IS(tv.bind(null,t)):__(tv.bind(null,t)),_S(function(){!(ce&6)&&Dr()}),n=null;else{switch(Qx(r)){case 1:n=cf;break;case 4:n=qx;break;case 16:n=Nl;break;case 536870912:n=Gx;break;default:n=Nl}n=yw(n,dw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dw(t,e){if(dl=-1,hl=0,ce&6)throw Error(H(327));var n=t.callbackNode;if(Qs()&&t.callbackNode!==n)return null;var r=Al(t,t===Be?Ge:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kl(t,r);else{e=r;var s=ce;ce|=2;var i=fw();(Be!==t||Ge!==e)&&(Sn=null,ai=Pe()+500,Xr(t,e));do try{WS();break}catch(l){hw(t,l)}while(!0);Ef(),Wl.current=i,ce=s,je!==null?e=0:(Be=null,Ge=0,e=Ve)}if(e!==0){if(e===2&&(s=Fd(t),s!==0&&(r=s,e=ph(t,s))),e===1)throw n=Uo,Xr(t,0),tr(t,r),wt(t,Pe()),n;if(e===6)tr(t,r);else{if(s=t.current.alternate,!(r&30)&&!$S(s)&&(e=Kl(t,r),e===2&&(i=Fd(t),i!==0&&(r=i,e=ph(t,i))),e===1))throw n=Uo,Xr(t,0),tr(t,r),wt(t,Pe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:Hr(t,vt,Sn);break;case 3:if(tr(t,r),(r&130023424)===r&&(e=Vf+500-Pe(),10<e)){if(Al(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ft(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Kd(Hr.bind(null,t,vt,Sn),e);break}Hr(t,vt,Sn);break;case 4:if(tr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Zt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BS(r/1960))-r,10<r){t.timeoutHandle=Kd(Hr.bind(null,t,vt,Sn),r);break}Hr(t,vt,Sn);break;case 5:Hr(t,vt,Sn);break;default:throw Error(H(329))}}}return wt(t,Pe()),t.callbackNode===n?dw.bind(null,t):null}function ph(t,e){var n=fo;return t.current.memoizedState.isDehydrated&&(Xr(t,e).flags|=256),t=Kl(t,e),t!==2&&(e=vt,vt=n,e!==null&&mh(e)),t}function mh(t){vt===null?vt=t:vt.push.apply(vt,t)}function $S(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!nn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tr(t,e){for(e&=~Mf,e&=~Rc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zt(e),r=1<<n;t[n]=-1,e&=~r}}function tv(t){if(ce&6)throw Error(H(327));Qs();var e=Al(t,0);if(!(e&1))return wt(t,Pe()),null;var n=Kl(t,e);if(t.tag!==0&&n===2){var r=Fd(t);r!==0&&(e=r,n=ph(t,r))}if(n===1)throw n=Uo,Xr(t,0),tr(t,e),wt(t,Pe()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hr(t,vt,Sn),wt(t,Pe()),null}function Lf(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(ai=Pe()+500,kc&&Dr())}}function is(t){or!==null&&or.tag===0&&!(ce&6)&&Qs();var e=ce;ce|=1;var n=Ut.transition,r=he;try{if(Ut.transition=null,he=1,t)return t()}finally{he=r,Ut.transition=n,ce=e,!(ce&6)&&Dr()}}function Uf(){St=$s.current,xe($s)}function Xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xS(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(xf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dl();break;case 3:ii(),xe(xt),xe(it),kf();break;case 5:Cf(r);break;case 4:ii();break;case 13:xe(Ee);break;case 19:xe(Ee);break;case 10:Tf(r.type._context);break;case 22:case 23:Uf()}n=n.return}if(Be=t,je=t=vr(t.current,null),Ge=St=e,Ve=0,Uo=null,Mf=Rc=ss=0,vt=fo=null,Gr!==null){for(e=0;e<Gr.length;e++)if(n=Gr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Gr=null}return t}function hw(t,e){do{var n=je;try{if(Ef(),ll.current=Hl,$l){for(var r=Ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}$l=!1}if(rs=0,Fe=De=Ie=null,uo=!1,Mo=0,Df.current=null,n===null||n.return===null){Ve=1,Uo=e,je=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Ge,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var T=Bg(o);if(T!==null){T.flags&=-257,$g(T,o,l,i,e),T.mode&1&&zg(i,d,e),e=T,c=d;var w=e.updateQueue;if(w===null){var R=new Set;R.add(c),e.updateQueue=R}else w.add(c);break e}else{if(!(e&1)){zg(i,d,e),Ff();break e}c=Error(H(426))}}else if(we&&l.mode&1){var A=Bg(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),$g(A,o,l,i,e),_f(oi(c,l));break e}}i=c=oi(c,l),Ve!==4&&(Ve=2),fo===null?fo=[i]:fo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=Q_(i,c,e);Dg(i,E);break e;case 1:l=c;var x=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(mr===null||!mr.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=Y_(i,l,e);Dg(i,P);break e}}i=i.return}while(i!==null)}mw(n)}catch(z){e=z,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function fw(){var t=Wl.current;return Wl.current=Hl,t===null?Hl:t}function Ff(){(Ve===0||Ve===3||Ve===2)&&(Ve=4),Be===null||!(ss&268435455)&&!(Rc&268435455)||tr(Be,Ge)}function Kl(t,e){var n=ce;ce|=2;var r=fw();(Be!==t||Ge!==e)&&(Sn=null,Xr(t,e));do try{HS();break}catch(s){hw(t,s)}while(!0);if(Ef(),ce=n,Wl.current=r,je!==null)throw Error(H(261));return Be=null,Ge=0,Ve}function HS(){for(;je!==null;)pw(je)}function WS(){for(;je!==null&&!gI();)pw(je)}function pw(t){var e=vw(t.alternate,t,St);t.memoizedProps=t.pendingProps,e===null?mw(t):je=e,Df.current=null}function mw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=LS(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ve=6,je=null;return}}else if(n=VS(n,e,St),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Ve===0&&(Ve=5)}function Hr(t,e,n){var r=he,s=Ut.transition;try{Ut.transition=null,he=1,qS(t,e,n,r)}finally{Ut.transition=s,he=r}return null}function qS(t,e,n,r){do Qs();while(or!==null);if(ce&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(bI(t,i),t===Be&&(je=Be=null,Ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ga||(Ga=!0,yw(Nl,function(){return Qs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ut.transition,Ut.transition=null;var o=he;he=1;var l=ce;ce|=4,Df.current=null,FS(t,n),cw(n,t),hS(qd),Pl=!!Wd,qd=Wd=null,t.current=n,zS(n),vI(),ce=l,he=o,Ut.transition=i}else t.current=n;if(Ga&&(Ga=!1,or=t,Gl=s),i=t.pendingLanes,i===0&&(mr=null),_I(n.stateNode),wt(t,Pe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ql)throw ql=!1,t=hh,hh=null,t;return Gl&1&&t.tag!==0&&Qs(),i=t.pendingLanes,i&1?t===fh?po++:(po=0,fh=t):po=0,Dr(),null}function Qs(){if(or!==null){var t=Qx(Gl),e=Ut.transition,n=he;try{if(Ut.transition=null,he=16>t?16:t,or===null)var r=!1;else{if(t=or,or=null,Gl=0,ce&6)throw Error(H(331));var s=ce;for(ce|=4,K=t.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(K=d;K!==null;){var f=K;switch(f.tag){case 0:case 11:case 15:ho(8,f,i)}var m=f.child;if(m!==null)m.return=f,K=m;else for(;K!==null;){f=K;var g=f.sibling,T=f.return;if(ow(f),f===d){K=null;break}if(g!==null){g.return=T,K=g;break}K=T}}}var w=i.alternate;if(w!==null){var R=w.child;if(R!==null){w.child=null;do{var A=R.sibling;R.sibling=null,R=A}while(R!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ho(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,K=E;break e}K=i.return}}var x=t.current;for(K=x;K!==null;){o=K;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,K=C;else e:for(o=x;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pc(9,l)}}catch(z){Ne(l,l.return,z)}if(l===o){K=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,K=P;break e}K=l.return}}if(ce=s,Dr(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Tc,t)}catch{}r=!0}return r}finally{he=n,Ut.transition=e}}return!1}function nv(t,e,n){e=oi(n,e),e=Q_(t,e,1),t=pr(t,e,1),e=ft(),t!==null&&(Zo(t,1,e),wt(t,e))}function Ne(t,e,n){if(t.tag===3)nv(t,t,n);else for(;e!==null;){if(e.tag===3){nv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mr===null||!mr.has(r))){t=oi(n,t),t=Y_(e,t,1),e=pr(e,t,1),t=ft(),e!==null&&(Zo(e,1,t),wt(e,t));break}}e=e.return}}function GS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ft(),t.pingedLanes|=t.suspendedLanes&n,Be===t&&(Ge&n)===n&&(Ve===4||Ve===3&&(Ge&130023424)===Ge&&500>Pe()-Vf?Xr(t,0):Mf|=n),wt(t,e)}function gw(t,e){e===0&&(t.mode&1?(e=Va,Va<<=1,!(Va&130023424)&&(Va=4194304)):e=1);var n=ft();t=Vn(t,e),t!==null&&(Zo(t,e,n),wt(t,n))}function KS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gw(t,n)}function QS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),gw(t,n)}var vw;vw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xt.current)yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yt=!1,MS(t,e,n);yt=!!(t.flags&131072)}else yt=!1,we&&e.flags&1048576&&w_(e,Ll,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ul(t,e),t=e.pendingProps;var s=ni(e,it.current);Ks(e,n),s=Af(null,e,r,t,s,n);var i=Pf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_t(r)?(i=!0,Ml(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sf(e),s.updater=Ac,e.stateNode=s,s._reactInternals=e,th(e,r,t,n),e=sh(null,e,r,!0,i,n)):(e.tag=0,we&&i&&yf(e),ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ul(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=JS(r),t=Kt(r,t),s){case 0:e=rh(null,e,r,t,n);break e;case 1:e=qg(null,e,r,t,n);break e;case 11:e=Hg(null,e,r,t,n);break e;case 14:e=Wg(null,e,r,Kt(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),rh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),qg(t,e,r,s,n);case 3:e:{if(ew(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,C_(t,e),zl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=oi(Error(H(423)),e),e=Gg(t,e,r,n,s);break e}else if(r!==s){s=oi(Error(H(424)),e),e=Gg(t,e,r,n,s);break e}else for(Ct=fr(e.stateNode.containerInfo.firstChild),kt=e,we=!0,Yt=null,n=S_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ri(),r===s){e=Ln(t,e,n);break e}ht(t,e,r,n)}e=e.child}return e;case 5:return k_(e),t===null&&Xd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Gd(r,s)?o=null:i!==null&&Gd(r,i)&&(e.flags|=32),Z_(t,e),ht(t,e,o,n),e.child;case 6:return t===null&&Xd(e),null;case 13:return tw(t,e,n);case 4:return bf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=si(e,null,r,n):ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),Hg(t,e,r,s,n);case 7:return ht(t,e,e.pendingProps,n),e.child;case 8:return ht(t,e,e.pendingProps.children,n),e.child;case 12:return ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,pe(Ul,r._currentValue),r._currentValue=o,i!==null)if(nn(i.value,o)){if(i.children===s.children&&!xt.current){e=Ln(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Rn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Zd(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Zd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ks(e,n),s=zt(s),r=r(s),e.flags|=1,ht(t,e,r,n),e.child;case 14:return r=e.type,s=Kt(r,e.pendingProps),s=Kt(r.type,s),Wg(t,e,r,s,n);case 15:return J_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),ul(t,e),e.tag=1,_t(r)?(t=!0,Ml(e)):t=!1,Ks(e,n),K_(e,r,s),th(e,r,s,n),sh(null,e,r,!0,t,n);case 19:return nw(t,e,n);case 22:return X_(t,e,n)}throw Error(H(156,e.tag))};function yw(t,e){return Wx(t,e)}function YS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(t,e,n,r){return new YS(t,e,n,r)}function zf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JS(t){if(typeof t=="function")return zf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===of)return 11;if(t===af)return 14}return 2}function vr(t,e){var n=t.alternate;return n===null?(n=Lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")zf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case js:return Zr(n.children,s,i,e);case sf:o=8,s|=8;break;case Sd:return t=Lt(12,n,e,s|2),t.elementType=Sd,t.lanes=i,t;case bd:return t=Lt(13,n,e,s),t.elementType=bd,t.lanes=i,t;case Cd:return t=Lt(19,n,e,s),t.elementType=Cd,t.lanes=i,t;case kx:return jc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bx:o=10;break e;case Cx:o=9;break e;case of:o=11;break e;case af:o=14;break e;case Xn:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Lt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Zr(t,e,n,r){return t=Lt(7,t,r,e),t.lanes=n,t}function jc(t,e,n,r){return t=Lt(22,t,r,e),t.elementType=kx,t.lanes=n,t.stateNode={isHidden:!1},t}function id(t,e,n){return t=Lt(6,t,null,e),t.lanes=n,t}function od(t,e,n){return e=Lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fu(0),this.expirationTimes=Fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bf(t,e,n,r,s,i,o,l,c){return t=new XS(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Lt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sf(i),t}function ZS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xw(t){if(!t)return Ir;t=t._reactInternals;e:{if(ps(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(_t(n))return x_(t,n,e)}return e}function _w(t,e,n,r,s,i,o,l,c){return t=Bf(n,r,!0,t,s,i,o,l,c),t.context=xw(null),n=t.current,r=ft(),s=gr(n),i=Rn(r,s),i.callback=e??null,pr(n,i,s),t.current.lanes=s,Zo(t,s,r),wt(t,r),t}function Oc(t,e,n,r){var s=e.current,i=ft(),o=gr(s);return n=xw(n),e.context===null?e.context=n:e.pendingContext=n,e=Rn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=pr(s,e,o),t!==null&&(en(t,s,o,i),al(t,s,o)),o}function Ql(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $f(t,e){rv(t,e),(t=t.alternate)&&rv(t,e)}function eb(){return null}var ww=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hf(t){this._internalRoot=t}Dc.prototype.render=Hf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Oc(t,e,null,null)};Dc.prototype.unmount=Hf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;is(function(){Oc(null,t,null,null)}),e[Mn]=null}};function Dc(t){this._internalRoot=t}Dc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Xx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<er.length&&e!==0&&e<er[n].priority;n++);er.splice(n,0,t),n===0&&e_(t)}};function Wf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sv(){}function tb(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Ql(o);i.call(d)}}var o=_w(e,r,t,0,null,!1,!1,"",sv);return t._reactRootContainer=o,t[Mn]=o.current,Po(t.nodeType===8?t.parentNode:t),is(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Ql(c);l.call(d)}}var c=Bf(t,0,!1,null,null,!1,!1,"",sv);return t._reactRootContainer=c,t[Mn]=c.current,Po(t.nodeType===8?t.parentNode:t),is(function(){Oc(e,c,n,r)}),c}function Vc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Ql(o);l.call(c)}}Oc(e,o,t,s)}else o=tb(n,e,t,s,r);return Ql(o)}Yx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ji(e.pendingLanes);n!==0&&(uf(e,n|1),wt(e,Pe()),!(ce&6)&&(ai=Pe()+500,Dr()))}break;case 13:is(function(){var r=Vn(t,1);if(r!==null){var s=ft();en(r,t,1,s)}}),$f(t,1)}};df=function(t){if(t.tag===13){var e=Vn(t,134217728);if(e!==null){var n=ft();en(e,t,134217728,n)}$f(t,134217728)}};Jx=function(t){if(t.tag===13){var e=gr(t),n=Vn(t,e);if(n!==null){var r=ft();en(n,t,e,r)}$f(t,e)}};Xx=function(){return he};Zx=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};Vd=function(t,e,n){switch(e){case"input":if(Ad(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Cc(r);if(!s)throw Error(H(90));Ax(r),Ad(r,s)}}}break;case"textarea":Rx(t,n);break;case"select":e=n.value,e!=null&&Hs(t,!!n.multiple,e,!1)}};Ux=Lf;Fx=is;var nb={usingClientEntryPoint:!1,Events:[ta,Vs,Cc,Vx,Lx,Lf]},Ki={findFiberByHostInstance:qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rb={bundleType:Ki.bundleType,version:Ki.version,rendererPackageName:Ki.rendererPackageName,rendererConfig:Ki.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$n.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$x(t),t===null?null:t.stateNode},findFiberByHostInstance:Ki.findFiberByHostInstance||eb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ka.isDisabled&&Ka.supportsFiber)try{Tc=Ka.inject(rb),dn=Ka}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nb;Pt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wf(e))throw Error(H(200));return ZS(t,e,null,n)};Pt.createRoot=function(t,e){if(!Wf(t))throw Error(H(299));var n=!1,r="",s=ww;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Bf(t,1,!1,null,null,n,!1,r,s),t[Mn]=e.current,Po(t.nodeType===8?t.parentNode:t),new Hf(e)};Pt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=$x(e),t=t===null?null:t.stateNode,t};Pt.flushSync=function(t){return is(t)};Pt.hydrate=function(t,e,n){if(!Mc(e))throw Error(H(200));return Vc(null,t,e,!0,n)};Pt.hydrateRoot=function(t,e,n){if(!Wf(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ww;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=_w(e,null,t,1,n??null,s,!1,i,o),t[Mn]=e.current,Po(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Dc(e)};Pt.render=function(t,e,n){if(!Mc(e))throw Error(H(200));return Vc(null,t,e,!1,n)};Pt.unmountComponentAtNode=function(t){if(!Mc(t))throw Error(H(40));return t._reactRootContainer?(is(function(){Vc(null,null,t,!1,function(){t._reactRootContainer=null,t[Mn]=null})}),!0):!1};Pt.unstable_batchedUpdates=Lf;Pt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Mc(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Vc(t,e,n,!1,r)};Pt.version="18.3.1-next-f1338f8080-20240426";function Ew(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ew)}catch(t){console.error(t)}}Ew(),Ex.exports=Pt;var sb=Ex.exports,Tw,iv=sb;Tw=iv.createRoot,iv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fo(){return Fo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fo.apply(this,arguments)}var ar;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ar||(ar={}));const ov="popstate";function ib(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return gh("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Yl(s)}return ab(e,n,null,t)}function Se(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ob(){return Math.random().toString(36).substr(2,8)}function av(t,e){return{usr:t.state,key:t.key,idx:e}}function gh(t,e,n,r){return n===void 0&&(n=null),Fo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?xi(e):e,{state:n,key:e&&e.key||r||ob()})}function Yl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ab(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=ar.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(Fo({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=ar.Pop;let A=f(),E=A==null?null:A-d;d=A,c&&c({action:l,location:R.location,delta:E})}function g(A,E){l=ar.Push;let x=gh(R.location,A,E);d=f()+1;let C=av(x,d),P=R.createHref(x);try{o.pushState(C,"",P)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;s.location.assign(P)}i&&c&&c({action:l,location:R.location,delta:1})}function T(A,E){l=ar.Replace;let x=gh(R.location,A,E);d=f();let C=av(x,d),P=R.createHref(x);o.replaceState(C,"",P),i&&c&&c({action:l,location:R.location,delta:0})}function w(A){let E=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof A=="string"?A:Yl(A);return x=x.replace(/ $/,"%20"),Se(E,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,E)}let R={get action(){return l},get location(){return t(s,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(ov,m),c=A,()=>{s.removeEventListener(ov,m),c=null}},createHref(A){return e(s,A)},createURL:w,encodeLocation(A){let E=w(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:T,go(A){return o.go(A)}};return R}var lv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(lv||(lv={}));function lb(t,e,n){return n===void 0&&(n="/"),cb(t,e,n)}function cb(t,e,n,r){let s=typeof e=="string"?xi(e):e,i=li(s.pathname||"/",n);if(i==null)return null;let o=Iw(t);ub(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=wb(i);l=xb(o[c],d)}return l}function Iw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Se(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=yr([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(Se(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Iw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:vb(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of Sw(i.path))s(i,o,c)}),e}function Sw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Sw(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function ub(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const db=/^:[\w-]+$/,hb=3,fb=2,pb=1,mb=10,gb=-2,cv=t=>t==="*";function vb(t,e){let n=t.split("/"),r=n.length;return n.some(cv)&&(r+=gb),e&&(r+=fb),n.filter(s=>!cv(s)).reduce((s,i)=>s+(db.test(i)?hb:i===""?pb:mb),r)}function yb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function xb(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=vh({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:yr([i,m.pathname]),pathnameBase:bb(yr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=yr([i,m.pathnameBase]))}return o}function vh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_b(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:T}=f;if(g==="*"){let R=l[m]||"";o=i.slice(0,i.length-R.length).replace(/(.)\/+$/,"$1")}const w=l[m];return T&&!w?d[g]=void 0:d[g]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function _b(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),qf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function wb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function li(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Eb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tb=t=>Eb.test(t);function Ib(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?xi(t):t,i;if(n)if(Tb(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),qf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=uv(n.substring(1),"/"):i=uv(n,e)}else i=e;return{pathname:i,search:Cb(r),hash:kb(s)}}function uv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ad(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Sb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gf(t,e){let n=Sb(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Kf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=xi(t):(s=Fo({},t),Se(!s.pathname||!s.pathname.includes("?"),ad("?","pathname","search",s)),Se(!s.pathname||!s.pathname.includes("#"),ad("#","pathname","hash",s)),Se(!s.search||!s.search.includes("#"),ad("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let c=Ib(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const yr=t=>t.join("/").replace(/\/\/+/g,"/"),bb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Cb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Nb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const bw=["post","put","patch","delete"];new Set(bw);const Ab=["get",...bw];new Set(Ab);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zo(){return zo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zo.apply(this,arguments)}const Lc=N.createContext(null),Cw=N.createContext(null),Hn=N.createContext(null),Uc=N.createContext(null),Wn=N.createContext({outlet:null,matches:[],isDataRoute:!1}),kw=N.createContext(null);function Pb(t,e){let{relative:n}=e===void 0?{}:e;_i()||Se(!1);let{basename:r,navigator:s}=N.useContext(Hn),{hash:i,pathname:o,search:l}=Fc(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:yr([r,o])),s.createHref({pathname:c,search:l,hash:i})}function _i(){return N.useContext(Uc)!=null}function ms(){return _i()||Se(!1),N.useContext(Uc).location}function Nw(t){N.useContext(Hn).static||N.useLayoutEffect(t)}function Aw(){let{isDataRoute:t}=N.useContext(Wn);return t?qb():Rb()}function Rb(){_i()||Se(!1);let t=N.useContext(Lc),{basename:e,future:n,navigator:r}=N.useContext(Hn),{matches:s}=N.useContext(Wn),{pathname:i}=ms(),o=JSON.stringify(Gf(s,n.v7_relativeSplatPath)),l=N.useRef(!1);return Nw(()=>{l.current=!0}),N.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=Kf(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:yr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,i,t])}const jb=N.createContext(null);function Ob(t){let e=N.useContext(Wn).outlet;return e&&N.createElement(jb.Provider,{value:t},e)}function Fc(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext(Hn),{matches:s}=N.useContext(Wn),{pathname:i}=ms(),o=JSON.stringify(Gf(s,r.v7_relativeSplatPath));return N.useMemo(()=>Kf(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Db(t,e){return Mb(t,e)}function Mb(t,e,n,r){_i()||Se(!1);let{navigator:s}=N.useContext(Hn),{matches:i}=N.useContext(Wn),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=ms(),f;if(e){var m;let A=typeof e=="string"?xi(e):e;c==="/"||(m=A.pathname)!=null&&m.startsWith(c)||Se(!1),f=A}else f=d;let g=f.pathname||"/",T=g;if(c!=="/"){let A=c.replace(/^\//,"").split("/");T="/"+g.replace(/^\//,"").split("/").slice(A.length).join("/")}let w=lb(t,{pathname:T}),R=zb(w&&w.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:yr([c,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?c:yr([c,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,n,r);return e&&R?N.createElement(Uc.Provider,{value:{location:zo({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ar.Pop}},R):R}function Vb(){let t=Wb(),e=Nb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:s},n):null,null)}const Lb=N.createElement(Vb,null);class Ub extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(Wn.Provider,{value:this.props.routeContext},N.createElement(kw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fb(t){let{routeContext:e,match:n,children:r}=t,s=N.useContext(Lc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Wn.Provider,{value:e},r)}function zb(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||Se(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:T}=n,w=m.route.loader&&g[m.route.id]===void 0&&(!T||T[m.route.id]===void 0);if(m.route.lazy||w){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let T,w=!1,R=null,A=null;n&&(T=l&&m.route.id?l[m.route.id]:void 0,R=m.route.errorElement||Lb,c&&(d<0&&g===0?(Gb("route-fallback"),w=!0,A=null):d===g&&(w=!0,A=m.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,g+1)),x=()=>{let C;return T?C=R:w?C=A:m.route.Component?C=N.createElement(m.route.Component,null):m.route.element?C=m.route.element:C=f,N.createElement(Fb,{match:m,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:C})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?N.createElement(Ub,{location:n.location,revalidation:n.revalidation,component:R,error:T,children:x(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):x()},null)}var Pw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Pw||{}),Rw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Rw||{});function Bb(t){let e=N.useContext(Lc);return e||Se(!1),e}function $b(t){let e=N.useContext(Cw);return e||Se(!1),e}function Hb(t){let e=N.useContext(Wn);return e||Se(!1),e}function jw(t){let e=Hb(),n=e.matches[e.matches.length-1];return n.route.id||Se(!1),n.route.id}function Wb(){var t;let e=N.useContext(kw),n=$b(),r=jw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function qb(){let{router:t}=Bb(Pw.UseNavigateStable),e=jw(Rw.UseNavigateStable),n=N.useRef(!1);return Nw(()=>{n.current=!0}),N.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,zo({fromRouteId:e},i)))},[t,e])}const dv={};function Gb(t,e,n){dv[t]||(dv[t]=!0)}function Kb(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Qb(t){let{to:e,replace:n,state:r,relative:s}=t;_i()||Se(!1);let{future:i,static:o}=N.useContext(Hn),{matches:l}=N.useContext(Wn),{pathname:c}=ms(),d=Aw(),f=Kf(e,Gf(l,i.v7_relativeSplatPath),c,s==="path"),m=JSON.stringify(f);return N.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function Yb(t){return Ob(t.context)}function Cs(t){Se(!1)}function Jb(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ar.Pop,navigator:i,static:o=!1,future:l}=t;_i()&&Se(!1);let c=e.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:c,navigator:i,static:o,future:zo({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=xi(r));let{pathname:f="/",search:m="",hash:g="",state:T=null,key:w="default"}=r,R=N.useMemo(()=>{let A=li(f,c);return A==null?null:{location:{pathname:A,search:m,hash:g,state:T,key:w},navigationType:s}},[c,f,m,g,T,w,s]);return R==null?null:N.createElement(Hn.Provider,{value:d},N.createElement(Uc.Provider,{children:n,value:R}))}function Xb(t){let{children:e,location:n}=t;return Db(yh(e),n)}new Promise(()=>{});function yh(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,s)=>{if(!N.isValidElement(r))return;let i=[...e,s];if(r.type===N.Fragment){n.push.apply(n,yh(r.props.children,i));return}r.type!==Cs&&Se(!1),!r.props.index||!r.props.children||Se(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=yh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jl(){return Jl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jl.apply(this,arguments)}function Ow(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Zb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eC(t,e){return t.button===0&&(!e||e==="_self")&&!Zb(t)}const tC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],nC=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],rC="6";try{window.__reactRouterVersion=rC}catch{}const sC=N.createContext({isTransitioning:!1}),iC="startTransition",hv=GT[iC];function oC(t){let{basename:e,children:n,future:r,window:s}=t,i=N.useRef();i.current==null&&(i.current=ib({window:s,v5Compat:!0}));let o=i.current,[l,c]=N.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=N.useCallback(m=>{d&&hv?hv(()=>c(m)):c(m)},[c,d]);return N.useLayoutEffect(()=>o.listen(f),[o,f]),N.useEffect(()=>Kb(r),[r]),N.createElement(Jb,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const aC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xh=N.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:f,viewTransition:m}=e,g=Ow(e,tC),{basename:T}=N.useContext(Hn),w,R=!1;if(typeof d=="string"&&lC.test(d)&&(w=d,aC))try{let C=new URL(window.location.href),P=d.startsWith("//")?new URL(C.protocol+d):new URL(d),z=li(P.pathname,T);P.origin===C.origin&&z!=null?d=z+P.search+P.hash:R=!0}catch{}let A=Pb(d,{relative:s}),E=uC(d,{replace:o,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:m});function x(C){r&&r(C),C.defaultPrevented||E(C)}return N.createElement("a",Jl({},g,{href:w||A,onClick:R||i?r:x,ref:n,target:c}))}),ld=N.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:d,children:f}=e,m=Ow(e,nC),g=Fc(c,{relative:m.relative}),T=ms(),w=N.useContext(Cw),{navigator:R,basename:A}=N.useContext(Hn),E=w!=null&&dC(g)&&d===!0,x=R.encodeLocation?R.encodeLocation(g).pathname:g.pathname,C=T.pathname,P=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(C=C.toLowerCase(),P=P?P.toLowerCase():null,x=x.toLowerCase()),P&&A&&(P=li(P,A)||P);const z=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let U=C===x||!o&&C.startsWith(x)&&C.charAt(z)==="/",b=P!=null&&(P===x||!o&&P.startsWith(x)&&P.charAt(x.length)==="/"),v={isActive:U,isPending:b,isTransitioning:E},I=U?r:void 0,_;typeof i=="function"?_=i(v):_=[i,U?"active":null,b?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let k=typeof l=="function"?l(v):l;return N.createElement(xh,Jl({},m,{"aria-current":I,className:_,ref:n,style:k,to:c,viewTransition:d}),typeof f=="function"?f(v):f)});var _h;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(_h||(_h={}));var fv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(fv||(fv={}));function cC(t){let e=N.useContext(Lc);return e||Se(!1),e}function uC(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=Aw(),d=ms(),f=Fc(t,{relative:o});return N.useCallback(m=>{if(eC(m,n)){m.preventDefault();let g=r!==void 0?r:Yl(d)===Yl(f);c(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,f,r,s,n,t,i,o,l])}function dC(t,e){e===void 0&&(e={});let n=N.useContext(sC);n==null&&Se(!1);let{basename:r}=cC(_h.useViewTransitionState),s=Fc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=li(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=li(n.nextLocation.pathname,r)||n.nextLocation.pathname;return vh(s.pathname,o)!=null||vh(s.pathname,i)!=null}const hC=()=>{};var pv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},fC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Mw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,T=d&63;c||(T=64,o||(g=64)),r.push(n[f],n[m],n[g],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Dw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new pC;const g=i<<2|l>>4;if(r.push(g),d!==64){const T=l<<4&240|d>>2;if(r.push(T),m!==64){const w=d<<6&192|m;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mC=function(t){const e=Dw(t);return Mw.encodeByteArray(e,!0)},Xl=function(t){return mC(t).replace(/\./g,"")},Vw=function(t){try{return Mw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=()=>gC().__FIREBASE_DEFAULTS__,yC=()=>{if(typeof process>"u"||typeof pv>"u")return;const t=pv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Vw(t[1]);return e&&JSON.parse(e)},zc=()=>{try{return hC()||vC()||yC()||xC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Lw=t=>{var e,n;return(n=(e=zc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},_C=t=>{const e=Lw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Uw=()=>{var t;return(t=zc())===null||t===void 0?void 0:t.config},Fw=t=>{var e;return(e=zc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Xl(JSON.stringify(n)),Xl(JSON.stringify(o)),""].join(".")}const mo={};function TC(){const t={prod:[],emulator:[]};for(const e of Object.keys(mo))mo[e]?t.emulator.push(e):t.prod.push(e);return t}function IC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let mv=!1;function Bw(t,e){if(typeof window>"u"||typeof document>"u"||!wi(window.location.host)||mo[t]===e||mo[t]||mv)return;mo[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=TC().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,T){g.setAttribute("width","24"),g.setAttribute("id",T),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{mv=!0,o()},g}function f(g,T){g.setAttribute("id",T),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=IC(r),T=n("text"),w=document.getElementById(T)||document.createElement("span"),R=n("learnmore"),A=document.getElementById(R)||document.createElement("a"),E=n("preprendIcon"),x=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const C=g.element;l(C),f(A,R);const P=d();c(x,E),C.append(x,w,A,P),document.body.appendChild(C)}i?(w.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function bC(){var t;const e=(t=zc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $w(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NC(){const t=ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AC(){return!bC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hw(){try{return typeof indexedDB=="object"}catch{return!1}}function Ww(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function PC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="FirebaseError";class sn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=RC,Object.setPrototypeOf(this,sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gs.prototype.create)}}class gs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?jC(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new sn(s,l,r)}}function jC(t,e){return t.replace(OC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const OC=/\{\$([^}]+)}/g;function DC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(gv(i)&&gv(o)){if(!Sr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function gv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function eo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function MC(t,e){const n=new VC(t,e);return n.subscribe.bind(n)}class VC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");LC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=cd),s.error===void 0&&(s.error=cd),s.complete===void 0&&(s.complete=cd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=1e3,FC=2,zC=4*60*60*1e3,BC=.5;function vv(t,e=UC,n=FC){const r=e*Math.pow(n,t),s=Math.round(BC*r*(Math.random()-.5)*2);return Math.min(zC,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class rn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WC(e))try{this.getOrInitializeService({instanceIdentifier:Wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wr){return this.instances.has(e)}getOptions(e=Wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wr){return this.component?this.component.multipleInstances?e:Wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HC(t){return t===Wr?void 0:t}function WC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $C(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const GC={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},KC=oe.INFO,QC={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},YC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=QC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bc{constructor(e){this.name=e,this._logLevel=KC,this._logHandler=YC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const JC=(t,e)=>e.some(n=>t instanceof n);let yv,xv;function XC(){return yv||(yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZC(){return xv||(xv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qw=new WeakMap,wh=new WeakMap,Gw=new WeakMap,ud=new WeakMap,Qf=new WeakMap;function ek(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(xr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&qw.set(n,t)}).catch(()=>{}),Qf.set(e,t),e}function tk(t){if(wh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});wh.set(t,e)}let Eh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Gw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nk(t){Eh=t(Eh)}function rk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(dd(this),e,...n);return Gw.set(r,e.sort?e.sort():[e]),xr(r)}:ZC().includes(t)?function(...e){return t.apply(dd(this),e),xr(qw.get(this))}:function(...e){return xr(t.apply(dd(this),e))}}function sk(t){return typeof t=="function"?rk(t):(t instanceof IDBTransaction&&tk(t),JC(t,XC())?new Proxy(t,Eh):t)}function xr(t){if(t instanceof IDBRequest)return ek(t);if(ud.has(t))return ud.get(t);const e=sk(t);return e!==t&&(ud.set(t,e),Qf.set(e,t)),e}const dd=t=>Qf.get(t);function Kw(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=xr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(xr(o.result),c.oldVersion,c.newVersion,xr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const ik=["get","getKey","getAll","getAllKeys","count"],ok=["put","add","delete","clear"],hd=new Map;function _v(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hd.get(e))return hd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ok.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ik.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return hd.set(e,i),i}nk(t=>({...t,get:(e,n,r)=>_v(e,n)||t.get(e,n,r),has:(e,n)=>!!_v(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Th="@firebase/app",wv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un=new Bc("@firebase/app"),ck="@firebase/app-compat",uk="@firebase/analytics-compat",dk="@firebase/analytics",hk="@firebase/app-check-compat",fk="@firebase/app-check",pk="@firebase/auth",mk="@firebase/auth-compat",gk="@firebase/database",vk="@firebase/data-connect",yk="@firebase/database-compat",xk="@firebase/functions",_k="@firebase/functions-compat",wk="@firebase/installations",Ek="@firebase/installations-compat",Tk="@firebase/messaging",Ik="@firebase/messaging-compat",Sk="@firebase/performance",bk="@firebase/performance-compat",Ck="@firebase/remote-config",kk="@firebase/remote-config-compat",Nk="@firebase/storage",Ak="@firebase/storage-compat",Pk="@firebase/firestore",Rk="@firebase/ai",jk="@firebase/firestore-compat",Ok="firebase",Dk="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="[DEFAULT]",Mk={[Th]:"fire-core",[ck]:"fire-core-compat",[dk]:"fire-analytics",[uk]:"fire-analytics-compat",[fk]:"fire-app-check",[hk]:"fire-app-check-compat",[pk]:"fire-auth",[mk]:"fire-auth-compat",[gk]:"fire-rtdb",[vk]:"fire-data-connect",[yk]:"fire-rtdb-compat",[xk]:"fire-fn",[_k]:"fire-fn-compat",[wk]:"fire-iid",[Ek]:"fire-iid-compat",[Tk]:"fire-fcm",[Ik]:"fire-fcm-compat",[Sk]:"fire-perf",[bk]:"fire-perf-compat",[Ck]:"fire-rc",[kk]:"fire-rc-compat",[Nk]:"fire-gcs",[Ak]:"fire-gcs-compat",[Pk]:"fire-fst",[jk]:"fire-fst-compat",[Rk]:"fire-vertex","fire-js":"fire-js",[Ok]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=new Map,Vk=new Map,Sh=new Map;function Ev(t,e){try{t.container.addComponent(e)}catch(n){Un.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yn(t){const e=t.name;if(Sh.has(e))return Un.debug(`There were multiple attempts to register component ${e}.`),!1;Sh.set(e,t);for(const n of Zl.values())Ev(n,t);for(const n of Vk.values())Ev(n,t);return!0}function vs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function bt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new gs("app","Firebase",Lk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=Dk;function Qw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ih,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw _r.create("bad-app-name",{appName:String(s)});if(n||(n=Uw()),!n)throw _r.create("no-options");const i=Zl.get(s);if(i){if(Sr(n,i.options)&&Sr(r,i.config))return i;throw _r.create("duplicate-app",{appName:s})}const o=new qC(s);for(const c of Sh.values())o.addComponent(c);const l=new Uk(n,r,o);return Zl.set(s,l),l}function Yf(t=Ih){const e=Zl.get(t);if(!e&&t===Ih&&Uw())return Qw();if(!e)throw _r.create("no-app",{appName:t});return e}function Ft(t,e,n){var r;let s=(r=Mk[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Un.warn(l.join(" "));return}yn(new rn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk="firebase-heartbeat-database",zk=1,Bo="firebase-heartbeat-store";let fd=null;function Yw(){return fd||(fd=Kw(Fk,zk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bo)}catch(n){console.warn(n)}}}}).catch(t=>{throw _r.create("idb-open",{originalErrorMessage:t.message})})),fd}async function Bk(t){try{const n=(await Yw()).transaction(Bo),r=await n.objectStore(Bo).get(Jw(t));return await n.done,r}catch(e){if(e instanceof sn)Un.warn(e.message);else{const n=_r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Un.warn(n.message)}}}async function Tv(t,e){try{const r=(await Yw()).transaction(Bo,"readwrite");await r.objectStore(Bo).put(e,Jw(t)),await r.done}catch(n){if(n instanceof sn)Un.warn(n.message);else{const r=_r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Un.warn(r.message)}}}function Jw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=1024,Hk=30;class Wk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Gk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Iv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Hk){const o=Kk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Un.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Iv(),{heartbeatsToSend:r,unsentEntries:s}=qk(this._heartbeatsCache.heartbeats),i=Xl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Un.warn(n),""}}}function Iv(){return new Date().toISOString().substring(0,10)}function qk(t,e=$k){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Sv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Sv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Gk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hw()?Ww().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Bk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Tv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Tv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Sv(t){return Xl(JSON.stringify({version:2,heartbeats:t})).length}function Kk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t){yn(new rn("platform-logger",e=>new ak(e),"PRIVATE")),yn(new rn("heartbeat",e=>new Wk(e),"PRIVATE")),Ft(Th,wv,t),Ft(Th,wv,"esm2017"),Ft("fire-js","")}Qk("");function Jf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Xw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yk=Xw,Zw=new gs("auth","Firebase",Xw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new Bc("@firebase/auth");function Jk(t,...e){ec.logLevel<=oe.WARN&&ec.warn(`Auth (${Ei}): ${t}`,...e)}function pl(t,...e){ec.logLevel<=oe.ERROR&&ec.error(`Auth (${Ei}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t,...e){throw Zf(t,...e)}function tn(t,...e){return Zf(t,...e)}function Xf(t,e,n){const r=Object.assign(Object.assign({},Yk()),{[e]:n});return new gs("auth","Firebase",r).create(e,{appName:t.name})}function jn(t){return Xf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xk(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&$t(t,"argument-error"),Xf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Zw.create(t,...e)}function X(t,e,...n){if(!t)throw Zf(e,...n)}function An(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pl(e),new Error(e)}function Fn(t,e){t||An(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Zk(){return bv()==="http:"||bv()==="https:"}function bv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zk()||$w()||"connection"in navigator)?navigator.onLine:!0}function tN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fn(n>e,"Short delay should be less than long delay!"),this.isMobile=SC()||kC()}get(){return eN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t,e){Fn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;An("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;An("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;An("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sN=new sa(3e4,6e4);function Mr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qn(t,e,n,r,s={}){return t0(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=ra(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return CC()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&wi(t.emulatorConfig.host)&&(d.credentials="include"),e0.fetch()(await n0(t,t.config.apiHost,n,l),d)})}async function t0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},nN),e);try{const s=new oN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Qa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qa(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Qa(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Qa(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Xf(t,f,d);$t(t,f)}}catch(s){if(s instanceof sn)throw s;$t(t,"network-request-failed",{message:String(s)})}}async function ia(t,e,n,r,s={}){const i=await qn(t,e,n,r,s);return"mfaPendingCredential"in i&&$t(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function n0(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?ep(t.config,s):`${t.config.apiScheme}://${s}`;return rN.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function iN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(tn(this.auth,"network-request-failed")),sN.get())})}}function Qa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=tn(t,e,r);return s.customData._tokenResponse=n,s}function Cv(t){return t!==void 0&&t.enterprise!==void 0}class aN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return iN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lN(t,e){return qn(t,"GET","/v2/recaptchaConfig",Mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(t,e){return qn(t,"POST","/v1/accounts:delete",e)}async function tc(t,e){return qn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uN(t,e=!1){const n=at(t),r=await n.getIdToken(e),s=tp(r);X(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:go(pd(s.auth_time)),issuedAtTime:go(pd(s.iat)),expirationTime:go(pd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function pd(t){return Number(t)*1e3}function tp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return pl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Vw(n);return s?JSON.parse(s):(pl("Failed to decode base64 JWT payload"),null)}catch(s){return pl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function kv(t){const e=tp(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ci(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sn&&dN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function dN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=go(this.lastLoginAt),this.creationTime=go(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ci(t,tc(n,{idToken:r}));X(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?r0(i.providerUserInfo):[],l=pN(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=c?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Ch(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function fN(t){const e=at(t);await nc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function r0(t){return t.map(e=>{var{providerId:n}=e,r=Jf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(t,e){const n=await t0(t,{},async()=>{const r=ra({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await n0(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&wi(t.emulatorConfig.host)&&(c.credentials="include"),e0.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gN(t,e){return qn(t,"POST","/v2/accounts:revokeToken",Mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=kv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await mN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ys;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(X(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(X(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ys,this.toJSON())}_performRefresh(){return An("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jt{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Jf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ch(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ci(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uN(this,e)}reload(){return fN(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await nc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bt(this.auth.app))return Promise.reject(jn(this.auth));const e=await this.getIdToken();return await ci(this,cN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,T=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(l=n.tenantId)!==null&&l!==void 0?l:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,x=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:C,emailVerified:P,isAnonymous:z,providerData:U,stsTokenManager:b}=n;X(C&&b,e,"internal-error");const v=Ys.fromJSON(this.name,b);X(typeof C=="string",e,"internal-error"),Jn(m,e.name),Jn(g,e.name),X(typeof P=="boolean",e,"internal-error"),X(typeof z=="boolean",e,"internal-error"),Jn(T,e.name),Jn(w,e.name),Jn(R,e.name),Jn(A,e.name),Jn(E,e.name),Jn(x,e.name);const I=new Jt({uid:C,auth:e,email:g,emailVerified:P,displayName:m,isAnonymous:z,photoURL:w,phoneNumber:T,tenantId:R,stsTokenManager:v,createdAt:E,lastLoginAt:x});return U&&Array.isArray(U)&&(I.providerData=U.map(_=>Object.assign({},_))),A&&(I._redirectEventId=A),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ys;s.updateFromServerResponse(n);const i=new Jt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await nc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];X(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?r0(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Ys;l.updateFromIdToken(r);const c=new Jt({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Ch(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map;function Pn(t){Fn(t instanceof Function,"Expected a class definition");let e=Nv.get(t);return e?(Fn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Nv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}s0.type="NONE";const Av=s0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t,e,n){return`firebase:${t}:${e}:${n}`}class Js{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ml(this.userKey,s.apiKey,i),this.fullPersistenceKey=ml("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await tc(this.auth,{idToken:e}).catch(()=>{});return n?Jt._fromGetAccountInfoResponse(this.auth,n,e):null}return Jt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Js(Pn(Av),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Pn(Av);const o=ml(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await tc(e,{idToken:f}).catch(()=>{});if(!g)break;m=await Jt._fromGetAccountInfoResponse(e,g,f)}else m=Jt._fromJSON(e,f);d!==i&&(l=m),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Js(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Js(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(l0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(i0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(u0(e))return"Blackberry";if(d0(e))return"Webos";if(o0(e))return"Safari";if((e.includes("chrome/")||a0(e))&&!e.includes("edge/"))return"Chrome";if(c0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function i0(t=ot()){return/firefox\//i.test(t)}function o0(t=ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function a0(t=ot()){return/crios\//i.test(t)}function l0(t=ot()){return/iemobile/i.test(t)}function c0(t=ot()){return/android/i.test(t)}function u0(t=ot()){return/blackberry/i.test(t)}function d0(t=ot()){return/webos/i.test(t)}function np(t=ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vN(t=ot()){var e;return np(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yN(){return NC()&&document.documentMode===10}function h0(t=ot()){return np(t)||c0(t)||d0(t)||u0(t)||/windows phone/i.test(t)||l0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(t,e=[]){let n;switch(t){case"Browser":n=Pv(ot());break;case"Worker":n=`${Pv(ot())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ei}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(t,e={}){return qn(t,"GET","/v2/passwordPolicy",Mr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=6;class EN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:wN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rv(this),this.idTokenSubscription=new Rv(this),this.beforeStateQueue=new xN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Js.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await tc(this,{idToken:e}),r=await Jt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(bt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bt(this.app))return Promise.reject(jn(this));const n=e?at(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bt(this.app)?Promise.reject(jn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bt(this.app)?Promise.reject(jn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _N(this),n=new EN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pn(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Js.create(this,[Pn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=f0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(bt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Jk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Vr(t){return at(t)}class Rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=MC(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IN(t){$c=t}function p0(t){return $c.loadJS(t)}function SN(){return $c.recaptchaEnterpriseScript}function bN(){return $c.gapiScript}function CN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class kN{constructor(){this.enterprise=new NN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class NN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const AN="recaptcha-enterprise",m0="NO_RECAPTCHA";class PN{constructor(e){this.type=AN,this.auth=Vr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{lN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new aN(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;Cv(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(m0)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kN().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Cv(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=SN();c.length!==0&&(c+=l),p0(c).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function jv(t,e,n,r=!1,s=!1){const i=new PN(t);let o;if(s)o=m0;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function kh(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await jv(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await jv(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t,e){const n=vs(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Sr(i,e??{}))return s;$t(s,"already-initialized")}return n.initialize({options:e})}function jN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function ON(t,e,n){const r=Vr(t);X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=g0(e),{host:o,port:l}=DN(e),c=l===null?"":`:${l}`,d={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){X(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),X(Sr(d,r.config.emulator)&&Sr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,wi(o)?(zw(`${i}//${o}${c}`),Bw("Auth",!0)):MN()}function g0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function DN(t){const e=g0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Ov(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Ov(o)}}}function Ov(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function MN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return An("not implemented")}_getIdTokenResponse(e){return An("not implemented")}_linkToIdToken(e,n){return An("not implemented")}_getReauthenticationResolver(e){return An("not implemented")}}async function VN(t,e){return qn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LN(t,e){return ia(t,"POST","/v1/accounts:signInWithPassword",Mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t,e){return ia(t,"POST","/v1/accounts:signInWithEmailLink",Mr(t,e))}async function FN(t,e){return ia(t,"POST","/v1/accounts:signInWithEmailLink",Mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends rp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new $o(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new $o(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kh(e,n,"signInWithPassword",LN);case"emailLink":return UN(e,{email:this._email,oobCode:this._password});default:$t(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kh(e,r,"signUpPassword",VN);case"emailLink":return FN(e,{idToken:n,email:this._email,oobCode:this._password});default:$t(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e){return ia(t,"POST","/v1/accounts:signInWithIdp",Mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="http://localhost";class os extends rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$t("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Jf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new os(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xs(e,n)}buildRequest(){const e={requestUri:zN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ra(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $N(t){const e=Zi(eo(t)).link,n=e?Zi(eo(e)).deep_link_id:null,r=Zi(eo(t)).deep_link_id;return(r?Zi(eo(r)).link:null)||r||n||e||t}class sp{constructor(e){var n,r,s,i,o,l;const c=Zi(eo(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,m=BN((s=c.mode)!==null&&s!==void 0?s:null);X(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=$N(e);try{return new sp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(){this.providerId=Ti.PROVIDER_ID}static credential(e,n){return $o._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=sp.parseLink(n);return X(r,"argument-error"),$o._fromEmailAndCode(e,r.code,r.tenantId)}}Ti.PROVIDER_ID="password";Ti.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ti.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends ip{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends oa{constructor(){super("facebook.com")}static credential(e){return os._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn extends oa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return os._fromParams({providerId:Cn.PROVIDER_ID,signInMethod:Cn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Cn.credentialFromTaggedObject(e)}static credentialFromError(e){return Cn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Cn.credential(n,r)}catch{return null}}}Cn.GOOGLE_SIGN_IN_METHOD="google.com";Cn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends oa{constructor(){super("github.com")}static credential(e){return os._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends oa{constructor(){super("twitter.com")}static credential(e,n){return os._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(t,e){return ia(t,"POST","/v1/accounts:signUp",Mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Jt._fromIdTokenResponse(e,r,s),o=Dv(r);return new as({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Dv(r);return new as({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Dv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends sn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,rc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new rc(e,n,r,s)}}function v0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?rc._fromErrorAndOperation(t,i,e,r):i})}async function WN(t,e,n=!1){const r=await ci(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return as._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qN(t,e,n=!1){const{auth:r}=t;if(bt(r.app))return Promise.reject(jn(r));const s="reauthenticate";try{const i=await ci(t,v0(r,s,e,t),n);X(i.idToken,r,"internal-error");const o=tp(i.idToken);X(o,r,"internal-error");const{sub:l}=o;return X(t.uid===l,r,"user-mismatch"),as._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$t(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y0(t,e,n=!1){if(bt(t.app))return Promise.reject(jn(t));const r="signIn",s=await v0(t,r,e),i=await as._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function GN(t,e){return y0(Vr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x0(t){const e=Vr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function KN(t,e,n){if(bt(t.app))return Promise.reject(jn(t));const r=Vr(t),o=await kh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HN).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&x0(t),c}),l=await as._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function QN(t,e,n){return bt(t.app)?Promise.reject(jn(t)):GN(at(t),Ti.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&x0(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(t,e){return qn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=at(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ci(r,YN(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function XN(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function ZN(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function eA(t,e,n,r){return at(t).onAuthStateChanged(e,n,r)}function tA(t){return at(t).signOut()}const sc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sc,"1"),this.storage.removeItem(sc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=1e3,rA=10;class w0 extends _0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=h0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);yN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,rA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}w0.type="LOCAL";const sA=w0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0 extends _0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}E0.type="SESSION";const T0=E0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Hc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await iA(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=op("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return window}function aA(t){fn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(){return typeof fn().WorkerGlobalScope<"u"&&typeof fn().importScripts=="function"}async function lA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uA(){return I0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="firebaseLocalStorageDb",dA=1,ic="firebaseLocalStorage",b0="fbase_key";class aa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wc(t,e){return t.transaction([ic],e?"readwrite":"readonly").objectStore(ic)}function hA(){const t=indexedDB.deleteDatabase(S0);return new aa(t).toPromise()}function Nh(){const t=indexedDB.open(S0,dA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ic,{keyPath:b0})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ic)?e(r):(r.close(),await hA(),e(await Nh()))})})}async function Mv(t,e,n){const r=Wc(t,!0).put({[b0]:e,value:n});return new aa(r).toPromise()}async function fA(t,e){const n=Wc(t,!1).get(e),r=await new aa(n).toPromise();return r===void 0?null:r.value}function Vv(t,e){const n=Wc(t,!0).delete(e);return new aa(n).toPromise()}const pA=800,mA=3;class C0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Nh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return I0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hc._getInstance(uA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await lA(),!this.activeServiceWorker)return;this.sender=new oA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nh();return await Mv(e,sc,"1"),await Vv(e,sc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Mv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>fA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Wc(s,!1).getAll();return new aa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}C0.type="LOCAL";const gA=C0;new sa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t,e){return e?Pn(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function vA(t){return y0(t.auth,new ap(t),t.bypassAuthState)}function yA(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),qN(n,new ap(t),t.bypassAuthState)}async function xA(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),WN(n,new ap(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vA;case"linkViaPopup":case"linkViaRedirect":return xA;case"reauthViaPopup":case"reauthViaRedirect":return yA;default:$t(this.auth,"internal-error")}}resolve(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=new sa(2e3,1e4);async function wA(t,e,n){if(bt(t.app))return Promise.reject(tn(t,"operation-not-supported-in-this-environment"));const r=Vr(t);Xk(t,e,ip);const s=k0(r,n);return new Qr(r,"signInViaPopup",e,s).executeNotNull()}class Qr extends N0{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Qr.currentPopupAction&&Qr.currentPopupAction.cancel(),Qr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){Fn(this.filter.length===1,"Popup operations only handle one event");const e=op();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_A.get())};e()}}Qr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="pendingRedirect",gl=new Map;class TA extends N0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=gl.get(this.auth._key());if(!e){try{const r=await IA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}gl.set(this.auth._key(),e)}return this.bypassAuthState||gl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IA(t,e){const n=CA(e),r=bA(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function SA(t,e){gl.set(t._key(),e)}function bA(t){return Pn(t._redirectPersistence)}function CA(t){return ml(EA,t.config.apiKey,t.name)}async function kA(t,e,n=!1){if(bt(t.app))return Promise.reject(jn(t));const r=Vr(t),s=k0(r,e),o=await new TA(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=10*60*1e3;class AA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!A0(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(tn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lv(e))}saveEventToCache(e){this.cachedEventUids.add(Lv(e)),this.lastProcessedEventTime=Date.now()}}function Lv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function A0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return A0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(t,e={}){return qn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OA=/^https?/;async function DA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RA(t);for(const n of e)try{if(MA(n))return}catch{}$t(t,"unauthorized-domain")}function MA(t){const e=bh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!OA.test(n))return!1;if(jA.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=new sa(3e4,6e4);function Uv(){const t=fn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LA(t){return new Promise((e,n)=>{var r,s,i;function o(){Uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Uv(),n(tn(t,"network-request-failed"))},timeout:VA.get()})}if(!((s=(r=fn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=fn().gapi)===null||i===void 0)&&i.load)o();else{const l=CN("iframefcb");return fn()[l]=()=>{gapi.load?o():n(tn(t,"network-request-failed"))},p0(`${bN()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw vl=null,e})}let vl=null;function UA(t){return vl=vl||LA(t),vl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=new sa(5e3,15e3),zA="__/auth/iframe",BA="emulator/auth/iframe",$A={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WA(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ep(e,BA):`https://${t.config.authDomain}/${zA}`,r={apiKey:e.apiKey,appName:t.name,v:Ei},s=HA.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ra(r).slice(1)}`}async function qA(t){const e=await UA(t),n=fn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:WA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$A,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=tn(t,"network-request-failed"),l=fn().setTimeout(()=>{i(o)},FA.get());function c(){fn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KA=500,QA=600,YA="_blank",JA="http://localhost";class Fv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XA(t,e,n,r=KA,s=QA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},GA),{width:r.toString(),height:s.toString(),top:i,left:o}),d=ot().toLowerCase();n&&(l=a0(d)?YA:n),i0(d)&&(e=e||JA,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[T,w])=>`${g}${T}=${w},`,"");if(vN(d)&&l!=="_self")return ZA(e||"",l),new Fv(null);const m=window.open(e||"",l,f);X(m,t,"popup-blocked");try{m.focus()}catch{}return new Fv(m)}function ZA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="__/auth/handler",t2="emulator/auth/handler",n2=encodeURIComponent("fac");async function zv(t,e,n,r,s,i){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ei,eventId:s};if(e instanceof ip){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",DC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof oa){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),d=c?`#${n2}=${encodeURIComponent(c)}`:"";return`${r2(t)}?${ra(l).slice(1)}${d}`}function r2({config:t}){return t.emulator?ep(t,t2):`https://${t.authDomain}/${e2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="webStorageSupport";class s2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T0,this._completeRedirectFn=kA,this._overrideRedirectResult=SA}async _openPopup(e,n,r,s){var i;Fn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await zv(e,n,r,bh(),s);return XA(e,o,op())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await zv(e,n,r,bh(),s);return aA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Fn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await qA(e),r=new AA(e);return n.register("authEvent",s=>(X(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(md,{type:md},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[md];o!==void 0&&n(!!o),$t(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return h0()||o0()||np()}}const i2=s2;var Bv="@firebase/auth",$v="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function l2(t){yn(new rn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f0(t)},d=new TN(r,s,i,c);return jN(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),yn(new rn("auth-internal",e=>{const n=Vr(e.getProvider("auth").getImmediate());return(r=>new o2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ft(Bv,$v,a2(t)),Ft(Bv,$v,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=5*60,u2=Fw("authIdTokenMaxAge")||c2;let Hv=null;const d2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>u2)return;const s=n==null?void 0:n.token;Hv!==s&&(Hv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function h2(t=Yf()){const e=vs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=RN(t,{popupRedirectResolver:i2,persistence:[gA,sA,T0]}),r=Fw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=d2(i.toString());ZN(n,o,()=>o(n.currentUser)),XN(n,l=>o(l))}}const s=Lw("auth");return s&&ON(n,`http://${s}`),n}function f2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}IN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=tn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",f2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});l2("Browser");var p2="firebase",m2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ft(p2,m2,"app");const P0="@firebase/installations",lp="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=1e4,j0=`w:${lp}`,O0="FIS_v2",g2="https://firebaseinstallations.googleapis.com/v1",v2=60*60*1e3,y2="installations",x2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ls=new gs(y2,x2,_2);function D0(t){return t instanceof sn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0({projectId:t}){return`${g2}/projects/${t}/installations`}function V0(t){return{token:t.token,requestStatus:2,expiresIn:E2(t.expiresIn),creationTime:Date.now()}}async function L0(t,e){const r=(await e.json()).error;return ls.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function U0({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function w2(t,{refreshToken:e}){const n=U0(t);return n.append("Authorization",T2(e)),n}async function F0(t){const e=await t();return e.status>=500&&e.status<600?t():e}function E2(t){return Number(t.replace("s","000"))}function T2(t){return`${O0} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I2({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=M0(t),s=U0(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:O0,appId:t.appId,sdkVersion:j0},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await F0(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:V0(d.authToken)}}else throw await L0("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=/^[cdef][\w-]{21}$/,Ah="";function C2(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=k2(t);return b2.test(n)?n:Ah}catch{return Ah}}function k2(t){return S2(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=new Map;function $0(t,e){const n=qc(t);H0(n,e),N2(n,e)}function H0(t,e){const n=B0.get(t);if(n)for(const r of n)r(e)}function N2(t,e){const n=A2();n&&n.postMessage({key:t,fid:e}),P2()}let Yr=null;function A2(){return!Yr&&"BroadcastChannel"in self&&(Yr=new BroadcastChannel("[Firebase] FID Change"),Yr.onmessage=t=>{H0(t.data.key,t.data.fid)}),Yr}function P2(){B0.size===0&&Yr&&(Yr.close(),Yr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2="firebase-installations-database",j2=1,cs="firebase-installations-store";let gd=null;function cp(){return gd||(gd=Kw(R2,j2,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(cs)}}})),gd}async function oc(t,e){const n=qc(t),s=(await cp()).transaction(cs,"readwrite"),i=s.objectStore(cs),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&$0(t,e.fid),e}async function W0(t){const e=qc(t),r=(await cp()).transaction(cs,"readwrite");await r.objectStore(cs).delete(e),await r.done}async function Gc(t,e){const n=qc(t),s=(await cp()).transaction(cs,"readwrite"),i=s.objectStore(cs),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&$0(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function up(t){let e;const n=await Gc(t.appConfig,r=>{const s=O2(r),i=D2(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Ah?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function O2(t){const e=t||{fid:C2(),registrationStatus:0};return q0(e)}function D2(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ls.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=M2(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:V2(t)}:{installationEntry:e}}async function M2(t,e){try{const n=await I2(t,e);return oc(t.appConfig,n)}catch(n){throw D0(n)&&n.customData.serverCode===409?await W0(t.appConfig):await oc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function V2(t){let e=await Wv(t.appConfig);for(;e.registrationStatus===1;)await z0(100),e=await Wv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await up(t);return r||n}return e}function Wv(t){return Gc(t,e=>{if(!e)throw ls.create("installation-not-found");return q0(e)})}function q0(t){return L2(t)?{fid:t.fid,registrationStatus:0}:t}function L2(t){return t.registrationStatus===1&&t.registrationTime+R0<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U2({appConfig:t,heartbeatServiceProvider:e},n){const r=F2(t,n),s=w2(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:j0,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await F0(()=>fetch(r,l));if(c.ok){const d=await c.json();return V0(d)}else throw await L0("Generate Auth Token",c)}function F2(t,{fid:e}){return`${M0(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dp(t,e=!1){let n;const r=await Gc(t.appConfig,i=>{if(!G0(i))throw ls.create("not-registered");const o=i.authToken;if(!e&&$2(o))return i;if(o.requestStatus===1)return n=z2(t,e),i;{if(!navigator.onLine)throw ls.create("app-offline");const l=W2(i);return n=B2(t,l),l}});return n?await n:r.authToken}async function z2(t,e){let n=await qv(t.appConfig);for(;n.authToken.requestStatus===1;)await z0(100),n=await qv(t.appConfig);const r=n.authToken;return r.requestStatus===0?dp(t,e):r}function qv(t){return Gc(t,e=>{if(!G0(e))throw ls.create("not-registered");const n=e.authToken;return q2(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function B2(t,e){try{const n=await U2(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await oc(t.appConfig,r),n}catch(n){if(D0(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await W0(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await oc(t.appConfig,r)}throw n}}function G0(t){return t!==void 0&&t.registrationStatus===2}function $2(t){return t.requestStatus===2&&!H2(t)}function H2(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+v2}function W2(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function q2(t){return t.requestStatus===1&&t.requestTime+R0<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(t){const e=t,{installationEntry:n,registrationPromise:r}=await up(e);return r?r.catch(console.error):dp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K2(t,e=!1){const n=t;return await Q2(n),(await dp(n,e)).token}async function Q2(t){const{registrationPromise:e}=await up(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t){if(!t||!t.options)throw vd("App Configuration");if(!t.name)throw vd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw vd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function vd(t){return ls.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="installations",J2="installations-internal",X2=t=>{const e=t.getProvider("app").getImmediate(),n=Y2(e),r=vs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Z2=t=>{const e=t.getProvider("app").getImmediate(),n=vs(e,K0).getImmediate();return{getId:()=>G2(n),getToken:s=>K2(n,s)}};function eP(){yn(new rn(K0,X2,"PUBLIC")),yn(new rn(J2,Z2,"PRIVATE"))}eP();Ft(P0,lp);Ft(P0,lp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac="analytics",tP="firebase_id",nP="origin",rP=60*1e3,sP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et=new Bc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Nt=new gs("analytics","Analytics",iP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(t){if(!t.startsWith(hp)){const e=Nt.create("invalid-gtag-resource",{gtagURL:t});return Et.warn(e.message),""}return t}function Q0(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function aP(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function lP(t,e){const n=aP("firebase-js-sdk-policy",{createScriptURL:oP}),r=document.createElement("script"),s=`${hp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function cP(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function uP(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await Q0(n)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(l){Et.error(l)}t("config",s,i)}async function dP(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await Q0(n);for(const c of o){const d=l.find(m=>m.measurementId===c),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Et.error(i)}}function hP(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[l,c]=o;await dP(t,e,n,l,c)}else if(i==="config"){const[l,c]=o;await uP(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,d]=o;t("get",l,c,d)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){Et.error(l)}}return s}function fP(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=hP(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function pP(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(hp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=30,gP=1e3;class vP{constructor(e={},n=gP){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Y0=new vP;function yP(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function xP(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:yP(r)},i=sP.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw Nt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function _P(t,e=Y0,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Nt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Nt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new TP;return setTimeout(async()=>{l.abort()},rP),J0({appId:r,apiKey:s,measurementId:i},o,l,e)}async function J0(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Y0){var i;const{appId:o,measurementId:l}=t;try{await wP(r,e)}catch(c){if(l)return Et.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await xP(t);return s.deleteThrottleMetadata(o),c}catch(c){const d=c;if(!EP(d)){if(s.deleteThrottleMetadata(o),l)return Et.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw c}const f=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?vv(n,s.intervalMillis,mP):vv(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(o,m),Et.debug(`Calling attemptFetch again in ${f} millis`),J0(t,m,r,s)}}function wP(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Nt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function EP(t){if(!(t instanceof sn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class TP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function IP(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(){if(Hw())try{await Ww()}catch(t){return Et.warn(Nt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Et.warn(Nt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function bP(t,e,n,r,s,i,o){var l;const c=_P(t);c.then(T=>{n[T.measurementId]=T.appId,t.options.measurementId&&T.measurementId!==t.options.measurementId&&Et.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>Et.error(T)),e.push(c);const d=SP().then(T=>{if(T)return r.getId()}),[f,m]=await Promise.all([c,d]);pP(i)||lP(i,f.measurementId),s("js",new Date);const g=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return g[nP]="firebase",g.update=!0,m!=null&&(g[tP]=m),s("config",f.measurementId,g),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.app=e}_delete(){return delete vo[this.app.options.appId],Promise.resolve()}}let vo={},Gv=[];const Kv={};let yd="dataLayer",kP="gtag",Qv,X0,Yv=!1;function NP(){const t=[];if($w()&&t.push("This is a browser extension environment."),PC()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Nt.create("invalid-analytics-context",{errorInfo:e});Et.warn(n.message)}}function AP(t,e,n){NP();const r=t.options.appId;if(!r)throw Nt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Et.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Nt.create("no-api-key");if(vo[r]!=null)throw Nt.create("already-exists",{id:r});if(!Yv){cP(yd);const{wrappedGtag:i,gtagCore:o}=fP(vo,Gv,Kv,yd,kP);X0=i,Qv=o,Yv=!0}return vo[r]=bP(t,Gv,Kv,e,Qv,yd,n),new CP(t)}function PP(t=Yf()){t=at(t);const e=vs(t,ac);return e.isInitialized()?e.getImmediate():RP(t)}function RP(t,e={}){const n=vs(t,ac);if(n.isInitialized()){const s=n.getImmediate();if(Sr(e,n.getOptions()))return s;throw Nt.create("already-initialized")}return n.initialize({options:e})}function jP(t,e,n,r){t=at(t),IP(X0,vo[t.app.options.appId],e,n,r).catch(s=>Et.error(s))}const Jv="@firebase/analytics",Xv="0.10.17";function OP(){yn(new rn(ac,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return AP(r,s,n)},"PUBLIC")),yn(new rn("analytics-internal",t,"PRIVATE")),Ft(Jv,Xv),Ft(Jv,Xv,"esm2017");function t(e){try{const n=e.getProvider(ac).getImmediate();return{logEvent:(r,s,i)=>jP(n,r,s,i)}}catch(n){throw Nt.create("interop-component-reg-failed",{reason:n})}}}OP();var Zv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wr,Z0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,v){function I(){}I.prototype=v.prototype,b.D=v.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(_,k,j){for(var S=Array(arguments.length-2),me=2;me<arguments.length;me++)S[me-2]=arguments[me];return v.prototype[k].apply(_,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,v,I){I||(I=0);var _=Array(16);if(typeof v=="string")for(var k=0;16>k;++k)_[k]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(k=0;16>k;++k)_[k]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=b.g[0],I=b.g[1],k=b.g[2];var j=b.g[3],S=v+(j^I&(k^j))+_[0]+3614090360&4294967295;v=I+(S<<7&4294967295|S>>>25),S=j+(k^v&(I^k))+_[1]+3905402710&4294967295,j=v+(S<<12&4294967295|S>>>20),S=k+(I^j&(v^I))+_[2]+606105819&4294967295,k=j+(S<<17&4294967295|S>>>15),S=I+(v^k&(j^v))+_[3]+3250441966&4294967295,I=k+(S<<22&4294967295|S>>>10),S=v+(j^I&(k^j))+_[4]+4118548399&4294967295,v=I+(S<<7&4294967295|S>>>25),S=j+(k^v&(I^k))+_[5]+1200080426&4294967295,j=v+(S<<12&4294967295|S>>>20),S=k+(I^j&(v^I))+_[6]+2821735955&4294967295,k=j+(S<<17&4294967295|S>>>15),S=I+(v^k&(j^v))+_[7]+4249261313&4294967295,I=k+(S<<22&4294967295|S>>>10),S=v+(j^I&(k^j))+_[8]+1770035416&4294967295,v=I+(S<<7&4294967295|S>>>25),S=j+(k^v&(I^k))+_[9]+2336552879&4294967295,j=v+(S<<12&4294967295|S>>>20),S=k+(I^j&(v^I))+_[10]+4294925233&4294967295,k=j+(S<<17&4294967295|S>>>15),S=I+(v^k&(j^v))+_[11]+2304563134&4294967295,I=k+(S<<22&4294967295|S>>>10),S=v+(j^I&(k^j))+_[12]+1804603682&4294967295,v=I+(S<<7&4294967295|S>>>25),S=j+(k^v&(I^k))+_[13]+4254626195&4294967295,j=v+(S<<12&4294967295|S>>>20),S=k+(I^j&(v^I))+_[14]+2792965006&4294967295,k=j+(S<<17&4294967295|S>>>15),S=I+(v^k&(j^v))+_[15]+1236535329&4294967295,I=k+(S<<22&4294967295|S>>>10),S=v+(k^j&(I^k))+_[1]+4129170786&4294967295,v=I+(S<<5&4294967295|S>>>27),S=j+(I^k&(v^I))+_[6]+3225465664&4294967295,j=v+(S<<9&4294967295|S>>>23),S=k+(v^I&(j^v))+_[11]+643717713&4294967295,k=j+(S<<14&4294967295|S>>>18),S=I+(j^v&(k^j))+_[0]+3921069994&4294967295,I=k+(S<<20&4294967295|S>>>12),S=v+(k^j&(I^k))+_[5]+3593408605&4294967295,v=I+(S<<5&4294967295|S>>>27),S=j+(I^k&(v^I))+_[10]+38016083&4294967295,j=v+(S<<9&4294967295|S>>>23),S=k+(v^I&(j^v))+_[15]+3634488961&4294967295,k=j+(S<<14&4294967295|S>>>18),S=I+(j^v&(k^j))+_[4]+3889429448&4294967295,I=k+(S<<20&4294967295|S>>>12),S=v+(k^j&(I^k))+_[9]+568446438&4294967295,v=I+(S<<5&4294967295|S>>>27),S=j+(I^k&(v^I))+_[14]+3275163606&4294967295,j=v+(S<<9&4294967295|S>>>23),S=k+(v^I&(j^v))+_[3]+4107603335&4294967295,k=j+(S<<14&4294967295|S>>>18),S=I+(j^v&(k^j))+_[8]+1163531501&4294967295,I=k+(S<<20&4294967295|S>>>12),S=v+(k^j&(I^k))+_[13]+2850285829&4294967295,v=I+(S<<5&4294967295|S>>>27),S=j+(I^k&(v^I))+_[2]+4243563512&4294967295,j=v+(S<<9&4294967295|S>>>23),S=k+(v^I&(j^v))+_[7]+1735328473&4294967295,k=j+(S<<14&4294967295|S>>>18),S=I+(j^v&(k^j))+_[12]+2368359562&4294967295,I=k+(S<<20&4294967295|S>>>12),S=v+(I^k^j)+_[5]+4294588738&4294967295,v=I+(S<<4&4294967295|S>>>28),S=j+(v^I^k)+_[8]+2272392833&4294967295,j=v+(S<<11&4294967295|S>>>21),S=k+(j^v^I)+_[11]+1839030562&4294967295,k=j+(S<<16&4294967295|S>>>16),S=I+(k^j^v)+_[14]+4259657740&4294967295,I=k+(S<<23&4294967295|S>>>9),S=v+(I^k^j)+_[1]+2763975236&4294967295,v=I+(S<<4&4294967295|S>>>28),S=j+(v^I^k)+_[4]+1272893353&4294967295,j=v+(S<<11&4294967295|S>>>21),S=k+(j^v^I)+_[7]+4139469664&4294967295,k=j+(S<<16&4294967295|S>>>16),S=I+(k^j^v)+_[10]+3200236656&4294967295,I=k+(S<<23&4294967295|S>>>9),S=v+(I^k^j)+_[13]+681279174&4294967295,v=I+(S<<4&4294967295|S>>>28),S=j+(v^I^k)+_[0]+3936430074&4294967295,j=v+(S<<11&4294967295|S>>>21),S=k+(j^v^I)+_[3]+3572445317&4294967295,k=j+(S<<16&4294967295|S>>>16),S=I+(k^j^v)+_[6]+76029189&4294967295,I=k+(S<<23&4294967295|S>>>9),S=v+(I^k^j)+_[9]+3654602809&4294967295,v=I+(S<<4&4294967295|S>>>28),S=j+(v^I^k)+_[12]+3873151461&4294967295,j=v+(S<<11&4294967295|S>>>21),S=k+(j^v^I)+_[15]+530742520&4294967295,k=j+(S<<16&4294967295|S>>>16),S=I+(k^j^v)+_[2]+3299628645&4294967295,I=k+(S<<23&4294967295|S>>>9),S=v+(k^(I|~j))+_[0]+4096336452&4294967295,v=I+(S<<6&4294967295|S>>>26),S=j+(I^(v|~k))+_[7]+1126891415&4294967295,j=v+(S<<10&4294967295|S>>>22),S=k+(v^(j|~I))+_[14]+2878612391&4294967295,k=j+(S<<15&4294967295|S>>>17),S=I+(j^(k|~v))+_[5]+4237533241&4294967295,I=k+(S<<21&4294967295|S>>>11),S=v+(k^(I|~j))+_[12]+1700485571&4294967295,v=I+(S<<6&4294967295|S>>>26),S=j+(I^(v|~k))+_[3]+2399980690&4294967295,j=v+(S<<10&4294967295|S>>>22),S=k+(v^(j|~I))+_[10]+4293915773&4294967295,k=j+(S<<15&4294967295|S>>>17),S=I+(j^(k|~v))+_[1]+2240044497&4294967295,I=k+(S<<21&4294967295|S>>>11),S=v+(k^(I|~j))+_[8]+1873313359&4294967295,v=I+(S<<6&4294967295|S>>>26),S=j+(I^(v|~k))+_[15]+4264355552&4294967295,j=v+(S<<10&4294967295|S>>>22),S=k+(v^(j|~I))+_[6]+2734768916&4294967295,k=j+(S<<15&4294967295|S>>>17),S=I+(j^(k|~v))+_[13]+1309151649&4294967295,I=k+(S<<21&4294967295|S>>>11),S=v+(k^(I|~j))+_[4]+4149444226&4294967295,v=I+(S<<6&4294967295|S>>>26),S=j+(I^(v|~k))+_[11]+3174756917&4294967295,j=v+(S<<10&4294967295|S>>>22),S=k+(v^(j|~I))+_[2]+718787259&4294967295,k=j+(S<<15&4294967295|S>>>17),S=I+(j^(k|~v))+_[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(k+(S<<21&4294967295|S>>>11))&4294967295,b.g[2]=b.g[2]+k&4294967295,b.g[3]=b.g[3]+j&4294967295}r.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var I=v-this.blockSize,_=this.B,k=this.h,j=0;j<v;){if(k==0)for(;j<=I;)s(this,b,j),j+=this.blockSize;if(typeof b=="string"){for(;j<v;)if(_[k++]=b.charCodeAt(j++),k==this.blockSize){s(this,_),k=0;break}}else for(;j<v;)if(_[k++]=b[j++],k==this.blockSize){s(this,_),k=0;break}}this.h=k,this.o+=v},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var I=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=I&255,I/=256;for(this.u(b),b=Array(16),v=I=0;4>v;++v)for(var _=0;32>_;_+=8)b[I++]=this.g[v]>>>_&255;return b};function i(b,v){var I=l;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=v(b)}function o(b,v){this.h=v;for(var I=[],_=!0,k=b.length-1;0<=k;k--){var j=b[k]|0;_&&j==v||(I[k]=j,_=!1)}this.g=I}var l={};function c(b){return-128<=b&&128>b?i(b,function(v){return new o([v|0],0>v?-1:0)}):new o([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return m;if(0>b)return A(d(-b));for(var v=[],I=1,_=0;b>=I;_++)v[_]=b/I|0,I*=4294967296;return new o(v,0)}function f(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return A(f(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(v,8)),_=m,k=0;k<b.length;k+=8){var j=Math.min(8,b.length-k),S=parseInt(b.substring(k,k+j),v);8>j?(j=d(Math.pow(v,j)),_=_.j(j).add(d(S))):(_=_.j(I),_=_.add(d(S)))}return _}var m=c(0),g=c(1),T=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-A(this).m();for(var b=0,v=1,I=0;I<this.g.length;I++){var _=this.i(I);b+=(0<=_?_:4294967296+_)*v,v*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(w(this))return"0";if(R(this))return"-"+A(this).toString(b);for(var v=d(Math.pow(b,6)),I=this,_="";;){var k=P(I,v).g;I=E(I,k.j(v));var j=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=k,w(I))return j+_;for(;6>j.length;)j="0"+j;_=j+_}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function w(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function R(b){return b.h==-1}t.l=function(b){return b=E(this,b),R(b)?-1:w(b)?0:1};function A(b){for(var v=b.g.length,I=[],_=0;_<v;_++)I[_]=~b.g[_];return new o(I,~b.h).add(g)}t.abs=function(){return R(this)?A(this):this},t.add=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],_=0,k=0;k<=v;k++){var j=_+(this.i(k)&65535)+(b.i(k)&65535),S=(j>>>16)+(this.i(k)>>>16)+(b.i(k)>>>16);_=S>>>16,j&=65535,S&=65535,I[k]=S<<16|j}return new o(I,I[I.length-1]&-2147483648?-1:0)};function E(b,v){return b.add(A(v))}t.j=function(b){if(w(this)||w(b))return m;if(R(this))return R(b)?A(this).j(A(b)):A(A(this).j(b));if(R(b))return A(this.j(A(b)));if(0>this.l(T)&&0>b.l(T))return d(this.m()*b.m());for(var v=this.g.length+b.g.length,I=[],_=0;_<2*v;_++)I[_]=0;for(_=0;_<this.g.length;_++)for(var k=0;k<b.g.length;k++){var j=this.i(_)>>>16,S=this.i(_)&65535,me=b.i(k)>>>16,Ht=b.i(k)&65535;I[2*_+2*k]+=S*Ht,x(I,2*_+2*k),I[2*_+2*k+1]+=j*Ht,x(I,2*_+2*k+1),I[2*_+2*k+1]+=S*me,x(I,2*_+2*k+1),I[2*_+2*k+2]+=j*me,x(I,2*_+2*k+2)}for(_=0;_<v;_++)I[_]=I[2*_+1]<<16|I[2*_];for(_=v;_<2*v;_++)I[_]=0;return new o(I,0)};function x(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function C(b,v){this.g=b,this.h=v}function P(b,v){if(w(v))throw Error("division by zero");if(w(b))return new C(m,m);if(R(b))return v=P(A(b),v),new C(A(v.g),A(v.h));if(R(v))return v=P(b,A(v)),new C(A(v.g),v.h);if(30<b.g.length){if(R(b)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,_=v;0>=_.l(b);)I=z(I),_=z(_);var k=U(I,1),j=U(_,1);for(_=U(_,2),I=U(I,2);!w(_);){var S=j.add(_);0>=S.l(b)&&(k=k.add(I),j=S),_=U(_,1),I=U(I,1)}return v=E(b,k.j(v)),new C(k,v)}for(k=m;0<=b.l(v);){for(I=Math.max(1,Math.floor(b.m()/v.m())),_=Math.ceil(Math.log(I)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),j=d(I),S=j.j(v);R(S)||0<S.l(b);)I-=_,j=d(I),S=j.j(v);w(j)&&(j=g),k=k.add(j),b=E(b,S)}return new C(k,b)}t.A=function(b){return P(this,b).h},t.and=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],_=0;_<v;_++)I[_]=this.i(_)&b.i(_);return new o(I,this.h&b.h)},t.or=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],_=0;_<v;_++)I[_]=this.i(_)|b.i(_);return new o(I,this.h|b.h)},t.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],_=0;_<v;_++)I[_]=this.i(_)^b.i(_);return new o(I,this.h^b.h)};function z(b){for(var v=b.g.length+1,I=[],_=0;_<v;_++)I[_]=b.i(_)<<1|b.i(_-1)>>>31;return new o(I,b.h)}function U(b,v){var I=v>>5;v%=32;for(var _=b.g.length-I,k=[],j=0;j<_;j++)k[j]=0<v?b.i(j+I)>>>v|b.i(j+I+1)<<32-v:b.i(j+I);return new o(k,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Z0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,wr=o}).apply(typeof Zv<"u"?Zv:typeof self<"u"?self:typeof window<"u"?window:{});var Ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eE,to,tE,yl,Ph,nE,rE,sE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ya=="object"&&Ya];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var O=a[y];if(!(O in p))break e;p=p[O]}a=a[a.length-1],y=p[a],h=h(y),h!=y&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var p=0,y=!1,O={next:function(){if(!y&&p<a.length){var M=p++;return{value:h(M,a[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function m(a,h,p){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,y),a.apply(h,O)}}return function(){return a.apply(h,arguments)}}function g(a,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function T(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function w(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(y,O,M){for(var W=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)W[fe-2]=arguments[fe];return h.prototype[O].apply(y,W)}}function R(a){const h=a.length;if(0<h){const p=Array(h);for(let y=0;y<h;y++)p[y]=a[y];return p}return[]}function A(a,h){for(let p=1;p<arguments.length;p++){const y=arguments[p];if(c(y)){const O=a.length||0,M=y.length||0;a.length=O+M;for(let W=0;W<M;W++)a[O+W]=y[W]}else a.push(y)}}class E{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(a){return/^[\s\xa0]*$/.test(a)}function C(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function P(a){return P[" "](a),a}P[" "]=function(){};var z=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function U(a,h,p){for(const y in a)h.call(p,a[y],y,a)}function b(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function v(a){const h={};for(const p in a)h[p]=a[p];return h}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(a,h){let p,y;for(let O=1;O<arguments.length;O++){y=arguments[O];for(p in y)a[p]=y[p];for(let M=0;M<I.length;M++)p=I[M],Object.prototype.hasOwnProperty.call(y,p)&&(a[p]=y[p])}}function k(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function j(a){l.setTimeout(()=>{throw a},0)}function S(){var a=J;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class me{constructor(){this.h=this.g=null}add(h,p){const y=Ht.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var Ht=new E(()=>new En,a=>a.reset());class En{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Tt,q=!1,J=new me,$=()=>{const a=l.Promise.resolve(void 0);Tt=()=>{a.then(D)}};var D=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(p){j(p)}var h=Ht;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}q=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return a}();function _e(a,h){if(B.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(z){e:{try{P(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:lt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&_e.aa.h.call(this)}}w(_e,B);var lt={2:"touch",3:"pen",4:"mouse"};_e.prototype.h=function(){_e.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Wt="closure_listenable_"+(1e6*Math.random()|0),X1=0;function Z1(a,h,p,y,O){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=O,this.key=++X1,this.da=this.fa=!1}function pa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ma(a){this.src=a,this.g={},this.h=0}ma.prototype.add=function(a,h,p,y,O){var M=a.toString();a=this.g[M],a||(a=this.g[M]=[],this.h++);var W=fu(a,h,y,O);return-1<W?(h=a[W],p||(h.fa=!1)):(h=new Z1(h,this.src,M,!!y,O),h.fa=p,a.push(h)),h};function hu(a,h){var p=h.type;if(p in a.g){var y=a.g[p],O=Array.prototype.indexOf.call(y,h,void 0),M;(M=0<=O)&&Array.prototype.splice.call(y,O,1),M&&(pa(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function fu(a,h,p,y){for(var O=0;O<a.length;++O){var M=a[O];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==y)return O}return-1}var pu="closure_lm_"+(1e6*Math.random()|0),mu={};function Xp(a,h,p,y,O){if(Array.isArray(h)){for(var M=0;M<h.length;M++)Xp(a,h[M],p,y,O);return null}return p=tm(p),a&&a[Wt]?a.K(h,p,d(y)?!!y.capture:!1,O):eT(a,h,p,!1,y,O)}function eT(a,h,p,y,O,M){if(!h)throw Error("Invalid event type");var W=d(O)?!!O.capture:!!O,fe=vu(a);if(fe||(a[pu]=fe=new ma(a)),p=fe.add(h,p,y,W,M),p.proxy)return p;if(y=tT(),p.proxy=y,y.src=a,y.listener=p,a.addEventListener)se||(O=W),O===void 0&&(O=!1),a.addEventListener(h.toString(),y,O);else if(a.attachEvent)a.attachEvent(em(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function tT(){function a(p){return h.call(a.src,a.listener,p)}const h=nT;return a}function Zp(a,h,p,y,O){if(Array.isArray(h))for(var M=0;M<h.length;M++)Zp(a,h[M],p,y,O);else y=d(y)?!!y.capture:!!y,p=tm(p),a&&a[Wt]?(a=a.i,h=String(h).toString(),h in a.g&&(M=a.g[h],p=fu(M,p,y,O),-1<p&&(pa(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete a.g[h],a.h--)))):a&&(a=vu(a))&&(h=a.g[h.toString()],a=-1,h&&(a=fu(h,p,y,O)),(p=-1<a?h[a]:null)&&gu(p))}function gu(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Wt])hu(h.i,a);else{var p=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(p,y,a.capture):h.detachEvent?h.detachEvent(em(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=vu(h))?(hu(p,a),p.h==0&&(p.src=null,h[pu]=null)):pa(a)}}}function em(a){return a in mu?mu[a]:mu[a]="on"+a}function nT(a,h){if(a.da)a=!0;else{h=new _e(h,this);var p=a.listener,y=a.ha||a.src;a.fa&&gu(a),a=p.call(y,h)}return a}function vu(a){return a=a[pu],a instanceof ma?a:null}var yu="__closure_events_fn_"+(1e9*Math.random()>>>0);function tm(a){return typeof a=="function"?a:(a[yu]||(a[yu]=function(h){return a.handleEvent(h)}),a[yu])}function Ye(){V.call(this),this.i=new ma(this),this.M=this,this.F=null}w(Ye,V),Ye.prototype[Wt]=!0,Ye.prototype.removeEventListener=function(a,h,p,y){Zp(this,a,h,p,y)};function ct(a,h){var p,y=a.F;if(y)for(p=[];y;y=y.F)p.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new B(h,a);else if(h instanceof B)h.target=h.target||a;else{var O=h;h=new B(y,a),_(h,O)}if(O=!0,p)for(var M=p.length-1;0<=M;M--){var W=h.g=p[M];O=ga(W,y,!0,h)&&O}if(W=h.g=a,O=ga(W,y,!0,h)&&O,O=ga(W,y,!1,h)&&O,p)for(M=0;M<p.length;M++)W=h.g=p[M],O=ga(W,y,!1,h)&&O}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],y=0;y<p.length;y++)pa(p[y]);delete a.g[h],a.h--}}this.F=null},Ye.prototype.K=function(a,h,p,y){return this.i.add(String(a),h,!1,p,y)},Ye.prototype.L=function(a,h,p,y){return this.i.add(String(a),h,!0,p,y)};function ga(a,h,p,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,M=0;M<h.length;++M){var W=h[M];if(W&&!W.da&&W.capture==p){var fe=W.listener,$e=W.ha||W.src;W.fa&&hu(a.i,W),O=fe.call($e,y)!==!1&&O}}return O&&!y.defaultPrevented}function nm(a,h,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function rm(a){a.g=nm(()=>{a.g=null,a.i&&(a.i=!1,rm(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class rT extends V{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:rm(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ki(a){V.call(this),this.h=a,this.g={}}w(ki,V);var sm=[];function im(a){U(a.g,function(h,p){this.g.hasOwnProperty(p)&&gu(h)},a),a.g={}}ki.prototype.N=function(){ki.aa.N.call(this),im(this)},ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xu=l.JSON.stringify,sT=l.JSON.parse,iT=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function _u(){}_u.prototype.h=null;function om(a){return a.h||(a.h=a.i())}function am(){}var Ni={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wu(){B.call(this,"d")}w(wu,B);function Eu(){B.call(this,"c")}w(Eu,B);var Ur={},lm=null;function va(){return lm=lm||new Ye}Ur.La="serverreachability";function cm(a){B.call(this,Ur.La,a)}w(cm,B);function Ai(a){const h=va();ct(h,new cm(h))}Ur.STAT_EVENT="statevent";function um(a,h){B.call(this,Ur.STAT_EVENT,a),this.stat=h}w(um,B);function ut(a){const h=va();ct(h,new um(h,a))}Ur.Ma="timingevent";function dm(a,h){B.call(this,Ur.Ma,a),this.size=h}w(dm,B);function Pi(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function Ri(){this.g=!0}Ri.prototype.xa=function(){this.g=!1};function oT(a,h,p,y,O,M){a.info(function(){if(a.g)if(M)for(var W="",fe=M.split("&"),$e=0;$e<fe.length;$e++){var ue=fe[$e].split("=");if(1<ue.length){var Je=ue[0];ue=ue[1];var Xe=Je.split("_");W=2<=Xe.length&&Xe[1]=="type"?W+(Je+"="+ue+"&"):W+(Je+"=redacted&")}}else W=null;else W=M;return"XMLHTTP REQ ("+y+") [attempt "+O+"]: "+h+`
`+p+`
`+W})}function aT(a,h,p,y,O,M,W){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+O+"]: "+h+`
`+p+`
`+M+" "+W})}function Es(a,h,p,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+cT(a,p)+(y?" "+y:"")})}function lT(a,h){a.info(function(){return"TIMEOUT: "+h})}Ri.prototype.info=function(){};function cT(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var y=p[a];if(!(2>y.length)){var O=y[1];if(Array.isArray(O)&&!(1>O.length)){var M=O[0];if(M!="noop"&&M!="stop"&&M!="close")for(var W=1;W<O.length;W++)O[W]=""}}}}return xu(p)}catch{return h}}var ya={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tu;function xa(){}w(xa,_u),xa.prototype.g=function(){return new XMLHttpRequest},xa.prototype.i=function(){return{}},Tu=new xa;function Gn(a,h,p,y){this.j=a,this.i=h,this.l=p,this.R=y||1,this.U=new ki(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fm}function fm(){this.i=null,this.g="",this.h=!1}var pm={},Iu={};function Su(a,h,p){a.L=1,a.v=Ta(Tn(h)),a.m=p,a.P=!0,mm(a,null)}function mm(a,h){a.F=Date.now(),_a(a),a.A=Tn(a.v);var p=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),Nm(p.i,"t",y),a.C=0,p=a.j.J,a.h=new fm,a.g=Gm(a.j,p?h:null,!a.m),0<a.O&&(a.M=new rT(g(a.Y,a,a.g),a.O)),h=a.U,p=a.g,y=a.ca;var O="readystatechange";Array.isArray(O)||(O&&(sm[0]=O.toString()),O=sm);for(var M=0;M<O.length;M++){var W=Xp(p,O[M],y||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Ai(),oT(a.i,a.u,a.A,a.l,a.R,a.m)}Gn.prototype.ca=function(a){a=a.target;const h=this.M;h&&In(a)==3?h.j():this.Y(a)},Gn.prototype.Y=function(a){try{if(a==this.g)e:{const Xe=In(this.g);var h=this.g.Ba();const Ss=this.g.Z();if(!(3>Xe)&&(Xe!=3||this.g&&(this.h.h||this.g.oa()||Mm(this.g)))){this.J||Xe!=4||h==7||(h==8||0>=Ss?Ai(3):Ai(2)),bu(this);var p=this.g.Z();this.X=p;t:if(gm(this)){var y=Mm(this.g);a="";var O=y.length,M=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fr(this),ji(this);var W="";break t}this.h.i=new l.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,a+=this.h.i.decode(y[h],{stream:!(M&&h==O-1)});y.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=p==200,aT(this.i,this.u,this.A,this.l,this.R,Xe,p),this.o){if(this.T&&!this.K){t:{if(this.g){var fe,$e=this.g;if((fe=$e.g?$e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(fe)){var ue=fe;break t}}ue=null}if(p=ue)Es(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cu(this,p);else{this.o=!1,this.s=3,ut(12),Fr(this),ji(this);break e}}if(this.P){p=!0;let qt;for(;!this.J&&this.C<W.length;)if(qt=uT(this,W),qt==Iu){Xe==4&&(this.s=4,ut(14),p=!1),Es(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==pm){this.s=4,ut(15),Es(this.i,this.l,W,"[Invalid Chunk]"),p=!1;break}else Es(this.i,this.l,qt,null),Cu(this,qt);if(gm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||W.length!=0||this.h.h||(this.s=1,ut(16),p=!1),this.o=this.o&&p,!p)Es(this.i,this.l,W,"[Invalid Chunked Response]"),Fr(this),ji(this);else if(0<W.length&&!this.W){this.W=!0;var Je=this.j;Je.g==this&&Je.ba&&!Je.M&&(Je.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),ju(Je),Je.M=!0,ut(11))}}else Es(this.i,this.l,W,null),Cu(this,W);Xe==4&&Fr(this),this.o&&!this.J&&(Xe==4?$m(this.j,this):(this.o=!1,_a(this)))}else CT(this.g),p==400&&0<W.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),Fr(this),ji(this)}}}catch{}finally{}};function gm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function uT(a,h){var p=a.C,y=h.indexOf(`
`,p);return y==-1?Iu:(p=Number(h.substring(p,y)),isNaN(p)?pm:(y+=1,y+p>h.length?Iu:(h=h.slice(y,y+p),a.C=y+p,h)))}Gn.prototype.cancel=function(){this.J=!0,Fr(this)};function _a(a){a.S=Date.now()+a.I,vm(a,a.I)}function vm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Pi(g(a.ba,a),h)}function bu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Gn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(lT(this.i,this.A),this.L!=2&&(Ai(),ut(17)),Fr(this),this.s=2,ji(this)):vm(this,this.S-a)};function ji(a){a.j.G==0||a.J||$m(a.j,a)}function Fr(a){bu(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,im(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Cu(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||ku(p.h,a))){if(!a.K&&ku(p.h,a)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var O=y;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Na(p),Ca(p);else break e;Ru(p),ut(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=Pi(g(p.Za,p),6e3));if(1>=_m(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Br(p,11)}else if((a.K||p.g==a)&&Na(p),!x(h))for(O=p.Da.g.parse(h),h=0;h<O.length;h++){let ue=O[h];if(p.T=ue[0],ue=ue[1],p.G==2)if(ue[0]=="c"){p.K=ue[1],p.ia=ue[2];const Je=ue[3];Je!=null&&(p.la=Je,p.j.info("VER="+p.la));const Xe=ue[4];Xe!=null&&(p.Aa=Xe,p.j.info("SVER="+p.Aa));const Ss=ue[5];Ss!=null&&typeof Ss=="number"&&0<Ss&&(y=1.5*Ss,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;const qt=a.g;if(qt){const Pa=qt.g?qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pa){var M=y.h;M.g||Pa.indexOf("spdy")==-1&&Pa.indexOf("quic")==-1&&Pa.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Nu(M,M.h),M.h=null))}if(y.D){const Ou=qt.g?qt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ou&&(y.ya=Ou,ge(y.I,y.D,Ou))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var W=a;if(y.qa=qm(y,y.J?y.ia:null,y.W),W.K){wm(y.h,W);var fe=W,$e=y.L;$e&&(fe.I=$e),fe.B&&(bu(fe),_a(fe)),y.g=W}else zm(y);0<p.i.length&&ka(p)}else ue[0]!="stop"&&ue[0]!="close"||Br(p,7);else p.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?Br(p,7):Pu(p):ue[0]!="noop"&&p.l&&p.l.ta(ue),p.v=0)}}Ai(4)}catch{}}var dT=class{constructor(a,h){this.g=a,this.map=h}};function ym(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function _m(a){return a.h?1:a.g?a.g.size:0}function ku(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Nu(a,h){a.g?a.g.add(h):a.h=h}function wm(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}ym.prototype.cancel=function(){if(this.i=Em(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Em(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return R(a.i)}function hT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],p=a.length,y=0;y<p;y++)h.push(a[y]);return h}h=[],p=0;for(y in a)h[p++]=a[y];return h}function fT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const y in a)h[p++]=y;return h}}}function Tm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=fT(a),y=hT(a),O=y.length,M=0;M<O;M++)h.call(void 0,y[M],p&&p[M],a)}var Im=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pT(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var y=a[p].indexOf("="),O=null;if(0<=y){var M=a[p].substring(0,y);O=a[p].substring(y+1)}else M=a[p];h(M,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function zr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof zr){this.h=a.h,wa(this,a.j),this.o=a.o,this.g=a.g,Ea(this,a.s),this.l=a.l;var h=a.i,p=new Mi;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Sm(this,p),this.m=a.m}else a&&(h=String(a).match(Im))?(this.h=!1,wa(this,h[1]||"",!0),this.o=Oi(h[2]||""),this.g=Oi(h[3]||"",!0),Ea(this,h[4]),this.l=Oi(h[5]||"",!0),Sm(this,h[6]||"",!0),this.m=Oi(h[7]||"")):(this.h=!1,this.i=new Mi(null,this.h))}zr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Di(h,bm,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Di(h,bm,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Di(p,p.charAt(0)=="/"?vT:gT,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Di(p,xT)),a.join("")};function Tn(a){return new zr(a)}function wa(a,h,p){a.j=p?Oi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Ea(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Sm(a,h,p){h instanceof Mi?(a.i=h,_T(a.i,a.h)):(p||(h=Di(h,yT)),a.i=new Mi(h,a.h))}function ge(a,h,p){a.i.set(h,p)}function Ta(a){return ge(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Oi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Di(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,mT),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function mT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var bm=/[#\/\?@]/g,gT=/[#\?:]/g,vT=/[#\?]/g,yT=/[#\?@]/g,xT=/#/g;function Mi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Kn(a){a.g||(a.g=new Map,a.h=0,a.i&&pT(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Mi.prototype,t.add=function(a,h){Kn(this),this.i=null,a=Ts(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function Cm(a,h){Kn(a),h=Ts(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function km(a,h){return Kn(a),h=Ts(a,h),a.g.has(h)}t.forEach=function(a,h){Kn(this),this.g.forEach(function(p,y){p.forEach(function(O){a.call(h,O,y,this)},this)},this)},t.na=function(){Kn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){const O=a[y];for(let M=0;M<O.length;M++)p.push(h[y])}return p},t.V=function(a){Kn(this);let h=[];if(typeof a=="string")km(this,a)&&(h=h.concat(this.g.get(Ts(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return Kn(this),this.i=null,a=Ts(this,a),km(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Nm(a,h,p){Cm(a,h),0<p.length&&(a.i=null,a.g.set(Ts(a,h),R(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];const M=encodeURIComponent(String(y)),W=this.V(y);for(y=0;y<W.length;y++){var O=M;W[y]!==""&&(O+="="+encodeURIComponent(String(W[y]))),a.push(O)}}return this.i=a.join("&")};function Ts(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function _T(a,h){h&&!a.j&&(Kn(a),a.i=null,a.g.forEach(function(p,y){var O=y.toLowerCase();y!=O&&(Cm(this,y),Nm(this,O,p))},a)),a.j=h}function wT(a,h){const p=new Ri;if(l.Image){const y=new Image;y.onload=T(Qn,p,"TestLoadImage: loaded",!0,h,y),y.onerror=T(Qn,p,"TestLoadImage: error",!1,h,y),y.onabort=T(Qn,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=T(Qn,p,"TestLoadImage: timeout",!1,h,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function ET(a,h){const p=new Ri,y=new AbortController,O=setTimeout(()=>{y.abort(),Qn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(M=>{clearTimeout(O),M.ok?Qn(p,"TestPingServer: ok",!0,h):Qn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),Qn(p,"TestPingServer: error",!1,h)})}function Qn(a,h,p,y,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),y(p)}catch{}}function TT(){this.g=new iT}function IT(a,h,p){const y=p||"";try{Tm(a,function(O,M){let W=O;d(O)&&(W=xu(O)),h.push(y+M+"="+encodeURIComponent(W))})}catch(O){throw h.push(y+"type="+encodeURIComponent("_badmap")),O}}function Ia(a){this.l=a.Ub||null,this.j=a.eb||!1}w(Ia,_u),Ia.prototype.g=function(){return new Sa(this.l,this.j)},Ia.prototype.i=function(a){return function(){return a}}({});function Sa(a,h){Ye.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Sa,Ye),t=Sa.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Li(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Li(this)),this.g&&(this.readyState=3,Li(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Am(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Am(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Vi(this):Li(this),this.readyState==3&&Am(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Vi(this))},t.Qa=function(a){this.g&&(this.response=a,Vi(this))},t.ga=function(){this.g&&Vi(this)};function Vi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Li(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function Li(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Pm(a){let h="";return U(a,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function Au(a,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=Pm(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):ge(a,h,p))}function ke(a){Ye.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(ke,Ye);var ST=/^https?$/i,bT=["POST","PUT"];t=ke.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tu.g(),this.v=this.o?om(this.o):om(Tu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(M){Rm(this,M);return}if(a=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var O in y)p.set(O,y[O]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const M of y.keys())p.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),O=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(bT,h,void 0))||y||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,W]of p)this.g.setRequestHeader(M,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dm(this),this.u=!0,this.g.send(a),this.u=!1}catch(M){Rm(this,M)}};function Rm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,jm(a),ba(a)}function jm(a){a.A||(a.A=!0,ct(a,"complete"),ct(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ct(this,"complete"),ct(this,"abort"),ba(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ba(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Om(this):this.bb())},t.bb=function(){Om(this)};function Om(a){if(a.h&&typeof o<"u"&&(!a.v[1]||In(a)!=4||a.Z()!=2)){if(a.u&&In(a)==4)nm(a.Ea,0,a);else if(ct(a,"readystatechange"),In(a)==4){a.h=!1;try{const W=a.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=W===0){var O=String(a.D).match(Im)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),y=!ST.test(O?O.toLowerCase():"")}p=y}if(p)ct(a,"complete"),ct(a,"success");else{a.m=6;try{var M=2<In(a)?a.g.statusText:""}catch{M=""}a.l=M+" ["+a.Z()+"]",jm(a)}}finally{ba(a)}}}}function ba(a,h){if(a.g){Dm(a);const p=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||ct(a,"ready");try{p.onreadystatechange=y}catch{}}}function Dm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function In(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),sT(h)}};function Mm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function CT(a){const h={};a=(a.g&&2<=In(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(x(a[y]))continue;var p=k(a[y]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const M=h[O]||[];h[O]=M,M.push(p)}b(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function Vm(a){this.Aa=0,this.i=[],this.j=new Ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ui("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ui("baseRetryDelayMs",5e3,a),this.cb=Ui("retryDelaySeedMs",1e4,a),this.Wa=Ui("forwardChannelMaxRetries",2,a),this.wa=Ui("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ym(a&&a.concurrentRequestLimit),this.Da=new TT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Vm.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,y){ut(0),this.W=a,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=qm(this,null,this.W),ka(this)};function Pu(a){if(Lm(a),a.G==3){var h=a.U++,p=Tn(a.I);if(ge(p,"SID",a.K),ge(p,"RID",h),ge(p,"TYPE","terminate"),Fi(a,p),h=new Gn(a,a.j,h),h.L=2,h.v=Ta(Tn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=Gm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),_a(h)}Wm(a)}function Ca(a){a.g&&(ju(a),a.g.cancel(),a.g=null)}function Lm(a){Ca(a),a.u&&(l.clearTimeout(a.u),a.u=null),Na(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function ka(a){if(!xm(a.h)&&!a.s){a.s=!0;var h=a.Ga;Tt||$(),q||(Tt(),q=!0),J.add(h,a),a.B=0}}function kT(a,h){return _m(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Pi(g(a.Ga,a,h),Hm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const O=new Gn(this,this.j,a);let M=this.o;if(this.S&&(M?(M=v(M),_(M,this.S)):M=this.S),this.m!==null||this.O||(O.H=M,M=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Fm(this,O,h),p=Tn(this.I),ge(p,"RID",a),ge(p,"CVER",22),this.D&&ge(p,"X-HTTP-Session-Id",this.D),Fi(this,p),M&&(this.O?h="headers="+encodeURIComponent(String(Pm(M)))+"&"+h:this.m&&Au(p,this.m,M)),Nu(this.h,O),this.Ua&&ge(p,"TYPE","init"),this.P?(ge(p,"$req",h),ge(p,"SID","null"),O.T=!0,Su(O,p,null)):Su(O,p,h),this.G=2}}else this.G==3&&(a?Um(this,a):this.i.length==0||xm(this.h)||Um(this))};function Um(a,h){var p;h?p=h.l:p=a.U++;const y=Tn(a.I);ge(y,"SID",a.K),ge(y,"RID",p),ge(y,"AID",a.T),Fi(a,y),a.m&&a.o&&Au(y,a.m,a.o),p=new Gn(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Fm(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Nu(a.h,p),Su(p,y,h)}function Fi(a,h){a.H&&U(a.H,function(p,y){ge(h,y,p)}),a.l&&Tm({},function(p,y){ge(h,y,p)})}function Fm(a,h,p){p=Math.min(a.i.length,p);var y=a.l?g(a.l.Na,a.l,a):null;e:{var O=a.i;let M=-1;for(;;){const W=["count="+p];M==-1?0<p?(M=O[0].g,W.push("ofs="+M)):M=0:W.push("ofs="+M);let fe=!0;for(let $e=0;$e<p;$e++){let ue=O[$e].g;const Je=O[$e].map;if(ue-=M,0>ue)M=Math.max(0,O[$e].g-100),fe=!1;else try{IT(Je,W,"req"+ue+"_")}catch{y&&y(Je)}}if(fe){y=W.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,y}function zm(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Tt||$(),q||(Tt(),q=!0),J.add(h,a),a.v=0}}function Ru(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Pi(g(a.Fa,a),Hm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Bm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Pi(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Ca(this),Bm(this))};function ju(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Bm(a){a.g=new Gn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Tn(a.qa);ge(h,"RID","rpc"),ge(h,"SID",a.K),ge(h,"AID",a.T),ge(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&ge(h,"TO",a.ja),ge(h,"TYPE","xmlhttp"),Fi(a,h),a.m&&a.o&&Au(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=Ta(Tn(h)),p.m=null,p.P=!0,mm(p,a)}t.Za=function(){this.C!=null&&(this.C=null,Ca(this),Ru(this),ut(19))};function Na(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function $m(a,h){var p=null;if(a.g==h){Na(a),ju(a),a.g=null;var y=2}else if(ku(a.h,h))p=h.D,wm(a.h,h),y=1;else return;if(a.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var O=a.B;y=va(),ct(y,new dm(y,p)),ka(a)}else zm(a);else if(O=h.s,O==3||O==0&&0<h.X||!(y==1&&kT(a,h)||y==2&&Ru(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),O){case 1:Br(a,5);break;case 4:Br(a,10);break;case 3:Br(a,6);break;default:Br(a,2)}}}function Hm(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function Br(a,h){if(a.j.info("Error code "+h),h==2){var p=g(a.fb,a),y=a.Xa;const O=!y;y=new zr(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||wa(y,"https"),Ta(y),O?wT(y.toString(),p):ET(y.toString(),p)}else ut(2);a.G=0,a.l&&a.l.sa(h),Wm(a),Lm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Wm(a){if(a.G=0,a.ka=[],a.l){const h=Em(a.h);(h.length!=0||a.i.length!=0)&&(A(a.ka,h),A(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function qm(a,h,p){var y=p instanceof zr?Tn(p):new zr(p);if(y.g!="")h&&(y.g=h+"."+y.g),Ea(y,y.s);else{var O=l.location;y=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var M=new zr(null);y&&wa(M,y),h&&(M.g=h),O&&Ea(M,O),p&&(M.l=p),y=M}return p=a.D,h=a.ya,p&&h&&ge(y,p,h),ge(y,"VER",a.la),Fi(a,y),y}function Gm(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new ke(new Ia({eb:p})):new ke(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Km(){}t=Km.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Aa(){}Aa.prototype.g=function(a,h){return new It(a,h)};function It(a,h){Ye.call(this),this.g=new Vm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!x(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Is(this)}w(It,Ye),It.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){Pu(this.g)},It.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=xu(a),a=p);h.i.push(new dT(h.Ya++,a)),h.G==3&&ka(h)},It.prototype.N=function(){this.g.l=null,delete this.j,Pu(this.g),delete this.g,It.aa.N.call(this)};function Qm(a){wu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}w(Qm,wu);function Ym(){Eu.call(this),this.status=1}w(Ym,Eu);function Is(a){this.g=a}w(Is,Km),Is.prototype.ua=function(){ct(this.g,"a")},Is.prototype.ta=function(a){ct(this.g,new Qm(a))},Is.prototype.sa=function(a){ct(this.g,new Ym)},Is.prototype.ra=function(){ct(this.g,"b")},Aa.prototype.createWebChannel=Aa.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,sE=function(){return new Aa},rE=function(){return va()},nE=Ur,Ph={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ya.NO_ERROR=0,ya.TIMEOUT=8,ya.HTTP_ERROR=6,yl=ya,hm.COMPLETE="complete",tE=hm,am.EventType=Ni,Ni.OPEN="a",Ni.CLOSE="b",Ni.ERROR="c",Ni.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,to=am,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,eE=ke}).apply(typeof Ya<"u"?Ya:typeof self<"u"?self:typeof window<"u"?window:{});const ey="@firebase/firestore",ty="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nt.UNAUTHENTICATED=new nt(null),nt.GOOGLE_CREDENTIALS=new nt("google-credentials-uid"),nt.FIRST_PARTY=new nt("first-party-uid"),nt.MOCK_USER=new nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ii="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Bc("@firebase/firestore");function ks(){return us.logLevel}function G(t,...e){if(us.logLevel<=oe.DEBUG){const n=e.map(fp);us.debug(`Firestore (${Ii}): ${t}`,...n)}}function zn(t,...e){if(us.logLevel<=oe.ERROR){const n=e.map(fp);us.error(`Firestore (${Ii}): ${t}`,...n)}}function br(t,...e){if(us.logLevel<=oe.WARN){const n=e.map(fp);us.warn(`Firestore (${Ii}): ${t}`,...n)}}function fp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,iE(t,r,n)}function iE(t,e,n){let r=`FIRESTORE (${Ii}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw zn(r),new Error(r)}function de(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||iE(e,s,r)}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends sn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nt.UNAUTHENTICATED))}shutdown(){}}class MP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class VP{constructor(e){this.t=e,this.currentUser=nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Er,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Er)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new oE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new nt(e)}}class LP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new LP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ny{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){de(this.o===void 0,3512);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ny(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ny(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=zP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function re(t,e){return t<e?-1:t>e?1:0}function Rh(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return re(r,s);{const i=aE(),o=BP(i.encode(ry(t,n)),i.encode(ry(e,n)));return o!==0?o:re(r,s)}}n+=r>65535?2:1}return re(t.length,e.length)}function ry(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function BP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return re(t[n],e[n]);return re(t.length,e.length)}function ui(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="__name__";class cn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=cn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return re(e.length,n.length)}static compareSegments(e,n){const r=cn.isNumericId(e),s=cn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?cn.extractNumericId(e).compare(cn.extractNumericId(n)):Rh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wr.fromString(e.substring(4,e.length-2))}}class Te extends cn{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const $P=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qe extends cn{construct(e,n,r){return new qe(e,n,r)}static isValidIdentifier(e){return $P.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sy}static keyField(){return new qe([sy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qe(n)}static emptyPath(){return new qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Te.fromString(e))}static fromName(e){return new Y(Te.fromString(e).popFirst(5))}static empty(){return new Y(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Te(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t,e,n){if(!n)throw new Q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WP(t,e,n,r){if(e===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iy(t){if(!Y.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function mp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function Ho(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mp(t);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t,e){const n={typeString:t};return e&&(n.value=e),n}function la(t,e){if(!lE(t))throw new Q(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Q(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=-62135596800,ay=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ay);return new ye(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<oy)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ay}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(la(e,ye._jsonSchema))return new ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-oy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ye._jsonSchemaVersion="firestore/timestamp/1.0",ye._jsonSchema={type:Oe("string",ye._jsonSchemaVersion),seconds:Oe("number"),nanoseconds:Oe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{static fromTimestamp(e){return new te(e)}static min(){return new te(new ye(0,0))}static max(){return new te(new ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=-1;function qP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=te.fromTimestamp(r===1e9?new ye(n+1,0):new ye(n,r));return new Cr(s,Y.empty(),e)}function GP(t){return new Cr(t.readTime,t.key,Wo)}class Cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cr(te.min(),Y.empty(),Wo)}static max(){return new Cr(te.max(),Y.empty(),Wo)}}function KP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Si(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==QP)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function JP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Kc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp=-1;function Qc(t){return t==null}function lc(t){return t===0&&1/t==-1/0}function XP(t){return typeof t=="number"&&Number.isInteger(t)&&!lc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="";function ZP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ly(e)),e=eR(t.get(n),e);return ly(e)}function eR(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case cE:n+="";break;default:n+=i}}return n}function ly(t){return t+cE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ys(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){this.comparator=e,this.root=n||We.EMPTY}insert(e,n){return new Ce(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,We.BLACK,null,null))}remove(e){return new Ce(this.comparator,this.root.remove(e,this.comparator).copy(null,null,We.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ja(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ja(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ja(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ja(this.root,e,this.comparator,!0)}}class Ja{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class We{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??We.RED,this.left=s??We.EMPTY,this.right=i??We.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new We(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return We.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return We.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}We.EMPTY=null,We.RED=!0,We.BLACK=!1;We.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new We(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uy(this.data.getIterator())}getIteratorFrom(e){return new uy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Le)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Le(this.comparator);return n.data=e,n}}class uy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.fields=e,e.sort(qe.comparator)}static empty(){return new Xt([])}unionWith(e){let n=new Le(qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ui(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new dE("Invalid base64 string: "+i):i}}(e);return new Qe(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Qe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const tR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(t){if(de(!!t,39018),typeof t=="string"){let e=0;const n=tR.exec(t);if(de(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Nr(t){return typeof t=="string"?Qe.fromBase64String(t):Qe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="server_timestamp",fE="__type__",pE="__previous_value__",mE="__local_write_time__";function vp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[fE])===null||n===void 0?void 0:n.stringValue)===hE}function Yc(t){const e=t.mapValue.fields[pE];return vp(e)?Yc(e):e}function qo(t){const e=kr(t.mapValue.fields[mE].timestampValue);return new ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n,r,s,i,o,l,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const cc="(default)";class Go{constructor(e,n){this.projectId=e,this.database=n||cc}static empty(){return new Go("","")}get isDefaultDatabase(){return this.database===cc}isEqual(e){return e instanceof Go&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="__type__",rR="__max__",Xa={mapValue:{}},vE="__vector__",uc="value";function Ar(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vp(t)?4:iR(t)?9007199254740991:sR(t)?10:11:Z(28295,{value:t})}function xn(t,e){if(t===e)return!0;const n=Ar(t);if(n!==Ar(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qo(t).isEqual(qo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=kr(s.timestampValue),l=kr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Nr(s.bytesValue).isEqual(Nr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ae(s.geoPointValue.latitude)===Ae(i.geoPointValue.latitude)&&Ae(s.geoPointValue.longitude)===Ae(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ae(s.integerValue)===Ae(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ae(s.doubleValue),l=Ae(i.doubleValue);return o===l?lc(o)===lc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ui(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(cy(o)!==cy(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!xn(o[c],l[c])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function Ko(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function di(t,e){if(t===e)return 0;const n=Ar(t),r=Ar(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ae(i.integerValue||i.doubleValue),c=Ae(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return dy(t.timestampValue,e.timestampValue);case 4:return dy(qo(t),qo(e));case 5:return Rh(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Nr(i),c=Nr(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=re(l[d],c[d]);if(f!==0)return f}return re(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=re(Ae(i.latitude),Ae(o.latitude));return l!==0?l:re(Ae(i.longitude),Ae(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return hy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,d,f;const m=i.fields||{},g=o.fields||{},T=(l=m[uc])===null||l===void 0?void 0:l.arrayValue,w=(c=g[uc])===null||c===void 0?void 0:c.arrayValue,R=re(((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0,((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:hy(T,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Xa.mapValue&&o===Xa.mapValue)return 0;if(i===Xa.mapValue)return 1;if(o===Xa.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const g=Rh(c[m],f[m]);if(g!==0)return g;const T=di(l[c[m]],d[f[m]]);if(T!==0)return T}return re(c.length,f.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{le:n})}}function dy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=kr(t),r=kr(e),s=re(n.seconds,r.seconds);return s!==0?s:re(n.nanos,r.nanos)}function hy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=di(n[s],r[s]);if(i)return i}return re(n.length,r.length)}function hi(t){return jh(t)}function jh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Nr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=jh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${jh(n.fields[o])}`;return s+"}"}(t.mapValue):Z(61005,{value:t})}function xl(t){switch(Ar(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yc(t);return e?16+xl(e):16;case 5:return 2*t.stringValue.length;case 6:return Nr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+xl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ys(r.fields,(i,o)=>{s+=i.length+xl(o)}),s}(t.mapValue);default:throw Z(13486,{value:t})}}function Oh(t){return!!t&&"integerValue"in t}function yp(t){return!!t&&"arrayValue"in t}function fy(t){return!!t&&"nullValue"in t}function py(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _l(t){return!!t&&"mapValue"in t}function sR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[gE])===null||n===void 0?void 0:n.stringValue)===vE}function yo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ys(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===rR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.value=e}static empty(){return new Mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_l(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yo(n)}setAll(e){let n=qe.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=yo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());_l(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];_l(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ys(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Mt(yo(this.value))}}function yE(t){const e=[];return ys(t.fields,(n,r)=>{const s=new qe([n]);if(_l(r)){const i=yE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Xt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new st(e,0,te.min(),te.min(),te.min(),Mt.empty(),0)}static newFoundDocument(e,n,r,s){return new st(e,1,n,te.min(),r,s,0)}static newNoDocument(e,n){return new st(e,2,n,te.min(),te.min(),Mt.empty(),0)}static newUnknownDocument(e,n){return new st(e,3,n,te.min(),te.min(),Mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof st&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new st(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n){this.position=e,this.inclusive=n}}function my(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=di(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function gy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n="asc"){this.field=e,this.dir=n}}function oR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{}class Me extends xE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lR(e,n,r):n==="array-contains"?new dR(e,r):n==="in"?new hR(e,r):n==="not-in"?new fR(e,r):n==="array-contains-any"?new pR(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cR(e,r):new uR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(di(n,this.value)):n!==null&&Ar(this.value)===Ar(n)&&this.matchesComparison(di(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends xE{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new _n(e,n)}matches(e){return _E(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function _E(t){return t.op==="and"}function wE(t){return aR(t)&&_E(t)}function aR(t){for(const e of t.filters)if(e instanceof _n)return!1;return!0}function Dh(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+hi(t.value);if(wE(t))return t.filters.map(e=>Dh(e)).join(",");{const e=t.filters.map(n=>Dh(n)).join(",");return`${t.op}(${e})`}}function EE(t,e){return t instanceof Me?function(r,s){return s instanceof Me&&r.op===s.op&&r.field.isEqual(s.field)&&xn(r.value,s.value)}(t,e):t instanceof _n?function(r,s){return s instanceof _n&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&EE(o,s.filters[l]),!0):!1}(t,e):void Z(19439)}function TE(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${hi(n.value)}`}(t):t instanceof _n?function(n){return n.op.toString()+" {"+n.getFilters().map(TE).join(" ,")+"}"}(t):"Filter"}class lR extends Me{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class cR extends Me{constructor(e,n){super(e,"in",n),this.keys=IE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uR extends Me{constructor(e,n){super(e,"not-in",n),this.keys=IE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function IE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class dR extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yp(n)&&Ko(n.arrayValue,this.value)}}class hR extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ko(this.value.arrayValue,n)}}class fR extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ko(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ko(this.value.arrayValue,n)}}class pR extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ko(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Pe=null}}function vy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new mR(t,e,n,r,s,i,o)}function xp(t){const e=ne(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Dh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Qc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hi(r)).join(",")),e.Pe=n}return e.Pe}function _p(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!EE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gy(t.startAt,e.startAt)&&gy(t.endAt,e.endAt)}function Mh(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function gR(t,e,n,r,s,i,o,l){return new Jc(t,e,n,r,s,i,o,l)}function wp(t){return new Jc(t)}function yy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vR(t){return t.collectionGroup!==null}function xo(t){const e=ne(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Le(qe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new hc(i,r))}),n.has(qe.keyField().canonicalString())||e.Te.push(new hc(qe.keyField(),r))}return e.Te}function pn(t){const e=ne(t);return e.Ie||(e.Ie=yR(e,xo(t))),e.Ie}function yR(t,e){if(t.limitType==="F")return vy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new hc(s.field,i)});const n=t.endAt?new dc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new dc(t.startAt.position,t.startAt.inclusive):null;return vy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vh(t,e,n){return new Jc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xc(t,e){return _p(pn(t),pn(e))&&t.limitType===e.limitType}function SE(t){return`${xp(pn(t))}|lt:${t.limitType}`}function Ns(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>TE(s)).join(", ")}]`),Qc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>hi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>hi(s)).join(",")),`Target(${r})`}(pn(t))}; limitType=${t.limitType})`}function Zc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of xo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const d=my(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,xo(r),s)||r.endAt&&!function(o,l,c){const d=my(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,xo(r),s))}(t,e)}function xR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bE(t){return(e,n)=>{let r=!1;for(const s of xo(t)){const i=_R(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function _R(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?di(c,d):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ys(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return uE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=new Ce(Y.comparator);function Bn(){return wR}const CE=new Ce(Y.comparator);function no(...t){let e=CE;for(const n of t)e=e.insert(n.key,n);return e}function kE(t){let e=CE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Jr(){return _o()}function NE(){return _o()}function _o(){return new xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const ER=new Ce(Y.comparator),TR=new Le(Y.comparator);function ae(...t){let e=TR;for(const n of t)e=e.add(n);return e}const IR=new Le(re);function SR(){return IR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lc(e)?"-0":e}}function AE(t){return{integerValue:""+t}}function bR(t,e){return XP(e)?AE(e):Ep(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this._=void 0}}function CR(t,e,n){return t instanceof fc?function(s,i){const o={fields:{[fE]:{stringValue:hE},[mE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&vp(i)&&(i=Yc(i)),i&&(o.fields[pE]=i),{mapValue:o}}(n,e):t instanceof Qo?RE(t,e):t instanceof Yo?jE(t,e):function(s,i){const o=PE(s,i),l=xy(o)+xy(s.Ee);return Oh(o)&&Oh(s.Ee)?AE(l):Ep(s.serializer,l)}(t,e)}function kR(t,e,n){return t instanceof Qo?RE(t,e):t instanceof Yo?jE(t,e):n}function PE(t,e){return t instanceof pc?function(r){return Oh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class fc extends eu{}class Qo extends eu{constructor(e){super(),this.elements=e}}function RE(t,e){const n=OE(e);for(const r of t.elements)n.some(s=>xn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Yo extends eu{constructor(e){super(),this.elements=e}}function jE(t,e){let n=OE(e);for(const r of t.elements)n=n.filter(s=>!xn(s,r));return{arrayValue:{values:n}}}class pc extends eu{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function xy(t){return Ae(t.integerValue||t.doubleValue)}function OE(t){return yp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function NR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Qo&&s instanceof Qo||r instanceof Yo&&s instanceof Yo?ui(r.elements,s.elements,xn):r instanceof pc&&s instanceof pc?xn(r.Ee,s.Ee):r instanceof fc&&s instanceof fc}(t.transform,e.transform)}class AR{constructor(e,n){this.version=e,this.transformResults=n}}class On{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class tu{}function DE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new VE(t.key,On.none()):new ca(t.key,t.data,On.none());{const n=t.data,r=Mt.empty();let s=new Le(qe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new _s(t.key,r,new Xt(s.toArray()),On.none())}}function PR(t,e,n){t instanceof ca?function(s,i,o){const l=s.value.clone(),c=wy(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof _s?function(s,i,o){if(!wl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=wy(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(ME(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wo(t,e,n,r){return t instanceof ca?function(i,o,l,c){if(!wl(i.precondition,o))return l;const d=i.value.clone(),f=Ey(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof _s?function(i,o,l,c){if(!wl(i.precondition,o))return l;const d=Ey(i.fieldTransforms,c,o),f=o.data;return f.setAll(ME(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return wl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function RR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=PE(r.transform,s||null);i!=null&&(n===null&&(n=Mt.empty()),n.set(r.field,i))}return n||null}function _y(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ui(r,s,(i,o)=>NR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ca extends tu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class _s extends tu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ME(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function wy(t,e,n){const r=new Map;de(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,kR(o,l,n[s]))}return r}function Ey(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,CR(i,o,e))}return r}class VE extends tu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jR extends tu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&PR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=NE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=DE(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&ui(this.mutations,e.mutations,(n,r)=>_y(n,r))&&ui(this.baseMutations,e.baseMutations,(n,r)=>_y(n,r))}}class Tp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){de(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return ER}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Tp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,le;function VR(t){switch(t){case F.OK:return Z(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function LE(t){if(t===void 0)return zn("GRPC error has no .code"),F.UNKNOWN;switch(t){case Re.OK:return F.OK;case Re.CANCELLED:return F.CANCELLED;case Re.UNKNOWN:return F.UNKNOWN;case Re.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Re.INTERNAL:return F.INTERNAL;case Re.UNAVAILABLE:return F.UNAVAILABLE;case Re.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Re.NOT_FOUND:return F.NOT_FOUND;case Re.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Re.ABORTED:return F.ABORTED;case Re.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Re.DATA_LOSS:return F.DATA_LOSS;default:return Z(39323,{code:t})}}(le=Re||(Re={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=new wr([4294967295,4294967295],0);function Ty(t){const e=aE().encode(t),n=new Z0;return n.update(e),new Uint8Array(n.digest())}function Iy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new wr([n,r],0),new wr([s,i],0)]}class Ip{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ro(`Invalid padding: ${n}`);if(r<0)throw new ro(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ro(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ro(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=wr.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(wr.fromNumber(r)));return s.compare(LR)===1&&(s=new wr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Ty(e),[r,s]=Iy(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ip(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.fe===0)return;const n=Ty(e),[r,s]=Iy(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ro extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ua.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new nu(te.min(),s,new Ce(re),Bn(),ae())}}class ua{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ua(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class UE{constructor(e,n){this.targetId=e,this.De=n}}class FE{constructor(e,n,r=Qe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Sy{constructor(){this.ve=0,this.Ce=by(),this.Fe=Qe.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ae(),n=ae(),r=ae();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z(38017,{changeType:i})}}),new ua(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=by()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class UR{constructor(e){this.We=e,this.Ge=new Map,this.ze=Bn(),this.je=Za(),this.Je=Za(),this.He=new Ce(re)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(Mh(i))if(r===0){const o=new Y(i.path);this.Xe(n,o,st.newNoDocument(o,te.min()))}else de(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const l=this._t(e),c=l?this.ut(l,e,o):1;if(c!==0){this.rt(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Nr(r).toUint8Array()}catch(c){if(c instanceof dE)return br("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ip(o,s,i)}catch(c){return br(c instanceof ro?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const l=this.st(o);if(l){if(i.current&&Mh(l.target)){const c=new Y(l.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,st.newNoDocument(c,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=ae();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new nu(e,n,this.He,this.ze,r);return this.ze=Bn(),this.je=Za(),this.Je=Za(),this.He=new Ce(re),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Sy,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Le(re),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Le(re),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Sy),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Za(){return new Ce(Y.comparator)}function by(){return new Ce(Y.comparator)}const FR={asc:"ASCENDING",desc:"DESCENDING"},zR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BR={and:"AND",or:"OR"};class $R{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lh(t,e){return t.useProto3Json||Qc(e)?e:{value:e}}function mc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HR(t,e){return mc(t,e.toTimestamp())}function mn(t){return de(!!t,49232),te.fromTimestamp(function(n){const r=kr(n);return new ye(r.seconds,r.nanos)}(t))}function Sp(t,e){return Uh(t,e).canonicalString()}function Uh(t,e){const n=function(s){return new Te(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function BE(t){const e=Te.fromString(t);return de(GE(e),10190,{key:e.toString()}),e}function Fh(t,e){return Sp(t.databaseId,e.path)}function xd(t,e){const n=BE(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(HE(n))}function $E(t,e){return Sp(t.databaseId,e)}function WR(t){const e=BE(t);return e.length===4?Te.emptyPath():HE(e)}function zh(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HE(t){return de(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Cy(t,e,n){return{name:Fh(t,e),fields:n.value.mapValue.fields}}function qR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Z(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(de(f===void 0||typeof f=="string",58123),Qe.fromBase64String(f||"")):(de(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Qe.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?F.UNKNOWN:LE(d.code);return new Q(f,d.message||"")}(o);n=new FE(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=xd(t,r.document.name),i=mn(r.document.updateTime),o=r.document.createTime?mn(r.document.createTime):te.min(),l=new Mt({mapValue:{fields:r.document.fields}}),c=st.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new El(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=xd(t,r.document),i=r.readTime?mn(r.readTime):te.min(),o=st.newNoDocument(s,i),l=r.removedTargetIds||[];n=new El([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=xd(t,r.document),i=r.removedTargetIds||[];n=new El([],i,s,null)}else{if(!("filter"in e))return Z(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new MR(s,i),l=r.targetId;n=new UE(l,o)}}return n}function GR(t,e){let n;if(e instanceof ca)n={update:Cy(t,e.key,e.value)};else if(e instanceof VE)n={delete:Fh(t,e.key)};else if(e instanceof _s)n={update:Cy(t,e.key,e.data),updateMask:nj(e.fieldMask)};else{if(!(e instanceof jR))return Z(16599,{Rt:e.type});n={verify:Fh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof fc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Qo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof pc)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw Z(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:HR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z(27497)}(t,e.precondition)),n}function KR(t,e){return t&&t.length>0?(de(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?mn(s.updateTime):mn(i);return o.isEqual(te.min())&&(o=mn(i)),new AR(o,s.transformResults||[])}(n,e))):[]}function QR(t,e){return{documents:[$E(t,e.path)]}}function YR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$E(t,s);const i=function(d){if(d.length!==0)return qE(_n.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:As(g.field),direction:ZR(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Lh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:s}}function JR(t){let e=WR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){de(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=WE(m);return g instanceof _n&&wE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(w){return new hc(Ps(w.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Qc(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(m){const g=!!m.before,T=m.values||[];return new dc(T,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,T=m.values||[];return new dc(T,g)}(n.endAt)),gR(e,s,o,i,l,"F",c,d)}function XR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ps(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ps(n.unaryFilter.field);return Me.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ps(n.unaryFilter.field);return Me.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ps(n.unaryFilter.field);return Me.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return Me.create(Ps(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _n.create(n.compositeFilter.filters.map(r=>WE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function ZR(t){return FR[t]}function ej(t){return zR[t]}function tj(t){return BR[t]}function As(t){return{fieldPath:t.canonicalString()}}function Ps(t){return qe.fromServerFormat(t.fieldPath)}function qE(t){return t instanceof Me?function(n){if(n.op==="=="){if(py(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NAN"}};if(fy(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(py(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NAN"}};if(fy(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(n.field),op:ej(n.op),value:n.value}}}(t):t instanceof _n?function(n){const r=n.getFilters().map(s=>qE(s));return r.length===1?r[0]:{compositeFilter:{op:tj(n.op),filters:r}}}(t):Z(54877,{filter:t})}function nj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function GE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n,r,s,i=te.min(),o=te.min(),l=Qe.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.gt=e}}function sj(t){const e=JR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this.Dn=new oj}addToCollectionParentIndex(e,n){return this.Dn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Cr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class oj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Le(Te.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Le(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KE=41943040;class gt{static withCacheSize(e){return new gt(e,gt.DEFAULT_COLLECTION_PERCENTILE,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gt.DEFAULT_COLLECTION_PERCENTILE=10,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gt.DEFAULT=new gt(KE,gt.DEFAULT_COLLECTION_PERCENTILE,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gt.DISABLED=new gt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new fi(0)}static ur(){return new fi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="LruGarbageCollector",aj=1048576;function Ay([t,e],[n,r]){const s=re(t,n);return s===0?re(e,r):s}class lj{constructor(e){this.Tr=e,this.buffer=new Le(Ay),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ay(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){G(Ny,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bi(n)?G(Ny,"Ignoring IndexedDB error during garbage collection: ",n):await Si(n)}await this.Rr(3e5)})}}class uj{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Kc.ue);const r=new lj(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(ky)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ky):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,l,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),ks()<=oe.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function dj(t,e){return new uj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(){this.changes=new xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&wo(r.mutation,s,Xt.empty(),ye.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=Jr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=no();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Jr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Bn();const o=_o(),l=function(){return _o()}();return n.forEach((c,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof _s)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),wo(f.mutation,d,f.mutation.getFieldMask(),ye.now())):o.set(d.key,Xt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return l.set(d,new fj(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=_o();let s=new Ce((o,l)=>o-l),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||Xt.empty();f=l.applyToLocalView(d,f),r.set(c,f);const m=(s.get(l.batchId)||ae()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,m=NE();f.forEach(g=>{if(!i.has(g)){const T=DE(n.get(g),r.get(g));T!==null&&m.set(g,T),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Jr());let l=Wo,c=i;return o.next(d=>L.forEach(d,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?L.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ae())).next(f=>({batchId:l,changes:kE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=no();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=no();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,c=>{const d=function(m,g){return new Jc(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,st.newInvalidDocument(f)))});let l=no();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&wo(f.mutation,d,Xt.empty(),ye.now()),Zc(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return L.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:mn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:sj(s.bundledQuery),readTime:mn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this.overlays=new Ce(Y.comparator),this.kr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Jr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Jr(),i=n.length+1,o=new Y(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ce((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Jr(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=Jr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return L.resolve(l)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DR(n,r));let i=this.kr.get(n);i===void 0&&(i=ae(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(){this.qr=new Le(Ue.Qr),this.$r=new Le(Ue.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Ue(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ue(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Y(new Te([])),r=new Ue(n,e),s=new Ue(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Y(new Te([])),r=new Ue(n,e),s=new Ue(n,e+1);let i=ae();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ue(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ue{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Y.comparator(e.key,n.key)||re(e.Hr,n.Hr)}static Ur(e,n){return re(e.Hr,n.Hr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Le(Ue.Qr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new OR(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Yr=this.Yr.add(new Ue(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?gp:this.er-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ue(n,0),s=new Ue(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Le(re);return n.forEach(s=>{const i=new Ue(s,0),o=new Ue(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new Ue(new Y(i),0);let l=new Le(re);return this.Yr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Hr)),!0)},o),L.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){de(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(n.mutations,s=>{const i=new Ue(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Ue(n,0),s=this.Yr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e){this.ni=e,this.docs=function(){return new Ce(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():st.newInvalidDocument(n))}getEntries(e,n){let r=Bn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():st.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Bn();const o=n.path,l=new Y(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||KP(GP(f),r)<=0||(s.has(f.key)||Zc(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z(9500)}ri(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _j(this)}getSize(e){return L.resolve(this.size)}}class _j extends hj{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e){this.persistence=e,this.ii=new xs(n=>xp(n),_p),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.si=0,this.oi=new bp,this.targetCount=0,this._i=fi.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),L.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new fi(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.hr(n),L.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n){this.ai={},this.overlays={},this.ui=new Kc(0),this.ci=!1,this.ci=!0,this.li=new vj,this.referenceDelegate=e(this),this.hi=new wj(this),this.indexManager=new ij,this.remoteDocumentCache=function(s){return new xj(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new rj(n),this.Ti=new mj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new yj(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new Ej(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return L.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class Ej extends YP{constructor(e){super(),this.currentSequenceNumber=e}}class Cp{constructor(e){this.persistence=e,this.Ai=new bp,this.Ri=null}static Vi(e){return new Cp(e)}get mi(){if(this.Ri)return this.Ri;throw Z(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,r=>{const s=Y.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,te.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return L.or([()=>L.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class gc{constructor(e,n){this.persistence=e,this.gi=new xs(r=>ZP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=dj(this,n)}static Vi(e,n){return new gc(e,n)}Ii(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return L.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,te.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=xl(e.data.value)),n}Sr(e,n,r){return L.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new kp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return AC()?8:JP(ot())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Tj;return this.ws(e,n,o).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,n,o,l.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(ks()<=oe.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Ns(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(ks()<=oe.DEBUG&&G("QueryEngine","Query:",Ns(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(ks()<=oe.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Ns(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pn(n))):L.resolve())}ps(e,n){if(yy(n))return L.resolve(null);let r=pn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Vh(n,null,"F"),r=pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.gs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.bs(n,l);return this.Ds(n,d,o,c.readTime)?this.ps(e,Vh(n,null,"F")):this.vs(e,d,n,c)}))})))}ys(e,n,r,s){return yy(n)||s.isEqual(te.min())?L.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?L.resolve(null):(ks()<=oe.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ns(n)),this.vs(e,o,n,qP(s,Wo)).next(l=>l))})}bs(e,n){let r=new Le(bE(e));return n.forEach((s,i)=>{Zc(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return ks()<=oe.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Ns(n)),this.gs.getDocumentsMatchingQuery(e,n,Cr.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="LocalStore",Sj=3e8;class bj{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Ce(re),this.Ms=new xs(i=>xp(i),_p),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pj(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Cj(t,e,n,r){return new bj(t,e,n,r)}async function YE(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=ae();for(const d of s){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:l}))})})}function kj(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const m=d.batch,g=m.keys();let T=L.resolve();return g.forEach(w=>{T=T.next(()=>f.getEntry(c,w)).next(R=>{const A=d.docVersions.get(w);de(A!==null,48541),R.version.compareTo(A)<0&&(m.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),f.addEntry(R)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ae();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function JE(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Nj(t,e){const n=ne(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const l=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;l.push(n.hi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.hi.addMatchingKeys(i,f.addedDocuments,m)));let T=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?T=T.withResumeToken(Qe.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,r)),s=s.insert(m,T),function(R,A,E){return R.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Sj?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,T,f)&&l.push(n.hi.updateTargetData(i,T))});let c=Bn(),d=ae();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(Aj(i,o,e.documentUpdates).next(f=>{c=f.Ls,d=f.ks})),!r.isEqual(te.min())){const f=n.hi.getLastRemoteSnapshotVersion(i).next(m=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return L.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Fs=s,i))}function Aj(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Bn();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(te.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):G(Np,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ls:o,ks:s}})}function Pj(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=gp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Rj(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new lr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Bh(t,e,n){const r=ne(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!bi(o))throw o;G(Np,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Py(t,e,n){const r=ne(t);let s=te.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const m=ne(c),g=m.Ms.get(f);return g!==void 0?L.resolve(m.Fs.get(g)):m.hi.getTargetData(d,f)}(r,o,pn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:te.min(),n?i:ae())).next(l=>(jj(r,xR(e),l),{documents:l,qs:i})))}function jj(t,e,n){let r=t.xs.get(e)||te.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class Ry{constructor(){this.activeTargetIds=SR()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Oj{constructor(){this.Fo=new Ry,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ry,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="ConnectivityMonitor";class Oy{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){G(jy,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){G(jy,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el=null;function $h(){return el===null?el=function(){return 268435456+Math.round(2147483648*Math.random())}():el++,"0x"+el.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="RestConnection",Mj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Vj{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===cc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=$h(),l=this.Go(e,n.toUriEncodedString());G(_d,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:d}=new URL(l),f=wi(d);return this.jo(e,l,c,r,f).then(m=>(G(_d,`Received RPC '${e}' ${o}: `,m),m),m=>{throw br(_d,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ii}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=Mj[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tt="WebChannelConnection";class Uj extends Vj{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=$h();return new Promise((l,c)=>{const d=new eE;d.setWithCredentials(!0),d.listenOnce(tE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case yl.NO_ERROR:const m=d.getResponseJson();G(tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case yl.TIMEOUT:G(tt,`RPC '${e}' ${o} timed out`),c(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case yl.HTTP_ERROR:const g=d.getStatus();if(G(tt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const w=T==null?void 0:T.error;if(w&&w.status&&w.message){const R=function(E){const x=E.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(x)>=0?x:F.UNKNOWN}(w.status);c(new Q(R,w.message))}else c(new Q(F.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Q(F.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{G(tt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);G(tt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}P_(e,n,r){const s=$h(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=sE(),l=rE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=i.join("");G(tt,`Creating RPC '${e}' stream ${s}: ${f}`,c);const m=o.createWebChannel(f,c);this.T_(m);let g=!1,T=!1;const w=new Lj({Ho:A=>{T?G(tt,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(g||(G(tt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),G(tt,`RPC '${e}' stream ${s} sending:`,A),m.send(A))},Yo:()=>m.close()}),R=(A,E,x)=>{A.listen(E,C=>{try{x(C)}catch(P){setTimeout(()=>{throw P},0)}})};return R(m,to.EventType.OPEN,()=>{T||(G(tt,`RPC '${e}' stream ${s} transport opened.`),w.s_())}),R(m,to.EventType.CLOSE,()=>{T||(T=!0,G(tt,`RPC '${e}' stream ${s} transport closed`),w.__(),this.I_(m))}),R(m,to.EventType.ERROR,A=>{T||(T=!0,br(tt,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),w.__(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),R(m,to.EventType.MESSAGE,A=>{var E;if(!T){const x=A.data[0];de(!!x,16349);const C=x,P=(C==null?void 0:C.error)||((E=C[0])===null||E===void 0?void 0:E.error);if(P){G(tt,`RPC '${e}' stream ${s} received error:`,P);const z=P.status;let U=function(I){const _=Re[I];if(_!==void 0)return LE(_)}(z),b=P.message;U===void 0&&(U=F.INTERNAL,b="Unknown error status: "+z+" with message "+P.message),T=!0,w.__(new Q(U,b)),m.close()}else G(tt,`RPC '${e}' stream ${s} received:`,x),w.a_(x)}}),R(l,nE.STAT_EVENT,A=>{A.stat===Ph.PROXY?G(tt,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Ph.NOPROXY&&G(tt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t){return new $R(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="PersistentStream";class ZE{constructor(e,n,r,s,i,o,l,c){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new XE(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(zn(n.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return G(Dy,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(G(Dy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fj extends ZE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=qR(this.serializer,e),r=function(i){if(!("targetChange"in i))return te.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?mn(o.readTime):te.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=zh(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Mh(c)?{documents:QR(i,c)}:{query:YR(i,c).Vt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=zE(i,o.resumeToken);const d=Lh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(te.min())>0){l.readTime=mc(i,o.snapshotVersion.toTimestamp());const d=Lh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=XR(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=zh(this.serializer),n.removeTarget=e,this.k_(n)}}class zj extends ZE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=KR(e.writeResults,e.commitTime),r=mn(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=zh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>GR(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{}class $j extends Bj{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Uh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(F.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Jo(e,Uh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(F.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Hj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(zn(n),this._a=!1):G("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="RemoteStore";class Wj{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{ws(this)&&(G(ds,"Restarting streams for network reachability change."),await async function(c){const d=ne(c);d.Ia.add(4),await da(d),d.Aa.set("Unknown"),d.Ia.delete(4),await su(d)}(this))})}),this.Aa=new Hj(r,s)}}async function su(t){if(ws(t))for(const e of t.da)await e(!0)}async function da(t){for(const e of t.da)await e(!1)}function e1(t,e){const n=ne(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),jp(n)?Rp(n):Ci(n).x_()&&Pp(n,e))}function Ap(t,e){const n=ne(t),r=Ci(n);n.Ta.delete(e),r.x_()&&t1(n,e),n.Ta.size===0&&(r.x_()?r.B_():ws(n)&&n.Aa.set("Unknown"))}function Pp(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ci(t).H_(e)}function t1(t,e){t.Ra.$e(e),Ci(t).Y_(e)}function Rp(t){t.Ra=new UR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ci(t).start(),t.Aa.aa()}function jp(t){return ws(t)&&!Ci(t).M_()&&t.Ta.size>0}function ws(t){return ne(t).Ia.size===0}function n1(t){t.Ra=void 0}async function qj(t){t.Aa.set("Online")}async function Gj(t){t.Ta.forEach((e,n)=>{Pp(t,e)})}async function Kj(t,e){n1(t),jp(t)?(t.Aa.la(e),Rp(t)):t.Aa.set("Unknown")}async function Qj(t,e,n){if(t.Aa.set("Online"),e instanceof FE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ta.delete(l),s.Ra.removeTarget(l))}(t,e)}catch(r){G(ds,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vc(t,r)}else if(e instanceof El?t.Ra.Ye(e):e instanceof UE?t.Ra.it(e):t.Ra.et(e),!n.isEqual(te.min()))try{const r=await JE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Ra.Pt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ta.get(d);f&&i.Ta.set(d,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const f=i.Ta.get(c);if(!f)return;i.Ta.set(c,f.withResumeToken(Qe.EMPTY_BYTE_STRING,f.snapshotVersion)),t1(i,c);const m=new lr(f.target,c,d,f.sequenceNumber);Pp(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G(ds,"Failed to raise snapshot:",r),await vc(t,r)}}async function vc(t,e,n){if(!bi(e))throw e;t.Ia.add(1),await da(t),t.Aa.set("Offline"),n||(n=()=>JE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(ds,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await su(t)})}function r1(t,e){return e().catch(n=>vc(t,n,e))}async function iu(t){const e=ne(t),n=Pr(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:gp;for(;Yj(e);)try{const s=await Pj(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,Jj(e,s)}catch(s){await vc(e,s)}s1(e)&&i1(e)}function Yj(t){return ws(t)&&t.Pa.length<10}function Jj(t,e){t.Pa.push(e);const n=Pr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function s1(t){return ws(t)&&!Pr(t).M_()&&t.Pa.length>0}function i1(t){Pr(t).start()}async function Xj(t){Pr(t).na()}async function Zj(t){const e=Pr(t);for(const n of t.Pa)e.X_(n.mutations)}async function eO(t,e,n){const r=t.Pa.shift(),s=Tp.from(r,e,n);await r1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await iu(t)}async function tO(t,e){e&&Pr(t).Z_&&await async function(r,s){if(function(o){return VR(o)&&o!==F.ABORTED}(s.code)){const i=r.Pa.shift();Pr(r).N_(),await r1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await iu(r)}}(t,e),s1(t)&&i1(t)}async function My(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),G(ds,"RemoteStore received new credentials");const r=ws(n);n.Ia.add(3),await da(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await su(n)}async function nO(t,e){const n=ne(t);e?(n.Ia.delete(2),await su(n)):e||(n.Ia.add(2),await da(n),n.Aa.set("Unknown"))}function Ci(t){return t.Va||(t.Va=function(n,r,s){const i=ne(n);return i.ia(),new Fj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:qj.bind(null,t),e_:Gj.bind(null,t),n_:Kj.bind(null,t),J_:Qj.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),jp(t)?Rp(t):t.Aa.set("Unknown")):(await t.Va.stop(),n1(t))})),t.Va}function Pr(t){return t.ma||(t.ma=function(n,r,s){const i=ne(n);return i.ia(),new zj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:Xj.bind(null,t),n_:tO.bind(null,t),ea:Zj.bind(null,t),ta:eO.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await iu(t)):(await t.ma.stop(),t.Pa.length>0&&(G(ds,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Op(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dp(t,e){if(zn("AsyncQueue",`${e}: ${t}`),bi(t))return new Q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{static emptySet(e){return new Zs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=no(),this.sortedSet=new Ce(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.fa=new Ce(Y.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Z(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class pi{constructor(e,n,r,s,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new pi(e,n,Zs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class sO{constructor(){this.queries=Ly(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=ne(n),i=s.queries;s.queries=Ly(),i.forEach((o,l)=>{for(const c of l.wa)c.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}}function Ly(){return new xs(t=>SE(t),Xc)}async function iO(t,e){const n=ne(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new rO,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Dp(o,`Initialization of query '${Ns(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&Mp(n)}async function oO(t,e){const n=ne(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aO(t,e){const n=ne(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.wa)l.Ca(s)&&(r=!0);o.ya=s}}r&&Mp(n)}function lO(t,e,n){const r=ne(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function Mp(t){t.Da.forEach(e=>{e.next()})}var Hh,Uy;(Uy=Hh||(Hh={})).Fa="default",Uy.Cache="cache";class cO{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new pi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=pi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Hh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.key=e}}class a1{constructor(e){this.key=e}}class uO{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ae(),this.mutatedKeys=ae(),this.Xa=bE(e),this.eu=new Zs(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Vy,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),T=Zc(this.query,m)?m:null,w=!!g&&this.mutatedKeys.has(g.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let A=!1;g&&T?g.data.isEqual(T.data)?w!==R&&(r.track({type:3,doc:T}),A=!0):this.iu(g,T)||(r.track({type:2,doc:T}),A=!0,(c&&this.Xa(T,c)>0||d&&this.Xa(T,d)<0)&&(l=!0)):!g&&T?(r.track({type:0,doc:T}),A=!0):g&&!T&&(r.track({type:1,doc:g}),A=!0,(c||d)&&(l=!0)),A&&(T?(o=o.add(T),i=R?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{eu:o,ru:r,Ds:l,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((f,m)=>function(T,w){const R=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{At:A})}};return R(T)-R(w)}(f.type,m.type)||this.Xa(f.doc,m.doc)),this.su(r),s=s!=null&&s;const l=n&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,d=c!==this.Ya;return this.Ya=c,o.length!==0||d?{snapshot:new pi(this.query,e.eu,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Vy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ae(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new a1(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new o1(r))}),n}uu(e){this.Ha=e.qs,this.Za=ae();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return pi.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Vp="SyncEngine";class dO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hO{constructor(e){this.key=e,this.lu=!1}}class fO{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new xs(l=>SE(l),Xc),this.Tu=new Map,this.Iu=new Set,this.du=new Ce(Y.comparator),this.Eu=new Map,this.Au=new bp,this.Ru={},this.Vu=new Map,this.mu=fi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function pO(t,e,n=!0){const r=f1(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await l1(r,e,n,!0),s}async function mO(t,e){const n=f1(t);await l1(n,e,!0,!1)}async function l1(t,e,n,r){const s=await Rj(t.localStore,pn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await gO(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&e1(t.remoteStore,s),l}async function gO(t,e,n,r,s){t.gu=(m,g,T)=>async function(R,A,E,x){let C=A.view.nu(E);C.Ds&&(C=await Py(R.localStore,A.query,!1).then(({documents:b})=>A.view.nu(b,C)));const P=x&&x.targetChanges.get(A.targetId),z=x&&x.targetMismatches.get(A.targetId)!=null,U=A.view.applyChanges(C,R.isPrimaryClient,P,z);return zy(R,A.targetId,U._u),U.snapshot}(t,m,g,T);const i=await Py(t.localStore,e,!0),o=new uO(e,i.qs),l=o.nu(i.documents),c=ua.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);zy(t,n,d._u);const f=new dO(e,n,o);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function vO(t,e,n){const r=ne(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!Xc(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Bh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ap(r.remoteStore,s.targetId),Wh(r,s.targetId)}).catch(Si)):(Wh(r,s.targetId),await Bh(r.localStore,s.targetId,!0))}async function yO(t,e){const n=ne(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ap(n.remoteStore,r.targetId))}async function xO(t,e,n){const r=bO(t);try{const s=await function(o,l){const c=ne(o),d=ye.now(),f=l.reduce((T,w)=>T.add(w.key),ae());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let w=Bn(),R=ae();return c.Os.getEntries(T,f).next(A=>{w=A,w.forEach((E,x)=>{x.isValidDocument()||(R=R.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,w)).next(A=>{m=A;const E=[];for(const x of l){const C=RR(x,m.get(x.key).overlayedDocument);C!=null&&E.push(new _s(x.key,C,yE(C.value.mapValue),On.exists(!0)))}return c.mutationQueue.addMutationBatch(T,d,E,l)}).next(A=>{g=A;const E=A.applyToLocalDocumentSet(m,R);return c.documentOverlayCache.saveOverlays(T,A.batchId,E)})}).then(()=>({batchId:g.batchId,changes:kE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.Ru[o.currentUser.toKey()];d||(d=new Ce(re)),d=d.insert(l,c),o.Ru[o.currentUser.toKey()]=d}(r,s.batchId,n),await ha(r,s.changes),await iu(r.remoteStore)}catch(s){const i=Dp(s,"Failed to persist write");n.reject(i)}}async function c1(t,e){const n=ne(t);try{const r=await Nj(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(de(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?de(o.lu,14607):s.removedDocuments.size>0&&(de(o.lu,42227),o.lu=!1))}),await ha(n,r,e)}catch(r){await Si(r)}}function Fy(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=ne(o);c.onlineState=l;let d=!1;c.queries.forEach((f,m)=>{for(const g of m.wa)g.va(l)&&(d=!0)}),d&&Mp(c)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _O(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Ce(Y.comparator);o=o.insert(i,st.newNoDocument(i,te.min()));const l=ae().add(i),c=new nu(te.min(),new Map,new Ce(re),o,l);await c1(r,c),r.du=r.du.remove(i),r.Eu.delete(e),Lp(r)}else await Bh(r.localStore,e,!1).then(()=>Wh(r,e,n)).catch(Si)}async function wO(t,e){const n=ne(t),r=e.batch.batchId;try{const s=await kj(n.localStore,e);d1(n,r,null),u1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ha(n,s)}catch(s){await Si(s)}}async function EO(t,e,n){const r=ne(t);try{const s=await function(o,l){const c=ne(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(m=>(de(m!==null,37113),f=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);d1(r,e,n),u1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ha(r,s)}catch(s){await Si(s)}}function u1(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function d1(t,e,n){const r=ne(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function Wh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||h1(t,r)})}function h1(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ap(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Lp(t))}function zy(t,e,n){for(const r of n)r instanceof o1?(t.Au.addReference(r.key,e),TO(t,r)):r instanceof a1?(G(Vp,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||h1(t,r.key)):Z(19791,{yu:r})}function TO(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(G(Vp,"New document in limbo: "+n),t.Iu.add(r),Lp(t))}function Lp(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Y(Te.fromString(e)),r=t.mu.next();t.Eu.set(r,new hO(n)),t.du=t.du.insert(n,r),e1(t.remoteStore,new lr(pn(wp(n.path)),r,"TargetPurposeLimboResolution",Kc.ue))}}async function ha(t,e,n){const r=ne(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((l,c)=>{o.push(r.gu(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){s.push(d);const m=kp.Es(c.targetId,d);i.push(m)}}))}),await Promise.all(o),r.hu.J_(s),await async function(c,d){const f=ne(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>L.forEach(d,g=>L.forEach(g.Is,T=>f.persistence.referenceDelegate.addReference(m,g.targetId,T)).next(()=>L.forEach(g.ds,T=>f.persistence.referenceDelegate.removeReference(m,g.targetId,T)))))}catch(m){if(!bi(m))throw m;G(Np,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const T=f.Fs.get(g),w=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(w);f.Fs=f.Fs.insert(g,R)}}}(r.localStore,i))}async function IO(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){G(Vp,"User change. New user:",e.toKey());const r=await YE(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(l=>{l.forEach(c=>{c.reject(new Q(F.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ha(n,r.Bs)}}function SO(t,e){const n=ne(t),r=n.Eu.get(e);if(r&&r.lu)return ae().add(r.key);{let s=ae();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const l=n.Pu.get(o);s=s.unionWith(l.view.tu)}return s}}function f1(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=c1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_O.bind(null,e),e.hu.J_=aO.bind(null,e.eventManager),e.hu.pu=lO.bind(null,e.eventManager),e}function bO(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EO.bind(null,e),e}class yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ru(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Cj(this.persistence,new Ij,e.initialUser,this.serializer)}Du(e){return new QE(Cp.Vi,this.serializer)}bu(e){return new Oj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yc.provider={build:()=>new yc};class CO extends yc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){de(this.persistence.referenceDelegate instanceof gc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new cj(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?gt.withCacheSize(this.cacheSizeBytes):gt.DEFAULT;return new QE(r=>gc.Vi(r,n),this.serializer)}}class qh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Fy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IO.bind(null,this.syncEngine),await nO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sO}()}createDatastore(e){const n=ru(e.databaseInfo.databaseId),r=function(i){return new Uj(i)}(e.databaseInfo);return function(i,o,l,c){return new $j(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new Wj(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Fy(this.syncEngine,n,0),function(){return Oy.C()?new Oy:new Dj}())}createSyncEngine(e,n){return function(s,i,o,l,c,d,f){const m=new fO(s,i,o,l,c,d);return f&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ne(s);G(ds,"RemoteStore shutting down."),i.Ia.add(5),await da(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}qh.provider={build:()=>new qh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):zn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr="FirestoreClient";class NO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=nt.UNAUTHENTICATED,this.clientId=pp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G(Rr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G(Rr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Dp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ed(t,e){t.asyncQueue.verifyOperationInProgress(),G(Rr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await YE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{br("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{G("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{br("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function By(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AO(t);G(Rr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>My(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>My(e.remoteStore,s)),t._onlineComponents=e}async function AO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(Rr,"Using user provided OfflineComponentProvider");try{await Ed(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;br("Error using user provided cache. Falling back to memory cache: "+n),await Ed(t,new yc)}}else G(Rr,"Using default OfflineComponentProvider"),await Ed(t,new CO(void 0));return t._offlineComponents}async function p1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(Rr,"Using user provided OnlineComponentProvider"),await By(t,t._uninitializedComponentsProvider._online)):(G(Rr,"Using default OnlineComponentProvider"),await By(t,new qh))),t._onlineComponents}function PO(t){return p1(t).then(e=>e.syncEngine)}async function RO(t){const e=await p1(t),n=e.eventManager;return n.onListen=pO.bind(null,e.syncEngine),n.onUnlisten=vO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yO.bind(null,e.syncEngine),n}function jO(t,e,n={}){const r=new Er;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const f=new kO({next:g=>{f.Ou(),o.enqueueAndForget(()=>oO(i,m));const T=g.docs.has(l);!T&&g.fromCache?d.reject(new Q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&g.fromCache&&c&&c.source==="server"?d.reject(new Q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new cO(wp(l.path),f,{includeMetadataChanges:!0,ka:!0});return iO(i,m)}(await RO(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="firestore.googleapis.com",Hy=!0;class Wy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=g1,this.ssl=Hy}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Hy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aj)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=m1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Up{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new DP;switch(r.type){case"firstParty":return new UP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$y.get(n);r&&(G("ComponentProvider","Removing Datastore"),$y.delete(n),r.terminate())}(this),Promise.resolve()}}function OO(t,e,n,r={}){var s;t=Ho(t,Up);const i=wi(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(zw(`https://${c}`),Bw("Firestore",!0)),o.host!==g1&&o.host!==c&&br("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!Sr(d,l)&&(t._setSettings(d),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=nt.MOCK_USER;else{f=EC(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new nt(g)}t._authCredentials=new MP(new oE(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fp(this.firestore,e,this._query)}}class ze{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ze(this.firestore,e,this._key)}toJSON(){return{type:ze._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(la(n,ze._jsonSchema))return new ze(e,r||null,new Y(Te.fromString(n.referencePath)))}}ze._jsonSchemaVersion="firestore/documentReference/1.0",ze._jsonSchema={type:Oe("string",ze._jsonSchemaVersion),referencePath:Oe("string")};class Jo extends Fp{constructor(e,n,r){super(e,n,wp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ze(this.firestore,null,new Y(e))}withConverter(e){return new Jo(this.firestore,e,this._path)}}function v1(t,e,...n){if(t=at(t),arguments.length===1&&(e=pp.newId()),HP("doc","path",e),t instanceof Up){const r=Te.fromString(e,...n);return iy(r),new ze(t,null,new Y(r))}{if(!(t instanceof ze||t instanceof Jo))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return iy(r),new ze(t.firestore,t instanceof Jo?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="AsyncQueue";class Gy{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new XE(this,"async_queue_retry"),this.oc=()=>{const r=wd();r&&G(qy,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=wd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=wd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Er;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!bi(e))throw e;G(qy,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,zn("INTERNAL UNHANDLED ERROR: ",Ky(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Op.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&Z(47125,{hc:Ky(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Ky(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class zp extends Up{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Gy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gy(e),this._firestoreClient=void 0,await e}}}function DO(t,e){const n=typeof t=="object"?t:Yf(),r=typeof t=="string"?t:cc,s=vs(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=_C("firestore");i&&OO(s,...i)}return s}function y1(t){if(t._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||MO(t),t._firestoreClient}function MO(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,d,f){return new nR(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,m1(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new NO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vt(Qe.fromBase64String(e))}catch(n){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vt(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(la(e,Vt._jsonSchema))return Vt.fromBase64String(e.bytes)}}Vt._jsonSchemaVersion="firestore/bytes/1.0",Vt._jsonSchema={type:Oe("string",Vt._jsonSchemaVersion),bytes:Oe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gn._jsonSchemaVersion}}static fromJSON(e){if(la(e,gn._jsonSchema))return new gn(e.latitude,e.longitude)}}gn._jsonSchemaVersion="firestore/geoPoint/1.0",gn._jsonSchema={type:Oe("string",gn._jsonSchemaVersion),latitude:Oe("number"),longitude:Oe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(la(e,vn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new vn(e.vectorValues);throw new Q(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vn._jsonSchemaVersion="firestore/vectorValue/1.0",vn._jsonSchema={type:Oe("string",vn._jsonSchemaVersion),vectorValues:Oe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=/^__.*__$/;class LO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,n,this.fieldTransforms):new ca(e,this.data,n,this.fieldTransforms)}}function _1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ec:t})}}class $p{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new $p(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return xc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(_1(this.Ec)&&VO.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class UO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ru(e)}Dc(e,n,r,s=!1){return new $p({Ec:e,methodName:n,bc:r,path:qe.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function FO(t){const e=t._freezeSettings(),n=ru(t._databaseId);return new UO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zO(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);I1("Data must be an object, but it was:",o,r);const l=E1(r,o);let c,d;if(i.merge)c=new Xt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=BO(e,m,n);if(!o.contains(g))throw new Q(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);HO(f,g)||f.push(g)}c=new Xt(f),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new LO(new Mt(l),c,d)}function w1(t,e){if(T1(t=at(t)))return I1("Unsupported field value:",e,t),E1(t,e);if(t instanceof x1)return function(r,s){if(!_1(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=w1(l,s.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return bR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ye.fromDate(r);return{timestampValue:mc(s.serializer,i)}}if(r instanceof ye){const i=new ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mc(s.serializer,i)}}if(r instanceof gn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vt)return{bytesValue:zE(s.serializer,r._byteString)};if(r instanceof ze){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Sp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vn)return function(o,l){return{mapValue:{fields:{[gE]:{stringValue:vE},[uc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.wc("VectorValues must only contain numeric values.");return Ep(l.serializer,d)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${mp(r)}`)}(t,e)}function E1(t,e){const n={};return uE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ys(t,(r,s)=>{const i=w1(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function T1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ye||t instanceof gn||t instanceof Vt||t instanceof ze||t instanceof x1||t instanceof vn)}function I1(t,e,n){if(!T1(n)||!lE(n)){const r=mp(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function BO(t,e,n){if((e=at(e))instanceof Bp)return e._internalPath;if(typeof e=="string")return S1(t,e);throw xc("Field path arguments must be of type string or ",t,!1,void 0,n)}const $O=new RegExp("[~\\*/\\[\\]]");function S1(t,e,n){if(e.search($O)>=0)throw xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bp(...e.split("."))._internalPath}catch{throw xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Q(F.INVALID_ARGUMENT,l+t+c)}function HO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(C1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WO extends b1{data(){return super.data()}}function C1(t,e){return typeof e=="string"?S1(t,e):e instanceof Bp?e._internalPath:e._delegate._internalPath}class qO{convertValue(e,n="none"){switch(Ar(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ys(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[uc].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ae(o.doubleValue));return new vn(i)}convertGeoPoint(e){return new gn(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qo(e));default:return null}}convertTimestamp(e){const n=kr(e);return new ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);de(GE(r),9688,{name:e});const s=new Go(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||zn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class so{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class es extends b1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Tl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(C1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=es._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}es._jsonSchemaVersion="firestore/documentSnapshot/1.0",es._jsonSchema={type:Oe("string",es._jsonSchemaVersion),bundleSource:Oe("string","DocumentSnapshot"),bundleName:Oe("string"),bundle:Oe("string")};class Tl extends es{data(e={}){return super.data(e)}}class Eo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new so(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Tl(this._firestore,this._userDataWriter,r.key,r,new so(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Tl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new so(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Tl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new so(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:KO(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function KO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t){t=Ho(t,ze);const e=Ho(t.firestore,zp);return jO(y1(e),t._key).then(n=>ZO(e,t,n))}Eo._jsonSchemaVersion="firestore/querySnapshot/1.0",Eo._jsonSchema={type:Oe("string",Eo._jsonSchemaVersion),bundleSource:Oe("string","QuerySnapshot"),bundleName:Oe("string"),bundle:Oe("string")};class YO extends qO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,n)}}function JO(t,e,n){t=Ho(t,ze);const r=Ho(t.firestore,zp),s=GO(t.converter,e);return XO(r,[zO(FO(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,On.none())])}function XO(t,e){return function(r,s){const i=new Er;return r.asyncQueue.enqueueAndForget(async()=>xO(await PO(r),s,i)),i.promise}(y1(t),e)}function ZO(t,e,n){const r=n.docs.get(e._key),s=new YO(t);return new es(t,s,e._key,r,new so(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ii=s})(Ei),yn(new rn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new zp(new VP(r.getProvider("auth-internal")),new FP(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Go(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Ft(ey,ty,e),Ft(ey,ty,"esm2017")})();const e4={apiKey:"AIzaSyCiwB1htquwW3GT5h57rwM35Ei4T9MG0_8",authDomain:"seamunssite.firebaseapp.com",projectId:"seamunssite",storageBucket:"seamunssite.firebasestorage.app",messagingSenderId:"834316126529",appId:"1:834316126529:web:983e1745ef677df16cf9c0",measurementId:"G-GJZXN823XL"},t4=!0,mi=t4?Qw(e4):null,an=mi?h2(mi):null,_c=mi?DO(mi):null;mi&&typeof window<"u"&&PP(mi);const Hp=N.createContext(null);function Qy(t){return t.includes("auth/invalid-credential")||t.includes("auth/wrong-password")?"Invalid email or password.":t.includes("auth/user-not-found")?"No account found for this email.":t.includes("auth/email-already-in-use")?"This email is already registered.":t.includes("auth/weak-password")?"Password should be at least 6 characters.":t.includes("auth/invalid-email")?"Please enter a valid email address.":t.includes("auth/too-many-requests")?"Too many attempts. Try again later.":t}function n4(t){return t?{uid:t.uid,name:t.displayName??null,email:t.email??null,picture:t.photoURL??null}:null}function r4({children:t}){const[e,n]=N.useState(null),[r,s]=N.useState(!0),[i,o]=N.useState(null);N.useEffect(()=>{if(!an)return;const T=eA(an,w=>{n(n4(w)),s(!1)});return()=>T()},[]);const l=N.useCallback(async()=>{if(an){o(null),s(!0);try{const T=new Cn;await wA(an,T)}catch(T){n(null),o(T instanceof Error?T.message:"Google sign-in failed")}finally{s(!1)}}},[]),c=N.useCallback(async(T,w)=>{if(an){o(null),s(!0);try{await QN(an,T.trim(),w)}catch(R){const A=R instanceof Error?R.message:"Sign-in failed";o(A.includes("auth/")?Qy(A):A)}finally{s(!1)}}},[]),d=N.useCallback(async(T,w,R)=>{if(an){o(null),s(!0);try{const A=await KN(an,T.trim(),w);R!=null&&R.trim()&&A.user&&await JN(A.user,{displayName:R.trim()})}catch(A){const E=A instanceof Error?A.message:"Sign-up failed";o(E.includes("auth/")?Qy(E):E)}finally{s(!1)}}},[]),f=N.useCallback(async()=>{an&&await tA(an),n(null),o(null)},[]),m=N.useCallback(()=>o(null),[]),g={user:e,isAuthenticated:!!e,isLoading:r,login:l,loginWithEmail:c,signUpWithEmail:d,logout:f,authError:i,clearAuthError:m};return u.jsx(Hp.Provider,{value:g,children:t})}const k1={user:null,isAuthenticated:!1,isLoading:!1,login:async()=>{},loginWithEmail:async()=>{},signUpWithEmail:async()=>{},logout:async()=>{},authError:null,clearAuthError:()=>{}};function s4({children:t}){return u.jsx(Hp.Provider,{value:k1,children:t})}function Wp(){return N.useContext(Hp)??k1}const Yy="seamuns-dashboard-theme",Jy="seamuns-dashboard-color-mode",Xy="seamuns-dashboard-color-theme",N1=[{id:"default",label:"Default",emoji:"",brand:"#2563eb"},{id:"health",label:"Health",emoji:"",brand:"#0d9488"},{id:"war",label:"War & conflict",emoji:"",brand:"#b91c1c"},{id:"women",label:"Women",emoji:"",brand:"#a855f7"},{id:"nature",label:"Nature",emoji:"",brand:"#16a34a"},{id:"peace",label:"Peace",emoji:"",brand:"#0284c7"},{id:"economy",label:"Economy",emoji:"",brand:"#d97706"},{id:"education",label:"Education",emoji:"",brand:"#4f46e5"},{id:"rights",label:"Human rights",emoji:"",brand:"#dc2626"}],Gh="gold-blue",A1=[{id:"gold-blue",label:"Gold & Blue",emoji:""},{id:"red",label:"Red",emoji:""},{id:"orange",label:"Orange",emoji:""},{id:"yellow",label:"Yellow",emoji:""},{id:"green",label:"Green",emoji:""},{id:"light-blue",label:"Light Blue",emoji:""},{id:"blue",label:"Blue",emoji:""},{id:"purple",label:"Purple",emoji:""},{id:"pink",label:"Pink",emoji:""},{id:"brown",label:"Brown",emoji:""},{id:"monochromatic",label:"Monochromatic",emoji:""}],P1=N.createContext(null),i4=t=>N1.some(e=>e.id===t),o4=t=>A1.some(e=>e.id===t),a4=t=>t==="light"||t==="dark";function l4({children:t}){const[e,n]=N.useState(()=>{if(typeof window>"u")return"default";const f=localStorage.getItem(Yy);return f&&i4(f)?f:"default"}),[r,s]=N.useState(()=>{if(typeof window>"u")return Gh;const f=localStorage.getItem(Xy);return f&&o4(f)?f:Gh}),[i,o]=N.useState(()=>{if(typeof window>"u")return"light";const f=localStorage.getItem(Jy);return f&&a4(f)?f:"light"});N.useEffect(()=>{document.documentElement.setAttribute("data-theme",e),localStorage.setItem(Yy,e)},[e]),N.useEffect(()=>{document.documentElement.setAttribute("data-color-theme",r),localStorage.setItem(Xy,r)},[r]),N.useEffect(()=>{document.documentElement.setAttribute("data-color-mode",i),localStorage.setItem(Jy,i)},[i]);const l=f=>n(f),c=f=>s(f),d=f=>o(f);return u.jsx(P1.Provider,{value:{themeId:e,setThemeId:l,themes:N1,colorThemeId:r,setColorThemeId:c,colorThemes:A1,colorMode:i,setColorMode:d},children:t})}function c4(){const t=N.useContext(P1);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),R1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...d4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:R1("lucide",s),...l},[...o.map(([d,f])=>N.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=(t,e)=>{const n=N.forwardRef(({className:r,...s},i)=>N.createElement(h4,{ref:i,iconNode:e,className:R1(`lucide-${u4(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=ee("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=ee("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=ee("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=ee("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=ee("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=ee("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=ee("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=ee("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=ee("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=ee("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=ee("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=ee("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=ee("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=ee("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=ee("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=ee("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=ee("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=ee("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=ee("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=ee("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=ee("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=ee("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=ee("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=ee("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=ee("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=ee("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=ee("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=ee("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=ee("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=ee("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=ee("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=ee("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=ee("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=ee("Vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function rx(){const{login:t,loginWithEmail:e,signUpWithEmail:n,logout:r,isAuthenticated:s,user:i,isLoading:o,authError:l,clearAuthError:c}=Wp(),[d,f]=N.useState(!1),[m,g]=N.useState("login"),[T,w]=N.useState(""),[R,A]=N.useState(""),[E,x]=N.useState(""),C=N.useRef(null);N.useEffect(()=>{if(!d)return;const U=b=>{C.current&&!C.current.contains(b.target)&&f(!1)};return document.addEventListener("click",U),()=>document.removeEventListener("click",U)},[d]);const P=()=>{f(U=>!U),d||(c(),w(""),A(""),x(""))},z=U=>{U.preventDefault(),m==="login"?e(T,R):n(T,R,E||void 0)};return o&&!d?u.jsx("span",{className:"text-xs text-[var(--text-muted)] px-2 py-1.5",children:"Loading"}):s&&i?u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-xs text-[var(--text-muted)]",children:[i.picture?u.jsx("img",{src:i.picture,alt:i.name??"User",className:"w-6 h-6 rounded-lg object-cover border border-[var(--border)]"}):u.jsx("div",{className:"w-6 h-6 rounded-lg bg-[var(--brand-soft)] flex items-center justify-center",children:u.jsx(uu,{className:"w-3 h-3 text-[var(--brand)]"})}),u.jsx("span",{className:"text-[var(--text)] max-w-[120px] truncate",children:i.name??i.email})]}),u.jsxs("button",{type:"button",onClick:()=>r(),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors",children:[u.jsx(E4,{className:"w-3 h-3"}),"Log out"]})]}):u.jsxs("div",{className:"relative",ref:C,children:[u.jsxs("button",{type:"button",onClick:P,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--brand)] text-white hover:opacity-90 transition-opacity",children:[u.jsx(w4,{className:"w-3 h-3"}),"Log in / Sign up",u.jsx(ou,{className:`w-3 h-3 transition-transform ${d?"rotate-180":""}`})]}),d&&u.jsxs("div",{className:"absolute right-0 top-full mt-1 z-50 w-72 rounded-lg border border-[var(--border)] bg-[var(--bg-elevated)] shadow-lg p-3",children:[u.jsxs("button",{type:"button",onClick:()=>{t(),f(!1)},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-[var(--text)] bg-[var(--bg-card)] hover:bg-[var(--border)] border border-[var(--border)] transition-colors",children:[u.jsx(T4,{className:"w-4 h-4 text-[var(--brand)]"}),"Continue with Gmail"]}),u.jsx("div",{className:"my-3 border-t border-[var(--border)]"}),u.jsxs("div",{className:"flex gap-1 p-0.5 rounded-lg bg-[var(--bg-card)] border border-[var(--border)]",children:[u.jsx("button",{type:"button",onClick:()=>{g("login"),c()},className:`flex-1 px-2 py-1.5 rounded-md text-xs font-medium transition-colors ${m==="login"?"bg-[var(--brand)] text-white":"text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:"Log in"}),u.jsx("button",{type:"button",onClick:()=>{g("signup"),c()},className:`flex-1 px-2 py-1.5 rounded-md text-xs font-medium transition-colors ${m==="signup"?"bg-[var(--brand)] text-white":"text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:"Sign up"})]}),u.jsxs("form",{onSubmit:z,className:"space-y-2 mt-2",children:[m==="signup"&&u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Name (optional)"}),u.jsx("input",{type:"text",value:E,onChange:U=>x(U.target.value),placeholder:"Your name",className:"mt-0.5 w-full px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)]"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Email"}),u.jsx("input",{type:"email",value:T,onChange:U=>w(U.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email",className:"mt-0.5 w-full px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)]"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Password"}),u.jsx("input",{type:"password",value:R,onChange:U=>A(U.target.value),placeholder:m==="signup"?"At least 6 characters":"",required:!0,minLength:m==="signup"?6:void 0,autoComplete:m==="login"?"current-password":"new-password",className:"mt-0.5 w-full px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)]"})]}),l&&u.jsx("p",{className:"text-xs text-[var(--danger)]",children:l}),u.jsx("button",{type:"submit",disabled:o,className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium bg-[var(--brand)] text-white hover:opacity-90 transition-opacity disabled:opacity-60",children:o?"Please wait":m==="login"?"Log in with email":"Create account"})]})]})]})}function sx(){const{colorThemeId:t,setColorThemeId:e,colorThemes:n,colorMode:r,setColorMode:s,setThemeId:i}=c4(),[o,l]=N.useState(!1),c=N.useRef(null);N.useEffect(()=>{function f(m){c.current&&!c.current.contains(m.target)&&l(!1)}return o&&document.addEventListener("click",f),()=>document.removeEventListener("click",f)},[o]);const d=n.find(f=>f.id===t)??n[0];return u.jsxs("div",{className:"relative",ref:c,children:[u.jsxs("button",{type:"button",onClick:()=>l(!o),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text)] hover:bg-[var(--bg-card)] border border-[var(--border)] bg-[var(--bg-elevated)] transition-colors","aria-expanded":o,"aria-haspopup":"listbox","aria-label":"Theme",children:[u.jsx(b4,{className:"w-4 h-4 flex-shrink-0 text-[var(--text-muted)]"}),u.jsx("span",{className:"hidden sm:inline",children:"Theme"}),u.jsx("span",{className:"text-[var(--brand)]",title:d.label,"aria-hidden":!0,children:d.emoji}),u.jsx(ou,{className:`w-4 h-4 flex-shrink-0 text-[var(--text-muted)] transition-transform ${o?"rotate-180":""}`,"aria-hidden":!0})]}),o&&u.jsxs("div",{className:"absolute right-0 top-full mt-1.5 py-2 rounded-xl border border-[var(--border)] bg-[var(--bg-card)] shadow-[var(--shadow-card)] shadow-lg z-50 min-w-[200px]",role:"dialog","aria-label":"Theme options",children:[u.jsx("div",{className:"px-3 py-1.5 text-xs font-medium text-[var(--text-muted)] border-b border-[var(--border)] mb-2",children:"Appearance"}),u.jsxs("div",{className:"flex gap-1 px-2 pb-2",children:[u.jsxs("button",{type:"button",onClick:()=>s("light"),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${r==="light"?"bg-[var(--brand)] text-white shadow-sm":"text-[var(--text-muted)] hover:bg-[var(--bg-elevated)] hover:text-[var(--text)]"}`,"aria-pressed":r==="light",children:[u.jsx(P4,{className:"w-4 h-4"}),"Light"]}),u.jsxs("button",{type:"button",onClick:()=>s("dark"),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${r==="dark"?"bg-[var(--brand)] text-white shadow-sm":"text-[var(--text-muted)] hover:bg-[var(--bg-elevated)] hover:text-[var(--text)]"}`,"aria-pressed":r==="dark",children:[u.jsx(S4,{className:"w-4 h-4"}),"Dark"]})]}),u.jsxs("div",{className:"px-3 py-1.5 text-xs font-medium text-[var(--text-muted)] border-b border-[var(--border)] mb-2",children:["Theme color ",u.jsx("span",{className:"font-normal",children:"(default: Gold & Blue)"})]}),u.jsx("div",{className:"max-h-[260px] overflow-y-auto",role:"listbox","aria-label":"Theme color",children:n.map(f=>{const m=f.id===Gh,g=t===f.id;return u.jsxs("button",{type:"button",role:"option","aria-selected":g,onClick:()=>{e(f.id),i("default"),l(!1)},className:`flex items-center gap-2 w-full px-3 py-2 text-left text-sm transition-colors whitespace-nowrap min-w-0 ${g?"bg-[var(--brand)] text-white":"text-[var(--text)] hover:bg-[var(--bg-elevated)]"}`,children:[u.jsx("span",{className:"text-base flex-shrink-0","aria-hidden":!0,children:f.emoji}),u.jsx("span",{className:"truncate",children:f.label}),m&&u.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded text-[10px] font-medium flex-shrink-0 ${g?"bg-white/20 text-white":"bg-[var(--accent-soft)] text-[var(--accent)]"}`,children:"Default"}),g&&u.jsx("span",{className:"ml-auto text-white","aria-hidden":!0,children:""})]},f.id)})})]})]})}function B1({className:t="h-8 w-auto"}){return u.jsx("img",{src:"/logo.png",alt:"SEAMUNs",className:t,fetchPriority:"high"})}const ix=[{to:"/",label:" Home"},{to:"/chair",label:" Chair Room"},{to:"/delegate",label:" Delegate"}];function j4(){const[t,e]=N.useState(!1),n=ms(),r=()=>e(!1);return N.useEffect(()=>{r()},[n.pathname]),u.jsxs("div",{className:"min-h-screen flex flex-col",children:[u.jsxs("header",{className:"sticky top-0 z-50 border-b border-[var(--border)] bg-[var(--bg-base)]/95 backdrop-blur-sm shadow-[0_1px_0_0_var(--border)]",children:[u.jsxs("div",{className:"max-w-[1600px] mx-auto px-2 sm:px-4 py-1.5 sm:py-2 flex items-center justify-between gap-2 min-h-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3 min-w-0",children:[u.jsxs(ld,{to:"/",className:"font-semibold text-base sm:text-lg md:text-xl text-[var(--text)] hover:text-[var(--brand)] transition-colors flex items-center gap-1.5 sm:gap-2 whitespace-nowrap min-w-0 py-1",onClick:r,children:[u.jsx(B1,{className:"h-5 sm:h-7 w-auto flex-shrink-0"}),u.jsx("span",{className:"hidden sm:inline truncate",children:"SEAMUNs Dashboard"}),u.jsx("span",{className:"sm:hidden truncate",children:"SEAMUNs"}),u.jsx("span",{className:"text-[var(--brand)]/80 text-sm hidden sm:inline",children:""})]}),u.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[var(--text-muted)] hover:text-[var(--brand)] transition-colors hidden md:inline",children:"seamuns.site"})]}),u.jsxs("div",{className:"hidden md:flex items-center gap-1.5",children:[u.jsx(sx,{}),u.jsx("nav",{className:"flex items-center gap-0.5 p-0.5 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] flex-nowrap",children:ix.map(({to:s,label:i})=>u.jsx(ld,{to:s,className:({isActive:o})=>`px-2.5 py-1 rounded-md text-xs font-medium transition-colors whitespace-nowrap ${o?"bg-[var(--brand)] text-white shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:i},s))}),u.jsx(rx,{})]}),u.jsxs("div",{className:"flex md:hidden items-center gap-0.5",children:[u.jsx(sx,{}),u.jsx("button",{type:"button",onClick:()=>e(!t),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors","aria-expanded":t,"aria-label":t?"Close menu":"Open menu",children:t?u.jsx(du,{className:"w-4 h-4"}):u.jsx(I4,{className:"w-4 h-4"})}),u.jsx(rx,{})]})]}),t&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40 bg-black/30 md:hidden",onClick:r,"aria-hidden":!0}),u.jsx("div",{className:"fixed top-11 right-0 bottom-0 left-0 z-50 md:hidden bg-[var(--bg-elevated)] border-l border-[var(--border)] shadow-xl overflow-y-auto",role:"dialog","aria-label":"Navigation menu",children:u.jsxs("nav",{className:"flex flex-col p-4 gap-1",children:[ix.map(({to:s,label:i})=>u.jsx(ld,{to:s,onClick:r,className:({isActive:o})=>`px-4 py-3 rounded-lg text-sm font-medium transition-colors ${o?"bg-[var(--brand)] text-white":"text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:i},s)),u.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",onClick:r,className:"px-4 py-3 rounded-lg text-sm text-[var(--text-muted)] hover:text-[var(--brand)] hover:bg-[var(--bg-card)]",children:"seamuns.site "})]})})]})]}),u.jsx("main",{className:"main-content flex-1 min-w-0",children:u.jsx(Yb,{})}),u.jsxs("footer",{className:"border-t border-[var(--border)] py-2 sm:py-3 px-3 sm:px-4 text-center text-[10px] sm:text-xs text-[var(--text-muted)] bg-[var(--bg-elevated)]/50",children:["Part of ",u.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",className:"text-[var(--brand)] hover:underline",children:"SEAMUNs"}),"  Model UN conferences across South East Asia"]})]})}const O4={committee:"UNSC",topic:"Cybersecurity and International Peace",sessionStarted:!1,sessionStartTime:null,delegates:[],delegateStrikes:[],delegateFeedback:[],motions:[],speakers:[],activeSpeaker:null,speakerDuration:60,rollCallComplete:!1,crisisSlides:[],crisisSpeakers:[],crisisFacts:[],crisisPathways:[],archive:[],voteInProgress:null,delegateVotes:{},flowChecklist:{},prepChecklist:{}},$1=N.createContext(null);function D4({children:t}){const[e,n]=N.useState(O4),r=N.useCallback(D=>{n(V=>({...V,committee:D}))},[]),s=N.useCallback(D=>{n(V=>({...V,topic:D}))},[]),i=N.useCallback(()=>{n(D=>({...D,sessionStarted:!0,sessionStartTime:new Date().toISOString()}))},[]),o=N.useCallback(()=>{n(D=>({...D,sessionStarted:!1,sessionStartTime:null}))},[]),l=N.useCallback(D=>{n(V=>({...V,delegates:[...V.delegates,{...D,id:crypto.randomUUID()}]}))},[]),c=N.useCallback(D=>{n(V=>({...V,delegates:V.delegates.filter(B=>B.id!==D),delegateStrikes:V.delegateStrikes.filter(B=>B.delegateId!==D),delegateFeedback:V.delegateFeedback.filter(B=>B.delegateId!==D)}))},[]),d=N.useCallback((D,V)=>{n(B=>({...B,delegates:B.delegates.map(se=>se.id===D?{...se,...V}:se)}))},[]),f=N.useCallback((D,V)=>{n(B=>({...B,motions:[...B.motions,{id:crypto.randomUUID(),text:D,type:V,starred:!1,timestamp:new Date().toISOString(),status:"active"}]}))},[]),m=N.useCallback(D=>{n(V=>({...V,motions:V.motions.map(B=>B.id===D?{...B,starred:!B.starred}:B)}))},[]),g=N.useCallback((D,V)=>{n(B=>({...B,motions:B.motions.map(se=>se.id===D?{...se,status:V}:se)}))},[]),T=N.useCallback(D=>{n(V=>{const B=V.motions.find(se=>se.id===D);return!B||B.type==="point"?V:{...V,voteInProgress:B,delegateVotes:{}}})},[]),w=N.useCallback((D,V)=>{n(B=>({...B,delegateVotes:{...B.delegateVotes,[D]:V}}))},[]),R=N.useCallback(()=>{n(D=>{if(!D.voteInProgress)return D;const V=Object.values(D.delegateVotes).filter(_e=>_e==="yes").length,B=Object.values(D.delegateVotes).filter(_e=>_e==="no").length,se=Object.values(D.delegateVotes).filter(_e=>_e==="abstain").length;return{...D,motions:D.motions.map(_e=>_e.id===D.voteInProgress.id?{..._e,votes:{yes:V,no:B,abstain:se},status:V>B?"passed":"failed"}:_e),voteInProgress:null,delegateVotes:{}}})},[]),A=N.useCallback((D,V,B)=>{n(se=>({...se,speakers:[...se.speakers,{id:crypto.randomUUID(),delegateId:D,country:V,name:B,duration:se.speakerDuration,speaking:!1}]}))},[]),E=N.useCallback(D=>{n(V=>{var B;return{...V,speakers:V.speakers.filter(se=>se.id!==D),activeSpeaker:((B=V.activeSpeaker)==null?void 0:B.id)===D?null:V.activeSpeaker}})},[]),x=N.useCallback(D=>{n(V=>({...V,activeSpeaker:D,speakers:V.speakers.map(B=>B.id===(D==null?void 0:D.id)?{...B,speaking:!0,startTime:Date.now()}:{...B,speaking:!1})}))},[]),C=N.useCallback(D=>{n(V=>({...V,speakerDuration:D}))},[]),P=N.useCallback(D=>{n(V=>({...V,rollCallComplete:D}))},[]),z=N.useCallback(D=>{n(V=>({...V,crisisSlides:[...V.crisisSlides,D]}))},[]),U=N.useCallback(D=>{n(V=>({...V,crisisSpeakers:[...V.crisisSpeakers,D]}))},[]),b=N.useCallback(D=>{n(V=>({...V,crisisFacts:[...V.crisisFacts,D]}))},[]),v=N.useCallback(D=>{n(V=>({...V,crisisPathways:[...V.crisisPathways,D]}))},[]),I=N.useCallback((D,V,B)=>{n(se=>({...se,archive:[...se.archive,{type:D,name:V,content:B}]}))},[]),_=N.useCallback((D,V)=>{n(B=>({...B,delegateStrikes:[...B.delegateStrikes,{delegateId:D,type:V,timestamp:new Date().toISOString()}]}))},[]),k=N.useCallback((D,V)=>{n(B=>{const se=[...B.delegateStrikes].reverse().findIndex(lt=>lt.delegateId===D&&lt.type===V);if(se===-1)return B;const _e=B.delegateStrikes.length-1-se;return{...B,delegateStrikes:B.delegateStrikes.filter((lt,Wt)=>Wt!==_e)}})},[]),j=N.useCallback((D,V)=>{n(B=>({...B,delegateFeedback:[...B.delegateFeedback,{delegateId:D,type:V,timestamp:new Date().toISOString()}]}))},[]),S=N.useCallback(D=>{const V={compliment:0,concern:0};return e.delegateFeedback.filter(B=>B.delegateId===D).forEach(B=>{V[B.type]=(V[B.type]??0)+1}),V},[e.delegateFeedback]),me=N.useCallback(D=>{n(V=>({...V,flowChecklist:{...V.flowChecklist,[D]:!V.flowChecklist[D]}}))},[]),Ht=N.useCallback(D=>!!e.flowChecklist[D],[e.flowChecklist]),En=N.useCallback(()=>{n(D=>({...D,flowChecklist:{}}))},[]),Tt=N.useCallback(D=>{n(V=>({...V,prepChecklist:{...V.prepChecklist,[D]:!V.prepChecklist[D]}}))},[]),q=N.useCallback(D=>!!e.prepChecklist[D],[e.prepChecklist]),J=N.useCallback(()=>{n(D=>({...D,prepChecklist:{}}))},[]),$={...e,setCommittee:r,setTopic:s,startSession:i,stopSession:o,addDelegate:l,removeDelegate:c,updateDelegate:d,addMotion:f,starMotion:m,setMotionStatus:g,startVote:T,recordVote:w,endVote:R,addToSpeakers:A,removeFromSpeakers:E,setActiveSpeaker:x,setSpeakerDuration:C,setRollCallComplete:P,addCrisisSlide:z,addCrisisSpeaker:U,addCrisisFact:b,addCrisisPathway:v,addToArchive:I,addStrike:_,removeStrike:k,getStrikeCount:(D,V)=>e.delegateStrikes.filter(B=>B.delegateId===D&&B.type===V).length,getStrikeCountsByType:D=>{const V={};return e.delegateStrikes.filter(B=>B.delegateId===D).forEach(B=>{V[B.type]=(V[B.type]??0)+1}),V},addDelegateFeedback:j,getFeedbackCountsByType:S,toggleFlowStep:me,isFlowStepDone:Ht,resetFlowChecklist:En,togglePrepStep:Tt,isPrepStepDone:q,resetPrepChecklist:J};return u.jsx($1.Provider,{value:$,children:t})}function jt(){const t=N.useContext($1);if(!t)throw new Error("useChair must be used within ChairProvider");return t}const M4=["Point of order abuse","Unparliamentary language","Speaking out of turn","Disruption","Failure to yield","Other"],Qh=3;function V4(t){return t.rollCallStatus?t.rollCallStatus:t.present?"present":"absent"}function L4(){const{delegates:t,committee:e,topic:n,getStrikeCountsByType:r,addDelegateFeedback:s,getFeedbackCountsByType:i}=jt(),[o,l]=N.useState(null),c=N.useRef(null);return N.useEffect(()=>{if(!o)return;const d=f=>{c.current&&!c.current.contains(f.target)&&l(null)};return document.addEventListener("click",d),()=>document.removeEventListener("click",d)},[o]),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Digital Room View"}),u.jsxs("p",{className:"text-[var(--text-muted)] text-sm",children:[e,"  ",n]}),u.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:"Click a delegate to give a compliment or concern reminder."})]}),u.jsx("div",{className:"card-block p-6 min-h-[320px]",children:t.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-[var(--text-muted)]",children:[u.jsx("p",{className:"text-sm",children:" No delegates in the room yet."}),u.jsx("p",{className:"text-xs mt-1",children:"Add delegates from the Delegates section."})]}):u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:t.map(d=>{const f=r(d.id),m=Object.values(f).reduce((E,x)=>E+x,0),g=Object.values(f).some(E=>E>=Qh),T=i(d.id),w=T.compliment??0,R=T.concern??0,A=o===d.id;return u.jsxs("div",{ref:A?c:void 0,className:"relative",children:[u.jsxs("button",{type:"button",onClick:()=>l(A?null:d.id),className:`w-full rounded-lg border p-3 text-center transition-colors text-left ${g?"border-[var(--danger)] bg-[var(--danger)]/10 hover:bg-[var(--danger)]/15":"border-[var(--border)] bg-[var(--bg-elevated)] hover:bg-[var(--bg-card)] hover:border-[var(--accent)]/50"} ${A?"ring-2 ring-[var(--accent)]":""}`,"aria-expanded":A,"aria-haspopup":"menu","aria-label":`${d.country}  give compliment or concern`,children:[u.jsx("div",{className:"text-xs font-medium text-[var(--accent)] uppercase tracking-wide",children:d.country}),u.jsx("div",{className:"text-sm text-[var(--text)] mt-1 font-medium",children:d.name||""}),d.committee&&u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-0.5",children:d.committee}),u.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2 flex-wrap",children:[(()=>{const E=V4(d),x={absent:"Absent",present:"Present (may abstain)","present-and-voting":"Present and voting"};return u.jsxs("span",{className:`inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[10px] font-medium ${E==="absent"?"bg-[var(--text-muted)]/20 text-[var(--text-muted)]":E==="present"?"bg-[var(--success)]/20 text-[var(--success)]":"bg-[var(--accent)]/20 text-[var(--accent)]"}`,title:x[E],children:[u.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${E==="absent"?"bg-[var(--text-muted)]":E==="present"?"bg-[var(--success)]":"bg-[var(--accent)]"}`}),E==="present-and-voting"?"P&V":E==="present"?"Present":"Absent"]})})(),m>0&&u.jsxs("span",{className:`inline-flex items-center gap-0.5 text-xs ${g?"text-[var(--danger)]":"text-[var(--accent)]"}`,title:Object.entries(f).map(([E,x])=>`${E}: ${x}`).join(", "),children:[u.jsx(wc,{className:"w-3 h-3"}),m]}),w>0&&u.jsxs("span",{className:"inline-flex items-center gap-0.5 text-xs text-[var(--success)]",title:"Compliments",children:[u.jsx(nx,{className:"w-3 h-3"}),w]}),R>0&&u.jsxs("span",{className:"inline-flex items-center gap-0.5 text-xs text-[var(--danger)]",title:"Concern reminders",children:[u.jsx(ex,{className:"w-3 h-3"}),R]}),u.jsx(ou,{className:`w-3 h-3 text-[var(--text-muted)] flex-shrink-0 transition-transform ${A?"rotate-180":""}`,"aria-hidden":!0})]})]}),A&&u.jsxs("div",{className:"absolute left-0 right-0 top-full mt-1 z-10 rounded-lg border border-[var(--border)] bg-[var(--bg-card)] shadow-lg py-1 min-w-[10rem]",role:"menu","aria-label":"Delegate actions",children:[u.jsxs("button",{type:"button",role:"menuitem",onClick:()=>{s(d.id,"compliment"),l(null)},className:"flex items-center gap-2 w-full px-3 py-2 text-left text-sm text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[u.jsx(nx,{className:"w-4 h-4 text-[var(--success)]"}),"Give compliment"]}),u.jsxs("button",{type:"button",role:"menuitem",onClick:()=>{s(d.id,"concern"),l(null)},className:"flex items-center gap-2 w-full px-3 py-2 text-left text-sm text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[u.jsx(ex,{className:"w-4 h-4 text-[var(--danger)]"}),"Give concern reminder"]})]})]},d.id)})})})]})}const Yh=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Cte d'Ivoire","Democratic People's Republic of Korea","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Lao People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia (Federated States of)","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Macedonia","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Republic of Korea","Romania","Russian Federation","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syrian Arab Republic","Tajikistan","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United Republic of Tanzania","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela","Viet Nam","Yemen","Zambia","Zimbabwe"],ei="__OTHER__";function U4(){const{delegates:t,addDelegate:e,removeDelegate:n,committee:r,addStrike:s,removeStrike:i,getStrikeCountsByType:o}=jt(),[l,c]=N.useState(""),[d,f]=N.useState(""),[m,g]=N.useState(""),[T,w]=N.useState(!1),[R,A]=N.useState(null),[E,x]=N.useState(""),[C,P]=N.useState(""),z=l===ei?d.trim():l,U=()=>{z&&(e({country:z,name:m.trim()||void 0,committee:r||void 0,rollCallStatus:"absent"}),c(""),f(""),g(""))},b=()=>{Yh.forEach(v=>{t.some(I=>I.country===v)||e({country:v,committee:r||void 0,rollCallStatus:"absent"})}),w(!1)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Delegates"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Add or remove delegates. Select from all UNGA members or add custom."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add delegate"}),u.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Country"}),u.jsxs("select",{value:l,onChange:v=>c(v.target.value),className:"min-w-[12rem] max-w-[20rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",children:[u.jsx("option",{value:"",children:" Select country "}),Yh.map(v=>u.jsx("option",{value:v,children:v},v)),u.jsx("option",{value:ei,children:" Other "})]})]}),l===ei&&u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Custom country"}),u.jsx("input",{type:"text",value:d,onChange:v=>f(v.target.value),placeholder:"e.g. Observer State",className:"w-40 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Name (optional)"}),u.jsx("input",{type:"text",value:m,onChange:v=>g(v.target.value),placeholder:"Delegate name",className:"w-40 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("button",{onClick:U,disabled:!z,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(wn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap items-center gap-2",children:u.jsx("button",{onClick:()=>w(!0),className:"px-3 py-1.5 rounded-lg bg-[var(--accent-soft)] text-[var(--accent)] text-sm font-medium hover:bg-[var(--accent-soft)]/80 transition-colors",children:"Add all UNGA members not in list"})})]}),T&&u.jsxs("div",{className:"rounded-xl border border-[var(--accent)] bg-[var(--accent-soft)] p-4 flex items-center justify-between flex-wrap gap-2",children:[u.jsx("p",{className:"text-sm text-[var(--text)]",children:"Add all 193 UNGA member states not yet in the list?"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>w(!1),className:"px-3 py-1.5 rounded-lg bg-[var(--bg-card)] text-sm",children:"Cancel"}),u.jsx("button",{onClick:b,className:"px-3 py-1.5 rounded-lg bg-[var(--accent)] text-white text-sm font-medium",children:"Add all"})]})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border)] flex items-center gap-2",children:[u.jsx(uu,{className:"w-4 h-4 text-[var(--text-muted)]"}),u.jsxs("span",{className:"text-sm font-medium text-[var(--text)]",children:[" Current delegates (",t.length,")"]})]}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-[28rem] overflow-auto",children:t.map(v=>{const I=o(v.id),_=Object.values(I).some(S=>S>=Qh),k=Object.values(I).reduce((S,me)=>S+me,0),j=R===v.id;return u.jsxs("li",{className:`px-4 py-3 flex flex-col gap-2 ${_?"bg-[var(--danger)]/10 border-l-4 border-[var(--danger)]":""}`,children:[u.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[u.jsxs("span",{className:"text-sm text-[var(--text)]",children:[u.jsx("strong",{className:"text-[var(--accent)]",children:v.country}),v.name&&u.jsxs("span",{className:"text-[var(--text-muted)] ml-2",children:[" ",v.name]}),k>0&&u.jsxs("span",{className:"ml-2 inline-flex items-center gap-1 text-xs",title:"Strikes",children:[u.jsx(wc,{className:`w-3.5 h-3.5 ${_?"text-[var(--danger)]":"text-[var(--accent)]"}`}),k]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>A(j?null:v.id),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors",title:"Add strike",children:u.jsx(wc,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>n(v.id),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)] transition-colors",title:"Remove delegate",children:u.jsx(hs,{className:"w-4 h-4"})})]})]}),Object.keys(I).length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 text-xs",children:Object.entries(I).map(([S,me])=>u.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-md ${me>=Qh?"bg-[var(--danger)]/20 text-[var(--danger)]":"bg-[var(--accent-soft)] text-[var(--accent)]"}`,children:[S,": ",me,u.jsx("button",{onClick:()=>i(v.id,S),className:"p-0.5 rounded hover:bg-black/10",title:"Remove one strike",children:u.jsx(Qp,{className:"w-3 h-3"})})]},S))}),j&&u.jsxs("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap gap-2 items-end",children:[u.jsxs("select",{value:C,onChange:S=>{const me=S.target.value;P(me),me&&(s(v.id,me),A(null),P(""),x(""))},className:"px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",children:[u.jsx("option",{value:"",children:" Select misbehaviour"}),M4.map(S=>u.jsx("option",{value:S,children:S},S))]}),u.jsx("input",{type:"text",value:E,onChange:S=>x(S.target.value),placeholder:"Or type custom",className:"w-36 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsx("button",{onClick:()=>{const S=E.trim();S&&(s(v.id,S),A(null),x(""),P(""))},disabled:!E.trim(),className:"px-3 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add strike (custom)"}),u.jsx("button",{onClick:()=>{A(null),x(""),P("")},className:"px-3 py-2 rounded-lg bg-[var(--bg-elevated)] text-[var(--text-muted)] text-sm",children:"Cancel"})]})]},v.id)})})]})]})}const F4=[{id:"mod-caucus",label:"Moderated caucus",type:"motion",template:t=>`Motion for moderated caucus for ${t.duration||"___"} on the topic of ${t.topic||"___"} with ${t.speakerTime||"___"} per speaker`,fields:[{key:"duration",label:"Total time",placeholder:"e.g. 10 minutes"},{key:"topic",label:"Topic",placeholder:"e.g. causes of conflict"},{key:"speakerTime",label:"Time per speaker",placeholder:"e.g. 45 seconds"}]},{id:"unmod-caucus",label:"Unmoderated caucus",type:"motion",template:t=>`Motion for unmoderated caucus for ${t.duration||"___"}`,fields:[{key:"duration",label:"Duration",placeholder:"e.g. 5 minutes"}]},{id:"open-speaker-list",label:"Open speaker list",type:"motion",template:()=>"Motion to open the speaker list",fields:[]},{id:"close-speaker-list",label:"Close speaker list",type:"motion",template:()=>"Motion to close the speaker list",fields:[]},{id:"point-order",label:"Point of order",type:"point",template:()=>"Point of order",fields:[]},{id:"point-information",label:"Point of information",type:"point",template:()=>"Point of information",fields:[]},{id:"point-personal",label:"Point of personal privilege",type:"point",template:()=>"Point of personal privilege",fields:[]}];function z4(){const{motions:t,addMotion:e,starMotion:n,setMotionStatus:r,startVote:s}=jt(),[i,o]=N.useState(""),[l,c]=N.useState("motion"),[d,f]=N.useState(!1),[m,g]=N.useState(null),[T,w]=N.useState({}),R=()=>{i.trim()&&(e(i.trim(),l),o(""))},A=P=>{g(P),w({}),c(P.type)},E=()=>{if(!m)return;const P=m.template(T);e(P,m.type),g(null),w({}),f(!1)},x=t.filter(P=>P.status==="active"),C=t.filter(P=>P.status!=="active");return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Motions & Points"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Record and star motions and points."})]}),u.jsxs("div",{className:"card-block p-4 space-y-3",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>c("motion"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${l==="motion"?"bg-[var(--accent-soft)] text-[var(--accent)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)]"}`,children:" Motion"}),u.jsx("button",{onClick:()=>c("point"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${l==="point"?"bg-[var(--accent-soft)] text-[var(--accent)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)]"}`,children:" Point"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:i,onChange:P=>o(P.target.value),onKeyDown:P=>P.key==="Enter"&&R(),placeholder:l==="motion"?"e.g. Motion to open the speaker list":"e.g. Point of order",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(wn,{className:"w-4 h-4"}),"  Add"]})]}),u.jsxs("div",{className:"border-t border-[var(--border)] pt-3 mt-3",children:[u.jsxs("button",{type:"button",onClick:()=>f(!d),className:"flex items-center gap-1.5 text-xs font-medium text-[var(--text-muted)] hover:text-[var(--accent)]",children:[d?u.jsx(m4,{className:"w-3.5 h-3.5"}):u.jsx(ou,{className:"w-3.5 h-3.5"}),"Preset options"]}),d&&u.jsxs("div",{className:"mt-2 space-y-2",children:[u.jsx("div",{className:"flex flex-wrap gap-1.5",children:F4.map(P=>u.jsx("button",{type:"button",onClick:()=>A(P),className:`px-2.5 py-1.5 rounded-md text-xs font-medium transition-colors ${(m==null?void 0:m.id)===P.id?"bg-[var(--accent)] text-white":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)] border border-[var(--border)]"}`,children:P.label},P.id))}),m&&u.jsxs("div",{className:"rounded-lg border border-[var(--border)] bg-[var(--bg-elevated)] p-3 space-y-2",children:[m.fields.length===0?u.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:m.template({})}):m.fields.map(P=>u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-0.5",children:P.label}),u.jsx("input",{type:"text",value:T[P.key]??"",onChange:z=>w(U=>({...U,[P.key]:z.target.value})),placeholder:P.placeholder,className:"w-full px-2.5 py-1.5 rounded-md bg-[var(--bg-card)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]},P.key)),u.jsxs("div",{className:"flex gap-2 pt-1",children:[u.jsxs("button",{type:"button",onClick:E,className:"px-3 py-1.5 rounded-md bg-[var(--accent)] text-white text-xs font-medium hover:opacity-90",children:["Add ",m.type==="motion"?"motion":"point"]}),u.jsx("button",{type:"button",onClick:()=>g(null),className:"px-3 py-1.5 rounded-md text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] text-xs font-medium",children:"Cancel"})]})]})]})]})]}),x.length>0&&u.jsxs("div",{className:"rounded-xl border border-[var(--accent)]/40 bg-[var(--accent-soft)]/30 p-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-3",children:" Active"}),u.jsx("ul",{className:"space-y-2",children:x.map(P=>u.jsxs("li",{className:"flex items-center gap-2 flex-wrap",children:[u.jsx("button",{onClick:()=>n(P.id),className:"p-1 rounded text-[var(--text-muted)] hover:text-[var(--accent)]",title:P.starred?"Unstar":"Star",children:u.jsx(tx,{className:`w-4 h-4 ${P.starred?"fill-[var(--accent)] text-[var(--accent)]":""}`})}),u.jsx("span",{className:"text-xs text-[var(--text-muted)] uppercase",children:P.type}),u.jsx("span",{className:"text-sm text-[var(--text)] flex-1",children:P.text}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>r(P.id,"passed"),className:"p-1.5 rounded-lg bg-[var(--success)]/20 text-[var(--success)] hover:bg-[var(--success)]/30",title:"Passed",children:u.jsx(Gp,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>r(P.id,"failed"),className:"p-1.5 rounded-lg bg-[var(--danger)]/20 text-[var(--danger)] hover:bg-[var(--danger)]/30",title:"Failed",children:u.jsx(du,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>r(P.id,"tabled"),className:"p-1.5 rounded-lg bg-[var(--text-muted)]/20 text-[var(--text-muted)]",title:"Tabled",children:u.jsx(Qp,{className:"w-4 h-4"})}),P.type==="motion"&&u.jsx("button",{onClick:()=>s(P.id),className:"px-2 py-1 rounded-lg bg-[var(--accent)] text-white text-xs font-medium",children:"Vote"})]})]},P.id))})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Log"})}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:[...C].reverse().map(P=>u.jsxs("li",{className:"px-4 py-3 flex items-start gap-2",children:[u.jsx("button",{onClick:()=>n(P.id),className:"p-1 rounded mt-0.5 text-[var(--text-muted)] hover:text-[var(--accent)] flex-shrink-0",children:u.jsx(tx,{className:`w-4 h-4 ${P.starred?"fill-[var(--accent)] text-[var(--accent)]":""}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] uppercase",children:P.type}),u.jsx("p",{className:"text-sm text-[var(--text)]",children:P.text}),u.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-[var(--text-muted)]",children:[u.jsx("span",{children:new Date(P.timestamp).toLocaleString()}),u.jsx("span",{className:"capitalize",children:P.status}),P.type==="motion"&&P.votes&&u.jsxs("span",{children:["Yes ",P.votes.yes," / No ",P.votes.no," / Abstain ",P.votes.abstain]})]})]})]},P.id))})]})]})}function ox(t){return t.rollCallStatus?t.rollCallStatus:t.present?"present":"absent"}function B4(){const{voteInProgress:t,delegates:e,delegateVotes:n,recordVote:r,endVote:s}=jt();if(!t)return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Voting"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Start a vote from a motion in Motions & Points."})]}),u.jsx("div",{className:"card-block p-8 text-center text-[var(--text-muted)]",children:' No active vote. Go to Motions & Points and click "Vote" on a motion.'})]});const i=Object.values(n).filter(m=>m==="yes").length,o=Object.values(n).filter(m=>m==="no").length,l=Object.values(n).filter(m=>m==="abstain").length,d=e.filter(m=>ox(m)!=="absent").length,f=Object.keys(n).length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Active Voting"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Record each delegate's vote."})]}),u.jsxs("div",{className:"rounded-xl border-2 border-[var(--accent)] bg-[var(--accent-soft)]/30 p-4",children:[u.jsx("p",{className:"text-sm font-medium text-[var(--text)] mb-2",children:" Motion:"}),u.jsx("p",{className:"text-[var(--text)]",children:t.text}),u.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[u.jsxs("span",{className:"text-[var(--success)]",children:["Yes: ",i]}),u.jsxs("span",{className:"text-[var(--danger)]",children:["No: ",o]}),u.jsxs("span",{className:"text-[var(--text-muted)]",children:["Abstain: ",l]}),u.jsxs("span",{className:"text-[var(--text-muted)]",children:["Recorded: ",f," / ",d]})]}),u.jsx("button",{onClick:s,className:"mt-4 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:"End vote & record result"})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Delegate votes"})}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:e.map(m=>{const g=n[m.id],T=ox(m),w=T==="absent",R=T==="present";return u.jsxs("li",{className:`px-4 py-3 flex items-center justify-between ${w?"opacity-60":""}`,children:[u.jsxs("span",{className:"text-sm text-[var(--text)]",children:[u.jsx("strong",{className:"text-[var(--accent)]",children:m.country}),m.name&&u.jsx("span",{className:"text-[var(--text-muted)] ml-2",children:m.name}),w&&u.jsx("span",{className:"ml-2 text-xs text-[var(--text-muted)]",children:"(Absent)"})]}),w?u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:""}):u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>r(m.id,"yes"),className:`p-2 rounded-lg transition-colors ${g==="yes"?"bg-[var(--success)]/30 text-[var(--success)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--success)]"}`,title:"Yes",children:u.jsx(Gp,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>r(m.id,"no"),className:`p-2 rounded-lg transition-colors ${g==="no"?"bg-[var(--danger)]/30 text-[var(--danger)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--danger)]"}`,title:"No",children:u.jsx(du,{className:"w-4 h-4"})}),R&&u.jsx("button",{onClick:()=>r(m.id,"abstain"),className:`p-2 rounded-lg transition-colors ${g==="abstain"?"bg-[var(--text-muted)]/30 text-[var(--text)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)]"}`,title:"Abstain (present only)",children:u.jsx(Qp,{className:"w-4 h-4"})})]})]},m.id)})})]})]})}const cr=[{value:"AL",label:"AL  Arab League"},{value:"ASEAN",label:"ASEAN  Association of Southeastern Asian Nations"},{value:"AU",label:"AU  African Union"},{value:"CCPCJ",label:"CCPCJ  Commission on Crime Prevention and Criminal Justice"},{value:"CERN",label:"CERN  European Organization for Nuclear Research"},{value:"CND",label:"CND  United Nations Commission on Narcotic Drugs"},{value:"CoM",label:"CoM  Council of Marvels (Fictional)"},{value:"CPD",label:"CPD  Commission on Population and Development"},{value:"CSTD",label:"CSTD  Commission on Science and Technology for Development"},{value:"DGC",label:"DGC  United Nations Department of Global Communications"},{value:"DISEC",label:"DISEC  Disarmament and International Security Committee (UNGA 1st)"},{value:"ECOFIN",label:"ECOFIN  Economic and Financial Committee (UNGA 2nd)"},{value:"ECOSOC",label:"ECOSOC  Economic and Social Council"},{value:"EP",label:"EP  European Parliament"},{value:"FAO",label:"FAO  Food and Agriculture Organization"},{value:"FIFA",label:"FIFA  Fdration Internationale de Football Association"},{value:"GA6",label:"GA6  Legal (UNGA 6th Committee)"},{value:"HRC",label:"HRC  Human Rights Council"},{value:"UNHRC",label:"UNHRC  Human Rights Council"},{value:"HSC",label:"HSC  Historical Security Council"},{value:"IAEA",label:"IAEA  International Atomic Energy Agency"},{value:"ICAO",label:"ICAO  International Civil Aviation Organisation"},{value:"ICC",label:"ICC  International Criminal Court"},{value:"ICC-Commerce",label:"ICC  International Chamber of Commerce"},{value:"ICJ",label:"ICJ  International Court of Justice"},{value:"ICRC",label:"ICRC  International Committee of the Red Cross"},{value:"ILO",label:"ILO  International Labour Organization"},{value:"IMF",label:"IMF  International Monetary Fund"},{value:"IMO",label:"IMO  International Maritime Organisation"},{value:"Interpol",label:"Interpol  International Criminal Police Organization"},{value:"IOPC",label:"IOPC  International Olympic and Paralympic Committee"},{value:"NATO",label:"NATO  North Atlantic Treaty Organization"},{value:"PBC",label:"PBC  Peacebuilding Commission"},{value:"PC",label:"PC  Press Corps"},{value:"UNSC",label:"SC / UNSC  Security Council"},{value:"SCSHT",label:"SCSHT  Special Conference on Slavery and Human Trafficking"},{value:"SOCHUM",label:"SOCHUM  Social, Cultural, and Humanitarian Committee (UNGA 3rd)"},{value:"SPECPOL",label:"SPECPOL  Special Political and Decolonization (UNGA 4th)"},{value:"UNCSA",label:"UNCSA  Commission on Superhuman Activities (Fictional)"},{value:"UNCTAD",label:"UNCTAD  United Nations Conference on Trade and Development"},{value:"UNEP",label:"UNEP  United Nations Environmental Program"},{value:"UNESCO",label:"UNESCO  UN Educational, Scientific, and Cultural Organization"},{value:"UNHCR",label:"UNHCR  UN High Commissioner for Refugees"},{value:"UNICEF",label:"UNICEF  United Nations Children's Fund"},{value:"UNIDO",label:"UNIDO  UN Industrial Development Organization"},{value:"UNISDR",label:"UNISDR  United Nations Office for Disaster Risk Reduction"},{value:"UNODC",label:"UNODC  United Nations Office on Drugs and Crime"},{value:"UNOOSA",label:"UNOOSA  United Nations Office for Outer Space Affairs"},{value:"UNPFII",label:"UNPFII  UN Permanent Forum on Indigenous Issues"},{value:"UN-Women",label:"UN Women  United Nations Entity for Gender Equality and the Empowerment of Women"},{value:"UNWTO",label:"UNWTO  World Tourism Organization"},{value:"US-Senate",label:"US Senate  United States Senate"},{value:"WFP",label:"WFP  World Food Program"},{value:"WHO",label:"WHO  World Health Organization"},{value:"WMO",label:"WMO  World Meteorological Organization"},{value:"WIPO",label:"WIPO  World Intellectual Property Organization"},{value:"WB",label:"WB  World Bank"},{value:"WTO",label:"WTO  World Trade Organization"},{value:"Crisis",label:"Crisis Committee"}];cr.map(t=>t.value);const dt="__OTHER__";function ax({onClose:t}){const{committee:e,topic:n,setCommittee:r,setTopic:s}=jt(),i=N.useMemo(()=>cr.find(c=>c.value===e)?e:e?dt:"",[e]),o=l=>{r(l===dt?"":l)};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"font-semibold text-lg text-[var(--text)]",children:" Committee & topic"}),t&&u.jsx("button",{onClick:t,className:"text-[var(--text-muted)] hover:text-[var(--text)] text-sm",children:"Close"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Set committee"}),u.jsxs("select",{value:i,onChange:l=>o(l.target.value),className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Committee",children:[u.jsx("option",{value:"",children:"Select committee"}),cr.map(l=>u.jsx("option",{value:l.value,children:l.label},l.value)),u.jsx("option",{value:dt,children:"Other (custom)"})]}),i===dt&&u.jsx("input",{type:"text",value:e,onChange:l=>r(l.target.value),placeholder:"e.g. Custom committee name",className:"mt-2 w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Custom committee name"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Topic"}),u.jsx("input",{type:"text",value:n,onChange:l=>s(l.target.value),placeholder:"e.g. Cybersecurity and International Peace",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]})]})}function $4(){const{motions:t}=jt(),e=t.filter(o=>o.status==="passed").length,n=t.filter(o=>o.status==="failed").length,r=t.filter(o=>o.status==="tabled").length,s=t.filter(o=>o.type==="motion").length,i=t.filter(o=>o.type==="point").length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Score"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Motions and points summary."})]}),u.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--success)]",children:e}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Passed"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--danger)]",children:n}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Failed"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--text-muted)]",children:r}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Tabled"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:t.length}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Total"})]})]}),u.jsxs("div",{className:"card-block p-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)] mb-2",children:" Breakdown"}),u.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["Motions: ",s,"  Points: ",i]})]})]})}function tl(t){return t.rollCallStatus?t.rollCallStatus:t.present?"present":"absent"}const H4={absent:"present",present:"present-and-voting","present-and-voting":"absent"},lx={absent:"Absent",present:"Present (may abstain)","present-and-voting":"Present and voting"};function W4(){const{delegates:t,rollCallComplete:e,setRollCallComplete:n,updateDelegate:r}=jt(),s=(f,m)=>{r(f,{rollCallStatus:m})},i=(f,m)=>{s(f,H4[m])},o=t.filter(f=>tl(f)==="present").length,l=t.filter(f=>tl(f)==="present-and-voting").length,c=t.filter(f=>tl(f)==="absent").length,d=o+l;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Roll Call Tracker"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Present (may abstain from voting), Present and voting (must vote, cannot abstain), or Absent. Click to cycle."})]}),u.jsx("div",{className:"flex items-center gap-3",children:u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:e,onChange:f=>n(f.target.checked),className:"rounded border-[var(--border)] bg-[var(--bg-elevated)] text-[var(--accent)] focus:ring-[var(--accent)]"}),u.jsx("span",{className:"text-sm text-[var(--text)]",children:"Roll call complete"})]})}),u.jsxs("div",{className:"card-block p-4 flex flex-wrap gap-4 text-sm",children:[u.jsxs("span",{className:"text-[var(--success)]",children:["Present (may abstain): ",u.jsx("strong",{children:o})]}),u.jsxs("span",{className:"text-[var(--accent)]",children:["Present and voting: ",u.jsx("strong",{children:l})]}),u.jsxs("span",{className:"text-[var(--text-muted)]",children:["Absent: ",u.jsx("strong",{children:c})]}),u.jsxs("span",{className:"text-[var(--text-muted)]",children:["Total present: ",u.jsx("strong",{children:d})," / ",t.length]})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Delegates"})}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:t.map(f=>{const m=tl(f),g=m==="present",T=m==="present-and-voting",w=m==="absent";return u.jsxs("li",{className:"px-4 py-3 flex items-center justify-between gap-2",children:[u.jsxs("span",{className:"text-sm text-[var(--text)] min-w-0",children:[u.jsx("strong",{className:"text-[var(--accent)]",children:f.country}),f.name&&u.jsx("span",{className:"text-[var(--text-muted)] ml-2",children:f.name})]}),u.jsxs("button",{onClick:()=>i(f.id,m),className:`flex items-center gap-1.5 text-xs px-2.5 py-1.5 rounded-lg transition-colors shrink-0 ${w?"text-[var(--text-muted)] bg-[var(--bg-elevated)] hover:bg-[var(--border)]":g?"text-[var(--success)] bg-[var(--success)]/10 hover:bg-[var(--success)]/20":"text-[var(--accent)] bg-[var(--accent-soft)] hover:bg-[var(--accent-soft)]/80"}`,title:lx[m],children:[w&&u.jsx(du,{className:"w-4 h-4"}),g&&u.jsx(Gp,{className:"w-4 h-4"}),T&&u.jsx(z1,{className:"w-4 h-4"}),lx[m]]})]},f.id)})})]}),u.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Click a delegate's status to cycle: Absent  Present (may abstain)  Present and voting  Absent."})]})}function q4(){const{sessionStarted:t,sessionStartTime:e,startSession:n,stopSession:r}=jt();return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Committee Session"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Start or stop the committee session."})]}),u.jsxs("div",{className:"card-block p-6 flex flex-col sm:flex-row items-center gap-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:`w-3 h-3 rounded-md ${t?"bg-[var(--success)] animate-pulse":"bg-[var(--text-muted)]"}`}),u.jsx("span",{className:"text-sm font-medium text-[var(--text)]",children:t?" Session in progress":" Session not started"})]}),e&&u.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Started: ",new Date(e).toLocaleString()]}),u.jsx("div",{className:"flex gap-3",children:t?u.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--danger)] text-white text-sm font-medium hover:opacity-90 transition-opacity",children:[u.jsx(cu,{className:"w-4 h-4"}),"  Stop session"]}):u.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--success)] text-white text-sm font-medium hover:opacity-90 transition-opacity",children:[u.jsx(L1,{className:"w-4 h-4"}),"  Start session"]})})]})]})}function G4(){const{delegates:t,speakers:e,activeSpeaker:n,speakerDuration:r,setSpeakerDuration:s,addToSpeakers:i,removeFromSpeakers:o,setActiveSpeaker:l}=jt(),[c,d]=N.useState(""),[f,m]=N.useState(0);N.useEffect(()=>{if(!(n!=null&&n.startTime))return;const w=setInterval(()=>{m(Math.floor((Date.now()-n.startTime)/1e3))},1e3);return()=>clearInterval(w)},[n==null?void 0:n.startTime,n==null?void 0:n.id]);const g=()=>{const w=t.find(R=>R.id===c);w&&(i(w.id,w.country,w.name||w.country),d(""))},T=n?Math.max(0,r-f):0;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Speakers"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Mod Speakers List, Active Speaker (Timed), Consultation Speakers."})]}),u.jsxs("div",{className:"rounded-xl border-2 border-[var(--accent)]/50 bg-[var(--accent-soft)]/30 p-4",children:[u.jsxs("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2 flex items-center gap-2",children:[u.jsx(lu,{className:"w-4 h-4"}),"  Active speaker"]}),n?u.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[u.jsxs("span",{className:"text-lg font-semibold text-[var(--text)]",children:[n.country,"  ",n.name]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx(Kp,{className:"w-4 h-4 text-[var(--text-muted)]"}),u.jsxs("span",{className:T===0?"text-[var(--danger)]":"text-[var(--text)]",children:[Math.floor(T/60),":",String(T%60).padStart(2,"0")," remaining"]})]}),u.jsx("button",{onClick:()=>l(null),className:"px-3 py-1.5 rounded-lg bg-[var(--bg-card)] text-sm text-[var(--text)] hover:bg-[var(--border)]",children:"End speech"})]}):u.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No active speaker. Start one from the list below."})]}),u.jsxs("div",{className:"card-block p-4 space-y-3",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Speaker duration (seconds)"}),u.jsx("input",{type:"number",min:30,max:300,value:r,onChange:w=>s(Number(w.target.value)||60),className:"w-24 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("div",{className:"card-block p-4 space-y-3",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add to speakers list"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsxs("select",{value:c,onChange:w=>d(w.target.value),className:"px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",children:[u.jsx("option",{value:"",children:"Select delegate"}),t.map(w=>u.jsxs("option",{value:w.id,children:[w.country," ",w.name?` ${w.name}`:""]},w.id))]}),u.jsxs("button",{onClick:g,disabled:!c,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(wn,{className:"w-4 h-4"})," Add"]})]})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Mod speakers list"})}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-80 overflow-auto",children:e.map((w,R)=>u.jsxs("li",{className:"px-4 py-3 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:"text-xs text-[var(--text-muted)] w-6",children:[R+1,"."]}),u.jsxs("span",{className:"text-sm text-[var(--text)]",children:[u.jsx("strong",{className:"text-[var(--accent)]",children:w.country}),"  ",w.name]}),w.speaking&&u.jsx("span",{className:"px-2 py-0.5 rounded bg-[var(--accent-soft)] text-[var(--accent)] text-xs font-medium",children:"Speaking"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[!w.speaking&&u.jsx("button",{onClick:()=>l(w),className:"px-2 py-1 rounded-lg bg-[var(--accent)] text-white text-xs font-medium hover:opacity-90",children:"Start"}),u.jsx("button",{onClick:()=>o(w.id),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)]",title:"Remove",children:u.jsx(hs,{className:"w-4 h-4"})})]})]},w.id))})]})]})}const K4=[{id:"slides",label:"Slides",icon:D1},{id:"speakers",label:"Speakers",icon:lu},{id:"facts",label:"Facts",icon:au},{id:"pathways",label:"Pathways",icon:C4}];function Q4(){const{crisisSlides:t,crisisSpeakers:e,crisisFacts:n,crisisPathways:r,addCrisisSlide:s,addCrisisSpeaker:i,addCrisisFact:o,addCrisisPathway:l}=jt(),[c,d]=N.useState("slides"),[f,m]=N.useState(""),g=()=>{f.trim()&&(c==="slides"&&s(f.trim()),c==="speakers"&&i(f.trim()),c==="facts"&&o(f.trim()),c==="pathways"&&l(f.trim()),m(""))},w={slides:t,speakers:e,facts:n,pathways:r}[c];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Crisis Dashboard"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Slides  Speakers  Facts  Pathways."})]}),u.jsx("div",{className:"flex gap-2 border-b border-[var(--border)] pb-2",children:K4.map(({id:R,label:A,icon:E})=>u.jsxs("button",{onClick:()=>d(R),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${c===R?"bg-[var(--accent-soft)] text-[var(--accent)]":"text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:[u.jsx(E,{className:"w-4 h-4"})," ",A]},R))}),u.jsxs("div",{className:"card-block p-4 space-y-3",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:f,onChange:R=>m(R.target.value),onKeyDown:R=>R.key==="Enter"&&g(),placeholder:c==="slides"?"Slide title or URL":c==="speakers"?"Speaker name":c==="facts"?"Fact":"Pathway description",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(wn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-64 overflow-auto",children:w.map((R,A)=>u.jsx("li",{className:"px-3 py-2 flex items-center justify-between text-sm text-[var(--text)]",children:R},A))})]})]})}const Y4=[{id:"position",label:" Position papers",icon:au},{id:"chair-report",label:" Chair reports",icon:qp},{id:"slides",label:" Slides (ceremony or crisis)",icon:D1},{id:"speeches",label:" Speeches",icon:lu},{id:"prep",label:" Prep document",icon:v4}];function J4(){const{archive:t,addToArchive:e}=jt(),[n,r]=N.useState("position"),[s,i]=N.useState(""),[o,l]=N.useState(""),c=()=>{s.trim()&&(e(n,s.trim(),o.trim()||void 0),i(""),l(""))};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Archive"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Position papers, chair reports, slides, speeches, prep docs."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add to archive"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:Y4.map(({id:d,label:f,icon:m})=>u.jsxs("button",{onClick:()=>r(d),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n===d?"bg-[var(--accent-soft)] text-[var(--accent)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)]"}`,children:[u.jsx(m,{className:"w-4 h-4"})," ",f]},d))}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"text",value:s,onChange:d=>i(d.target.value),placeholder:"Document name",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsx("textarea",{value:o,onChange:d=>l(d.target.value),placeholder:"Optional content or link",rows:2,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"}),u.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(wn,{className:"w-4 h-4"})," Add"]})]})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Archive"})}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:t.length===0?u.jsx("li",{className:"px-4 py-8 text-center text-[var(--text-muted)] text-sm",children:"No items in archive yet."}):t.slice().reverse().map((d,f)=>u.jsxs("li",{className:"px-4 py-3",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] uppercase",children:d.type}),u.jsx("p",{className:"text-sm font-medium text-[var(--text)]",children:d.name}),d.content&&u.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:d.content})]},f))})]})]})}const Td=[{id:"rollcall",label:"Roll call"},{id:"open-floor",label:"Open the floor (points & motions)"},{id:"recognize-motions",label:"Recognize motions"},{id:"vote-motions",label:"Vote on motion(s)"},{id:"engage-or-gsl",label:"Engage in chosen motion or move to GSL"},{id:"open-floor-again",label:"Open the floor again"},{id:"recognize-motions-2",label:"Recognize motions (repeat as needed)"},{id:"vote-motions-2",label:"Vote on motion(s)"},{id:"continue-cycle",label:"Continue cycle (engage motion / GSL  open floor)"}];function X4(){const{toggleFlowStep:t,isFlowStepDone:e,resetFlowChecklist:n}=jt(),r=Td.filter(s=>e(s.id)).length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Committee flow checklist"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Normal committee flow  tick steps as you go. Reset when starting a new session or cycle."})]}),u.jsxs("div",{className:"card-block p-4 space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[u.jsxs("span",{className:"text-xs font-medium text-[var(--text-muted)]",children:[r," / ",Td.length," done"]}),u.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[u.jsx(U1,{className:"w-3.5 h-3.5"}),"Reset checklist"]})]}),u.jsx("ul",{className:"space-y-1",children:Td.map(s=>{const i=e(s.id);return u.jsx("li",{children:u.jsxs("label",{className:`flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer transition-colors ${i?"bg-[var(--success)]/10 text-[var(--text)]":"hover:bg-[var(--bg-elevated)]"}`,children:[u.jsx("span",{className:"text-[var(--accent)] flex-shrink-0",children:i?u.jsx(fa,{className:"w-5 h-5 fill-[var(--success)] text-[var(--success)]"}):u.jsx(cu,{className:"w-5 h-5"})}),u.jsx("span",{className:`text-sm ${i?"line-through text-[var(--text-muted)]":"text-[var(--text)]"}`,children:s.label}),u.jsx("input",{type:"checkbox",checked:i,onChange:()=>t(s.id),className:"sr-only","aria-label":s.label})]})},s.id)})})]})]})}const cx=[{title:" Rules & procedure",steps:[{id:"prep-rules-read",label:"Read and understand committee rules of procedure"},{id:"prep-parliamentary",label:"Review parliamentary procedure (motions, points, voting)"},{id:"prep-time-limits",label:"Confirm speaking times and time limits"},{id:"prep-quorum",label:"Know quorum and voting requirements"}]},{title:" Committee & topic",steps:[{id:"prep-topic-research",label:"Research committee topic and background"},{id:"prep-study-guide",label:"Read study guide and key documents"},{id:"prep-committee-set",label:"Set committee name and topic in dashboard"},{id:"prep-agenda",label:"Prepare session agenda and flow"}]},{title:" Room & tech",steps:[{id:"prep-room-setup",label:"Set up digital room (delegates list, placards)"},{id:"prep-tech-check",label:"Tech check: platform, audio, screen share"},{id:"prep-backup",label:"Have backup plan if tech fails"}]},{title:" Materials & logistics",steps:[{id:"prep-rollcall-list",label:"Prepare roll call list and attendance"},{id:"prep-speakers-list",label:"Plan speakers list management"},{id:"prep-motions-templates",label:"Prepare common motions / points (if using templates)"},{id:"prep-timing",label:"Confirm session start time and breaks"}]},{title:" Crisis (if applicable)",steps:[{id:"prep-crisis-brief",label:"Review crisis elements and update slides"},{id:"prep-crisis-speakers",label:"Plan crisis speaker order / cues"},{id:"prep-crisis-pathways",label:"Prepare crisis pathways and facts"}]},{title:" Team & communication",steps:[{id:"prep-co-chair",label:"Coordinate with co-chair(s) on roles"},{id:"prep-staff",label:"Confirm staff / dais support and cues"},{id:"prep-delegate-brief",label:"Prepare brief for delegates (rules, timing)"}]}];function Z4(){const{togglePrepStep:t,isPrepStepDone:e,resetPrepChecklist:n}=jt(),r=cx.flatMap(i=>i.steps),s=r.filter(i=>e(i.id)).length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Chair preparation checklist"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Before the conference: rules, topic, room, materials, and team. Reset when prepping a new session."})]}),u.jsxs("div",{className:"card-block p-4 flex items-center justify-between gap-2 mb-4",children:[u.jsxs("span",{className:"text-xs font-medium text-[var(--text-muted)]",children:[s," / ",r.length," done"]}),u.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[u.jsx(U1,{className:"w-3.5 h-3.5"}),"Reset checklist"]})]}),u.jsx("div",{className:"space-y-5",children:cx.map(i=>u.jsxs("div",{className:"card-block p-4",children:[u.jsx("h3",{className:"font-medium text-[var(--text)] mb-3",children:i.title}),u.jsx("ul",{className:"space-y-1",children:i.steps.map(o=>{const l=e(o.id);return u.jsx("li",{children:u.jsxs("label",{className:`flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer transition-colors ${l?"bg-[var(--success)]/10 text-[var(--text)]":"hover:bg-[var(--bg-elevated)]"}`,children:[u.jsx("span",{className:"text-[var(--accent)] flex-shrink-0",children:l?u.jsx(fa,{className:"w-5 h-5 fill-[var(--success)] text-[var(--success)]"}):u.jsx(cu,{className:"w-5 h-5"})}),u.jsx("span",{className:`text-sm ${l?"line-through text-[var(--text-muted)]":"text-[var(--text)]"}`,children:o.label}),u.jsx("input",{type:"checkbox",checked:l,onChange:()=>t(o.id),className:"sr-only","aria-label":o.label})]})},o.id)})})]},i.title))})]})}const Yp=[{category:"Documents & articles",sources:[{name:"UN Official Document System (ODS)",url:"https://documents.un.org/"},{name:"UN Digital Library",url:"https://digitallibrary.un.org/"},{name:"UN News",url:"https://news.un.org/"},{name:"UN Yearbook",url:"https://www.un.org/en/yearbook/"},{name:"UN Press",url:"https://press.un.org/"}]},{category:"Legislation & treaties",sources:[{name:"UN Treaty Collection",url:"https://treaties.un.org/"},{name:"UN Audiovisual Library of International Law",url:"https://legal.un.org/avl/"},{name:"UNCITRAL (International Trade Law)",url:"https://uncitral.un.org/"},{name:"UN Charter",url:"https://www.un.org/en/about-us/un-charter"}]},{category:"Main bodies",sources:[{name:"UN General Assembly",url:"https://www.un.org/ga/"},{name:"UN Security Council",url:"https://www.un.org/securitycouncil/"},{name:"UN ECOSOC",url:"https://www.un.org/ecosoc/"},{name:"International Court of Justice (ICJ)",url:"https://www.icj-cij.org/"},{name:"UN Secretariat",url:"https://www.un.org/sg/"},{name:"UN Trusteeship Council",url:"https://www.un.org/en/about-us/trusteeship-council"}]},{category:"Programmes & funds",sources:[{name:"UNDP",url:"https://www.undp.org/"},{name:"UNICEF",url:"https://www.unicef.org/"},{name:"UNHCR",url:"https://www.unhcr.org/"},{name:"WFP (World Food Programme)",url:"https://www.wfp.org/"},{name:"UNFPA",url:"https://www.unfpa.org/"},{name:"UN Environment Programme (UNEP)",url:"https://www.unep.org/"},{name:"UN Women",url:"https://www.unwomen.org/"},{name:"UN-Habitat",url:"https://unhabitat.org/"}]},{category:"Specialized agencies & related",sources:[{name:"WHO",url:"https://www.who.int/"},{name:"UNESCO",url:"https://www.unesco.org/"},{name:"IOM (International Organization for Migration)",url:"https://www.iom.int/"},{name:"UN Office on Drugs and Crime (UNODC)",url:"https://www.unodc.org/"},{name:"UN Office for Disarmament Affairs (UNODA)",url:"https://www.un.org/disarmament/"},{name:"UN Human Rights (OHCHR)",url:"https://www.ohchr.org/"},{name:"World Bank",url:"https://www.worldbank.org/"},{name:"IMF",url:"https://www.imf.org/"},{name:"ILO",url:"https://www.ilo.org/"},{name:"FAO",url:"https://www.fao.org/"}]},{category:"Peacekeeping & missions",sources:[{name:"UN Peacekeeping",url:"https://peacekeeping.un.org/"},{name:"UN Peacekeeping  current missions",url:"https://peacekeeping.un.org/en/missions"},{name:"UN Special Political Missions",url:"https://dppa.un.org/en/special-political-missions"}]},{category:"Founders & members",sources:[{name:"UN Member States",url:"https://www.un.org/en/about-us/member-states"},{name:"UN System (founders & members)",url:"https://www.un.org/en/about-us/un-system"},{name:"UN History",url:"https://www.un.org/en/about-us/history"}]}],H1=Yp.flatMap(t=>t.sources);function Jp({compact:t=!1,showHeading:e=!0}){return u.jsxs("div",{className:"space-y-4",children:[e&&u.jsxs("div",{children:[u.jsx("h2",{className:"section-heading text-[var(--text)] mb-0.5",children:" Official UN links"}),u.jsx("p",{className:"text-[var(--text-muted)] text-xs sm:text-sm",children:"Documents, treaties, main bodies, programmes, missions, and member info. Open in new tab."})]}),u.jsx("div",{className:t?"space-y-3":"space-y-5",children:Yp.map(({category:n,sources:r})=>u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wide mb-1.5 sm:mb-2",children:n}),u.jsx("ul",{className:t?"flex flex-wrap gap-1.5":"flex flex-wrap gap-2",children:r.map(({name:s,url:i})=>u.jsx("li",{children:u.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:`inline-block rounded-md border border-[var(--border)] bg-[var(--bg-elevated)] text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors ${t?"px-2 py-1 text-xs":"px-2.5 py-1.5 text-sm"}`,children:[s," "]})},s))})]},n))})]})}const W1="seamuns-dashboard-sidebar-expanded";function eD(){try{const t=localStorage.getItem(W1);return t===null?!0:t==="true"}catch{return!0}}const tD=[{id:"prep",label:" Prep checklist",icon:_4},{id:"flow",label:" Flow checklist",icon:fa},{id:"room",label:" Digital Room",icon:x4},{id:"delegates",label:" Delegates",icon:F1},{id:"motions",label:" Motions & Points",icon:au},{id:"voting",label:" Voting",icon:z1},{id:"committee",label:" Committee & Topic",icon:qp},{id:"score",label:" Score",icon:Zy},{id:"rollcall",label:" Roll Call",icon:Zy},{id:"session",label:" Session",icon:L1},{id:"speakers",label:" Speakers",icon:lu},{id:"crisis",label:" Crisis",icon:wc},{id:"archive",label:" Archive",icon:f4},{id:"links",label:" Official links",icon:Kh}];function nD(){const[t,e]=N.useState("prep"),[n,r]=N.useState(!1),[s,i]=N.useState(eD);N.useEffect(()=>{localStorage.setItem(W1,String(s))},[s]);const o=()=>i(l=>!l);return u.jsxs("div",{className:"flex flex-col lg:flex-row min-h-[calc(100vh-3rem)] sm:min-h-[calc(100vh-3.5rem)] lg:min-h-[calc(100vh-4rem)]",children:[u.jsx("aside",{className:`border-b lg:border-b-0 lg:border-r border-[var(--border)] bg-[var(--bg-elevated)] flex-shrink-0 overflow-x-auto overflow-y-hidden transition-[width] duration-200 ${s?"lg:w-max lg:min-w-[11rem] lg:max-w-[14rem]":"lg:w-10"}`,children:u.jsxs("div",{className:"flex lg:flex-col gap-0.5 p-1 sm:p-1.5 items-stretch lg:items-stretch",children:[tD.map(({id:l,label:c,icon:d})=>u.jsxs("button",{onClick:()=>e(l),title:c,className:`flex items-center gap-1.5 px-2 py-1.5 rounded-md text-xs font-medium transition-colors text-left whitespace-nowrap min-w-0 shrink-0 ${s?"w-full lg:w-max lg:min-w-0":"w-full lg:justify-center lg:px-1.5 lg:w-full"} ${t===l?"bg-[var(--accent)] text-white shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:[u.jsx(d,{className:"w-3.5 h-3.5 flex-shrink-0"}),u.jsx("span",{className:s?"lg:whitespace-nowrap":"truncate lg:sr-only lg:overflow-hidden lg:w-0",children:c})]},l)),u.jsxs("button",{onClick:()=>r(!n),title:"Settings",className:`flex items-center gap-1.5 px-2 py-1.5 rounded-md text-xs text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] mt-auto shrink-0 ${s?"w-full lg:w-max lg:min-w-0":"w-full lg:justify-center lg:px-1.5 lg:w-full"}`,children:[u.jsx(A4,{className:"w-3.5 h-3.5"}),u.jsx("span",{className:s?"lg:whitespace-nowrap":"truncate lg:sr-only lg:overflow-hidden lg:w-0",children:" Settings"})]}),u.jsxs("button",{type:"button",onClick:o,title:s?"Collapse sidebar":"Expand sidebar",className:"hidden lg:flex items-center justify-center gap-1.5 px-1.5 py-1.5 rounded-md text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors w-max",children:[s?u.jsx(M1,{className:"w-4 h-4 flex-shrink-0"}):u.jsx(V1,{className:"w-4 h-4 flex-shrink-0"}),s&&u.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:"Hide labels"})]})]})}),u.jsxs("main",{className:"flex-1 p-2 sm:p-3 md:p-5 overflow-auto min-w-0",children:[n&&u.jsx("div",{className:"mb-6 p-4 card-block",children:u.jsx(ax,{onClose:()=>r(!1)})}),t==="prep"&&u.jsx(Z4,{}),t==="flow"&&u.jsx(X4,{}),t==="room"&&u.jsx(L4,{}),t==="delegates"&&u.jsx(U4,{}),t==="motions"&&u.jsx(z4,{}),t==="voting"&&u.jsx(B4,{}),t==="committee"&&u.jsx(ax,{}),t==="score"&&u.jsx($4,{}),t==="rollcall"&&u.jsx(W4,{}),t==="session"&&u.jsx(q4,{}),t==="speakers"&&u.jsx(G4,{}),t==="crisis"&&u.jsx(Q4,{}),t==="archive"&&u.jsx(J4,{}),t==="links"&&u.jsx("div",{className:"card-block p-4 sm:p-6",children:u.jsx(Jp,{showHeading:!0})})]})]})}function rD(){return u.jsxs(D4,{children:[u.jsxs("div",{className:"border-b border-[var(--border)] bg-[var(--bg-elevated)] px-3 sm:px-4 py-2 sm:py-3 flex items-center gap-2 sm:gap-3 shadow-[0_1px_0_0_var(--border)]",children:[u.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-[var(--accent-soft)] flex items-center justify-center flex-shrink-0",children:u.jsx(O1,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--accent)]"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("h1",{className:"page-title text-[var(--text)] whitespace-nowrap truncate",children:" Chair Room"}),u.jsx("p",{className:"text-xs sm:text-sm text-[var(--text-muted)] whitespace-nowrap truncate",children:" Digital Room   Motions   Voting   Speakers"})]})]}),u.jsx(nD,{})]})}const q1="delegateData";async function sD(t){if(!_c)return null;const e=v1(_c,q1,t),n=await QO(e);return n.exists()?n.data():null}async function iD(t,e){if(!_c)return;const n=v1(_c,q1,t);await JO(n,e)}function oD(t){const e=t.committeeMatrix&&Object.keys(t.committeeMatrix).length>0,n=t.committeeMatrixEntries&&t.committeeMatrixEntries.length>0;return{...t,committeeCount:t.committeeCount??0,committees:t.committees??[],committeeMatrixEntries:e&&!n&&t.committeeMatrix?Object.entries(t.committeeMatrix).map(([s,i])=>({committee:s,firstName:i,delegation:""})):t.committeeMatrixEntries??[],checklist:{...G1,...t.checklist||{}}}}const G1={positionPaper:!1,researchTopic:!1,researchCountryStance:!1,researchResolutions:!1,researchAllies:!1,researchNews:!1,positionPaperDraft:!1,positionPaperFinal:!1,positionPaperSubmit:!1,openingSpeechDraft:!1,openingSpeechTimed:!1,openingSpeech:!1,modSpeeches:!1,modCaucusPoints:!1,knowRules:!1,knowAgenda:!1,materialsReady:!1},Il=t=>({id:t,name:"New Conference",country:"",stanceOverview:"",committeeCount:0,committees:[],committeeMatrixEntries:[],countdownDate:"",checklist:{...G1},trustedSources:[],nationSources:[],uploadedResources:[]});function Sl(){var t;return((t=crypto.randomUUID)==null?void 0:t.call(crypto))??`conf-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}const K1=N.createContext(null);function aD(t,e){const n=t.find(r=>r.id===e);return n||(t.length>0?t[0]:Il(Sl()))}function lD({children:t,userId:e=null}){var J;const[n,r]=N.useState(()=>[Il(Sl())]),[s,i]=N.useState(()=>{var $;return(($=n[0])==null?void 0:$.id)??""}),[o,l]=N.useState(!1),[c,d]=N.useState(null),[f,m]=N.useState(!1),g=s||((J=n[0])==null?void 0:J.id),T=aD(n,g??"");N.useEffect(()=>{!g&&n[0]&&i(n[0].id)},[g,n]),N.useEffect(()=>{if(!e){m(!0);return}let $=!1;return sD(e).then(D=>{$||!D||D.conferences.length>0&&(r(D.conferences.map(oD)),i(D.activeConferenceId||D.conferences[0].id))}).catch(()=>{}).finally(()=>{$||m(!0)}),()=>{$=!0}},[e]);const w=N.useCallback($=>{r(D=>{const V=D.findIndex(se=>se.id===g);if(V<0)return D;const B=[...D];return B[V]=$(D[V]),B})},[g]),R=N.useCallback($=>w(D=>({...D,name:$})),[w]),A=N.useCallback($=>w(D=>({...D,country:$})),[w]),E=N.useCallback($=>w(D=>({...D,stanceOverview:$})),[w]),x=N.useCallback($=>w(D=>({...D,committeeCount:Math.max(0,Math.min(20,$))})),[w]),C=N.useCallback($=>w(D=>({...D,committees:$})),[w]),P=N.useCallback($=>w(D=>({...D,committeeMatrixEntries:[...D.committeeMatrixEntries??[],$]})),[w]),z=N.useCallback($=>w(D=>({...D,committeeMatrixEntries:(D.committeeMatrixEntries??[]).filter((V,B)=>B!==$)})),[w]),U=N.useCallback($=>w(D=>({...D,countdownDate:$})),[w]),b=N.useCallback($=>w(D=>({...D,checklist:{...D.checklist,[$]:!D.checklist[$]}})),[w]),v=N.useCallback($=>w(D=>({...D,trustedSources:[...D.trustedSources,$]})),[w]),I=N.useCallback($=>w(D=>({...D,trustedSources:D.trustedSources.filter((V,B)=>B!==$)})),[w]),_=N.useCallback($=>w(D=>({...D,nationSources:[...D.nationSources,$]})),[w]),k=N.useCallback($=>w(D=>({...D,nationSources:D.nationSources.filter((V,B)=>B!==$)})),[w]),j=N.useCallback(($,D)=>w(V=>({...V,uploadedResources:[...V.uploadedResources,{name:$,url:D}]})),[w]),S=N.useCallback($=>w(D=>({...D,uploadedResources:D.uploadedResources.filter((V,B)=>B!==$)})),[w]),me=N.useCallback(()=>{const $=Sl(),D=Il($);r(V=>[...V,D]),i($)},[]),Ht=N.useCallback($=>{var se,_e;const D=n.filter(lt=>lt.id!==$),V=D.length>0?D:[Il(Sl())],B=g===$?((se=V[0])==null?void 0:se.id)??"":g??((_e=V[0])==null?void 0:_e.id)??"";r(V),i(B)},[n,g]),En=N.useCallback($=>{i($)},[]),Tt=N.useCallback(async()=>{var $;if(e){l(!0);try{await iD(e,{conferences:n,activeConferenceId:g??(($=n[0])==null?void 0:$.id)??""}),d(new Date)}finally{l(!1)}}},[e,n,g]),q={...T,conferences:n,activeConferenceId:g??"",setName:R,setCountry:A,setStanceOverview:E,setCommitteeCount:x,setCommittees:C,addCommitteeMatrixEntry:P,removeCommitteeMatrixEntry:z,setCountdownDate:U,toggleChecklist:b,addTrustedSource:v,removeTrustedSource:I,addNationSource:_,removeNationSource:k,addUploadedResource:j,removeUploadedResource:S,addConference:me,removeConference:Ht,setActiveConference:En,saveToAccount:Tt,isSaving:o,lastSaved:c,isLoaded:f};return u.jsx(K1.Provider,{value:q,children:t})}function Lr(){const t=N.useContext(K1);if(!t)throw new Error("useDelegate must be used within DelegateProvider");return t}function cD(){const{name:t,country:e,stanceOverview:n,setName:r,setCountry:s,setStanceOverview:i}=Lr();return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Country Assignment"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Your country and brief stance overview for this conference."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Conference name"}),u.jsx("input",{type:"text",value:t,onChange:o=>r(o.target.value),placeholder:"e.g. NMUN 2025",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Country"}),u.jsx("input",{type:"text",value:e,onChange:o=>s(o.target.value),placeholder:"e.g. France, United Kingdom",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Brief stance overview"}),u.jsx("textarea",{value:n,onChange:o=>i(o.target.value),placeholder:"Summarize your country's position on the committee topic(s)...",rows:5,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]})]})]})}function uD(t){if(t===dt)return"Other";const e=cr.find(n=>n.value===t);return e?e.label:t}function dD(){const{committeeCount:t,committees:e,setCommitteeCount:n,setCommittees:r,committeeMatrixEntries:s,addCommitteeMatrixEntry:i,removeCommitteeMatrixEntry:o}=Lr(),[l,c]=N.useState(""),[d,f]=N.useState(""),[m,g]=N.useState(""),[T,w]=N.useState(""),[R,A]=N.useState(""),[E,x]=N.useState({}),C=Math.max(0,Math.min(20,t)),P=e.length>0?e:Array.from({length:C},(_,k)=>E[k]??""),z=_=>{const k=Math.max(0,Math.min(20,_));n(k),k<e.length?r(e.slice(0,k)):k>e.length&&r([...e,...Array(k-e.length).fill("")])},U=(_,k)=>{const j=[...P];j[_]=k===dt?dt:k,r(j)},b=(_,k)=>{x(S=>({...S,[_]:k}));const j=[...e];j.length<=_||(j[_]=k,r(j))},v=()=>{const _=l===dt?d.trim():l,k=T===ei?R.trim():T;!_||!m.trim()||(i({committee:_,firstName:m.trim(),delegation:k||""}),c(""),f(""),g(""),w(""),A(""))},I=_=>_===dt?"Other":uD(_);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Committee Matrix"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Set how many committees for this conference, which committees, then add delegates (first name + delegation)."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Conference committees"}),u.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"When registering this conference: how many committees, and which ones?"}),u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"How many committees?"}),u.jsx("input",{type:"number",min:0,max:20,value:C,onChange:_=>z(parseInt(_.target.value,10)||0),className:"w-24 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Number of committees"})]}),C>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block",children:"Which committees?"}),Array.from({length:C},(_,k)=>u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsxs("span",{className:"text-xs text-[var(--text-muted)] w-20",children:["Committee ",k+1]}),u.jsxs("select",{value:P[k]&&cr.some(j=>j.value===P[k])?P[k]:P[k]?dt:"",onChange:j=>U(k,j.target.value),className:"min-w-[12rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":`Committee ${k+1}`,children:[u.jsx("option",{value:"",children:"Select"}),cr.map(j=>u.jsx("option",{value:j.value,children:j.label},j.value)),u.jsx("option",{value:dt,children:"Other (custom)"})]}),(P[k]===dt||P[k]&&!cr.some(j=>j.value===P[k]))&&u.jsx("input",{type:"text",value:P[k]&&P[k]!==dt?P[k]:E[k]??"",onChange:j=>b(k,j.target.value),placeholder:"Committee name",className:"min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]},k))]})]}),u.jsxs("div",{className:"card-block p-4 space-y-3",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add entry"}),u.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Committee"}),u.jsxs("select",{value:l,onChange:_=>c(_.target.value),className:"min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Committee",children:[u.jsx("option",{value:"",children:"Select committee"}),P.filter(Boolean).map((_,k)=>u.jsx("option",{value:_,children:I(_)},k)),P.filter(Boolean).length===0&&u.jsxs(u.Fragment,{children:[cr.map(_=>u.jsx("option",{value:_.value,children:_.label},_.value)),u.jsx("option",{value:dt,children:"Other (custom)"})]})]}),l===dt&&u.jsx("input",{type:"text",value:d,onChange:_=>f(_.target.value),placeholder:"Committee name",className:"mt-1 min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"First name"}),u.jsx("input",{type:"text",value:m,onChange:_=>g(_.target.value),placeholder:"e.g. Alex",className:"w-28 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("label",{className:"flex flex-col gap-1",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Delegation"}),u.jsxs("select",{value:T,onChange:_=>w(_.target.value),className:"min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Delegation",children:[u.jsx("option",{value:"",children:"Select"}),Yh.map(_=>u.jsx("option",{value:_,children:_},_)),u.jsx("option",{value:ei,children:"Other"})]}),T===ei&&u.jsx("input",{type:"text",value:R,onChange:_=>A(_.target.value),placeholder:"Delegation name",className:"mt-1 min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(wn,{className:"w-4 h-4"})," Add"]})]})]}),u.jsxs("div",{className:"card-block overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Matrix"})}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-[var(--border)] bg-[var(--bg-elevated)]",children:[u.jsx("th",{className:"text-left px-4 py-2 font-medium text-[var(--text-muted)]",children:"Committee"}),u.jsx("th",{className:"text-left px-4 py-2 font-medium text-[var(--text-muted)]",children:"First name"}),u.jsx("th",{className:"text-left px-4 py-2 font-medium text-[var(--text-muted)]",children:"Delegation"}),u.jsx("th",{className:"w-10 px-2 py-2","aria-label":"Remove"})]})}),u.jsx("tbody",{children:s.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-[var(--text-muted)]",children:"No entries yet."})}):s.map((_,k)=>u.jsxs("tr",{className:"border-b border-[var(--border)]",children:[u.jsx("td",{className:"px-4 py-3 text-[var(--accent)] font-medium",children:I(_.committee)}),u.jsx("td",{className:"px-4 py-3 text-[var(--text)]",children:_.firstName}),u.jsx("td",{className:"px-4 py-3 text-[var(--text)]",children:_.delegation||""}),u.jsx("td",{className:"px-2 py-3",children:u.jsx("button",{type:"button",onClick:()=>o(k),className:"p-1.5 rounded text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)]","aria-label":"Remove entry",children:u.jsx(hs,{className:"w-4 h-4"})})})]},k))})]})})]})]})}const Q1="https://docs.google.com/document/d/1SuV8e971dG78pm6_P6Z62MZQTjRKgBn2lyclq148Ifw/edit?usp=sharing";function hD(){const{country:t}=Lr();return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Prep Template"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Use this template to structure your research and speaking prep."})]}),u.jsxs("div",{className:"card-block p-4 sm:p-5 border-2 border-[var(--accent)]/30 bg-[var(--accent-soft)]/50",children:[u.jsxs("h3",{className:"text-sm font-medium text-[var(--text)] mb-1 flex items-center gap-2",children:[u.jsx(g4,{className:"w-4 h-4 text-[var(--accent)]"}),"Make a copy to guide your prep"]}),u.jsxs("p",{className:"text-sm text-[var(--text-muted)] mb-3",children:["Open the MUN Prep Template in Google Docs, then use ",u.jsx("strong",{children:"File  Make a copy"})," to create your own copy for research and speaking prep."]}),u.jsxs("a",{href:Q1,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 transition-opacity",children:[u.jsx(j1,{className:"w-4 h-4"}),"Open MUN Prep Template (Google Doc)"]})]}),u.jsxs("div",{className:"card-block p-6 space-y-4",children:[u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Country"}),u.jsx("p",{className:"text-sm text-[var(--text)]",children:t||""})]}),u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Topic research"}),u.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Key facts, UN resolutions, recent developments."}),u.jsx("textarea",{placeholder:"Notes...",rows:4,className:"mt-2 w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]}),u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Country stance"}),u.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"How your country views the topic; red lines and priorities."}),u.jsx("textarea",{placeholder:"Notes...",rows:4,className:"mt-2 w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]}),u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Opening speech (draft)"}),u.jsx("textarea",{placeholder:"Draft opening statement...",rows:5,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]}),u.jsxs("section",{children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Mod speeches (optional)"}),u.jsx("textarea",{placeholder:"Talking points for moderated caucus...",rows:3,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]})]})]})}const Y1=["Reuters","BBC News","Al Jazeera","Associated Press (AP)","The Guardian","Council on Foreign Relations (CFR)","Human Rights Watch","Amnesty International"],ux=[...H1.map(t=>t.name),...Y1],fD=Object.fromEntries(H1.map(t=>[t.name,t.url])),pD={health:["WHO","UN News"],disease:["WHO","UN News"],refugee:["UNHCR","UN News","Amnesty International"],refugees:["UNHCR","UN News","Amnesty International"],migration:["UNHCR","UN News","IOM (International Organization for Migration)"],climate:["UN News","UN Environment Programme (UNEP)","Reuters","The Guardian"],environment:["UN News","UN Environment Programme (UNEP)","Reuters","The Guardian"],economy:["World Bank","IMF","UN News"],economic:["World Bank","IMF","UN News"],finance:["IMF","World Bank"],rights:["Human Rights Watch","Amnesty International","UN News","UN Human Rights (OHCHR)"],"human-rights":["Human Rights Watch","Amnesty International","UN News","UN Human Rights (OHCHR)"],conflict:["Reuters","BBC News","Council on Foreign Relations (CFR)","UN News","UN Peacekeeping"],security:["Reuters","BBC News","Council on Foreign Relations (CFR)","UN News","UN Security Council"],peace:["UN News","UN Peacekeeping","Reuters","BBC News"],education:["UN News","UNESCO"],women:["UN News","Amnesty International","UN Women"],gender:["UN News","Amnesty International","UN Women"],disarmament:["UN News","UN Office for Disarmament Affairs (UNODA)","Reuters"],arms:["UN News","UN Office for Disarmament Affairs (UNODA)","Reuters"],drugs:["UN Office on Drugs and Crime (UNODC)","UN News"],crime:["UN Office on Drugs and Crime (UNODC)","UN News"],treaties:["UN Treaty Collection","UN Official Document System (ODS)","UN Audiovisual Library of International Law"],documents:["UN Official Document System (ODS)","UN Digital Library","UN Treaty Collection"],food:["WFP (World Food Programme)","FAO","UN News"],labour:["ILO","UN News"],habitat:["UN-Habitat","UN News"],charter:["UN Charter","UN Official Document System (ODS)"],missions:["UN Peacekeeping","UN Peacekeeping  current missions","UN Special Political Missions"]};function mD(t){const e=t.toLowerCase().trim().split(/\s+/).filter(Boolean);if(e.length===0)return[];const n=new Set;for(const i of e){const o=[];for(const[c,d]of Object.entries(pD))(c.includes(i)||i.includes(c))&&o.push(...d);const l=ux.filter(c=>c.toLowerCase().includes(i));[...o,...l].forEach(c=>n.add(c))}const r=e.join(" ");return ux.filter(i=>i.toLowerCase().includes(r)).forEach(i=>n.add(i)),Array.from(n)}function gD(){const{trustedSources:t,nationSources:e,addTrustedSource:n,removeTrustedSource:r,addNationSource:s,removeNationSource:i}=Lr(),[o,l]=N.useState(""),[c,d]=N.useState(""),[f,m]=N.useState(""),g=N.useMemo(()=>mD(f),[f]),T=()=>{o.trim()&&(n(o.trim()),l(""))},w=()=>{c.trim()&&(s(c.trim()),d(""))},R=A=>{t.includes(A)||n(A)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Trusted & Nation Sources"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Trusted sources and nation-specific sources for research."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Search by key terms (topic-related)"}),u.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Enter terms related to your topic (e.g. health, refugees, climate, economy) to see suggested sources."}),u.jsx("div",{className:"flex gap-2",children:u.jsxs("div",{className:"relative flex-1",children:[u.jsx(N4,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--text-muted)] pointer-events-none"}),u.jsx("input",{type:"text",value:f,onChange:A=>m(A.target.value),placeholder:"e.g. health refugees climate",className:"w-full pl-9 pr-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]})}),g.length>0&&u.jsxs("div",{className:"rounded-lg border border-[var(--border)] bg-[var(--bg-elevated)] p-3",children:[u.jsx("p",{className:"text-xs font-medium text-[var(--text-muted)] mb-2",children:"Suggested sources for your topic"}),u.jsx("div",{className:"flex flex-wrap gap-1.5",children:g.map(A=>u.jsxs("button",{type:"button",onClick:()=>R(A),disabled:t.includes(A),className:"px-2.5 py-1 rounded-md text-xs font-medium transition-colors bg-[var(--accent-soft)] text-[var(--accent)] hover:opacity-90 border border-[var(--accent)]/30 disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",A]},A))})]}),u.jsx("h3",{className:"text-sm font-medium text-[var(--text)] pt-2 border-t border-[var(--border)]",children:" Trusted sources"}),u.jsx("p",{className:"text-xs text-[var(--text-muted)] mb-2",children:"Official UN links by category (click to add; open link in new tab)."}),Yp.map(({category:A,sources:E})=>u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wide mb-1.5",children:A}),u.jsx("div",{className:"flex flex-wrap gap-1.5",children:E.map(({name:x,url:C})=>u.jsxs("span",{className:"inline-flex items-center gap-1",children:[u.jsxs("button",{type:"button",onClick:()=>R(x),disabled:t.includes(x),className:"px-2.5 py-1 rounded-md text-xs font-medium transition-colors bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--accent-soft)] border border-[var(--border)] disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",x]}),u.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--accent)] hover:underline text-xs",title:"Open in new tab",children:""})]},x))})]},A)),u.jsx("h4",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wide mb-1.5 mt-4",children:"Other trusted"}),u.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:Y1.map(A=>u.jsxs("button",{type:"button",onClick:()=>R(A),disabled:t.includes(A),className:"px-2.5 py-1 rounded-md text-xs font-medium transition-colors bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--accent-soft)] border border-[var(--border)] disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",A]},A))}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:o,onChange:A=>l(A.target.value),onKeyDown:A=>A.key==="Enter"&&T(),placeholder:"URL or name",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(wn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("ul",{className:"space-y-2",children:t.map((A,E)=>{const x=fD[A];return u.jsxs("li",{className:"flex items-center justify-between gap-2 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] text-sm text-[var(--text)]",children:[x?u.jsxs("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--accent)] hover:underline truncate min-w-0",children:[A," "]}):u.jsx("span",{className:"truncate min-w-0",children:A}),u.jsx("button",{onClick:()=>r(E),className:"p-1 rounded text-[var(--text-muted)] hover:text-[var(--danger)] shrink-0",children:u.jsx(hs,{className:"w-4 h-4"})})]},E)})})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Nation-specific sources"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:c,onChange:A=>d(A.target.value),onKeyDown:A=>A.key==="Enter"&&w(),placeholder:"URL or name",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(wn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("ul",{className:"space-y-2",children:e.map((A,E)=>u.jsxs("li",{className:"flex items-center justify-between px-3 py-2 rounded-lg bg-[var(--bg-elevated)] text-sm text-[var(--text)]",children:[A,u.jsx("button",{onClick:()=>i(E),className:"p-1 rounded text-[var(--text-muted)] hover:text-[var(--danger)]",children:u.jsx(hs,{className:"w-4 h-4"})})]},E))})]})]})}function vD(){const{uploadedResources:t,addUploadedResource:e,removeUploadedResource:n}=Lr(),[r,s]=N.useState(""),[i,o]=N.useState(""),l=()=>{r.trim()&&(e(r.trim(),i.trim()||void 0),s(""),o(""))};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Chair Report & Delegate Resources"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Handbook, position paper guidelines, chair report  upload or link."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsxs("h3",{className:"text-sm font-medium text-[var(--text)] flex items-center gap-2",children:[u.jsx(R4,{className:"w-4 h-4 text-[var(--accent)]"}),"  Add resource"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"text",value:r,onChange:c=>s(c.target.value),placeholder:"Resource name (e.g. Chair report, Pos paper guidelines)",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsx("input",{type:"text",value:i,onChange:c=>o(c.target.value),placeholder:"URL (optional)",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),u.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[u.jsx(wn,{className:"w-4 h-4"})," Add"]})]}),u.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-64 overflow-auto",children:t.map((c,d)=>u.jsxs("li",{className:"px-3 py-3 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-[var(--text)]",children:c.name}),c.url&&u.jsx("p",{className:"text-xs text-[var(--text-muted)] truncate max-w-xs",children:c.url})]}),u.jsx("button",{onClick:()=>n(d),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)]",children:u.jsx(hs,{className:"w-4 h-4"})})]},d))})]})]})}const yD=[{title:" Topic research",docSection:"Complete the Topic research section in your prep doc",keys:[{key:"researchTopic",label:"Topic and background (key facts, history)"},{key:"researchResolutions",label:"Existing UN resolutions and draft ideas"},{key:"researchNews",label:"Recent news and developments on the topic"}]},{title:" Country stance",docSection:"Complete the Country stance section in your prep doc",keys:[{key:"researchCountryStance",label:"Your countrys stance, policy, and red lines"},{key:"researchAllies",label:"Likely allies and blocs"}]},{title:" Position paper",docSection:"Use the Position paper section in your prep doc",keys:[{key:"positionPaperDraft",label:"Draft (structure and main points)"},{key:"positionPaperFinal",label:"Finalise (edit and cite sources)"},{key:"positionPaperSubmit",label:"Submit by deadline"},{key:"positionPaper",label:"Complete and approved"}]},{title:" Opening speech",docSection:"Use the Opening speech section in your prep doc",keys:[{key:"openingSpeechDraft",label:"Draft opening statement"},{key:"openingSpeechTimed",label:"Time and trim to speaking limit"},{key:"openingSpeech",label:"Ready and practised"}]},{title:" Mod & unmod speeches",docSection:"Use the Mod / unmod section in your prep doc",keys:[{key:"modSpeeches",label:"Moderated caucus talking points"},{key:"modCaucusPoints",label:"Unmoderated caucus / bloc discussion points"}]},{title:" Rules & materials",docSection:"Check off before conference",keys:[{key:"knowRules",label:"Committee rules and parliamentary procedure"},{key:"knowAgenda",label:"Agenda, timing, and conference schedule"},{key:"materialsReady",label:"Materials ready (placard, paper, laptop, etc.)"}]}];function xD(){const{checklist:t,toggleChecklist:e}=Lr();return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Preparation checklist"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm mb-2",children:"This checklist follows the sections of the MUN Prep Template. Make a copy of the template and work through each section in your doc."}),u.jsxs("a",{href:Q1,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 text-sm font-medium text-[var(--accent)] hover:underline",children:[u.jsx(j1,{className:"w-4 h-4"}),"Open MUN Prep Template (Google Doc)"]})]}),u.jsx("div",{className:"space-y-5",children:yD.map(n=>u.jsxs("div",{className:"card-block p-4",children:[u.jsx("h3",{className:"font-medium text-[var(--text)] mb-1",children:n.title}),u.jsx("p",{className:"text-xs text-[var(--text-muted)] mb-3",children:n.docSection}),u.jsx("ul",{className:"space-y-1",children:n.keys.map(({key:r,label:s})=>u.jsx("li",{children:u.jsxs("label",{className:"flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer hover:bg-[var(--bg-elevated)] transition-colors",children:[u.jsx("span",{className:"text-[var(--accent)] flex-shrink-0",children:t[r]?u.jsx(fa,{className:"w-5 h-5 fill-[var(--accent)]"}):u.jsx(cu,{className:"w-5 h-5"})}),u.jsx("span",{className:`text-sm text-[var(--text)] ${t[r]?"line-through text-[var(--text-muted)]":""}`,children:s}),u.jsx("input",{type:"checkbox",checked:t[r],onChange:()=>e(r),className:"sr-only","aria-label":s})]})},r))})]},n.title))})]})}function _D(){const{countdownDate:t,setCountdownDate:e}=Lr(),[n,r]=N.useState(null);return N.useEffect(()=>{if(!t){r(null);return}const s=new Date(t).getTime(),i=()=>{const l=Date.now();if(l>=s){r({days:0,hours:0,minutes:0,seconds:0});return}const c=Math.floor((s-l)/1e3);r({days:Math.floor(c/86400),hours:Math.floor(c%86400/3600),minutes:Math.floor(c%3600/60),seconds:c%60})};i();const o=setInterval(i,1e3);return()=>clearInterval(o)},[t]),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Conference Countdown"}),u.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Set the conference start date and see time remaining."})]}),u.jsxs("div",{className:"card-block p-4 space-y-4",children:[u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Conference start (date & time)"}),u.jsx("input",{type:"datetime-local",value:t?t.slice(0,16):"",onChange:s=>e(s.target.value?new Date(s.target.value).toISOString():""),className:"w-full max-w-xs px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),n&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--text-muted)]",children:[u.jsx(Kp,{className:"w-4 h-4 text-[var(--accent)]"}),u.jsx("span",{children:" Time until conference:"})]})]}),n&&u.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:n.days}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Days"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:n.hours}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Hours"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:n.minutes}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Minutes"})]}),u.jsxs("div",{className:"card-block p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:n.seconds}),u.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Seconds"})]})]})]})}const J1="seamuns-dashboard-sidebar-expanded";function wD(){try{const t=localStorage.getItem(J1);return t===null?!0:t==="true"}catch{return!0}}function ED(){const{conferences:t,activeConferenceId:e,setActiveConference:n,addConference:r,removeConference:s,saveToAccount:i,isSaving:o,lastSaved:l,isLoaded:c}=Lr(),{isAuthenticated:d}=Wp(),f=t.length>1,m=g=>{const T=Date.now()-g.getTime();return T<6e4?"Saved just now":T<36e5?`Saved ${Math.floor(T/6e4)}m ago`:g.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})};return u.jsxs("div",{className:"border-b border-[var(--border)] bg-[var(--bg-elevated)] px-3 sm:px-4 py-2 sm:py-3 flex flex-wrap items-center gap-2 sm:gap-3 shadow-[0_1px_0_0_var(--border)]",children:[u.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-[var(--accent-soft)] flex items-center justify-center flex-shrink-0",children:u.jsx(uu,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--accent)]"})}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("h1",{className:"page-title text-[var(--text)] whitespace-nowrap truncate",children:" Delegate Dashboard"}),u.jsx("p",{className:"text-xs sm:text-sm text-[var(--text-muted)] whitespace-nowrap truncate",children:" Country   Matrix   Prep   Checklist   Countdown"})]}),c&&u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsxs("label",{className:"flex items-center gap-1.5 text-xs text-[var(--text-muted)]",children:[u.jsx("span",{className:"hidden sm:inline",children:"Conference"}),u.jsx("select",{value:e,onChange:g=>n(g.target.value),className:"min-w-[8rem] px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Select conference",children:t.map(g=>u.jsx("option",{value:g.id,children:g.name||"Unnamed"},g.id))})]}),u.jsxs("button",{type:"button",onClick:r,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--accent)] text-white hover:opacity-90 transition-opacity",children:[u.jsx(wn,{className:"w-3.5 h-3.5"})," Add conference"]}),f&&u.jsx("button",{type:"button",onClick:()=>s(e),title:"Remove this conference",className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-card)] transition-colors","aria-label":"Remove conference",children:u.jsx(hs,{className:"w-3.5 h-3.5"})}),d&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>i(),disabled:o,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--brand)] text-white hover:opacity-90 transition-opacity disabled:opacity-60",children:[u.jsx(k4,{className:"w-3.5 h-3.5"}),o?"Saving":"Save to account"]}),l&&!o&&u.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:m(l)})]})]})]})}const TD=[{id:"country",label:" Country & Stance",icon:y4},{id:"matrix",label:" Committee Matrix",icon:F1},{id:"prep",label:" Prep Template",icon:au},{id:"sources",label:" Trusted & Nation Sources",icon:Kh},{id:"links",label:" Official links",icon:Kh},{id:"resources",label:" Chair Report & Resources",icon:qp},{id:"checklist",label:" Checklist",icon:fa},{id:"countdown",label:" Conference Countdown",icon:Kp}];function ID(){const[t,e]=N.useState("country"),[n,r]=N.useState(wD);N.useEffect(()=>{localStorage.setItem(J1,String(n))},[n]);const s=()=>r(i=>!i);return u.jsxs("div",{className:"flex flex-col lg:flex-row min-h-[calc(100vh-3rem)] sm:min-h-[calc(100vh-3.5rem)] lg:min-h-[calc(100vh-4rem)]",children:[u.jsx("aside",{className:`border-b lg:border-b-0 lg:border-r border-[var(--border)] bg-[var(--bg-elevated)] flex-shrink-0 overflow-x-auto overflow-y-hidden transition-[width] duration-200 ${n?"lg:w-max lg:min-w-[11rem] lg:max-w-[14rem]":"lg:w-10"}`,children:u.jsxs("div",{className:"flex lg:flex-col gap-0.5 p-1 sm:p-1.5 items-stretch lg:items-stretch",children:[TD.map(({id:i,label:o,icon:l})=>u.jsxs("button",{onClick:()=>e(i),title:o,className:`flex items-center gap-1.5 px-2 py-1.5 rounded-md text-xs font-medium transition-colors text-left whitespace-nowrap min-w-0 shrink-0 ${n?"w-full lg:w-max lg:min-w-0":"w-full lg:justify-center lg:px-1.5 lg:w-full"} ${t===i?"bg-[var(--accent)] text-white shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:[u.jsx(l,{className:"w-3.5 h-3.5 flex-shrink-0"}),u.jsx("span",{className:n?"lg:whitespace-nowrap":"truncate lg:sr-only lg:overflow-hidden lg:w-0",children:o})]},i)),u.jsxs("button",{type:"button",onClick:s,title:n?"Collapse sidebar":"Expand sidebar",className:"hidden lg:flex items-center justify-center gap-1.5 px-1.5 py-1.5 rounded-md text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors w-max",children:[n?u.jsx(M1,{className:"w-4 h-4 flex-shrink-0"}):u.jsx(V1,{className:"w-4 h-4 flex-shrink-0"}),n&&u.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:"Hide labels"})]})]})}),u.jsxs("main",{className:"flex-1 p-2 sm:p-3 md:p-5 overflow-auto min-w-0",children:[t==="country"&&u.jsx(cD,{}),t==="matrix"&&u.jsx(dD,{}),t==="prep"&&u.jsx(hD,{}),t==="sources"&&u.jsx(gD,{}),t==="links"&&u.jsx("div",{className:"card-block p-4 sm:p-6",children:u.jsx(Jp,{showHeading:!0})}),t==="resources"&&u.jsx(vD,{}),t==="checklist"&&u.jsx(xD,{}),t==="countdown"&&u.jsx(_D,{})]})]})}function SD(){const{user:t}=Wp(),e=(t==null?void 0:t.uid)??null;return u.jsxs(lD,{userId:e,children:[u.jsx(ED,{}),u.jsx(ID,{})]})}function bD(){return u.jsxs("div",{className:"max-w-[1000px] mx-auto px-3 sm:px-6 py-8 sm:py-12 md:py-16 text-center",children:[u.jsx(B1,{className:"h-10 sm:h-12 md:h-14 w-auto mx-auto mb-4 sm:mb-5"}),u.jsxs("h1",{className:"font-semibold text-2xl sm:text-3xl md:text-4xl text-[var(--text)] mb-2 sm:mb-3",children:["SEAMUNs Dashboard ",u.jsx("span",{className:"text-[var(--brand)]",children:""})]}),u.jsxs("p",{className:"text-[var(--text-muted)] text-sm sm:text-base md:text-lg mb-6 sm:mb-10 max-w-xl mx-auto",children:["Part of ",u.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",className:"text-[var(--brand)] hover:underline",children:"SEAMUNs"}),"  run committee sessions and prepare for conferences. Choose your role below."]}),u.jsxs("div",{className:"grid sm:grid-cols-2 gap-3 sm:gap-6",children:[u.jsxs(xh,{to:"/chair",className:"group block p-4 sm:p-6 md:p-8 rounded-[var(--radius-card)] border border-[var(--border)] bg-[var(--bg-card)] shadow-[var(--shadow-card)] hover:border-[var(--brand)] hover:bg-[var(--brand-soft)] transition-all text-left",children:[u.jsx("div",{className:"w-9 h-9 sm:w-11 sm:h-11 rounded-lg sm:rounded-xl bg-[var(--brand-soft)] flex items-center justify-center mb-3 sm:mb-4 group-hover:scale-105 transition-transform",children:u.jsx(O1,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--brand)]"})}),u.jsx("h2",{className:"font-semibold text-lg sm:text-xl text-[var(--text)] mb-1.5 sm:mb-2",children:" Chair Room"}),u.jsx("p",{className:"text-[var(--text-muted)] text-xs sm:text-sm",children:" Digital Room   Delegates   Motions   Voting   Speakers   Crisis   Archive"})]}),u.jsxs(xh,{to:"/delegate",className:"group block p-4 sm:p-6 md:p-8 rounded-[var(--radius-card)] border border-[var(--border)] bg-[var(--bg-card)] shadow-[var(--shadow-card)] hover:border-[var(--accent)] hover:bg-[var(--accent-soft)] transition-all text-left",children:[u.jsx("div",{className:"w-9 h-9 sm:w-11 sm:h-11 rounded-lg sm:rounded-xl bg-[var(--accent-soft)] flex items-center justify-center mb-3 sm:mb-4 group-hover:scale-105 transition-transform",children:u.jsx(uu,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--accent)]"})}),u.jsx("h2",{className:"font-semibold text-lg sm:text-xl text-[var(--text)] mb-1.5 sm:mb-2",children:" Delegate Dashboard"}),u.jsx("p",{className:"text-[var(--text-muted)] text-xs sm:text-sm",children:" Country   Matrix   Prep   Checklist   Countdown"})]})]}),u.jsxs("p",{className:"mt-6 sm:mt-10 text-[var(--text-muted)] text-xs sm:text-sm flex items-center justify-center gap-2",children:[u.jsx(p4,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),u.jsx("span",{children:" Per-conference setup for chairs and delegates"})]}),u.jsx("section",{className:"mt-10 sm:mt-14 pt-8 sm:pt-12 border-t border-[var(--border)] text-left",children:u.jsx(Jp,{showHeading:!0})})]})}function CD(){return u.jsx(l4,{children:u.jsx(Xb,{children:u.jsxs(Cs,{path:"/",element:u.jsx(j4,{}),children:[u.jsx(Cs,{index:!0,element:u.jsx(bD,{})}),u.jsx(Cs,{path:"chair",element:u.jsx(rD,{})}),u.jsx(Cs,{path:"delegate",element:u.jsx(SD,{})}),u.jsx(Cs,{path:"*",element:u.jsx(Qb,{to:"/",replace:!0})})]})})})}const kD=!0,ND=kD?r4:s4,AD=u.jsx(N.StrictMode,{children:u.jsx(oC,{children:u.jsx(ND,{children:u.jsx(CD,{})})})});Tw(document.getElementById("root")).render(AD);
