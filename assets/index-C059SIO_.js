function Yb(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Xb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kx={exports:{}},Fc={},Nx={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var po=Symbol.for("react.element"),Zb=Symbol.for("react.portal"),eC=Symbol.for("react.fragment"),tC=Symbol.for("react.strict_mode"),nC=Symbol.for("react.profiler"),rC=Symbol.for("react.provider"),sC=Symbol.for("react.context"),iC=Symbol.for("react.forward_ref"),aC=Symbol.for("react.suspense"),oC=Symbol.for("react.memo"),lC=Symbol.for("react.lazy"),ug=Symbol.iterator;function cC(t){return t===null||typeof t!="object"?null:(t=ug&&t[ug]||t["@@iterator"],typeof t=="function"?t:null)}var Ax={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rx=Object.assign,Px={};function Ti(t,e,n){this.props=t,this.context=e,this.refs=Px,this.updater=n||Ax}Ti.prototype.isReactComponent={};Ti.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ti.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jx(){}jx.prototype=Ti.prototype;function df(t,e,n){this.props=t,this.context=e,this.refs=Px,this.updater=n||Ax}var hf=df.prototype=new jx;hf.constructor=df;Rx(hf,Ti.prototype);hf.isPureReactComponent=!0;var dg=Array.isArray,Dx=Object.prototype.hasOwnProperty,ff={current:null},Ox={key:!0,ref:!0,__self:!0,__source:!0};function Mx(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Dx.call(e,r)&&!Ox.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:po,type:t,key:i,ref:a,props:s,_owner:ff.current}}function uC(t,e){return{$$typeof:po,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mf(t){return typeof t=="object"&&t!==null&&t.$$typeof===po}function dC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var hg=/\/+/g;function Ku(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dC(""+t.key):e.toString(36)}function wl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case po:case Zb:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Ku(a,0):r,dg(s)?(n="",t!=null&&(n=t.replace(hg,"$&/")+"/"),wl(s,e,n,"",function(d){return d})):s!=null&&(mf(s)&&(s=uC(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(hg,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",dg(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Ku(i,l);a+=wl(i,e,n,u,s)}else if(u=cC(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Ku(i,l++),a+=wl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Yo(t,e,n){if(t==null)return t;var r=[],s=0;return wl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function hC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},El={transition:null},fC={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:El,ReactCurrentOwner:ff};function Lx(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Yo,forEach:function(t,e,n){Yo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yo(t,function(){e++}),e},toArray:function(t){return Yo(t,function(e){return e})||[]},only:function(t){if(!mf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Ti;ue.Fragment=eC;ue.Profiler=nC;ue.PureComponent=df;ue.StrictMode=tC;ue.Suspense=aC;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fC;ue.act=Lx;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Rx({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=ff.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Dx.call(e,u)&&!Ox.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:po,type:t.type,key:s,ref:i,props:r,_owner:a}};ue.createContext=function(t){return t={$$typeof:sC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rC,_context:t},t.Consumer=t};ue.createElement=Mx;ue.createFactory=function(t){var e=Mx.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:iC,render:t}};ue.isValidElement=mf;ue.lazy=function(t){return{$$typeof:lC,_payload:{_status:-1,_result:t},_init:hC}};ue.memo=function(t,e){return{$$typeof:oC,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=El.transition;El.transition={};try{t()}finally{El.transition=e}};ue.unstable_act=Lx;ue.useCallback=function(t,e){return Et.current.useCallback(t,e)};ue.useContext=function(t){return Et.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Et.current.useEffect(t,e)};ue.useId=function(){return Et.current.useId()};ue.useImperativeHandle=function(t,e,n){return Et.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Et.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Et.current.useReducer(t,e,n)};ue.useRef=function(t){return Et.current.useRef(t)};ue.useState=function(t){return Et.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Et.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Et.current.useTransition()};ue.version="18.3.1";Nx.exports=ue;var T=Nx.exports;const mC=Xb(T),pC=Yb({__proto__:null,default:mC},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gC=T,vC=Symbol.for("react.element"),yC=Symbol.for("react.fragment"),xC=Object.prototype.hasOwnProperty,_C=gC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wC={key:!0,ref:!0,__self:!0,__source:!0};function Vx(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)xC.call(e,r)&&!wC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:vC,type:t,key:i,ref:a,props:s,_owner:_C.current}}Fc.Fragment=yC;Fc.jsx=Vx;Fc.jsxs=Vx;kx.exports=Fc;var c=kx.exports,Ux={exports:{}},Ft={},Fx={exports:{}},Bx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,te){var ne=G.length;G.push(te);e:for(;0<ne;){var xe=ne-1>>>1,K=G[xe];if(0<s(K,te))G[xe]=te,G[ne]=K,ne=xe;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var te=G[0],ne=G.pop();if(ne!==te){G[0]=ne;e:for(var xe=0,K=G.length,U=K>>>1;xe<U;){var H=2*(xe+1)-1,pe=G[H],Ee=H+1,le=G[Ee];if(0>s(pe,ne))Ee<K&&0>s(le,pe)?(G[xe]=le,G[Ee]=ne,xe=Ee):(G[xe]=pe,G[H]=ne,xe=H);else if(Ee<K&&0>s(le,ne))G[xe]=le,G[Ee]=ne,xe=Ee;else break e}}return te}function s(G,te){var ne=G.sortIndex-te.sortIndex;return ne!==0?ne:G.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],f=1,p=null,g=3,E=!1,_=!1,N=!1,k=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(G){for(var te=n(d);te!==null;){if(te.callback===null)r(d);else if(te.startTime<=G)r(d),te.sortIndex=te.expirationTime,e(u,te);else break;te=n(d)}}function R(G){if(N=!1,w(G),!_)if(n(u)!==null)_=!0,me(B);else{var te=n(d);te!==null&&Ve(R,te.startTime-G)}}function B(G,te){_=!1,N&&(N=!1,b(y),y=-1),E=!0;var ne=g;try{for(w(te),p=n(u);p!==null&&(!(p.expirationTime>te)||G&&!P());){var xe=p.callback;if(typeof xe=="function"){p.callback=null,g=p.priorityLevel;var K=xe(p.expirationTime<=te);te=t.unstable_now(),typeof K=="function"?p.callback=K:p===n(u)&&r(u),w(te)}else r(u);p=n(u)}if(p!==null)var U=!0;else{var H=n(d);H!==null&&Ve(R,H.startTime-te),U=!1}return U}finally{p=null,g=ne,E=!1}}var z=!1,S=null,y=-1,C=5,I=-1;function P(){return!(t.unstable_now()-I<C)}function j(){if(S!==null){var G=t.unstable_now();I=G;var te=!0;try{te=S(!0,G)}finally{te?A():(z=!1,S=null)}}else z=!1}var A;if(typeof x=="function")A=function(){x(j)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,Y=X.port2;X.port1.onmessage=j,A=function(){Y.postMessage(null)}}else A=function(){k(j,0)};function me(G){S=G,z||(z=!0,A())}function Ve(G,te){y=k(function(){G(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){_||E||(_=!0,me(B))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var te=3;break;default:te=g}var ne=g;g=te;try{return G()}finally{g=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,te){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ne=g;g=G;try{return te()}finally{g=ne}},t.unstable_scheduleCallback=function(G,te,ne){var xe=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?xe+ne:xe):ne=xe,G){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ne+K,G={id:f++,callback:te,priorityLevel:G,startTime:ne,expirationTime:K,sortIndex:-1},ne>xe?(G.sortIndex=ne,e(d,G),n(u)===null&&G===n(d)&&(N?(b(y),y=-1):N=!0,Ve(R,ne-xe))):(G.sortIndex=K,e(u,G),_||E||(_=!0,me(B))),G},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(G){var te=g;return function(){var ne=g;g=te;try{return G.apply(this,arguments)}finally{g=ne}}}})(Bx);Fx.exports=Bx;var EC=Fx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC=T,Ut=EC;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zx=new Set,Va={};function ws(t,e){hi(t,e),hi(t+"Capture",e)}function hi(t,e){for(Va[t]=e,t=0;t<e.length;t++)zx.add(e[t])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vd=Object.prototype.hasOwnProperty,CC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fg={},mg={};function SC(t){return Vd.call(mg,t)?!0:Vd.call(fg,t)?!1:CC.test(t)?mg[t]=!0:(fg[t]=!0,!1)}function TC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function IC(t,e,n,r){if(e===null||typeof e>"u"||TC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var pf=/[\-:]([a-z])/g;function gf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(pf,gf);rt[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(pf,gf);rt[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(pf,gf);rt[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function vf(t,e,n,r){var s=rt.hasOwnProperty(e)?rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(IC(e,n,s,r)&&(n=null),r||s===null?SC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jn=bC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xo=Symbol.for("react.element"),$s=Symbol.for("react.portal"),Hs=Symbol.for("react.fragment"),yf=Symbol.for("react.strict_mode"),Ud=Symbol.for("react.profiler"),$x=Symbol.for("react.provider"),Hx=Symbol.for("react.context"),xf=Symbol.for("react.forward_ref"),Fd=Symbol.for("react.suspense"),Bd=Symbol.for("react.suspense_list"),_f=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),Wx=Symbol.for("react.offscreen"),pg=Symbol.iterator;function ta(t){return t===null||typeof t!="object"?null:(t=pg&&t[pg]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,qu;function ca(t){if(qu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qu=e&&e[1]||""}return`
`+qu+t}var Qu=!1;function Ju(t,e){if(!t||Qu)return"";Qu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{Qu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ca(t):""}function kC(t){switch(t.tag){case 5:return ca(t.type);case 16:return ca("Lazy");case 13:return ca("Suspense");case 19:return ca("SuspenseList");case 0:case 2:case 15:return t=Ju(t.type,!1),t;case 11:return t=Ju(t.type.render,!1),t;case 1:return t=Ju(t.type,!0),t;default:return""}}function zd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hs:return"Fragment";case $s:return"Portal";case Ud:return"Profiler";case yf:return"StrictMode";case Fd:return"Suspense";case Bd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hx:return(t.displayName||"Context")+".Consumer";case $x:return(t._context.displayName||"Context")+".Provider";case xf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _f:return e=t.displayName||null,e!==null?e:zd(t.type)||"Memo";case or:e=t._payload,t=t._init;try{return zd(t(e))}catch{}}return null}function NC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zd(e);case 8:return e===yf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function AC(t){var e=Gx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zo(t){t._valueTracker||(t._valueTracker=AC(t))}function Kx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Gx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $d(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qx(t,e){e=e.checked,e!=null&&vf(t,"checked",e,!1)}function Hd(t,e){qx(t,e);var n=Pr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wd(t,e.type,Pr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wd(t,e,n){(e!=="number"||Wl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ua=Array.isArray;function ti(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Gd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(ua(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pr(n)}}function Qx(t,e){var n=Pr(e.value),r=Pr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function xg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Jx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Jx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var el,Yx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(el=el||document.createElement("div"),el.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=el.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ua(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RC=["Webkit","ms","Moz","O"];Object.keys(xa).forEach(function(t){RC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xa[e]=xa[t]})});function Xx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xa.hasOwnProperty(t)&&xa[t]?(""+e).trim():e+"px"}function Zx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Xx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var PC=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qd(t,e){if(e){if(PC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Qd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jd=null;function wf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yd=null,ni=null,ri=null;function _g(t){if(t=yo(t)){if(typeof Yd!="function")throw Error($(280));var e=t.stateNode;e&&(e=Wc(e),Yd(t.stateNode,t.type,e))}}function e_(t){ni?ri?ri.push(t):ri=[t]:ni=t}function t_(){if(ni){var t=ni,e=ri;if(ri=ni=null,_g(t),e)for(t=0;t<e.length;t++)_g(e[t])}}function n_(t,e){return t(e)}function r_(){}var Yu=!1;function s_(t,e,n){if(Yu)return t(e,n);Yu=!0;try{return n_(t,e,n)}finally{Yu=!1,(ni!==null||ri!==null)&&(r_(),t_())}}function Fa(t,e){var n=t.stateNode;if(n===null)return null;var r=Wc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Xd=!1;if(zn)try{var na={};Object.defineProperty(na,"passive",{get:function(){Xd=!0}}),window.addEventListener("test",na,na),window.removeEventListener("test",na,na)}catch{Xd=!1}function jC(t,e,n,r,s,i,a,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var _a=!1,Gl=null,Kl=!1,Zd=null,DC={onError:function(t){_a=!0,Gl=t}};function OC(t,e,n,r,s,i,a,l,u){_a=!1,Gl=null,jC.apply(DC,arguments)}function MC(t,e,n,r,s,i,a,l,u){if(OC.apply(this,arguments),_a){if(_a){var d=Gl;_a=!1,Gl=null}else throw Error($(198));Kl||(Kl=!0,Zd=d)}}function Es(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function i_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wg(t){if(Es(t)!==t)throw Error($(188))}function LC(t){var e=t.alternate;if(!e){if(e=Es(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return wg(s),t;if(i===r)return wg(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function a_(t){return t=LC(t),t!==null?o_(t):null}function o_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=o_(t);if(e!==null)return e;t=t.sibling}return null}var l_=Ut.unstable_scheduleCallback,Eg=Ut.unstable_cancelCallback,VC=Ut.unstable_shouldYield,UC=Ut.unstable_requestPaint,Fe=Ut.unstable_now,FC=Ut.unstable_getCurrentPriorityLevel,Ef=Ut.unstable_ImmediatePriority,c_=Ut.unstable_UserBlockingPriority,ql=Ut.unstable_NormalPriority,BC=Ut.unstable_LowPriority,u_=Ut.unstable_IdlePriority,Bc=null,xn=null;function zC(t){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(Bc,t,void 0,(t.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:WC,$C=Math.log,HC=Math.LN2;function WC(t){return t>>>=0,t===0?32:31-($C(t)/HC|0)|0}var tl=64,nl=4194304;function da(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ql(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=da(l):(i&=a,i!==0&&(r=da(i)))}else a=n&~s,a!==0?r=da(a):i!==0&&(r=da(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ln(e),s=1<<n,r|=t[n],e&=~s;return r}function GC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-ln(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=GC(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function eh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function d_(){var t=tl;return tl<<=1,!(tl&4194240)&&(tl=64),t}function Xu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function go(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ln(e),t[e]=n}function qC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ln(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function bf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ln(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var we=0;function h_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var f_,Cf,m_,p_,g_,th=!1,rl=[],xr=null,_r=null,wr=null,Ba=new Map,za=new Map,ur=[],QC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bg(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":Ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":za.delete(e.pointerId)}}function ra(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=yo(e),e!==null&&Cf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function JC(t,e,n,r,s){switch(e){case"focusin":return xr=ra(xr,t,e,n,r,s),!0;case"dragenter":return _r=ra(_r,t,e,n,r,s),!0;case"mouseover":return wr=ra(wr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ba.set(i,ra(Ba.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,za.set(i,ra(za.get(i)||null,t,e,n,r,s)),!0}return!1}function v_(t){var e=Zr(t.target);if(e!==null){var n=Es(e);if(n!==null){if(e=n.tag,e===13){if(e=i_(n),e!==null){t.blockedOn=e,g_(t.priority,function(){m_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jd=r,n.target.dispatchEvent(r),Jd=null}else return e=yo(n),e!==null&&Cf(e),t.blockedOn=n,!1;e.shift()}return!0}function Cg(t,e,n){bl(t)&&n.delete(e)}function YC(){th=!1,xr!==null&&bl(xr)&&(xr=null),_r!==null&&bl(_r)&&(_r=null),wr!==null&&bl(wr)&&(wr=null),Ba.forEach(Cg),za.forEach(Cg)}function sa(t,e){t.blockedOn===e&&(t.blockedOn=null,th||(th=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,YC)))}function $a(t){function e(s){return sa(s,t)}if(0<rl.length){sa(rl[0],t);for(var n=1;n<rl.length;n++){var r=rl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&sa(xr,t),_r!==null&&sa(_r,t),wr!==null&&sa(wr,t),Ba.forEach(e),za.forEach(e),n=0;n<ur.length;n++)r=ur[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ur.length&&(n=ur[0],n.blockedOn===null);)v_(n),n.blockedOn===null&&ur.shift()}var si=Jn.ReactCurrentBatchConfig,Jl=!0;function XC(t,e,n,r){var s=we,i=si.transition;si.transition=null;try{we=1,Sf(t,e,n,r)}finally{we=s,si.transition=i}}function ZC(t,e,n,r){var s=we,i=si.transition;si.transition=null;try{we=4,Sf(t,e,n,r)}finally{we=s,si.transition=i}}function Sf(t,e,n,r){if(Jl){var s=nh(t,e,n,r);if(s===null)ld(t,e,r,Yl,n),bg(t,r);else if(JC(s,t,e,n,r))r.stopPropagation();else if(bg(t,r),e&4&&-1<QC.indexOf(t)){for(;s!==null;){var i=yo(s);if(i!==null&&f_(i),i=nh(t,e,n,r),i===null&&ld(t,e,r,Yl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ld(t,e,r,null,n)}}var Yl=null;function nh(t,e,n,r){if(Yl=null,t=wf(r),t=Zr(t),t!==null)if(e=Es(t),e===null)t=null;else if(n=e.tag,n===13){if(t=i_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yl=t,null}function y_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FC()){case Ef:return 1;case c_:return 4;case ql:case BC:return 16;case u_:return 536870912;default:return 16}default:return 16}}var pr=null,Tf=null,Cl=null;function x_(){if(Cl)return Cl;var t,e=Tf,n=e.length,r,s="value"in pr?pr.value:pr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Cl=s.slice(t,1<r?1-r:void 0)}function Sl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sl(){return!0}function Sg(){return!1}function Bt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?sl:Sg,this.isPropagationStopped=Sg,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sl)},persist:function(){},isPersistent:sl}),e}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},If=Bt(Ii),vo=De({},Ii,{view:0,detail:0}),eS=Bt(vo),Zu,ed,ia,zc=De({},vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ia&&(ia&&t.type==="mousemove"?(Zu=t.screenX-ia.screenX,ed=t.screenY-ia.screenY):ed=Zu=0,ia=t),Zu)},movementY:function(t){return"movementY"in t?t.movementY:ed}}),Tg=Bt(zc),tS=De({},zc,{dataTransfer:0}),nS=Bt(tS),rS=De({},vo,{relatedTarget:0}),td=Bt(rS),sS=De({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),iS=Bt(sS),aS=De({},Ii,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oS=Bt(aS),lS=De({},Ii,{data:0}),Ig=Bt(lS),cS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dS[t])?!!e[t]:!1}function kf(){return hS}var fS=De({},vo,{key:function(t){if(t.key){var e=cS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kf,charCode:function(t){return t.type==="keypress"?Sl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mS=Bt(fS),pS=De({},zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kg=Bt(pS),gS=De({},vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kf}),vS=Bt(gS),yS=De({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),xS=Bt(yS),_S=De({},zc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wS=Bt(_S),ES=[9,13,27,32],Nf=zn&&"CompositionEvent"in window,wa=null;zn&&"documentMode"in document&&(wa=document.documentMode);var bS=zn&&"TextEvent"in window&&!wa,__=zn&&(!Nf||wa&&8<wa&&11>=wa),Ng=" ",Ag=!1;function w_(t,e){switch(t){case"keyup":return ES.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ws=!1;function CS(t,e){switch(t){case"compositionend":return E_(e);case"keypress":return e.which!==32?null:(Ag=!0,Ng);case"textInput":return t=e.data,t===Ng&&Ag?null:t;default:return null}}function SS(t,e){if(Ws)return t==="compositionend"||!Nf&&w_(t,e)?(t=x_(),Cl=Tf=pr=null,Ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return __&&e.locale!=="ko"?null:e.data;default:return null}}var TS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TS[t.type]:e==="textarea"}function b_(t,e,n,r){e_(r),e=Xl(e,"onChange"),0<e.length&&(n=new If("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ea=null,Ha=null;function IS(t){D_(t,0)}function $c(t){var e=qs(t);if(Kx(e))return t}function kS(t,e){if(t==="change")return e}var C_=!1;if(zn){var nd;if(zn){var rd="oninput"in document;if(!rd){var Pg=document.createElement("div");Pg.setAttribute("oninput","return;"),rd=typeof Pg.oninput=="function"}nd=rd}else nd=!1;C_=nd&&(!document.documentMode||9<document.documentMode)}function jg(){Ea&&(Ea.detachEvent("onpropertychange",S_),Ha=Ea=null)}function S_(t){if(t.propertyName==="value"&&$c(Ha)){var e=[];b_(e,Ha,t,wf(t)),s_(IS,e)}}function NS(t,e,n){t==="focusin"?(jg(),Ea=e,Ha=n,Ea.attachEvent("onpropertychange",S_)):t==="focusout"&&jg()}function AS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $c(Ha)}function RS(t,e){if(t==="click")return $c(e)}function PS(t,e){if(t==="input"||t==="change")return $c(e)}function jS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dn=typeof Object.is=="function"?Object.is:jS;function Wa(t,e){if(dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Vd.call(e,s)||!dn(t[s],e[s]))return!1}return!0}function Dg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Og(t,e){var n=Dg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Dg(n)}}function T_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?T_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function I_(){for(var t=window,e=Wl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wl(t.document)}return e}function Af(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DS(t){var e=I_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&T_(n.ownerDocument.documentElement,n)){if(r!==null&&Af(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Og(n,i);var a=Og(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OS=zn&&"documentMode"in document&&11>=document.documentMode,Gs=null,rh=null,ba=null,sh=!1;function Mg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sh||Gs==null||Gs!==Wl(r)||(r=Gs,"selectionStart"in r&&Af(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ba&&Wa(ba,r)||(ba=r,r=Xl(rh,"onSelect"),0<r.length&&(e=new If("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gs)))}function il(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ks={animationend:il("Animation","AnimationEnd"),animationiteration:il("Animation","AnimationIteration"),animationstart:il("Animation","AnimationStart"),transitionend:il("Transition","TransitionEnd")},sd={},k_={};zn&&(k_=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function Hc(t){if(sd[t])return sd[t];if(!Ks[t])return t;var e=Ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in k_)return sd[t]=e[n];return t}var N_=Hc("animationend"),A_=Hc("animationiteration"),R_=Hc("animationstart"),P_=Hc("transitionend"),j_=new Map,Lg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(t,e){j_.set(t,e),ws(e,[t])}for(var id=0;id<Lg.length;id++){var ad=Lg[id],MS=ad.toLowerCase(),LS=ad[0].toUpperCase()+ad.slice(1);Br(MS,"on"+LS)}Br(N_,"onAnimationEnd");Br(A_,"onAnimationIteration");Br(R_,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(P_,"onTransitionEnd");hi("onMouseEnter",["mouseout","mouseover"]);hi("onMouseLeave",["mouseout","mouseover"]);hi("onPointerEnter",["pointerout","pointerover"]);hi("onPointerLeave",["pointerout","pointerover"]);ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ha));function Vg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,MC(r,e,void 0,t),t.currentTarget=null}function D_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Vg(s,l,d),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Vg(s,l,d),i=u}}}if(Kl)throw t=Zd,Kl=!1,Zd=null,t}function Te(t,e){var n=e[ch];n===void 0&&(n=e[ch]=new Set);var r=t+"__bubble";n.has(r)||(O_(e,t,2,!1),n.add(r))}function od(t,e,n){var r=0;e&&(r|=4),O_(n,t,r,e)}var al="_reactListening"+Math.random().toString(36).slice(2);function Ga(t){if(!t[al]){t[al]=!0,zx.forEach(function(n){n!=="selectionchange"&&(VS.has(n)||od(n,!1,t),od(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[al]||(e[al]=!0,od("selectionchange",!1,e))}}function O_(t,e,n,r){switch(y_(e)){case 1:var s=XC;break;case 4:s=ZC;break;default:s=Sf}n=s.bind(null,e,n,t),s=void 0,!Xd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ld(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Zr(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}s_(function(){var d=i,f=wf(n),p=[];e:{var g=j_.get(t);if(g!==void 0){var E=If,_=t;switch(t){case"keypress":if(Sl(n)===0)break e;case"keydown":case"keyup":E=mS;break;case"focusin":_="focus",E=td;break;case"focusout":_="blur",E=td;break;case"beforeblur":case"afterblur":E=td;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Tg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=nS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=vS;break;case N_:case A_:case R_:E=iS;break;case P_:E=xS;break;case"scroll":E=eS;break;case"wheel":E=wS;break;case"copy":case"cut":case"paste":E=oS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=kg}var N=(e&4)!==0,k=!N&&t==="scroll",b=N?g!==null?g+"Capture":null:g;N=[];for(var x=d,w;x!==null;){w=x;var R=w.stateNode;if(w.tag===5&&R!==null&&(w=R,b!==null&&(R=Fa(x,b),R!=null&&N.push(Ka(x,R,w)))),k)break;x=x.return}0<N.length&&(g=new E(g,_,null,n,f),p.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",g&&n!==Jd&&(_=n.relatedTarget||n.fromElement)&&(Zr(_)||_[$n]))break e;if((E||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,E?(_=n.relatedTarget||n.toElement,E=d,_=_?Zr(_):null,_!==null&&(k=Es(_),_!==k||_.tag!==5&&_.tag!==6)&&(_=null)):(E=null,_=d),E!==_)){if(N=Tg,R="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(N=kg,R="onPointerLeave",b="onPointerEnter",x="pointer"),k=E==null?g:qs(E),w=_==null?g:qs(_),g=new N(R,x+"leave",E,n,f),g.target=k,g.relatedTarget=w,R=null,Zr(f)===d&&(N=new N(b,x+"enter",_,n,f),N.target=w,N.relatedTarget=k,R=N),k=R,E&&_)t:{for(N=E,b=_,x=0,w=N;w;w=Ls(w))x++;for(w=0,R=b;R;R=Ls(R))w++;for(;0<x-w;)N=Ls(N),x--;for(;0<w-x;)b=Ls(b),w--;for(;x--;){if(N===b||b!==null&&N===b.alternate)break t;N=Ls(N),b=Ls(b)}N=null}else N=null;E!==null&&Ug(p,g,E,N,!1),_!==null&&k!==null&&Ug(p,k,_,N,!0)}}e:{if(g=d?qs(d):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var B=kS;else if(Rg(g))if(C_)B=PS;else{B=AS;var z=NS}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(B=RS);if(B&&(B=B(t,d))){b_(p,B,n,f);break e}z&&z(t,g,d),t==="focusout"&&(z=g._wrapperState)&&z.controlled&&g.type==="number"&&Wd(g,"number",g.value)}switch(z=d?qs(d):window,t){case"focusin":(Rg(z)||z.contentEditable==="true")&&(Gs=z,rh=d,ba=null);break;case"focusout":ba=rh=Gs=null;break;case"mousedown":sh=!0;break;case"contextmenu":case"mouseup":case"dragend":sh=!1,Mg(p,n,f);break;case"selectionchange":if(OS)break;case"keydown":case"keyup":Mg(p,n,f)}var S;if(Nf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ws?w_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(__&&n.locale!=="ko"&&(Ws||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ws&&(S=x_()):(pr=f,Tf="value"in pr?pr.value:pr.textContent,Ws=!0)),z=Xl(d,y),0<z.length&&(y=new Ig(y,t,null,n,f),p.push({event:y,listeners:z}),S?y.data=S:(S=E_(n),S!==null&&(y.data=S)))),(S=bS?CS(t,n):SS(t,n))&&(d=Xl(d,"onBeforeInput"),0<d.length&&(f=new Ig("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=S))}D_(p,e)})}function Ka(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fa(t,n),i!=null&&r.unshift(Ka(t,i,s)),i=Fa(t,e),i!=null&&r.push(Ka(t,i,s))),t=t.return}return r}function Ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ug(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Fa(n,i),u!=null&&a.unshift(Ka(n,u,l))):s||(u=Fa(n,i),u!=null&&a.push(Ka(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var US=/\r\n?/g,FS=/\u0000|\uFFFD/g;function Fg(t){return(typeof t=="string"?t:""+t).replace(US,`
`).replace(FS,"")}function ol(t,e,n){if(e=Fg(e),Fg(t)!==e&&n)throw Error($(425))}function Zl(){}var ih=null,ah=null;function oh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lh=typeof setTimeout=="function"?setTimeout:void 0,BS=typeof clearTimeout=="function"?clearTimeout:void 0,Bg=typeof Promise=="function"?Promise:void 0,zS=typeof queueMicrotask=="function"?queueMicrotask:typeof Bg<"u"?function(t){return Bg.resolve(null).then(t).catch($S)}:lh;function $S(t){setTimeout(function(){throw t})}function cd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),$a(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);$a(e)}function Er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ki=Math.random().toString(36).slice(2),yn="__reactFiber$"+ki,qa="__reactProps$"+ki,$n="__reactContainer$"+ki,ch="__reactEvents$"+ki,HS="__reactListeners$"+ki,WS="__reactHandles$"+ki;function Zr(t){var e=t[yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$n]||n[yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zg(t);t!==null;){if(n=t[yn])return n;t=zg(t)}return e}t=n,n=t.parentNode}return null}function yo(t){return t=t[yn]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Wc(t){return t[qa]||null}var uh=[],Qs=-1;function zr(t){return{current:t}}function ke(t){0>Qs||(t.current=uh[Qs],uh[Qs]=null,Qs--)}function Ce(t,e){Qs++,uh[Qs]=t.current,t.current=e}var jr={},mt=zr(jr),It=zr(!1),ls=jr;function fi(t,e){var n=t.type.contextTypes;if(!n)return jr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function kt(t){return t=t.childContextTypes,t!=null}function ec(){ke(It),ke(mt)}function $g(t,e,n){if(mt.current!==jr)throw Error($(168));Ce(mt,e),Ce(It,n)}function M_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,NC(t)||"Unknown",s));return De({},n,r)}function tc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jr,ls=mt.current,Ce(mt,t),Ce(It,It.current),!0}function Hg(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=M_(t,e,ls),r.__reactInternalMemoizedMergedChildContext=t,ke(It),ke(mt),Ce(mt,t)):ke(It),Ce(It,n)}var jn=null,Gc=!1,ud=!1;function L_(t){jn===null?jn=[t]:jn.push(t)}function GS(t){Gc=!0,L_(t)}function $r(){if(!ud&&jn!==null){ud=!0;var t=0,e=we;try{var n=jn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jn=null,Gc=!1}catch(s){throw jn!==null&&(jn=jn.slice(t+1)),l_(Ef,$r),s}finally{we=e,ud=!1}}return null}var Js=[],Ys=0,nc=null,rc=0,$t=[],Ht=0,cs=null,On=1,Mn="";function Jr(t,e){Js[Ys++]=rc,Js[Ys++]=nc,nc=t,rc=e}function V_(t,e,n){$t[Ht++]=On,$t[Ht++]=Mn,$t[Ht++]=cs,cs=t;var r=On;t=Mn;var s=32-ln(r)-1;r&=~(1<<s),n+=1;var i=32-ln(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,On=1<<32-ln(e)+s|n<<s|r,Mn=i+t}else On=1<<i|n<<s|r,Mn=t}function Rf(t){t.return!==null&&(Jr(t,1),V_(t,1,0))}function Pf(t){for(;t===nc;)nc=Js[--Ys],Js[Ys]=null,rc=Js[--Ys],Js[Ys]=null;for(;t===cs;)cs=$t[--Ht],$t[Ht]=null,Mn=$t[--Ht],$t[Ht]=null,On=$t[--Ht],$t[Ht]=null}var Vt=null,Lt=null,Ne=!1,sn=null;function U_(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Wg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vt=t,Lt=Er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vt=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cs!==null?{id:On,overflow:Mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vt=t,Lt=null,!0):!1;default:return!1}}function dh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hh(t){if(Ne){var e=Lt;if(e){var n=e;if(!Wg(t,e)){if(dh(t))throw Error($(418));e=Er(n.nextSibling);var r=Vt;e&&Wg(t,e)?U_(r,n):(t.flags=t.flags&-4097|2,Ne=!1,Vt=t)}}else{if(dh(t))throw Error($(418));t.flags=t.flags&-4097|2,Ne=!1,Vt=t}}}function Gg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vt=t}function ll(t){if(t!==Vt)return!1;if(!Ne)return Gg(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!oh(t.type,t.memoizedProps)),e&&(e=Lt)){if(dh(t))throw F_(),Error($(418));for(;e;)U_(t,e),e=Er(e.nextSibling)}if(Gg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=Er(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Vt?Er(t.stateNode.nextSibling):null;return!0}function F_(){for(var t=Lt;t;)t=Er(t.nextSibling)}function mi(){Lt=Vt=null,Ne=!1}function jf(t){sn===null?sn=[t]:sn.push(t)}var KS=Jn.ReactCurrentBatchConfig;function aa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function cl(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Kg(t){var e=t._init;return e(t._payload)}function B_(t){function e(b,x){if(t){var w=b.deletions;w===null?(b.deletions=[x],b.flags|=16):w.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function s(b,x){return b=Tr(b,x),b.index=0,b.sibling=null,b}function i(b,x,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<x?(b.flags|=2,x):w):(b.flags|=2,x)):(b.flags|=1048576,x)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,x,w,R){return x===null||x.tag!==6?(x=vd(w,b.mode,R),x.return=b,x):(x=s(x,w),x.return=b,x)}function u(b,x,w,R){var B=w.type;return B===Hs?f(b,x,w.props.children,R,w.key):x!==null&&(x.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===or&&Kg(B)===x.type)?(R=s(x,w.props),R.ref=aa(b,x,w),R.return=b,R):(R=Pl(w.type,w.key,w.props,null,b.mode,R),R.ref=aa(b,x,w),R.return=b,R)}function d(b,x,w,R){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=yd(w,b.mode,R),x.return=b,x):(x=s(x,w.children||[]),x.return=b,x)}function f(b,x,w,R,B){return x===null||x.tag!==7?(x=as(w,b.mode,R,B),x.return=b,x):(x=s(x,w),x.return=b,x)}function p(b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=vd(""+x,b.mode,w),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Xo:return w=Pl(x.type,x.key,x.props,null,b.mode,w),w.ref=aa(b,null,x),w.return=b,w;case $s:return x=yd(x,b.mode,w),x.return=b,x;case or:var R=x._init;return p(b,R(x._payload),w)}if(ua(x)||ta(x))return x=as(x,b.mode,w,null),x.return=b,x;cl(b,x)}return null}function g(b,x,w,R){var B=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return B!==null?null:l(b,x,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xo:return w.key===B?u(b,x,w,R):null;case $s:return w.key===B?d(b,x,w,R):null;case or:return B=w._init,g(b,x,B(w._payload),R)}if(ua(w)||ta(w))return B!==null?null:f(b,x,w,R,null);cl(b,w)}return null}function E(b,x,w,R,B){if(typeof R=="string"&&R!==""||typeof R=="number")return b=b.get(w)||null,l(x,b,""+R,B);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Xo:return b=b.get(R.key===null?w:R.key)||null,u(x,b,R,B);case $s:return b=b.get(R.key===null?w:R.key)||null,d(x,b,R,B);case or:var z=R._init;return E(b,x,w,z(R._payload),B)}if(ua(R)||ta(R))return b=b.get(w)||null,f(x,b,R,B,null);cl(x,R)}return null}function _(b,x,w,R){for(var B=null,z=null,S=x,y=x=0,C=null;S!==null&&y<w.length;y++){S.index>y?(C=S,S=null):C=S.sibling;var I=g(b,S,w[y],R);if(I===null){S===null&&(S=C);break}t&&S&&I.alternate===null&&e(b,S),x=i(I,x,y),z===null?B=I:z.sibling=I,z=I,S=C}if(y===w.length)return n(b,S),Ne&&Jr(b,y),B;if(S===null){for(;y<w.length;y++)S=p(b,w[y],R),S!==null&&(x=i(S,x,y),z===null?B=S:z.sibling=S,z=S);return Ne&&Jr(b,y),B}for(S=r(b,S);y<w.length;y++)C=E(S,b,y,w[y],R),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?y:C.key),x=i(C,x,y),z===null?B=C:z.sibling=C,z=C);return t&&S.forEach(function(P){return e(b,P)}),Ne&&Jr(b,y),B}function N(b,x,w,R){var B=ta(w);if(typeof B!="function")throw Error($(150));if(w=B.call(w),w==null)throw Error($(151));for(var z=B=null,S=x,y=x=0,C=null,I=w.next();S!==null&&!I.done;y++,I=w.next()){S.index>y?(C=S,S=null):C=S.sibling;var P=g(b,S,I.value,R);if(P===null){S===null&&(S=C);break}t&&S&&P.alternate===null&&e(b,S),x=i(P,x,y),z===null?B=P:z.sibling=P,z=P,S=C}if(I.done)return n(b,S),Ne&&Jr(b,y),B;if(S===null){for(;!I.done;y++,I=w.next())I=p(b,I.value,R),I!==null&&(x=i(I,x,y),z===null?B=I:z.sibling=I,z=I);return Ne&&Jr(b,y),B}for(S=r(b,S);!I.done;y++,I=w.next())I=E(S,b,y,I.value,R),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?y:I.key),x=i(I,x,y),z===null?B=I:z.sibling=I,z=I);return t&&S.forEach(function(j){return e(b,j)}),Ne&&Jr(b,y),B}function k(b,x,w,R){if(typeof w=="object"&&w!==null&&w.type===Hs&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Xo:e:{for(var B=w.key,z=x;z!==null;){if(z.key===B){if(B=w.type,B===Hs){if(z.tag===7){n(b,z.sibling),x=s(z,w.props.children),x.return=b,b=x;break e}}else if(z.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===or&&Kg(B)===z.type){n(b,z.sibling),x=s(z,w.props),x.ref=aa(b,z,w),x.return=b,b=x;break e}n(b,z);break}else e(b,z);z=z.sibling}w.type===Hs?(x=as(w.props.children,b.mode,R,w.key),x.return=b,b=x):(R=Pl(w.type,w.key,w.props,null,b.mode,R),R.ref=aa(b,x,w),R.return=b,b=R)}return a(b);case $s:e:{for(z=w.key;x!==null;){if(x.key===z)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(b,x.sibling),x=s(x,w.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=yd(w,b.mode,R),x.return=b,b=x}return a(b);case or:return z=w._init,k(b,x,z(w._payload),R)}if(ua(w))return _(b,x,w,R);if(ta(w))return N(b,x,w,R);cl(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(b,x.sibling),x=s(x,w),x.return=b,b=x):(n(b,x),x=vd(w,b.mode,R),x.return=b,b=x),a(b)):n(b,x)}return k}var pi=B_(!0),z_=B_(!1),sc=zr(null),ic=null,Xs=null,Df=null;function Of(){Df=Xs=ic=null}function Mf(t){var e=sc.current;ke(sc),t._currentValue=e}function fh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ii(t,e){ic=t,Df=Xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tt=!0),t.firstContext=null)}function Yt(t){var e=t._currentValue;if(Df!==t)if(t={context:t,memoizedValue:e,next:null},Xs===null){if(ic===null)throw Error($(308));Xs=t,ic.dependencies={lanes:0,firstContext:t}}else Xs=Xs.next=t;return e}var es=null;function Lf(t){es===null?es=[t]:es.push(t)}function $_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Lf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hn(t,r)}function Hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lr=!1;function Vf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function br(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hn(t,n)}return s=r.interleaved,s===null?(e.next=e,Lf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hn(t,n)}function Tl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bf(t,n)}}function qg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ac(t,e,n,r){var s=t.updateQueue;lr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;a=0,f=d=u=null,l=i;do{var g=l.lane,E=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:E,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,N=l;switch(g=e,E=n,N.tag){case 1:if(_=N.payload,typeof _=="function"){p=_.call(E,p,g);break e}p=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=N.payload,g=typeof _=="function"?_.call(E,p,g):_,g==null)break e;p=De({},p,g);break e;case 2:lr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else E={eventTime:E,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=E,u=p):f=f.next=E,a|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ds|=a,t.lanes=a,t.memoizedState=p}}function Qg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var xo={},_n=zr(xo),Qa=zr(xo),Ja=zr(xo);function ts(t){if(t===xo)throw Error($(174));return t}function Uf(t,e){switch(Ce(Ja,e),Ce(Qa,t),Ce(_n,xo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kd(e,t)}ke(_n),Ce(_n,e)}function gi(){ke(_n),ke(Qa),ke(Ja)}function W_(t){ts(Ja.current);var e=ts(_n.current),n=Kd(e,t.type);e!==n&&(Ce(Qa,t),Ce(_n,n))}function Ff(t){Qa.current===t&&(ke(_n),ke(Qa))}var Ae=zr(0);function oc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dd=[];function Bf(){for(var t=0;t<dd.length;t++)dd[t]._workInProgressVersionPrimary=null;dd.length=0}var Il=Jn.ReactCurrentDispatcher,hd=Jn.ReactCurrentBatchConfig,us=0,Pe=null,He=null,Qe=null,lc=!1,Ca=!1,Ya=0,qS=0;function lt(){throw Error($(321))}function zf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dn(t[n],e[n]))return!1;return!0}function $f(t,e,n,r,s,i){if(us=i,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Il.current=t===null||t.memoizedState===null?XS:ZS,t=n(r,s),Ca){i=0;do{if(Ca=!1,Ya=0,25<=i)throw Error($(301));i+=1,Qe=He=null,e.updateQueue=null,Il.current=eT,t=n(r,s)}while(Ca)}if(Il.current=cc,e=He!==null&&He.next!==null,us=0,Qe=He=Pe=null,lc=!1,e)throw Error($(300));return t}function Hf(){var t=Ya!==0;return Ya=0,t}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Pe.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Xt(){if(He===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Qe===null?Pe.memoizedState:Qe.next;if(e!==null)Qe=e,He=t;else{if(t===null)throw Error($(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Qe===null?Pe.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function Xa(t,e){return typeof e=="function"?e(t):e}function fd(t){var e=Xt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,d=i;do{var f=d.lane;if((us&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,a=r):u=u.next=p,Pe.lanes|=f,ds|=f}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=l,dn(r,e.memoizedState)||(Tt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Pe.lanes|=i,ds|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function md(t){var e=Xt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);dn(i,e.memoizedState)||(Tt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function G_(){}function K_(t,e){var n=Pe,r=Xt(),s=e(),i=!dn(r.memoizedState,s);if(i&&(r.memoizedState=s,Tt=!0),r=r.queue,Wf(J_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,Za(9,Q_.bind(null,n,r,s,e),void 0,null),Ye===null)throw Error($(349));us&30||q_(n,e,s)}return s}function q_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Q_(t,e,n,r){e.value=n,e.getSnapshot=r,Y_(e)&&X_(t)}function J_(t,e,n){return n(function(){Y_(e)&&X_(t)})}function Y_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dn(t,n)}catch{return!0}}function X_(t){var e=Hn(t,1);e!==null&&cn(e,t,1,-1)}function Jg(t){var e=gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:t},e.queue=t,t=t.dispatch=YS.bind(null,Pe,t),[e.memoizedState,t]}function Za(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Z_(){return Xt().memoizedState}function kl(t,e,n,r){var s=gn();Pe.flags|=t,s.memoizedState=Za(1|e,n,void 0,r===void 0?null:r)}function Kc(t,e,n,r){var s=Xt();r=r===void 0?null:r;var i=void 0;if(He!==null){var a=He.memoizedState;if(i=a.destroy,r!==null&&zf(r,a.deps)){s.memoizedState=Za(e,n,i,r);return}}Pe.flags|=t,s.memoizedState=Za(1|e,n,i,r)}function Yg(t,e){return kl(8390656,8,t,e)}function Wf(t,e){return Kc(2048,8,t,e)}function ew(t,e){return Kc(4,2,t,e)}function tw(t,e){return Kc(4,4,t,e)}function nw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rw(t,e,n){return n=n!=null?n.concat([t]):null,Kc(4,4,nw.bind(null,e,t),n)}function Gf(){}function sw(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function iw(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function aw(t,e,n){return us&21?(dn(n,e)||(n=d_(),Pe.lanes|=n,ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=n)}function QS(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=hd.transition;hd.transition={};try{t(!1),e()}finally{we=n,hd.transition=r}}function ow(){return Xt().memoizedState}function JS(t,e,n){var r=Sr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lw(t))cw(e,n);else if(n=$_(t,e,n,r),n!==null){var s=_t();cn(n,t,r,s),uw(n,e,r)}}function YS(t,e,n){var r=Sr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lw(t))cw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,dn(l,a)){var u=e.interleaved;u===null?(s.next=s,Lf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=$_(t,e,s,r),n!==null&&(s=_t(),cn(n,t,r,s),uw(n,e,r))}}function lw(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function cw(t,e){Ca=lc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bf(t,n)}}var cc={readContext:Yt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},XS={readContext:Yt,useCallback:function(t,e){return gn().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:Yg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,kl(4194308,4,nw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return kl(4194308,4,t,e)},useInsertionEffect:function(t,e){return kl(4,2,t,e)},useMemo:function(t,e){var n=gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=JS.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=gn();return t={current:t},e.memoizedState=t},useState:Jg,useDebugValue:Gf,useDeferredValue:function(t){return gn().memoizedState=t},useTransition:function(){var t=Jg(!1),e=t[0];return t=QS.bind(null,t[1]),gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,s=gn();if(Ne){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Ye===null)throw Error($(349));us&30||q_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Yg(J_.bind(null,r,i,t),[t]),r.flags|=2048,Za(9,Q_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=gn(),e=Ye.identifierPrefix;if(Ne){var n=Mn,r=On;n=(r&~(1<<32-ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ya++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZS={readContext:Yt,useCallback:sw,useContext:Yt,useEffect:Wf,useImperativeHandle:rw,useInsertionEffect:ew,useLayoutEffect:tw,useMemo:iw,useReducer:fd,useRef:Z_,useState:function(){return fd(Xa)},useDebugValue:Gf,useDeferredValue:function(t){var e=Xt();return aw(e,He.memoizedState,t)},useTransition:function(){var t=fd(Xa)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:G_,useSyncExternalStore:K_,useId:ow,unstable_isNewReconciler:!1},eT={readContext:Yt,useCallback:sw,useContext:Yt,useEffect:Wf,useImperativeHandle:rw,useInsertionEffect:ew,useLayoutEffect:tw,useMemo:iw,useReducer:md,useRef:Z_,useState:function(){return md(Xa)},useDebugValue:Gf,useDeferredValue:function(t){var e=Xt();return He===null?e.memoizedState=t:aw(e,He.memoizedState,t)},useTransition:function(){var t=md(Xa)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:G_,useSyncExternalStore:K_,useId:ow,unstable_isNewReconciler:!1};function nn(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function mh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qc={isMounted:function(t){return(t=t._reactInternals)?Es(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_t(),s=Sr(t),i=Un(r,s);i.payload=e,n!=null&&(i.callback=n),e=br(t,i,s),e!==null&&(cn(e,t,s,r),Tl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_t(),s=Sr(t),i=Un(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=br(t,i,s),e!==null&&(cn(e,t,s,r),Tl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_t(),r=Sr(t),s=Un(n,r);s.tag=2,e!=null&&(s.callback=e),e=br(t,s,r),e!==null&&(cn(e,t,r,n),Tl(e,t,r))}};function Xg(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Wa(n,r)||!Wa(s,i):!0}function dw(t,e,n){var r=!1,s=jr,i=e.contextType;return typeof i=="object"&&i!==null?i=Yt(i):(s=kt(e)?ls:mt.current,r=e.contextTypes,i=(r=r!=null)?fi(t,s):jr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Zg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qc.enqueueReplaceState(e,e.state,null)}function ph(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Vf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Yt(i):(i=kt(e)?ls:mt.current,s.context=fi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(mh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&qc.enqueueReplaceState(s,s.state,null),ac(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function vi(t,e){try{var n="",r=e;do n+=kC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function pd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tT=typeof WeakMap=="function"?WeakMap:Map;function hw(t,e,n){n=Un(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){dc||(dc=!0,Th=r),gh(t,e)},n}function fw(t,e,n){n=Un(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){gh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gh(t,e),typeof r!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function ev(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=pT.bind(null,t,e,n),e.then(t,t))}function tv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function nv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Un(-1,1),e.tag=2,br(n,e,1))),n.lanes|=1),t)}var nT=Jn.ReactCurrentOwner,Tt=!1;function xt(t,e,n,r){e.child=t===null?z_(e,null,n,r):pi(e,t.child,n,r)}function rv(t,e,n,r,s){n=n.render;var i=e.ref;return ii(e,s),r=$f(t,e,n,r,i,s),n=Hf(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ne&&n&&Rf(e),e.flags|=1,xt(t,e,r,s),e.child)}function sv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!em(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,mw(t,e,i,r,s)):(t=Pl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Wa,n(a,r)&&t.ref===e.ref)return Wn(t,e,s)}return e.flags|=1,t=Tr(i,r),t.ref=e.ref,t.return=e,e.child=t}function mw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Wa(i,r)&&t.ref===e.ref)if(Tt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Tt=!0);else return e.lanes=t.lanes,Wn(t,e,s)}return vh(t,e,n,r,s)}function pw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(ei,Ot),Ot|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(ei,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ce(ei,Ot),Ot|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ce(ei,Ot),Ot|=r;return xt(t,e,s,n),e.child}function gw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vh(t,e,n,r,s){var i=kt(n)?ls:mt.current;return i=fi(e,i),ii(e,s),n=$f(t,e,n,r,i,s),r=Hf(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ne&&r&&Rf(e),e.flags|=1,xt(t,e,n,s),e.child)}function iv(t,e,n,r,s){if(kt(n)){var i=!0;tc(e)}else i=!1;if(ii(e,s),e.stateNode===null)Nl(t,e),dw(e,n,r),ph(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Yt(d):(d=kt(n)?ls:mt.current,d=fi(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Zg(e,a,r,d),lr=!1;var g=e.memoizedState;a.state=g,ac(e,r,a,s),u=e.memoizedState,l!==r||g!==u||It.current||lr?(typeof f=="function"&&(mh(e,n,f,r),u=e.memoizedState),(l=lr||Xg(e,n,l,r,g,u,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,H_(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:nn(e.type,l),a.props=d,p=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Yt(u):(u=kt(n)?ls:mt.current,u=fi(e,u));var E=n.getDerivedStateFromProps;(f=typeof E=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||g!==u)&&Zg(e,a,r,u),lr=!1,g=e.memoizedState,a.state=g,ac(e,r,a,s);var _=e.memoizedState;l!==p||g!==_||It.current||lr?(typeof E=="function"&&(mh(e,n,E,r),_=e.memoizedState),(d=lr||Xg(e,n,d,r,g,_,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,_,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,_,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),a.props=r,a.state=_,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return yh(t,e,n,r,i,s)}function yh(t,e,n,r,s,i){gw(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Hg(e,n,!1),Wn(t,e,i);r=e.stateNode,nT.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=pi(e,t.child,null,i),e.child=pi(e,null,l,i)):xt(t,e,l,i),e.memoizedState=r.state,s&&Hg(e,n,!0),e.child}function vw(t){var e=t.stateNode;e.pendingContext?$g(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$g(t,e.context,!1),Uf(t,e.containerInfo)}function av(t,e,n,r,s){return mi(),jf(s),e.flags|=256,xt(t,e,n,r),e.child}var xh={dehydrated:null,treeContext:null,retryLane:0};function _h(t){return{baseLanes:t,cachePool:null,transitions:null}}function yw(t,e,n){var r=e.pendingProps,s=Ae.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ce(Ae,s&1),t===null)return hh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Yc(a,r,0,null),t=as(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=_h(n),e.memoizedState=xh,t):Kf(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return rT(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Tr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Tr(l,i):(i=as(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?_h(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=xh,r}return i=t.child,t=i.sibling,r=Tr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Kf(t,e){return e=Yc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ul(t,e,n,r){return r!==null&&jf(r),pi(e,t.child,null,n),t=Kf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rT(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=pd(Error($(422))),ul(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Yc({mode:"visible",children:r.children},s,0,null),i=as(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&pi(e,t.child,null,a),e.child.memoizedState=_h(a),e.memoizedState=xh,i);if(!(e.mode&1))return ul(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=pd(i,r,void 0),ul(t,e,a,r)}if(l=(a&t.childLanes)!==0,Tt||l){if(r=Ye,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hn(t,s),cn(r,t,s,-1))}return Zf(),r=pd(Error($(421))),ul(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=gT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Lt=Er(s.nextSibling),Vt=e,Ne=!0,sn=null,t!==null&&($t[Ht++]=On,$t[Ht++]=Mn,$t[Ht++]=cs,On=t.id,Mn=t.overflow,cs=e),e=Kf(e,r.children),e.flags|=4096,e)}function ov(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fh(t.return,e,n)}function gd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function xw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(xt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ov(t,n,e);else if(t.tag===19)ov(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&oc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),gd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&oc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}gd(e,!0,n,null,i);break;case"together":gd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Nl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sT(t,e,n){switch(e.tag){case 3:vw(e),mi();break;case 5:W_(e);break;case 1:kt(e.type)&&tc(e);break;case 4:Uf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ce(sc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?yw(t,e,n):(Ce(Ae,Ae.current&1),t=Wn(t,e,n),t!==null?t.sibling:null);Ce(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ce(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,pw(t,e,n)}return Wn(t,e,n)}var _w,wh,ww,Ew;_w=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wh=function(){};ww=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ts(_n.current);var i=null;switch(n){case"input":s=$d(t,s),r=$d(t,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=Gd(t,s),r=Gd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zl)}qd(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Va.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Va.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Te("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Ew=function(t,e,n,r){n!==r&&(e.flags|=4)};function oa(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iT(t,e,n){var r=e.pendingProps;switch(Pf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(e),null;case 1:return kt(e.type)&&ec(),ct(e),null;case 3:return r=e.stateNode,gi(),ke(It),ke(mt),Bf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ll(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(Nh(sn),sn=null))),wh(t,e),ct(e),null;case 5:Ff(e);var s=ts(Ja.current);if(n=e.type,t!==null&&e.stateNode!=null)ww(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return ct(e),null}if(t=ts(_n.current),ll(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[yn]=e,r[qa]=i,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<ha.length;s++)Te(ha[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":gg(r,i),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Te("invalid",r);break;case"textarea":yg(r,i),Te("invalid",r)}qd(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ol(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ol(r.textContent,l,t),s=["children",""+l]):Va.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Te("scroll",r)}switch(n){case"input":Zo(r),vg(r,i,!0);break;case"textarea":Zo(r),xg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Zl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Jx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[yn]=e,t[qa]=r,_w(t,e,!1,!1),e.stateNode=t;e:{switch(a=Qd(n,r),n){case"dialog":Te("cancel",t),Te("close",t),s=r;break;case"iframe":case"object":case"embed":Te("load",t),s=r;break;case"video":case"audio":for(s=0;s<ha.length;s++)Te(ha[s],t);s=r;break;case"source":Te("error",t),s=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),s=r;break;case"details":Te("toggle",t),s=r;break;case"input":gg(t,r),s=$d(t,r),Te("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),Te("invalid",t);break;case"textarea":yg(t,r),s=Gd(t,r),Te("invalid",t);break;default:s=r}qd(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Zx(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Yx(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ua(t,u):typeof u=="number"&&Ua(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Va.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Te("scroll",t):u!=null&&vf(t,i,u,a))}switch(n){case"input":Zo(t),vg(t,r,!1);break;case"textarea":Zo(t),xg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ti(t,!!r.multiple,i,!1):r.defaultValue!=null&&ti(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Zl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ct(e),null;case 6:if(t&&e.stateNode!=null)Ew(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=ts(Ja.current),ts(_n.current),ll(e)){if(r=e.stateNode,n=e.memoizedProps,r[yn]=e,(i=r.nodeValue!==n)&&(t=Vt,t!==null))switch(t.tag){case 3:ol(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ol(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yn]=e,e.stateNode=r}return ct(e),null;case 13:if(ke(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Lt!==null&&e.mode&1&&!(e.flags&128))F_(),mi(),e.flags|=98560,i=!1;else if(i=ll(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[yn]=e}else mi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ct(e),i=!1}else sn!==null&&(Nh(sn),sn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?Ge===0&&(Ge=3):Zf())),e.updateQueue!==null&&(e.flags|=4),ct(e),null);case 4:return gi(),wh(t,e),t===null&&Ga(e.stateNode.containerInfo),ct(e),null;case 10:return Mf(e.type._context),ct(e),null;case 17:return kt(e.type)&&ec(),ct(e),null;case 19:if(ke(Ae),i=e.memoizedState,i===null)return ct(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)oa(i,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=oc(t),a!==null){for(e.flags|=128,oa(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Ae,Ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>yi&&(e.flags|=128,r=!0,oa(i,!1),e.lanes=4194304)}else{if(!r)if(t=oc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),oa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ne)return ct(e),null}else 2*Fe()-i.renderingStartTime>yi&&n!==1073741824&&(e.flags|=128,r=!0,oa(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=Ae.current,Ce(Ae,r?n&1|2:n&1),e):(ct(e),null);case 22:case 23:return Xf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ot&1073741824&&(ct(e),e.subtreeFlags&6&&(e.flags|=8192)):ct(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function aT(t,e){switch(Pf(e),e.tag){case 1:return kt(e.type)&&ec(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gi(),ke(It),ke(mt),Bf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ff(e),null;case 13:if(ke(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));mi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Ae),null;case 4:return gi(),null;case 10:return Mf(e.type._context),null;case 22:case 23:return Xf(),null;case 24:return null;default:return null}}var dl=!1,ht=!1,oT=typeof WeakSet=="function"?WeakSet:Set,J=null;function Zs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function Eh(t,e,n){try{n()}catch(r){Le(t,e,r)}}var lv=!1;function lT(t,e){if(ih=Jl,t=I_(),Af(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var E;p!==n||s!==0&&p.nodeType!==3||(l=a+s),p!==i||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(E=p.firstChild)!==null;)g=p,p=E;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=a),g===i&&++f===r&&(u=a),(E=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=E}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ah={focusedElem:t,selectionRange:n},Jl=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var N=_.memoizedProps,k=_.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?N:nn(e.type,N),k);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(R){Le(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return _=lv,lv=!1,_}function Sa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Eh(e,n,i)}s=s.next}while(s!==r)}}function Qc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function bh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bw(t){var e=t.alternate;e!==null&&(t.alternate=null,bw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yn],delete e[qa],delete e[ch],delete e[HS],delete e[WS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Cw(t){return t.tag===5||t.tag===3||t.tag===4}function cv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Cw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ch(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zl));else if(r!==4&&(t=t.child,t!==null))for(Ch(t,e,n),t=t.sibling;t!==null;)Ch(t,e,n),t=t.sibling}function Sh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sh(t,e,n),t=t.sibling;t!==null;)Sh(t,e,n),t=t.sibling}var Ze=null,rn=!1;function ir(t,e,n){for(n=n.child;n!==null;)Sw(t,e,n),n=n.sibling}function Sw(t,e,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(Bc,n)}catch{}switch(n.tag){case 5:ht||Zs(n,e);case 6:var r=Ze,s=rn;Ze=null,ir(t,e,n),Ze=r,rn=s,Ze!==null&&(rn?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(rn?(t=Ze,n=n.stateNode,t.nodeType===8?cd(t.parentNode,n):t.nodeType===1&&cd(t,n),$a(t)):cd(Ze,n.stateNode));break;case 4:r=Ze,s=rn,Ze=n.stateNode.containerInfo,rn=!0,ir(t,e,n),Ze=r,rn=s;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Eh(n,e,a),s=s.next}while(s!==r)}ir(t,e,n);break;case 1:if(!ht&&(Zs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Le(n,e,l)}ir(t,e,n);break;case 21:ir(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,ir(t,e,n),ht=r):ir(t,e,n);break;default:ir(t,e,n)}}function uv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oT),e.forEach(function(r){var s=vT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ze=l.stateNode,rn=!1;break e;case 3:Ze=l.stateNode.containerInfo,rn=!0;break e;case 4:Ze=l.stateNode.containerInfo,rn=!0;break e}l=l.return}if(Ze===null)throw Error($(160));Sw(i,a,s),Ze=null,rn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Le(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Tw(e,t),e=e.sibling}function Tw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),mn(t),r&4){try{Sa(3,t,t.return),Qc(3,t)}catch(N){Le(t,t.return,N)}try{Sa(5,t,t.return)}catch(N){Le(t,t.return,N)}}break;case 1:tn(e,t),mn(t),r&512&&n!==null&&Zs(n,n.return);break;case 5:if(tn(e,t),mn(t),r&512&&n!==null&&Zs(n,n.return),t.flags&32){var s=t.stateNode;try{Ua(s,"")}catch(N){Le(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&qx(s,i),Qd(l,a);var d=Qd(l,i);for(a=0;a<u.length;a+=2){var f=u[a],p=u[a+1];f==="style"?Zx(s,p):f==="dangerouslySetInnerHTML"?Yx(s,p):f==="children"?Ua(s,p):vf(s,f,p,d)}switch(l){case"input":Hd(s,i);break;case"textarea":Qx(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?ti(s,!!i.multiple,E,!1):g!==!!i.multiple&&(i.defaultValue!=null?ti(s,!!i.multiple,i.defaultValue,!0):ti(s,!!i.multiple,i.multiple?[]:"",!1))}s[qa]=i}catch(N){Le(t,t.return,N)}}break;case 6:if(tn(e,t),mn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Le(t,t.return,N)}}break;case 3:if(tn(e,t),mn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$a(e.containerInfo)}catch(N){Le(t,t.return,N)}break;case 4:tn(e,t),mn(t);break;case 13:tn(e,t),mn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Jf=Fe())),r&4&&uv(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(d=ht)||f,tn(e,t),ht=d):tn(e,t),mn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(J=t,f=t.child;f!==null;){for(p=J=f;J!==null;){switch(g=J,E=g.child,g.tag){case 0:case 11:case 14:case 15:Sa(4,g,g.return);break;case 1:Zs(g,g.return);var _=g.stateNode;if(typeof _.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(N){Le(r,n,N)}}break;case 5:Zs(g,g.return);break;case 22:if(g.memoizedState!==null){hv(p);continue}}E!==null?(E.return=g,J=E):hv(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Xx("display",a))}catch(N){Le(t,t.return,N)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(N){Le(t,t.return,N)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:tn(e,t),mn(t),r&4&&uv(t);break;case 21:break;default:tn(e,t),mn(t)}}function mn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Cw(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ua(s,""),r.flags&=-33);var i=cv(t);Sh(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=cv(t);Ch(t,l,a);break;default:throw Error($(161))}}catch(u){Le(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cT(t,e,n){J=t,Iw(t)}function Iw(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||dl;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ht;l=dl;var d=ht;if(dl=a,(ht=u)&&!d)for(J=s;J!==null;)a=J,u=a.child,a.tag===22&&a.memoizedState!==null?fv(s):u!==null?(u.return=a,J=u):fv(s);for(;i!==null;)J=i,Iw(i),i=i.sibling;J=s,dl=l,ht=d}dv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):dv(t)}}function dv(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||Qc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:nn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Qg(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qg(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&$a(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}ht||e.flags&512&&bh(e)}catch(g){Le(e,e.return,g)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function hv(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function fv(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qc(4,e)}catch(u){Le(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Le(e,s,u)}}var i=e.return;try{bh(e)}catch(u){Le(e,i,u)}break;case 5:var a=e.return;try{bh(e)}catch(u){Le(e,a,u)}}}catch(u){Le(e,e.return,u)}if(e===t){J=null;break}var l=e.sibling;if(l!==null){l.return=e.return,J=l;break}J=e.return}}var uT=Math.ceil,uc=Jn.ReactCurrentDispatcher,qf=Jn.ReactCurrentOwner,qt=Jn.ReactCurrentBatchConfig,ge=0,Ye=null,ze=null,nt=0,Ot=0,ei=zr(0),Ge=0,eo=null,ds=0,Jc=0,Qf=0,Ta=null,St=null,Jf=0,yi=1/0,Pn=null,dc=!1,Th=null,Cr=null,hl=!1,gr=null,hc=0,Ia=0,Ih=null,Al=-1,Rl=0;function _t(){return ge&6?Fe():Al!==-1?Al:Al=Fe()}function Sr(t){return t.mode&1?ge&2&&nt!==0?nt&-nt:KS.transition!==null?(Rl===0&&(Rl=d_()),Rl):(t=we,t!==0||(t=window.event,t=t===void 0?16:y_(t.type)),t):1}function cn(t,e,n,r){if(50<Ia)throw Ia=0,Ih=null,Error($(185));go(t,n,r),(!(ge&2)||t!==Ye)&&(t===Ye&&(!(ge&2)&&(Jc|=n),Ge===4&&dr(t,nt)),Nt(t,r),n===1&&ge===0&&!(e.mode&1)&&(yi=Fe()+500,Gc&&$r()))}function Nt(t,e){var n=t.callbackNode;KC(t,e);var r=Ql(t,t===Ye?nt:0);if(r===0)n!==null&&Eg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Eg(n),e===1)t.tag===0?GS(mv.bind(null,t)):L_(mv.bind(null,t)),zS(function(){!(ge&6)&&$r()}),n=null;else{switch(h_(r)){case 1:n=Ef;break;case 4:n=c_;break;case 16:n=ql;break;case 536870912:n=u_;break;default:n=ql}n=Ow(n,kw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kw(t,e){if(Al=-1,Rl=0,ge&6)throw Error($(327));var n=t.callbackNode;if(ai()&&t.callbackNode!==n)return null;var r=Ql(t,t===Ye?nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=fc(t,r);else{e=r;var s=ge;ge|=2;var i=Aw();(Ye!==t||nt!==e)&&(Pn=null,yi=Fe()+500,is(t,e));do try{fT();break}catch(l){Nw(t,l)}while(!0);Of(),uc.current=i,ge=s,ze!==null?e=0:(Ye=null,nt=0,e=Ge)}if(e!==0){if(e===2&&(s=eh(t),s!==0&&(r=s,e=kh(t,s))),e===1)throw n=eo,is(t,0),dr(t,r),Nt(t,Fe()),n;if(e===6)dr(t,r);else{if(s=t.current.alternate,!(r&30)&&!dT(s)&&(e=fc(t,r),e===2&&(i=eh(t),i!==0&&(r=i,e=kh(t,i))),e===1))throw n=eo,is(t,0),dr(t,r),Nt(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Yr(t,St,Pn);break;case 3:if(dr(t,r),(r&130023424)===r&&(e=Jf+500-Fe(),10<e)){if(Ql(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=lh(Yr.bind(null,t,St,Pn),e);break}Yr(t,St,Pn);break;case 4:if(dr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-ln(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uT(r/1960))-r,10<r){t.timeoutHandle=lh(Yr.bind(null,t,St,Pn),r);break}Yr(t,St,Pn);break;case 5:Yr(t,St,Pn);break;default:throw Error($(329))}}}return Nt(t,Fe()),t.callbackNode===n?kw.bind(null,t):null}function kh(t,e){var n=Ta;return t.current.memoizedState.isDehydrated&&(is(t,e).flags|=256),t=fc(t,e),t!==2&&(e=St,St=n,e!==null&&Nh(e)),t}function Nh(t){St===null?St=t:St.push.apply(St,t)}function dT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!dn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dr(t,e){for(e&=~Qf,e&=~Jc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ln(e),r=1<<n;t[n]=-1,e&=~r}}function mv(t){if(ge&6)throw Error($(327));ai();var e=Ql(t,0);if(!(e&1))return Nt(t,Fe()),null;var n=fc(t,e);if(t.tag!==0&&n===2){var r=eh(t);r!==0&&(e=r,n=kh(t,r))}if(n===1)throw n=eo,is(t,0),dr(t,e),Nt(t,Fe()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yr(t,St,Pn),Nt(t,Fe()),null}function Yf(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(yi=Fe()+500,Gc&&$r())}}function hs(t){gr!==null&&gr.tag===0&&!(ge&6)&&ai();var e=ge;ge|=1;var n=qt.transition,r=we;try{if(qt.transition=null,we=1,t)return t()}finally{we=r,qt.transition=n,ge=e,!(ge&6)&&$r()}}function Xf(){Ot=ei.current,ke(ei)}function is(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,BS(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(Pf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ec();break;case 3:gi(),ke(It),ke(mt),Bf();break;case 5:Ff(r);break;case 4:gi();break;case 13:ke(Ae);break;case 19:ke(Ae);break;case 10:Mf(r.type._context);break;case 22:case 23:Xf()}n=n.return}if(Ye=t,ze=t=Tr(t.current,null),nt=Ot=e,Ge=0,eo=null,Qf=Jc=ds=0,St=Ta=null,es!==null){for(e=0;e<es.length;e++)if(n=es[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}es=null}return t}function Nw(t,e){do{var n=ze;try{if(Of(),Il.current=cc,lc){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}lc=!1}if(us=0,Qe=He=Pe=null,Ca=!1,Ya=0,qf.current=null,n===null||n.return===null){Ge=1,eo=e,ze=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=nt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var E=tv(a);if(E!==null){E.flags&=-257,nv(E,a,l,i,e),E.mode&1&&ev(i,d,e),e=E,u=d;var _=e.updateQueue;if(_===null){var N=new Set;N.add(u),e.updateQueue=N}else _.add(u);break e}else{if(!(e&1)){ev(i,d,e),Zf();break e}u=Error($(426))}}else if(Ne&&l.mode&1){var k=tv(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),nv(k,a,l,i,e),jf(vi(u,l));break e}}i=u=vi(u,l),Ge!==4&&(Ge=2),Ta===null?Ta=[i]:Ta.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=hw(i,u,e);qg(i,b);break e;case 1:l=u;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Cr===null||!Cr.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=fw(i,l,e);qg(i,R);break e}}i=i.return}while(i!==null)}Pw(n)}catch(B){e=B,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function Aw(){var t=uc.current;return uc.current=cc,t===null?cc:t}function Zf(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Ye===null||!(ds&268435455)&&!(Jc&268435455)||dr(Ye,nt)}function fc(t,e){var n=ge;ge|=2;var r=Aw();(Ye!==t||nt!==e)&&(Pn=null,is(t,e));do try{hT();break}catch(s){Nw(t,s)}while(!0);if(Of(),ge=n,uc.current=r,ze!==null)throw Error($(261));return Ye=null,nt=0,Ge}function hT(){for(;ze!==null;)Rw(ze)}function fT(){for(;ze!==null&&!VC();)Rw(ze)}function Rw(t){var e=Dw(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?Pw(t):ze=e,qf.current=null}function Pw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=aT(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,ze=null;return}}else if(n=iT(n,e,Ot),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);Ge===0&&(Ge=5)}function Yr(t,e,n){var r=we,s=qt.transition;try{qt.transition=null,we=1,mT(t,e,n,r)}finally{qt.transition=s,we=r}return null}function mT(t,e,n,r){do ai();while(gr!==null);if(ge&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(qC(t,i),t===Ye&&(ze=Ye=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hl||(hl=!0,Ow(ql,function(){return ai(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=qt.transition,qt.transition=null;var a=we;we=1;var l=ge;ge|=4,qf.current=null,lT(t,n),Tw(n,t),DS(ah),Jl=!!ih,ah=ih=null,t.current=n,cT(n),UC(),ge=l,we=a,qt.transition=i}else t.current=n;if(hl&&(hl=!1,gr=t,hc=s),i=t.pendingLanes,i===0&&(Cr=null),zC(n.stateNode),Nt(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(dc)throw dc=!1,t=Th,Th=null,t;return hc&1&&t.tag!==0&&ai(),i=t.pendingLanes,i&1?t===Ih?Ia++:(Ia=0,Ih=t):Ia=0,$r(),null}function ai(){if(gr!==null){var t=h_(hc),e=qt.transition,n=we;try{if(qt.transition=null,we=16>t?16:t,gr===null)var r=!1;else{if(t=gr,gr=null,hc=0,ge&6)throw Error($(331));var s=ge;for(ge|=4,J=t.current;J!==null;){var i=J,a=i.child;if(J.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(J=d;J!==null;){var f=J;switch(f.tag){case 0:case 11:case 15:Sa(8,f,i)}var p=f.child;if(p!==null)p.return=f,J=p;else for(;J!==null;){f=J;var g=f.sibling,E=f.return;if(bw(f),f===d){J=null;break}if(g!==null){g.return=E,J=g;break}J=E}}}var _=i.alternate;if(_!==null){var N=_.child;if(N!==null){_.child=null;do{var k=N.sibling;N.sibling=null,N=k}while(N!==null)}}J=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,J=a;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Sa(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,J=b;break e}J=i.return}}var x=t.current;for(J=x;J!==null;){a=J;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,J=w;else e:for(a=x;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Qc(9,l)}}catch(B){Le(l,l.return,B)}if(l===a){J=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,J=R;break e}J=l.return}}if(ge=s,$r(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(Bc,t)}catch{}r=!0}return r}finally{we=n,qt.transition=e}}return!1}function pv(t,e,n){e=vi(n,e),e=hw(t,e,1),t=br(t,e,1),e=_t(),t!==null&&(go(t,1,e),Nt(t,e))}function Le(t,e,n){if(t.tag===3)pv(t,t,n);else for(;e!==null;){if(e.tag===3){pv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cr===null||!Cr.has(r))){t=vi(n,t),t=fw(e,t,1),e=br(e,t,1),t=_t(),e!==null&&(go(e,1,t),Nt(e,t));break}}e=e.return}}function pT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&n,Ye===t&&(nt&n)===n&&(Ge===4||Ge===3&&(nt&130023424)===nt&&500>Fe()-Jf?is(t,0):Qf|=n),Nt(t,e)}function jw(t,e){e===0&&(t.mode&1?(e=nl,nl<<=1,!(nl&130023424)&&(nl=4194304)):e=1);var n=_t();t=Hn(t,e),t!==null&&(go(t,e,n),Nt(t,n))}function gT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jw(t,n)}function vT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),jw(t,n)}var Dw;Dw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)Tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tt=!1,sT(t,e,n);Tt=!!(t.flags&131072)}else Tt=!1,Ne&&e.flags&1048576&&V_(e,rc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Nl(t,e),t=e.pendingProps;var s=fi(e,mt.current);ii(e,n),s=$f(null,e,r,t,s,n);var i=Hf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kt(r)?(i=!0,tc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Vf(e),s.updater=qc,e.stateNode=s,s._reactInternals=e,ph(e,r,t,n),e=yh(null,e,r,!0,i,n)):(e.tag=0,Ne&&i&&Rf(e),xt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Nl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=xT(r),t=nn(r,t),s){case 0:e=vh(null,e,r,t,n);break e;case 1:e=iv(null,e,r,t,n);break e;case 11:e=rv(null,e,r,t,n);break e;case 14:e=sv(null,e,r,nn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),vh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),iv(t,e,r,s,n);case 3:e:{if(vw(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,H_(t,e),ac(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=vi(Error($(423)),e),e=av(t,e,r,n,s);break e}else if(r!==s){s=vi(Error($(424)),e),e=av(t,e,r,n,s);break e}else for(Lt=Er(e.stateNode.containerInfo.firstChild),Vt=e,Ne=!0,sn=null,n=z_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mi(),r===s){e=Wn(t,e,n);break e}xt(t,e,r,n)}e=e.child}return e;case 5:return W_(e),t===null&&hh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,oh(r,s)?a=null:i!==null&&oh(r,i)&&(e.flags|=32),gw(t,e),xt(t,e,a,n),e.child;case 6:return t===null&&hh(e),null;case 13:return yw(t,e,n);case 4:return Uf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pi(e,null,r,n):xt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),rv(t,e,r,s,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ce(sc,r._currentValue),r._currentValue=a,i!==null)if(dn(i.value,a)){if(i.children===s.children&&!It.current){e=Wn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Un(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),fh(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error($(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),fh(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}xt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ii(e,n),s=Yt(s),r=r(s),e.flags|=1,xt(t,e,r,n),e.child;case 14:return r=e.type,s=nn(r,e.pendingProps),s=nn(r.type,s),sv(t,e,r,s,n);case 15:return mw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),Nl(t,e),e.tag=1,kt(r)?(t=!0,tc(e)):t=!1,ii(e,n),dw(e,r,s),ph(e,r,s,n),yh(null,e,r,!0,t,n);case 19:return xw(t,e,n);case 22:return pw(t,e,n)}throw Error($(156,e.tag))};function Ow(t,e){return l_(t,e)}function yT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new yT(t,e,n,r)}function em(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xT(t){if(typeof t=="function")return em(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xf)return 11;if(t===_f)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pl(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")em(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Hs:return as(n.children,s,i,e);case yf:a=8,s|=8;break;case Ud:return t=Kt(12,n,e,s|2),t.elementType=Ud,t.lanes=i,t;case Fd:return t=Kt(13,n,e,s),t.elementType=Fd,t.lanes=i,t;case Bd:return t=Kt(19,n,e,s),t.elementType=Bd,t.lanes=i,t;case Wx:return Yc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $x:a=10;break e;case Hx:a=9;break e;case xf:a=11;break e;case _f:a=14;break e;case or:a=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Kt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function as(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function Yc(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=Wx,t.lanes=n,t.stateNode={isHidden:!1},t}function vd(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function yd(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _T(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xu(0),this.expirationTimes=Xu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tm(t,e,n,r,s,i,a,l,u){return t=new _T(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Kt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vf(i),t}function wT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$s,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Mw(t){if(!t)return jr;t=t._reactInternals;e:{if(Es(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(kt(n))return M_(t,n,e)}return e}function Lw(t,e,n,r,s,i,a,l,u){return t=tm(n,r,!0,t,s,i,a,l,u),t.context=Mw(null),n=t.current,r=_t(),s=Sr(n),i=Un(r,s),i.callback=e??null,br(n,i,s),t.current.lanes=s,go(t,s,r),Nt(t,r),t}function Xc(t,e,n,r){var s=e.current,i=_t(),a=Sr(s);return n=Mw(n),e.context===null?e.context=n:e.pendingContext=n,e=Un(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=br(s,e,a),t!==null&&(cn(t,s,a,i),Tl(t,s,a)),a}function mc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function nm(t,e){gv(t,e),(t=t.alternate)&&gv(t,e)}function ET(){return null}var Vw=typeof reportError=="function"?reportError:function(t){console.error(t)};function rm(t){this._internalRoot=t}Zc.prototype.render=rm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Xc(t,e,null,null)};Zc.prototype.unmount=rm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hs(function(){Xc(null,t,null,null)}),e[$n]=null}};function Zc(t){this._internalRoot=t}Zc.prototype.unstable_scheduleHydration=function(t){if(t){var e=p_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ur.length&&e!==0&&e<ur[n].priority;n++);ur.splice(n,0,t),n===0&&v_(t)}};function sm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function eu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vv(){}function bT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=mc(a);i.call(d)}}var a=Lw(e,r,t,0,null,!1,!1,"",vv);return t._reactRootContainer=a,t[$n]=a.current,Ga(t.nodeType===8?t.parentNode:t),hs(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=mc(u);l.call(d)}}var u=tm(t,0,!1,null,null,!1,!1,"",vv);return t._reactRootContainer=u,t[$n]=u.current,Ga(t.nodeType===8?t.parentNode:t),hs(function(){Xc(e,u,n,r)}),u}function tu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=mc(a);l.call(u)}}Xc(e,a,t,s)}else a=bT(n,e,t,s,r);return mc(a)}f_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=da(e.pendingLanes);n!==0&&(bf(e,n|1),Nt(e,Fe()),!(ge&6)&&(yi=Fe()+500,$r()))}break;case 13:hs(function(){var r=Hn(t,1);if(r!==null){var s=_t();cn(r,t,1,s)}}),nm(t,1)}};Cf=function(t){if(t.tag===13){var e=Hn(t,134217728);if(e!==null){var n=_t();cn(e,t,134217728,n)}nm(t,134217728)}};m_=function(t){if(t.tag===13){var e=Sr(t),n=Hn(t,e);if(n!==null){var r=_t();cn(n,t,e,r)}nm(t,e)}};p_=function(){return we};g_=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};Yd=function(t,e,n){switch(e){case"input":if(Hd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Wc(r);if(!s)throw Error($(90));Kx(r),Hd(r,s)}}}break;case"textarea":Qx(t,n);break;case"select":e=n.value,e!=null&&ti(t,!!n.multiple,e,!1)}};n_=Yf;r_=hs;var CT={usingClientEntryPoint:!1,Events:[yo,qs,Wc,e_,t_,Yf]},la={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ST={bundleType:la.bundleType,version:la.version,rendererPackageName:la.rendererPackageName,rendererConfig:la.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=a_(t),t===null?null:t.stateNode},findFiberByHostInstance:la.findFiberByHostInstance||ET,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fl.isDisabled&&fl.supportsFiber)try{Bc=fl.inject(ST),xn=fl}catch{}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CT;Ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sm(e))throw Error($(200));return wT(t,e,null,n)};Ft.createRoot=function(t,e){if(!sm(t))throw Error($(299));var n=!1,r="",s=Vw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=tm(t,1,!1,null,null,n,!1,r,s),t[$n]=e.current,Ga(t.nodeType===8?t.parentNode:t),new rm(e)};Ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=a_(e),t=t===null?null:t.stateNode,t};Ft.flushSync=function(t){return hs(t)};Ft.hydrate=function(t,e,n){if(!eu(e))throw Error($(200));return tu(null,t,e,!0,n)};Ft.hydrateRoot=function(t,e,n){if(!sm(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Vw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Lw(e,null,t,1,n??null,s,!1,i,a),t[$n]=e.current,Ga(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Zc(e)};Ft.render=function(t,e,n){if(!eu(e))throw Error($(200));return tu(null,t,e,!1,n)};Ft.unmountComponentAtNode=function(t){if(!eu(t))throw Error($(40));return t._reactRootContainer?(hs(function(){tu(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1};Ft.unstable_batchedUpdates=Yf;Ft.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!eu(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return tu(t,e,n,!1,r)};Ft.version="18.3.1-next-f1338f8080-20240426";function Uw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Uw)}catch(t){console.error(t)}}Uw(),Ux.exports=Ft;var TT=Ux.exports,Fw,yv=TT;Fw=yv.createRoot,yv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function to(){return to=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},to.apply(this,arguments)}var vr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(vr||(vr={}));const xv="popstate";function IT(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:l}=r.location;return Ah("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:pc(s)}return NT(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function im(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kT(){return Math.random().toString(36).substr(2,8)}function _v(t,e){return{usr:t.state,key:t.key,idx:e}}function Ah(t,e,n,r){return n===void 0&&(n=null),to({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ni(e):e,{state:n,key:e&&e.key||r||kT()})}function pc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ni(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function NT(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=vr.Pop,u=null,d=f();d==null&&(d=0,a.replaceState(to({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function p(){l=vr.Pop;let k=f(),b=k==null?null:k-d;d=k,u&&u({action:l,location:N.location,delta:b})}function g(k,b){l=vr.Push;let x=Ah(N.location,k,b);d=f()+1;let w=_v(x,d),R=N.createHref(x);try{a.pushState(w,"",R)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(R)}i&&u&&u({action:l,location:N.location,delta:1})}function E(k,b){l=vr.Replace;let x=Ah(N.location,k,b);d=f();let w=_v(x,d),R=N.createHref(x);a.replaceState(w,"",R),i&&u&&u({action:l,location:N.location,delta:0})}function _(k){let b=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof k=="string"?k:pc(k);return x=x.replace(/ $/,"%20"),je(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let N={get action(){return l},get location(){return t(s,a)},listen(k){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(xv,p),u=k,()=>{s.removeEventListener(xv,p),u=null}},createHref(k){return e(s,k)},createURL:_,encodeLocation(k){let b=_(k);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:g,replace:E,go(k){return a.go(k)}};return N}var wv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(wv||(wv={}));function AT(t,e,n){return n===void 0&&(n="/"),RT(t,e,n)}function RT(t,e,n,r){let s=typeof e=="string"?Ni(e):e,i=xi(s.pathname||"/",n);if(i==null)return null;let a=Bw(t);PT(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let d=$T(i);l=BT(a[u],d)}return l}function Bw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(je(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Ir([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Bw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:UT(d,i.index),routesMeta:f})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let u of zw(i.path))s(i,a,u)}),e}function zw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=zw(r.join("/")),l=[];return l.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...a),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function PT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:FT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const jT=/^:[\w-]+$/,DT=3,OT=2,MT=1,LT=10,VT=-2,Ev=t=>t==="*";function UT(t,e){let n=t.split("/"),r=n.length;return n.some(Ev)&&(r+=VT),e&&(r+=OT),n.filter(s=>!Ev(s)).reduce((s,i)=>s+(jT.test(i)?DT:i===""?MT:LT),r)}function FT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function BT(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=Rh({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:Ir([i,p.pathname]),pathnameBase:qT(Ir([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=Ir([i,p.pathnameBase]))}return a}function Rh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=zT(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:E}=f;if(g==="*"){let N=l[p]||"";a=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const _=l[p];return E&&!_?d[g]=void 0:d[g]=(_||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function zT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),im(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function $T(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return im(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function xi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const HT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WT=t=>HT.test(t);function GT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ni(t):t,i;if(n)if(WT(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),im(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=bv(n.substring(1),"/"):i=bv(n,e)}else i=e;return{pathname:i,search:QT(r),hash:JT(s)}}function bv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function xd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function KT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function am(t,e){let n=KT(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function om(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ni(t):(s=to({},t),je(!s.pathname||!s.pathname.includes("?"),xd("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),xd("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),xd("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=GT(s,l),d=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Ir=t=>t.join("/").replace(/\/\/+/g,"/"),qT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function YT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const $w=["post","put","patch","delete"];new Set($w);const XT=["get",...$w];new Set(XT);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function no(){return no=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},no.apply(this,arguments)}const nu=T.createContext(null),Hw=T.createContext(null),Yn=T.createContext(null),ru=T.createContext(null),Xn=T.createContext({outlet:null,matches:[],isDataRoute:!1}),Ww=T.createContext(null);function ZT(t,e){let{relative:n}=e===void 0?{}:e;Ai()||je(!1);let{basename:r,navigator:s}=T.useContext(Yn),{hash:i,pathname:a,search:l}=su(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:Ir([r,a])),s.createHref({pathname:u,search:l,hash:i})}function Ai(){return T.useContext(ru)!=null}function bs(){return Ai()||je(!1),T.useContext(ru).location}function Gw(t){T.useContext(Yn).static||T.useLayoutEffect(t)}function Kw(){let{isDataRoute:t}=T.useContext(Xn);return t?mI():eI()}function eI(){Ai()||je(!1);let t=T.useContext(nu),{basename:e,future:n,navigator:r}=T.useContext(Yn),{matches:s}=T.useContext(Xn),{pathname:i}=bs(),a=JSON.stringify(am(s,n.v7_relativeSplatPath)),l=T.useRef(!1);return Gw(()=>{l.current=!0}),T.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=om(d,JSON.parse(a),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ir([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,a,i,t])}const tI=T.createContext(null);function nI(t){let e=T.useContext(Xn).outlet;return e&&T.createElement(tI.Provider,{value:t},e)}function su(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=T.useContext(Yn),{matches:s}=T.useContext(Xn),{pathname:i}=bs(),a=JSON.stringify(am(s,r.v7_relativeSplatPath));return T.useMemo(()=>om(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function rI(t,e){return sI(t,e)}function sI(t,e,n,r){Ai()||je(!1);let{navigator:s}=T.useContext(Yn),{matches:i}=T.useContext(Xn),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=bs(),f;if(e){var p;let k=typeof e=="string"?Ni(e):e;u==="/"||(p=k.pathname)!=null&&p.startsWith(u)||je(!1),f=k}else f=d;let g=f.pathname||"/",E=g;if(u!=="/"){let k=u.replace(/^\//,"").split("/");E="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let _=AT(t,{pathname:E}),N=cI(_&&_.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:Ir([u,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:Ir([u,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,n,r);return e&&N?T.createElement(ru.Provider,{value:{location:no({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:vr.Pop}},N):N}function iI(){let t=fI(),e=YT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:s},n):null,null)}const aI=T.createElement(iI,null);class oI extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?T.createElement(Xn.Provider,{value:this.props.routeContext},T.createElement(Ww.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lI(t){let{routeContext:e,match:n,children:r}=t,s=T.useContext(nu);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(Xn.Provider,{value:e},r)}function cI(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||je(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:E}=n,_=p.route.loader&&g[p.route.id]===void 0&&(!E||E[p.route.id]===void 0);if(p.route.lazy||_){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,p,g)=>{let E,_=!1,N=null,k=null;n&&(E=l&&p.route.id?l[p.route.id]:void 0,N=p.route.errorElement||aI,u&&(d<0&&g===0?(pI("route-fallback"),_=!0,k=null):d===g&&(_=!0,k=p.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,g+1)),x=()=>{let w;return E?w=N:_?w=k:p.route.Component?w=T.createElement(p.route.Component,null):p.route.element?w=p.route.element:w=f,T.createElement(lI,{match:p,routeContext:{outlet:f,matches:b,isDataRoute:n!=null},children:w})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?T.createElement(oI,{location:n.location,revalidation:n.revalidation,component:N,error:E,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var qw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(qw||{}),Qw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Qw||{});function uI(t){let e=T.useContext(nu);return e||je(!1),e}function dI(t){let e=T.useContext(Hw);return e||je(!1),e}function hI(t){let e=T.useContext(Xn);return e||je(!1),e}function Jw(t){let e=hI(),n=e.matches[e.matches.length-1];return n.route.id||je(!1),n.route.id}function fI(){var t;let e=T.useContext(Ww),n=dI(),r=Jw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function mI(){let{router:t}=uI(qw.UseNavigateStable),e=Jw(Qw.UseNavigateStable),n=T.useRef(!1);return Gw(()=>{n.current=!0}),T.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,no({fromRouteId:e},i)))},[t,e])}const Cv={};function pI(t,e,n){Cv[t]||(Cv[t]=!0)}function gI(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function vI(t){let{to:e,replace:n,state:r,relative:s}=t;Ai()||je(!1);let{future:i,static:a}=T.useContext(Yn),{matches:l}=T.useContext(Xn),{pathname:u}=bs(),d=Kw(),f=om(e,am(l,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return T.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function yI(t){return nI(t.context)}function Vs(t){je(!1)}function xI(t){let{basename:e="/",children:n=null,location:r,navigationType:s=vr.Pop,navigator:i,static:a=!1,future:l}=t;Ai()&&je(!1);let u=e.replace(/^\/*/,"/"),d=T.useMemo(()=>({basename:u,navigator:i,static:a,future:no({v7_relativeSplatPath:!1},l)}),[u,l,i,a]);typeof r=="string"&&(r=Ni(r));let{pathname:f="/",search:p="",hash:g="",state:E=null,key:_="default"}=r,N=T.useMemo(()=>{let k=xi(f,u);return k==null?null:{location:{pathname:k,search:p,hash:g,state:E,key:_},navigationType:s}},[u,f,p,g,E,_,s]);return N==null?null:T.createElement(Yn.Provider,{value:d},T.createElement(ru.Provider,{children:n,value:N}))}function _I(t){let{children:e,location:n}=t;return rI(Ph(e),n)}new Promise(()=>{});function Ph(t,e){e===void 0&&(e=[]);let n=[];return T.Children.forEach(t,(r,s)=>{if(!T.isValidElement(r))return;let i=[...e,s];if(r.type===T.Fragment){n.push.apply(n,Ph(r.props.children,i));return}r.type!==Vs&&je(!1),!r.props.index||!r.props.children||je(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Ph(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gc(){return gc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gc.apply(this,arguments)}function Yw(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function wI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function EI(t,e){return t.button===0&&(!e||e==="_self")&&!wI(t)}const bI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],CI=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],SI="6";try{window.__reactRouterVersion=SI}catch{}const TI=T.createContext({isTransitioning:!1}),II="startTransition",Sv=pC[II];function kI(t){let{basename:e,children:n,future:r,window:s}=t,i=T.useRef();i.current==null&&(i.current=IT({window:s,v5Compat:!0}));let a=i.current,[l,u]=T.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},f=T.useCallback(p=>{d&&Sv?Sv(()=>u(p)):u(p)},[u,d]);return T.useLayoutEffect(()=>a.listen(f),[a,f]),T.useEffect(()=>gI(r),[r]),T.createElement(xI,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const NI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jh=T.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,g=Yw(e,bI),{basename:E}=T.useContext(Yn),_,N=!1;if(typeof d=="string"&&AI.test(d)&&(_=d,NI))try{let w=new URL(window.location.href),R=d.startsWith("//")?new URL(w.protocol+d):new URL(d),B=xi(R.pathname,E);R.origin===w.origin&&B!=null?d=B+R.search+R.hash:N=!0}catch{}let k=ZT(d,{relative:s}),b=PI(d,{replace:a,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:p});function x(w){r&&r(w),w.defaultPrevented||b(w)}return T.createElement("a",gc({},g,{href:_||k,onClick:N||i?r:x,ref:n,target:u}))}),_d=T.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:d,children:f}=e,p=Yw(e,CI),g=su(u,{relative:p.relative}),E=bs(),_=T.useContext(Hw),{navigator:N,basename:k}=T.useContext(Yn),b=_!=null&&jI(g)&&d===!0,x=N.encodeLocation?N.encodeLocation(g).pathname:g.pathname,w=E.pathname,R=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;s||(w=w.toLowerCase(),R=R?R.toLowerCase():null,x=x.toLowerCase()),R&&k&&(R=xi(R,k)||R);const B=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let z=w===x||!a&&w.startsWith(x)&&w.charAt(B)==="/",S=R!=null&&(R===x||!a&&R.startsWith(x)&&R.charAt(x.length)==="/"),y={isActive:z,isPending:S,isTransitioning:b},C=z?r:void 0,I;typeof i=="function"?I=i(y):I=[i,z?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(y):l;return T.createElement(jh,gc({},p,{"aria-current":C,className:I,ref:n,style:P,to:u,viewTransition:d}),typeof f=="function"?f(y):f)});var Dh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Dh||(Dh={}));var Tv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Tv||(Tv={}));function RI(t){let e=T.useContext(nu);return e||je(!1),e}function PI(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,u=Kw(),d=bs(),f=su(t,{relative:a});return T.useCallback(p=>{if(EI(p,n)){p.preventDefault();let g=r!==void 0?r:pc(d)===pc(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[d,u,f,r,s,n,t,i,a,l])}function jI(t,e){e===void 0&&(e={});let n=T.useContext(TI);n==null&&je(!1);let{basename:r}=RI(Dh.useViewTransitionState),s=su(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=xi(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=xi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Rh(s.pathname,a)!=null||Rh(s.pathname,i)!=null}const DI=()=>{};var Iv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},OI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Zw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,E=d&63;u||(E=64,a||(g=64)),r.push(n[f],n[p],n[g],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Xw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new MI;const g=i<<2|l>>4;if(r.push(g),d!==64){const E=l<<4&240|d>>2;if(r.push(E),p!==64){const _=d<<6&192|p;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LI=function(t){const e=Xw(t);return Zw.encodeByteArray(e,!0)},vc=function(t){return LI(t).replace(/\./g,"")},e0=function(t){try{return Zw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=()=>VI().__FIREBASE_DEFAULTS__,FI=()=>{if(typeof process>"u"||typeof Iv>"u")return;const t=Iv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&e0(t[1]);return e&&JSON.parse(e)},iu=()=>{try{return DI()||UI()||FI()||BI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},t0=t=>{var e,n;return(n=(e=iu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},zI=t=>{const e=t0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},n0=()=>{var t;return(t=iu())===null||t===void 0?void 0:t.config},r0=t=>{var e;return(e=iu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function s0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vc(JSON.stringify(n)),vc(JSON.stringify(a)),""].join(".")}const ka={};function WI(){const t={prod:[],emulator:[]};for(const e of Object.keys(ka))ka[e]?t.emulator.push(e):t.prod.push(e);return t}function GI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let kv=!1;function i0(t,e){if(typeof window>"u"||typeof document>"u"||!Ri(window.location.host)||ka[t]===e||ka[t]||kv)return;ka[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=WI().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,E){g.setAttribute("width","24"),g.setAttribute("id",E),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{kv=!0,a()},g}function f(g,E){g.setAttribute("id",E),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=GI(r),E=n("text"),_=document.getElementById(E)||document.createElement("span"),N=n("learnmore"),k=document.getElementById(N)||document.createElement("a"),b=n("preprendIcon"),x=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const w=g.element;l(w),f(k,N);const R=d();u(x,b),w.append(x,_,k,R),document.body.appendChild(w)}i?(_.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function qI(){var t;const e=(t=iu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function a0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YI(){const t=pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XI(){return!qI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function o0(){try{return typeof indexedDB=="object"}catch{return!1}}function l0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function ZI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="FirebaseError";class fn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ek,Object.setPrototypeOf(this,fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cs.prototype.create)}}class Cs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?tk(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new fn(s,l,r)}}function tk(t,e){return t.replace(nk,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const nk=/\{\$([^}]+)}/g;function rk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Nv(i)&&Nv(a)){if(!fs(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Nv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ma(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function sk(t,e){const n=new ik(t,e);return n.subscribe.bind(n)}class ik{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ak(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=wd),s.error===void 0&&(s.error=wd),s.complete===void 0&&(s.complete=wd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ak(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=1e3,lk=2,ck=4*60*60*1e3,uk=.5;function Av(t,e=ok,n=lk){const r=e*Math.pow(n,t),s=Math.round(uk*r*(Math.random()-.5)*2);return Math.min(ck,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t){return t&&t._delegate?t._delegate:t}class hn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $I;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fk(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hk(t){return t===Xr?void 0:t}function fk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const pk={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},gk=de.INFO,vk={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},yk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=vk[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class au{constructor(e){this.name=e,this._logLevel=gk,this._logHandler=yk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const xk=(t,e)=>e.some(n=>t instanceof n);let Rv,Pv;function _k(){return Rv||(Rv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wk(){return Pv||(Pv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const c0=new WeakMap,Oh=new WeakMap,u0=new WeakMap,Ed=new WeakMap,lm=new WeakMap;function Ek(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(kr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&c0.set(n,t)}).catch(()=>{}),lm.set(e,t),e}function bk(t){if(Oh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Oh.set(t,e)}let Mh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Oh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||u0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ck(t){Mh=t(Mh)}function Sk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bd(this),e,...n);return u0.set(r,e.sort?e.sort():[e]),kr(r)}:wk().includes(t)?function(...e){return t.apply(bd(this),e),kr(c0.get(this))}:function(...e){return kr(t.apply(bd(this),e))}}function Tk(t){return typeof t=="function"?Sk(t):(t instanceof IDBTransaction&&bk(t),xk(t,_k())?new Proxy(t,Mh):t)}function kr(t){if(t instanceof IDBRequest)return Ek(t);if(Ed.has(t))return Ed.get(t);const e=Tk(t);return e!==t&&(Ed.set(t,e),lm.set(e,t)),e}const bd=t=>lm.get(t);function d0(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=kr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(kr(a.result),u.oldVersion,u.newVersion,kr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Ik=["get","getKey","getAll","getAllKeys","count"],kk=["put","add","delete","clear"],Cd=new Map;function jv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cd.get(e))return Cd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=kk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Ik.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Cd.set(e,i),i}Ck(t=>({...t,get:(e,n,r)=>jv(e,n)||t.get(e,n,r),has:(e,n)=>!!jv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ak(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ak(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lh="@firebase/app",Dv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new au("@firebase/app"),Rk="@firebase/app-compat",Pk="@firebase/analytics-compat",jk="@firebase/analytics",Dk="@firebase/app-check-compat",Ok="@firebase/app-check",Mk="@firebase/auth",Lk="@firebase/auth-compat",Vk="@firebase/database",Uk="@firebase/data-connect",Fk="@firebase/database-compat",Bk="@firebase/functions",zk="@firebase/functions-compat",$k="@firebase/installations",Hk="@firebase/installations-compat",Wk="@firebase/messaging",Gk="@firebase/messaging-compat",Kk="@firebase/performance",qk="@firebase/performance-compat",Qk="@firebase/remote-config",Jk="@firebase/remote-config-compat",Yk="@firebase/storage",Xk="@firebase/storage-compat",Zk="@firebase/firestore",eN="@firebase/ai",tN="@firebase/firestore-compat",nN="firebase",rN="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="[DEFAULT]",sN={[Lh]:"fire-core",[Rk]:"fire-core-compat",[jk]:"fire-analytics",[Pk]:"fire-analytics-compat",[Ok]:"fire-app-check",[Dk]:"fire-app-check-compat",[Mk]:"fire-auth",[Lk]:"fire-auth-compat",[Vk]:"fire-rtdb",[Uk]:"fire-data-connect",[Fk]:"fire-rtdb-compat",[Bk]:"fire-fn",[zk]:"fire-fn-compat",[$k]:"fire-iid",[Hk]:"fire-iid-compat",[Wk]:"fire-fcm",[Gk]:"fire-fcm-compat",[Kk]:"fire-perf",[qk]:"fire-perf-compat",[Qk]:"fire-rc",[Jk]:"fire-rc-compat",[Yk]:"fire-gcs",[Xk]:"fire-gcs-compat",[Zk]:"fire-fst",[tN]:"fire-fst-compat",[eN]:"fire-vertex","fire-js":"fire-js",[nN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new Map,iN=new Map,Uh=new Map;function Ov(t,e){try{t.container.addComponent(e)}catch(n){Gn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Tn(t){const e=t.name;if(Uh.has(e))return Gn.debug(`There were multiple attempts to register component ${e}.`),!1;Uh.set(e,t);for(const n of yc.values())Ov(n,t);for(const n of iN.values())Ov(n,t);return!0}function wo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new Cs("app","Firebase",aN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=rN;function h0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Vh,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Nr.create("bad-app-name",{appName:String(s)});if(n||(n=n0()),!n)throw Nr.create("no-options");const i=yc.get(s);if(i){if(fs(n,i.options)&&fs(r,i.config))return i;throw Nr.create("duplicate-app",{appName:s})}const a=new mk(s);for(const u of Uh.values())a.addComponent(u);const l=new oN(n,r,a);return yc.set(s,l),l}function f0(t=Vh){const e=yc.get(t);if(!e&&t===Vh&&n0())return h0();if(!e)throw Nr.create("no-app",{appName:t});return e}function Qt(t,e,n){var r;let s=(r=sN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gn.warn(l.join(" "));return}Tn(new hn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="firebase-heartbeat-database",cN=1,ro="firebase-heartbeat-store";let Sd=null;function m0(){return Sd||(Sd=d0(lN,cN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ro)}catch(n){console.warn(n)}}}}).catch(t=>{throw Nr.create("idb-open",{originalErrorMessage:t.message})})),Sd}async function uN(t){try{const n=(await m0()).transaction(ro),r=await n.objectStore(ro).get(p0(t));return await n.done,r}catch(e){if(e instanceof fn)Gn.warn(e.message);else{const n=Nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gn.warn(n.message)}}}async function Mv(t,e){try{const r=(await m0()).transaction(ro,"readwrite");await r.objectStore(ro).put(e,p0(t)),await r.done}catch(n){if(n instanceof fn)Gn.warn(n.message);else{const r=Nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gn.warn(r.message)}}}function p0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=1024,hN=30;class fN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Lv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>hN){const a=gN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Lv(),{heartbeatsToSend:r,unsentEntries:s}=mN(this._heartbeatsCache.heartbeats),i=vc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Gn.warn(n),""}}}function Lv(){return new Date().toISOString().substring(0,10)}function mN(t,e=dN){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Vv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Vv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return o0()?l0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Mv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Mv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vv(t){return vc(JSON.stringify({version:2,heartbeats:t})).length}function gN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t){Tn(new hn("platform-logger",e=>new Nk(e),"PRIVATE")),Tn(new hn("heartbeat",e=>new fN(e),"PRIVATE")),Qt(Lh,Dv,t),Qt(Lh,Dv,"esm2017"),Qt("fire-js","")}vN("");function cm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function g0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yN=g0,v0=new Cs("auth","Firebase",g0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new au("@firebase/auth");function xN(t,...e){xc.logLevel<=de.WARN&&xc.warn(`Auth (${Pi}): ${t}`,...e)}function jl(t,...e){xc.logLevel<=de.ERROR&&xc.error(`Auth (${Pi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t,...e){throw dm(t,...e)}function un(t,...e){return dm(t,...e)}function um(t,e,n){const r=Object.assign(Object.assign({},yN()),{[e]:n});return new Cs("auth","Firebase",r).create(e,{appName:t.name})}function Fn(t){return um(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _N(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Zt(t,"argument-error"),um(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return v0.create(t,...e)}function re(t,e,...n){if(!t)throw dm(e,...n)}function Ln(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jl(e),new Error(e)}function Kn(t,e){t||Ln(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function wN(){return Uv()==="http:"||Uv()==="https:"}function Uv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wN()||a0()||"connection"in navigator)?navigator.onLine:!0}function bN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kn(n>e,"Short delay should be less than long delay!"),this.isMobile=KI()||JI()}get(){return EN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t,e){Kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TN=new Eo(3e4,6e4);function Hr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Zn(t,e,n,r,s={}){return x0(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=_o(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return QI()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Ri(t.emulatorConfig.host)&&(d.credentials="include"),y0.fetch()(await _0(t,t.config.apiHost,n,l),d)})}async function x0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},CN),e);try{const s=new kN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw ml(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ml(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw ml(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw ml(t,"user-disabled",a);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw um(t,f,d);Zt(t,f)}}catch(s){if(s instanceof fn)throw s;Zt(t,"network-request-failed",{message:String(s)})}}async function bo(t,e,n,r,s={}){const i=await Zn(t,e,n,r,s);return"mfaPendingCredential"in i&&Zt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function _0(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?hm(t.config,s):`${t.config.apiScheme}://${s}`;return SN.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function IN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(un(this.auth,"network-request-failed")),TN.get())})}}function ml(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=un(t,e,r);return s.customData._tokenResponse=n,s}function Fv(t){return t!==void 0&&t.enterprise!==void 0}class NN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return IN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function AN(t,e){return Zn(t,"GET","/v2/recaptchaConfig",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(t,e){return Zn(t,"POST","/v1/accounts:delete",e)}async function _c(t,e){return Zn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PN(t,e=!1){const n=wt(t),r=await n.getIdToken(e),s=fm(r);re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Na(Td(s.auth_time)),issuedAtTime:Na(Td(s.iat)),expirationTime:Na(Td(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Td(t){return Number(t)*1e3}function fm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return jl("JWT malformed, contained fewer than 3 sections"),null;try{const s=e0(n);return s?JSON.parse(s):(jl("Failed to decode base64 JWT payload"),null)}catch(s){return jl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Bv(t){const e=fm(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _i(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof fn&&jN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function jN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Na(this.lastLoginAt),this.creationTime=Na(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await _i(t,_c(n,{idToken:r}));re(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?w0(i.providerUserInfo):[],l=MN(t.providerData,a),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Bh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function ON(t){const e=wt(t);await wc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function w0(t){return t.map(e=>{var{providerId:n}=e,r=cm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LN(t,e){const n=await x0(t,{},async()=>{const r=_o({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await _0(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&Ri(t.emulatorConfig.host)&&(u.credentials="include"),y0.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VN(t,e){return Zn(t,"POST","/v2/accounts:revokeToken",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=Bv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await LN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new oi;return r&&(re(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(re(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(re(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oi,this.toJSON())}_performRefresh(){return Ln("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class an{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=cm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Bh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await _i(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return PN(this,e)}reload(){return ON(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new an(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await wc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mt(this.auth.app))return Promise.reject(Fn(this.auth));const e=await this.getIdToken();return await _i(this,RN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,l,u,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,E=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,_=(a=n.photoURL)!==null&&a!==void 0?a:void 0,N=(l=n.tenantId)!==null&&l!==void 0?l:void 0,k=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(d=n.createdAt)!==null&&d!==void 0?d:void 0,x=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:w,emailVerified:R,isAnonymous:B,providerData:z,stsTokenManager:S}=n;re(w&&S,e,"internal-error");const y=oi.fromJSON(this.name,S);re(typeof w=="string",e,"internal-error"),ar(p,e.name),ar(g,e.name),re(typeof R=="boolean",e,"internal-error"),re(typeof B=="boolean",e,"internal-error"),ar(E,e.name),ar(_,e.name),ar(N,e.name),ar(k,e.name),ar(b,e.name),ar(x,e.name);const C=new an({uid:w,auth:e,email:g,emailVerified:R,displayName:p,isAnonymous:B,photoURL:_,phoneNumber:E,tenantId:N,stsTokenManager:y,createdAt:b,lastLoginAt:x});return z&&Array.isArray(z)&&(C.providerData=z.map(I=>Object.assign({},I))),k&&(C._redirectEventId=k),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new oi;s.updateFromServerResponse(n);const i=new an({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await wc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];re(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?w0(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new oi;l.updateFromIdToken(r);const u=new an({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Bh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new Map;function Vn(t){Kn(t instanceof Function,"Expected a class definition");let e=zv.get(t);return e?(Kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}E0.type="NONE";const $v=E0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t,e,n){return`firebase:${t}:${e}:${n}`}class li{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Dl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Dl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _c(this.auth,{idToken:e}).catch(()=>{});return n?an._fromGetAccountInfoResponse(this.auth,n,e):null}return an._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new li(Vn($v),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Vn($v);const a=Dl(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(a);if(f){let p;if(typeof f=="string"){const g=await _c(e,{idToken:f}).catch(()=>{});if(!g)break;p=await an._fromGetAccountInfoResponse(e,g,f)}else p=an._fromJSON(e,f);d!==i&&(l=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new li(i,e,r):(i=u[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new li(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(T0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(b0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(k0(e))return"Blackberry";if(N0(e))return"Webos";if(C0(e))return"Safari";if((e.includes("chrome/")||S0(e))&&!e.includes("edge/"))return"Chrome";if(I0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function b0(t=pt()){return/firefox\//i.test(t)}function C0(t=pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function S0(t=pt()){return/crios\//i.test(t)}function T0(t=pt()){return/iemobile/i.test(t)}function I0(t=pt()){return/android/i.test(t)}function k0(t=pt()){return/blackberry/i.test(t)}function N0(t=pt()){return/webos/i.test(t)}function mm(t=pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function UN(t=pt()){var e;return mm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FN(){return YI()&&document.documentMode===10}function A0(t=pt()){return mm(t)||I0(t)||N0(t)||k0(t)||/windows phone/i.test(t)||T0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t,e=[]){let n;switch(t){case"Browser":n=Hv(pt());break;case"Worker":n=`${Hv(pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const u=e(i);a(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t,e={}){return Zn(t,"GET","/v2/passwordPolicy",Hr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=6;class HN{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:$N,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wv(this),this.idTokenSubscription=new Wv(this),this.beforeStateQueue=new BN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await li.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _c(this,{idToken:e}),r=await an._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Mt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await wc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mt(this.app))return Promise.reject(Fn(this));const n=e?wt(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mt(this.app)?Promise.reject(Fn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mt(this.app)?Promise.reject(Fn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zN(this),n=new HN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await VN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vn(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await li.create(this,[Vn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=R0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&xN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Wr(t){return wt(t)}class Wv{constructor(e){this.auth=e,this.observer=null,this.addObserver=sk(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ou={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GN(t){ou=t}function P0(t){return ou.loadJS(t)}function KN(){return ou.recaptchaEnterpriseScript}function qN(){return ou.gapiScript}function QN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class JN{constructor(){this.enterprise=new YN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class YN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const XN="recaptcha-enterprise",j0="NO_RECAPTCHA";class ZN{constructor(e){this.type=XN,this.auth=Wr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{AN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new NN(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,a,l){const u=window.grecaptcha;Fv(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(j0)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JN().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!n&&Fv(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=KN();u.length!==0&&(u+=l),P0(u).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function Gv(t,e,n,r=!1,s=!1){const i=new ZN(t);let a;if(s)a=j0;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function zh(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Gv(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Gv(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t,e){const n=wo(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(fs(i,e??{}))return s;Zt(s,"already-initialized")}return n.initialize({options:e})}function tA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function nA(t,e,n){const r=Wr(t);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=D0(e),{host:a,port:l}=rA(e),u=l===null?"":`:${l}`,d={url:`${i}//${a}${u}/`},f=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(fs(d,r.config.emulator)&&fs(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Ri(a)?(s0(`${i}//${a}${u}`),i0("Auth",!0)):sA()}function D0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rA(t){const e=D0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Kv(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:Kv(a)}}}function Kv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ln("not implemented")}_getIdTokenResponse(e){return Ln("not implemented")}_linkToIdToken(e,n){return Ln("not implemented")}_getReauthenticationResolver(e){return Ln("not implemented")}}async function iA(t,e){return Zn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(t,e){return bo(t,"POST","/v1/accounts:signInWithPassword",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(t,e){return bo(t,"POST","/v1/accounts:signInWithEmailLink",Hr(t,e))}async function lA(t,e){return bo(t,"POST","/v1/accounts:signInWithEmailLink",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends pm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new so(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new so(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zh(e,n,"signInWithPassword",aA);case"emailLink":return oA(e,{email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zh(e,r,"signUpPassword",iA);case"emailLink":return lA(e,{idToken:n,email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ci(t,e){return bo(t,"POST","/v1/accounts:signInWithIdp",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="http://localhost";class ms extends pm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=cm(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new ms(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ci(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ci(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ci(e,n)}buildRequest(){const e={requestUri:cA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_o(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dA(t){const e=fa(ma(t)).link,n=e?fa(ma(e)).deep_link_id:null,r=fa(ma(t)).deep_link_id;return(r?fa(ma(r)).link:null)||r||n||e||t}class gm{constructor(e){var n,r,s,i,a,l;const u=fa(ma(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=uA((s=u.mode)!==null&&s!==void 0?s:null);re(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.lang)!==null&&a!==void 0?a:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=dA(e);try{return new gm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(){this.providerId=ji.PROVIDER_ID}static credential(e,n){return so._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=gm.parseLink(n);return re(r,"argument-error"),so._fromEmailAndCode(e,r.code,r.tenantId)}}ji.PROVIDER_ID="password";ji.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ji.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends vm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Co{constructor(){super("facebook.com")}static credential(e){return ms._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn extends Co{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ms._fromParams({providerId:Dn.PROVIDER_ID,signInMethod:Dn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Dn.credentialFromTaggedObject(e)}static credentialFromError(e){return Dn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Dn.credential(n,r)}catch{return null}}}Dn.GOOGLE_SIGN_IN_METHOD="google.com";Dn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Co{constructor(){super("github.com")}static credential(e){return ms._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.GITHUB_SIGN_IN_METHOD="github.com";fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Co{constructor(){super("twitter.com")}static credential(e,n){return ms._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return mr.credential(n,r)}catch{return null}}}mr.TWITTER_SIGN_IN_METHOD="twitter.com";mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(t,e){return bo(t,"POST","/v1/accounts:signUp",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await an._fromIdTokenResponse(e,r,s),a=qv(r);return new ps({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=qv(r);return new ps({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function qv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends fn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ec.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ec(e,n,r,s)}}function O0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ec._fromErrorAndOperation(t,i,e,r):i})}async function fA(t,e,n=!1){const r=await _i(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ps._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mA(t,e,n=!1){const{auth:r}=t;if(Mt(r.app))return Promise.reject(Fn(r));const s="reauthenticate";try{const i=await _i(t,O0(r,s,e,t),n);re(i.idToken,r,"internal-error");const a=fm(i.idToken);re(a,r,"internal-error");const{sub:l}=a;return re(t.uid===l,r,"user-mismatch"),ps._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Zt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M0(t,e,n=!1){if(Mt(t.app))return Promise.reject(Fn(t));const r="signIn",s=await O0(t,r,e),i=await ps._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function pA(t,e){return M0(Wr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L0(t){const e=Wr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gA(t,e,n){if(Mt(t.app))return Promise.reject(Fn(t));const r=Wr(t),a=await zh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&L0(t),u}),l=await ps._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function vA(t,e,n){return Mt(t.app)?Promise.reject(Fn(t)):pA(wt(t),ji.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&L0(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(t,e){return Zn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xA(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=wt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await _i(r,yA(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function _A(t,e,n,r){return wt(t).onIdTokenChanged(e,n,r)}function wA(t,e,n){return wt(t).beforeAuthStateChanged(e,n)}function EA(t,e,n,r){return wt(t).onAuthStateChanged(e,n,r)}function bA(t){return wt(t).signOut()}const bc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bc,"1"),this.storage.removeItem(bc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=1e3,SA=10;class U0 extends V0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=A0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);FN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,SA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}U0.type="LOCAL";const TA=U0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends V0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}F0.type="SESSION";const B0=F0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new lu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(n.origin,i)),u=await IA(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,u)=>{const d=ym("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return window}function NA(t){wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(){return typeof wn().WorkerGlobalScope<"u"&&typeof wn().importScripts=="function"}async function AA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function PA(){return z0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="firebaseLocalStorageDb",jA=1,Cc="firebaseLocalStorage",H0="fbase_key";class So{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cu(t,e){return t.transaction([Cc],e?"readwrite":"readonly").objectStore(Cc)}function DA(){const t=indexedDB.deleteDatabase($0);return new So(t).toPromise()}function $h(){const t=indexedDB.open($0,jA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Cc,{keyPath:H0})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Cc)?e(r):(r.close(),await DA(),e(await $h()))})})}async function Qv(t,e,n){const r=cu(t,!0).put({[H0]:e,value:n});return new So(r).toPromise()}async function OA(t,e){const n=cu(t,!1).get(e),r=await new So(n).toPromise();return r===void 0?null:r.value}function Jv(t,e){const n=cu(t,!0).delete(e);return new So(n).toPromise()}const MA=800,LA=3;class W0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $h(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>LA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return z0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lu._getInstance(PA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await AA(),!this.activeServiceWorker)return;this.sender=new kA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $h();return await Qv(e,bc,"1"),await Jv(e,bc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>OA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=cu(s,!1).getAll();return new So(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}W0.type="LOCAL";const VA=W0;new Eo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t,e){return e?Vn(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm extends pm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ci(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ci(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ci(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function UA(t){return M0(t.auth,new xm(t),t.bypassAuthState)}function FA(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),mA(n,new xm(t),t.bypassAuthState)}async function BA(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),fA(n,new xm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UA;case"linkViaPopup":case"linkViaRedirect":return BA;case"reauthViaPopup":case"reauthViaRedirect":return FA;default:Zt(this.auth,"internal-error")}}resolve(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new Eo(2e3,1e4);async function $A(t,e,n){if(Mt(t.app))return Promise.reject(un(t,"operation-not-supported-in-this-environment"));const r=Wr(t);_N(t,e,vm);const s=G0(r,n);return new ns(r,"signInViaPopup",e,s).executeNotNull()}class ns extends K0{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ns.currentPopupAction&&ns.currentPopupAction.cancel(),ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Kn(this.filter.length===1,"Popup operations only handle one event");const e=ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zA.get())};e()}}ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="pendingRedirect",Ol=new Map;class WA extends K0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ol.get(this.auth._key());if(!e){try{const r=await GA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ol.set(this.auth._key(),e)}return this.bypassAuthState||Ol.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GA(t,e){const n=QA(e),r=qA(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function KA(t,e){Ol.set(t._key(),e)}function qA(t){return Vn(t._redirectPersistence)}function QA(t){return Dl(HA,t.config.apiKey,t.name)}async function JA(t,e,n=!1){if(Mt(t.app))return Promise.reject(Fn(t));const r=Wr(t),s=G0(r,e),a=await new WA(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=10*60*1e3;class XA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!q0(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(un(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yv(e))}saveEventToCache(e){this.cachedEventUids.add(Yv(e)),this.lastProcessedEventTime=Date.now()}}function Yv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function q0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return q0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(t,e={}){return Zn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nR=/^https?/;async function rR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eR(t);for(const n of e)try{if(sR(n))return}catch{}Zt(t,"unauthorized-domain")}function sR(t){const e=Fh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!nR.test(n))return!1;if(tR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=new Eo(3e4,6e4);function Xv(){const t=wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aR(t){return new Promise((e,n)=>{var r,s,i;function a(){Xv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xv(),n(un(t,"network-request-failed"))},timeout:iR.get()})}if(!((s=(r=wn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=wn().gapi)===null||i===void 0)&&i.load)a();else{const l=QN("iframefcb");return wn()[l]=()=>{gapi.load?a():n(un(t,"network-request-failed"))},P0(`${qN()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Ml=null,e})}let Ml=null;function oR(t){return Ml=Ml||aR(t),Ml}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=new Eo(5e3,15e3),cR="__/auth/iframe",uR="emulator/auth/iframe",dR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fR(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?hm(e,uR):`https://${t.config.authDomain}/${cR}`,r={apiKey:e.apiKey,appName:t.name,v:Pi},s=hR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${_o(r).slice(1)}`}async function mR(t){const e=await oR(t),n=wn().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:fR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=un(t,"network-request-failed"),l=wn().setTimeout(()=>{i(a)},lR.get());function u(){wn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gR=500,vR=600,yR="_blank",xR="http://localhost";class Zv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _R(t,e,n,r=gR,s=vR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},pR),{width:r.toString(),height:s.toString(),top:i,left:a}),d=pt().toLowerCase();n&&(l=S0(d)?yR:n),b0(d)&&(e=e||xR,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[E,_])=>`${g}${E}=${_},`,"");if(UN(d)&&l!=="_self")return wR(e||"",l),new Zv(null);const p=window.open(e||"",l,f);re(p,t,"popup-blocked");try{p.focus()}catch{}return new Zv(p)}function wR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER="__/auth/handler",bR="emulator/auth/handler",CR=encodeURIComponent("fac");async function ey(t,e,n,r,s,i){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Pi,eventId:s};if(e instanceof vm){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",rk(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))a[f]=p}if(e instanceof Co){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${CR}=${encodeURIComponent(u)}`:"";return`${SR(t)}?${_o(l).slice(1)}${d}`}function SR({config:t}){return t.emulator?hm(t,bR):`https://${t.authDomain}/${ER}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="webStorageSupport";class TR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=B0,this._completeRedirectFn=JA,this._overrideRedirectResult=KA}async _openPopup(e,n,r,s){var i;Kn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await ey(e,n,r,Fh(),s);return _R(e,a,ym())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ey(e,n,r,Fh(),s);return NA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Kn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await mR(e),r=new XA(e);return n.register("authEvent",s=>(re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Id,{type:Id},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Id];a!==void 0&&n(!!a),Zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return A0()||C0()||mm()}}const IR=TR;var ty="@firebase/auth",ny="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AR(t){Tn(new hn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;re(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:R0(t)},d=new WN(r,s,i,u);return tA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Tn(new hn("auth-internal",e=>{const n=Wr(e.getProvider("auth").getImmediate());return(r=>new kR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qt(ty,ny,NR(t)),Qt(ty,ny,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=5*60,PR=r0("authIdTokenMaxAge")||RR;let ry=null;const jR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>PR)return;const s=n==null?void 0:n.token;ry!==s&&(ry=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function DR(t=f0()){const e=wo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=eA(t,{popupRedirectResolver:IR,persistence:[VA,TA,B0]}),r=r0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=jR(i.toString());wA(n,a,()=>a(n.currentUser)),_A(n,l=>a(l))}}const s=t0("auth");return s&&nA(n,`http://${s}`),n}function OR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}GN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=un("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",OR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AR("Browser");var MR="firebase",LR="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt(MR,LR,"app");const Q0="@firebase/installations",_m="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0=1e4,Y0=`w:${_m}`,X0="FIS_v2",VR="https://firebaseinstallations.googleapis.com/v1",UR=60*60*1e3,FR="installations",BR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},gs=new Cs(FR,BR,zR);function Z0(t){return t instanceof fn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE({projectId:t}){return`${VR}/projects/${t}/installations`}function tE(t){return{token:t.token,requestStatus:2,expiresIn:HR(t.expiresIn),creationTime:Date.now()}}async function nE(t,e){const r=(await e.json()).error;return gs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function rE({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function $R(t,{refreshToken:e}){const n=rE(t);return n.append("Authorization",WR(e)),n}async function sE(t){const e=await t();return e.status>=500&&e.status<600?t():e}function HR(t){return Number(t.replace("s","000"))}function WR(t){return`${X0} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=eE(t),s=rE(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:X0,appId:t.appId,sdkVersion:Y0},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await sE(()=>fetch(r,l));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:tE(d.authToken)}}else throw await nE("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=/^[cdef][\w-]{21}$/,Hh="";function QR(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=JR(t);return qR.test(n)?n:Hh}catch{return Hh}}function JR(t){return KR(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=new Map;function oE(t,e){const n=uu(t);lE(n,e),YR(n,e)}function lE(t,e){const n=aE.get(t);if(n)for(const r of n)r(e)}function YR(t,e){const n=XR();n&&n.postMessage({key:t,fid:e}),ZR()}let rs=null;function XR(){return!rs&&"BroadcastChannel"in self&&(rs=new BroadcastChannel("[Firebase] FID Change"),rs.onmessage=t=>{lE(t.data.key,t.data.fid)}),rs}function ZR(){aE.size===0&&rs&&(rs.close(),rs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP="firebase-installations-database",tP=1,vs="firebase-installations-store";let kd=null;function wm(){return kd||(kd=d0(eP,tP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(vs)}}})),kd}async function Sc(t,e){const n=uu(t),s=(await wm()).transaction(vs,"readwrite"),i=s.objectStore(vs),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&oE(t,e.fid),e}async function cE(t){const e=uu(t),r=(await wm()).transaction(vs,"readwrite");await r.objectStore(vs).delete(e),await r.done}async function du(t,e){const n=uu(t),s=(await wm()).transaction(vs,"readwrite"),i=s.objectStore(vs),a=await i.get(n),l=e(a);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!a||a.fid!==l.fid)&&oE(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Em(t){let e;const n=await du(t.appConfig,r=>{const s=nP(r),i=rP(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Hh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function nP(t){const e=t||{fid:QR(),registrationStatus:0};return uE(e)}function rP(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(gs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=sP(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:iP(t)}:{installationEntry:e}}async function sP(t,e){try{const n=await GR(t,e);return Sc(t.appConfig,n)}catch(n){throw Z0(n)&&n.customData.serverCode===409?await cE(t.appConfig):await Sc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function iP(t){let e=await sy(t.appConfig);for(;e.registrationStatus===1;)await iE(100),e=await sy(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Em(t);return r||n}return e}function sy(t){return du(t,e=>{if(!e)throw gs.create("installation-not-found");return uE(e)})}function uE(t){return aP(t)?{fid:t.fid,registrationStatus:0}:t}function aP(t){return t.registrationStatus===1&&t.registrationTime+J0<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oP({appConfig:t,heartbeatServiceProvider:e},n){const r=lP(t,n),s=$R(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:Y0,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await sE(()=>fetch(r,l));if(u.ok){const d=await u.json();return tE(d)}else throw await nE("Generate Auth Token",u)}function lP(t,{fid:e}){return`${eE(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bm(t,e=!1){let n;const r=await du(t.appConfig,i=>{if(!dE(i))throw gs.create("not-registered");const a=i.authToken;if(!e&&dP(a))return i;if(a.requestStatus===1)return n=cP(t,e),i;{if(!navigator.onLine)throw gs.create("app-offline");const l=fP(i);return n=uP(t,l),l}});return n?await n:r.authToken}async function cP(t,e){let n=await iy(t.appConfig);for(;n.authToken.requestStatus===1;)await iE(100),n=await iy(t.appConfig);const r=n.authToken;return r.requestStatus===0?bm(t,e):r}function iy(t){return du(t,e=>{if(!dE(e))throw gs.create("not-registered");const n=e.authToken;return mP(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function uP(t,e){try{const n=await oP(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Sc(t.appConfig,r),n}catch(n){if(Z0(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await cE(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Sc(t.appConfig,r)}throw n}}function dE(t){return t!==void 0&&t.registrationStatus===2}function dP(t){return t.requestStatus===2&&!hP(t)}function hP(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+UR}function fP(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function mP(t){return t.requestStatus===1&&t.requestTime+J0<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pP(t){const e=t,{installationEntry:n,registrationPromise:r}=await Em(e);return r?r.catch(console.error):bm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(t,e=!1){const n=t;return await vP(n),(await bm(n,e)).token}async function vP(t){const{registrationPromise:e}=await Em(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t){if(!t||!t.options)throw Nd("App Configuration");if(!t.name)throw Nd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Nd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Nd(t){return gs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="installations",xP="installations-internal",_P=t=>{const e=t.getProvider("app").getImmediate(),n=yP(e),r=wo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},wP=t=>{const e=t.getProvider("app").getImmediate(),n=wo(e,hE).getImmediate();return{getId:()=>pP(n),getToken:s=>gP(n,s)}};function EP(){Tn(new hn(hE,_P,"PUBLIC")),Tn(new hn(xP,wP,"PRIVATE"))}EP();Qt(Q0,_m);Qt(Q0,_m,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="analytics",bP="firebase_id",CP="origin",SP=60*1e3,TP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At=new au("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Jt=new Cs("analytics","Analytics",IP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(t){if(!t.startsWith(Cm)){const e=Jt.create("invalid-gtag-resource",{gtagURL:t});return At.warn(e.message),""}return t}function fE(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function NP(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function AP(t,e){const n=NP("firebase-js-sdk-policy",{createScriptURL:kP}),r=document.createElement("script"),s=`${Cm}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function RP(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function PP(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const u=(await fE(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(l){At.error(l)}t("config",s,i)}async function jP(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await fE(n);for(const u of a){const d=l.find(p=>p.measurementId===u),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){At.error(i)}}function DP(t,e,n,r){async function s(i,...a){try{if(i==="event"){const[l,u]=a;await jP(t,e,n,l,u)}else if(i==="config"){const[l,u]=a;await PP(t,e,n,r,l,u)}else if(i==="consent"){const[l,u]=a;t("consent",l,u)}else if(i==="get"){const[l,u,d]=a;t("get",l,u,d)}else if(i==="set"){const[l]=a;t("set",l)}else t(i,...a)}catch(l){At.error(l)}}return s}function OP(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=DP(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function MP(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Cm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=30,VP=1e3;class UP{constructor(e={},n=VP){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const mE=new UP;function FP(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function BP(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:FP(r)},i=TP.replace("{app-id}",n),a=await fetch(i,s);if(a.status!==200&&a.status!==304){let l="";try{const u=await a.json();!((e=u.error)===null||e===void 0)&&e.message&&(l=u.error.message)}catch{}throw Jt.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function zP(t,e=mE,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Jt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Jt.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new WP;return setTimeout(async()=>{l.abort()},SP),pE({appId:r,apiKey:s,measurementId:i},a,l,e)}async function pE(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=mE){var i;const{appId:a,measurementId:l}=t;try{await $P(r,e)}catch(u){if(l)return At.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:l};throw u}try{const u=await BP(t);return s.deleteThrottleMetadata(a),u}catch(u){const d=u;if(!HP(d)){if(s.deleteThrottleMetadata(a),l)return At.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:a,measurementId:l};throw u}const f=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?Av(n,s.intervalMillis,LP):Av(n,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(a,p),At.debug(`Calling attemptFetch again in ${f} millis`),pE(t,p,r,s)}}function $P(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Jt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function HP(t){if(!(t instanceof fn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class WP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function GP(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a=Object.assign(Object.assign({},r),{send_to:i});t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KP(){if(o0())try{await l0()}catch(t){return At.warn(Jt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return At.warn(Jt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function qP(t,e,n,r,s,i,a){var l;const u=zP(t);u.then(E=>{n[E.measurementId]=E.appId,t.options.measurementId&&E.measurementId!==t.options.measurementId&&At.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>At.error(E)),e.push(u);const d=KP().then(E=>{if(E)return r.getId()}),[f,p]=await Promise.all([u,d]);MP(i)||AP(i,f.measurementId),s("js",new Date);const g=(l=a==null?void 0:a.config)!==null&&l!==void 0?l:{};return g[CP]="firebase",g.update=!0,p!=null&&(g[bP]=p),s("config",f.measurementId,g),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.app=e}_delete(){return delete Aa[this.app.options.appId],Promise.resolve()}}let Aa={},oy=[];const ly={};let Ad="dataLayer",JP="gtag",cy,gE,uy=!1;function YP(){const t=[];if(a0()&&t.push("This is a browser extension environment."),ZI()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Jt.create("invalid-analytics-context",{errorInfo:e});At.warn(n.message)}}function XP(t,e,n){YP();const r=t.options.appId;if(!r)throw Jt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)At.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Jt.create("no-api-key");if(Aa[r]!=null)throw Jt.create("already-exists",{id:r});if(!uy){RP(Ad);const{wrappedGtag:i,gtagCore:a}=OP(Aa,oy,ly,Ad,JP);gE=i,cy=a,uy=!0}return Aa[r]=qP(t,oy,ly,e,cy,Ad,n),new QP(t)}function ZP(t,e,n,r){t=wt(t),GP(gE,Aa[t.app.options.appId],e,n,r).catch(s=>At.error(s))}const dy="@firebase/analytics",hy="0.10.17";function e2(){Tn(new hn(ay,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return XP(r,s,n)},"PUBLIC")),Tn(new hn("analytics-internal",t,"PRIVATE")),Qt(dy,hy),Qt(dy,hy,"esm2017");function t(e){try{const n=e.getProvider(ay).getImmediate();return{logEvent:(r,s,i)=>ZP(n,r,s,i)}}catch(n){throw Jt.create("interop-component-reg-failed",{reason:n})}}}e2();var fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ar,vE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,y){function C(){}C.prototype=y.prototype,S.D=y.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(I,P,j){for(var A=Array(arguments.length-2),X=2;X<arguments.length;X++)A[X-2]=arguments[X];return y.prototype[P].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,y,C){C||(C=0);var I=Array(16);if(typeof y=="string")for(var P=0;16>P;++P)I[P]=y.charCodeAt(C++)|y.charCodeAt(C++)<<8|y.charCodeAt(C++)<<16|y.charCodeAt(C++)<<24;else for(P=0;16>P;++P)I[P]=y[C++]|y[C++]<<8|y[C++]<<16|y[C++]<<24;y=S.g[0],C=S.g[1],P=S.g[2];var j=S.g[3],A=y+(j^C&(P^j))+I[0]+3614090360&4294967295;y=C+(A<<7&4294967295|A>>>25),A=j+(P^y&(C^P))+I[1]+3905402710&4294967295,j=y+(A<<12&4294967295|A>>>20),A=P+(C^j&(y^C))+I[2]+606105819&4294967295,P=j+(A<<17&4294967295|A>>>15),A=C+(y^P&(j^y))+I[3]+3250441966&4294967295,C=P+(A<<22&4294967295|A>>>10),A=y+(j^C&(P^j))+I[4]+4118548399&4294967295,y=C+(A<<7&4294967295|A>>>25),A=j+(P^y&(C^P))+I[5]+1200080426&4294967295,j=y+(A<<12&4294967295|A>>>20),A=P+(C^j&(y^C))+I[6]+2821735955&4294967295,P=j+(A<<17&4294967295|A>>>15),A=C+(y^P&(j^y))+I[7]+4249261313&4294967295,C=P+(A<<22&4294967295|A>>>10),A=y+(j^C&(P^j))+I[8]+1770035416&4294967295,y=C+(A<<7&4294967295|A>>>25),A=j+(P^y&(C^P))+I[9]+2336552879&4294967295,j=y+(A<<12&4294967295|A>>>20),A=P+(C^j&(y^C))+I[10]+4294925233&4294967295,P=j+(A<<17&4294967295|A>>>15),A=C+(y^P&(j^y))+I[11]+2304563134&4294967295,C=P+(A<<22&4294967295|A>>>10),A=y+(j^C&(P^j))+I[12]+1804603682&4294967295,y=C+(A<<7&4294967295|A>>>25),A=j+(P^y&(C^P))+I[13]+4254626195&4294967295,j=y+(A<<12&4294967295|A>>>20),A=P+(C^j&(y^C))+I[14]+2792965006&4294967295,P=j+(A<<17&4294967295|A>>>15),A=C+(y^P&(j^y))+I[15]+1236535329&4294967295,C=P+(A<<22&4294967295|A>>>10),A=y+(P^j&(C^P))+I[1]+4129170786&4294967295,y=C+(A<<5&4294967295|A>>>27),A=j+(C^P&(y^C))+I[6]+3225465664&4294967295,j=y+(A<<9&4294967295|A>>>23),A=P+(y^C&(j^y))+I[11]+643717713&4294967295,P=j+(A<<14&4294967295|A>>>18),A=C+(j^y&(P^j))+I[0]+3921069994&4294967295,C=P+(A<<20&4294967295|A>>>12),A=y+(P^j&(C^P))+I[5]+3593408605&4294967295,y=C+(A<<5&4294967295|A>>>27),A=j+(C^P&(y^C))+I[10]+38016083&4294967295,j=y+(A<<9&4294967295|A>>>23),A=P+(y^C&(j^y))+I[15]+3634488961&4294967295,P=j+(A<<14&4294967295|A>>>18),A=C+(j^y&(P^j))+I[4]+3889429448&4294967295,C=P+(A<<20&4294967295|A>>>12),A=y+(P^j&(C^P))+I[9]+568446438&4294967295,y=C+(A<<5&4294967295|A>>>27),A=j+(C^P&(y^C))+I[14]+3275163606&4294967295,j=y+(A<<9&4294967295|A>>>23),A=P+(y^C&(j^y))+I[3]+4107603335&4294967295,P=j+(A<<14&4294967295|A>>>18),A=C+(j^y&(P^j))+I[8]+1163531501&4294967295,C=P+(A<<20&4294967295|A>>>12),A=y+(P^j&(C^P))+I[13]+2850285829&4294967295,y=C+(A<<5&4294967295|A>>>27),A=j+(C^P&(y^C))+I[2]+4243563512&4294967295,j=y+(A<<9&4294967295|A>>>23),A=P+(y^C&(j^y))+I[7]+1735328473&4294967295,P=j+(A<<14&4294967295|A>>>18),A=C+(j^y&(P^j))+I[12]+2368359562&4294967295,C=P+(A<<20&4294967295|A>>>12),A=y+(C^P^j)+I[5]+4294588738&4294967295,y=C+(A<<4&4294967295|A>>>28),A=j+(y^C^P)+I[8]+2272392833&4294967295,j=y+(A<<11&4294967295|A>>>21),A=P+(j^y^C)+I[11]+1839030562&4294967295,P=j+(A<<16&4294967295|A>>>16),A=C+(P^j^y)+I[14]+4259657740&4294967295,C=P+(A<<23&4294967295|A>>>9),A=y+(C^P^j)+I[1]+2763975236&4294967295,y=C+(A<<4&4294967295|A>>>28),A=j+(y^C^P)+I[4]+1272893353&4294967295,j=y+(A<<11&4294967295|A>>>21),A=P+(j^y^C)+I[7]+4139469664&4294967295,P=j+(A<<16&4294967295|A>>>16),A=C+(P^j^y)+I[10]+3200236656&4294967295,C=P+(A<<23&4294967295|A>>>9),A=y+(C^P^j)+I[13]+681279174&4294967295,y=C+(A<<4&4294967295|A>>>28),A=j+(y^C^P)+I[0]+3936430074&4294967295,j=y+(A<<11&4294967295|A>>>21),A=P+(j^y^C)+I[3]+3572445317&4294967295,P=j+(A<<16&4294967295|A>>>16),A=C+(P^j^y)+I[6]+76029189&4294967295,C=P+(A<<23&4294967295|A>>>9),A=y+(C^P^j)+I[9]+3654602809&4294967295,y=C+(A<<4&4294967295|A>>>28),A=j+(y^C^P)+I[12]+3873151461&4294967295,j=y+(A<<11&4294967295|A>>>21),A=P+(j^y^C)+I[15]+530742520&4294967295,P=j+(A<<16&4294967295|A>>>16),A=C+(P^j^y)+I[2]+3299628645&4294967295,C=P+(A<<23&4294967295|A>>>9),A=y+(P^(C|~j))+I[0]+4096336452&4294967295,y=C+(A<<6&4294967295|A>>>26),A=j+(C^(y|~P))+I[7]+1126891415&4294967295,j=y+(A<<10&4294967295|A>>>22),A=P+(y^(j|~C))+I[14]+2878612391&4294967295,P=j+(A<<15&4294967295|A>>>17),A=C+(j^(P|~y))+I[5]+4237533241&4294967295,C=P+(A<<21&4294967295|A>>>11),A=y+(P^(C|~j))+I[12]+1700485571&4294967295,y=C+(A<<6&4294967295|A>>>26),A=j+(C^(y|~P))+I[3]+2399980690&4294967295,j=y+(A<<10&4294967295|A>>>22),A=P+(y^(j|~C))+I[10]+4293915773&4294967295,P=j+(A<<15&4294967295|A>>>17),A=C+(j^(P|~y))+I[1]+2240044497&4294967295,C=P+(A<<21&4294967295|A>>>11),A=y+(P^(C|~j))+I[8]+1873313359&4294967295,y=C+(A<<6&4294967295|A>>>26),A=j+(C^(y|~P))+I[15]+4264355552&4294967295,j=y+(A<<10&4294967295|A>>>22),A=P+(y^(j|~C))+I[6]+2734768916&4294967295,P=j+(A<<15&4294967295|A>>>17),A=C+(j^(P|~y))+I[13]+1309151649&4294967295,C=P+(A<<21&4294967295|A>>>11),A=y+(P^(C|~j))+I[4]+4149444226&4294967295,y=C+(A<<6&4294967295|A>>>26),A=j+(C^(y|~P))+I[11]+3174756917&4294967295,j=y+(A<<10&4294967295|A>>>22),A=P+(y^(j|~C))+I[2]+718787259&4294967295,P=j+(A<<15&4294967295|A>>>17),A=C+(j^(P|~y))+I[9]+3951481745&4294967295,S.g[0]=S.g[0]+y&4294967295,S.g[1]=S.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+j&4294967295}r.prototype.u=function(S,y){y===void 0&&(y=S.length);for(var C=y-this.blockSize,I=this.B,P=this.h,j=0;j<y;){if(P==0)for(;j<=C;)s(this,S,j),j+=this.blockSize;if(typeof S=="string"){for(;j<y;)if(I[P++]=S.charCodeAt(j++),P==this.blockSize){s(this,I),P=0;break}}else for(;j<y;)if(I[P++]=S[j++],P==this.blockSize){s(this,I),P=0;break}}this.h=P,this.o+=y},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var y=1;y<S.length-8;++y)S[y]=0;var C=8*this.o;for(y=S.length-8;y<S.length;++y)S[y]=C&255,C/=256;for(this.u(S),S=Array(16),y=C=0;4>y;++y)for(var I=0;32>I;I+=8)S[C++]=this.g[y]>>>I&255;return S};function i(S,y){var C=l;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=y(S)}function a(S,y){this.h=y;for(var C=[],I=!0,P=S.length-1;0<=P;P--){var j=S[P]|0;I&&j==y||(C[P]=j,I=!1)}this.g=C}var l={};function u(S){return-128<=S&&128>S?i(S,function(y){return new a([y|0],0>y?-1:0)}):new a([S|0],0>S?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return k(d(-S));for(var y=[],C=1,I=0;S>=C;I++)y[I]=S/C|0,C*=4294967296;return new a(y,0)}function f(S,y){if(S.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(S.charAt(0)=="-")return k(f(S.substring(1),y));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=d(Math.pow(y,8)),I=p,P=0;P<S.length;P+=8){var j=Math.min(8,S.length-P),A=parseInt(S.substring(P,P+j),y);8>j?(j=d(Math.pow(y,j)),I=I.j(j).add(d(A))):(I=I.j(C),I=I.add(d(A)))}return I}var p=u(0),g=u(1),E=u(16777216);t=a.prototype,t.m=function(){if(N(this))return-k(this).m();for(var S=0,y=1,C=0;C<this.g.length;C++){var I=this.i(C);S+=(0<=I?I:4294967296+I)*y,y*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_(this))return"0";if(N(this))return"-"+k(this).toString(S);for(var y=d(Math.pow(S,6)),C=this,I="";;){var P=R(C,y).g;C=b(C,P.j(y));var j=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=P,_(C))return j+I;for(;6>j.length;)j="0"+j;I=j+I}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function _(S){if(S.h!=0)return!1;for(var y=0;y<S.g.length;y++)if(S.g[y]!=0)return!1;return!0}function N(S){return S.h==-1}t.l=function(S){return S=b(this,S),N(S)?-1:_(S)?0:1};function k(S){for(var y=S.g.length,C=[],I=0;I<y;I++)C[I]=~S.g[I];return new a(C,~S.h).add(g)}t.abs=function(){return N(this)?k(this):this},t.add=function(S){for(var y=Math.max(this.g.length,S.g.length),C=[],I=0,P=0;P<=y;P++){var j=I+(this.i(P)&65535)+(S.i(P)&65535),A=(j>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);I=A>>>16,j&=65535,A&=65535,C[P]=A<<16|j}return new a(C,C[C.length-1]&-2147483648?-1:0)};function b(S,y){return S.add(k(y))}t.j=function(S){if(_(this)||_(S))return p;if(N(this))return N(S)?k(this).j(k(S)):k(k(this).j(S));if(N(S))return k(this.j(k(S)));if(0>this.l(E)&&0>S.l(E))return d(this.m()*S.m());for(var y=this.g.length+S.g.length,C=[],I=0;I<2*y;I++)C[I]=0;for(I=0;I<this.g.length;I++)for(var P=0;P<S.g.length;P++){var j=this.i(I)>>>16,A=this.i(I)&65535,X=S.i(P)>>>16,Y=S.i(P)&65535;C[2*I+2*P]+=A*Y,x(C,2*I+2*P),C[2*I+2*P+1]+=j*Y,x(C,2*I+2*P+1),C[2*I+2*P+1]+=A*X,x(C,2*I+2*P+1),C[2*I+2*P+2]+=j*X,x(C,2*I+2*P+2)}for(I=0;I<y;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=y;I<2*y;I++)C[I]=0;return new a(C,0)};function x(S,y){for(;(S[y]&65535)!=S[y];)S[y+1]+=S[y]>>>16,S[y]&=65535,y++}function w(S,y){this.g=S,this.h=y}function R(S,y){if(_(y))throw Error("division by zero");if(_(S))return new w(p,p);if(N(S))return y=R(k(S),y),new w(k(y.g),k(y.h));if(N(y))return y=R(S,k(y)),new w(k(y.g),y.h);if(30<S.g.length){if(N(S)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var C=g,I=y;0>=I.l(S);)C=B(C),I=B(I);var P=z(C,1),j=z(I,1);for(I=z(I,2),C=z(C,2);!_(I);){var A=j.add(I);0>=A.l(S)&&(P=P.add(C),j=A),I=z(I,1),C=z(C,1)}return y=b(S,P.j(y)),new w(P,y)}for(P=p;0<=S.l(y);){for(C=Math.max(1,Math.floor(S.m()/y.m())),I=Math.ceil(Math.log(C)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),j=d(C),A=j.j(y);N(A)||0<A.l(S);)C-=I,j=d(C),A=j.j(y);_(j)&&(j=g),P=P.add(j),S=b(S,A)}return new w(P,S)}t.A=function(S){return R(this,S).h},t.and=function(S){for(var y=Math.max(this.g.length,S.g.length),C=[],I=0;I<y;I++)C[I]=this.i(I)&S.i(I);return new a(C,this.h&S.h)},t.or=function(S){for(var y=Math.max(this.g.length,S.g.length),C=[],I=0;I<y;I++)C[I]=this.i(I)|S.i(I);return new a(C,this.h|S.h)},t.xor=function(S){for(var y=Math.max(this.g.length,S.g.length),C=[],I=0;I<y;I++)C[I]=this.i(I)^S.i(I);return new a(C,this.h^S.h)};function B(S){for(var y=S.g.length+1,C=[],I=0;I<y;I++)C[I]=S.i(I)<<1|S.i(I-1)>>>31;return new a(C,S.h)}function z(S,y){var C=y>>5;y%=32;for(var I=S.g.length-C,P=[],j=0;j<I;j++)P[j]=0<y?S.i(j+C)>>>y|S.i(j+C+1)<<32-y:S.i(j+C);return new a(P,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vE=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,Ar=a}).apply(typeof fy<"u"?fy:typeof self<"u"?self:typeof window<"u"?window:{});var pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yE,pa,xE,Ll,Wh,_E,wE,EE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,h,m){return o==Array.prototype||o==Object.prototype||(o[h]=m.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof pl=="object"&&pl];for(var h=0;h<o.length;++h){var m=o[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(o,h){if(h)e:{var m=r;o=o.split(".");for(var v=0;v<o.length-1;v++){var D=o[v];if(!(D in m))break e;m=m[D]}o=o[o.length-1],v=m[o],h=h(v),h!=v&&h!=null&&e(m,o,{configurable:!0,writable:!0,value:h})}}function i(o,h){o instanceof String&&(o+="");var m=0,v=!1,D={next:function(){if(!v&&m<o.length){var O=m++;return{value:h(O,o[O]),done:!1}}return v=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(o){return o||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var h=typeof o;return h=h!="object"?h:o?Array.isArray(o)?"array":h:"null",h=="array"||h=="object"&&typeof o.length=="number"}function d(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function f(o,h,m){return o.call.apply(o.bind,arguments)}function p(o,h,m){if(!o)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,v),o.apply(h,D)}}return function(){return o.apply(h,arguments)}}function g(o,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function E(o,h){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),o.apply(this,v)}}function _(o,h){function m(){}m.prototype=h.prototype,o.aa=h.prototype,o.prototype=new m,o.prototype.constructor=o,o.Qb=function(v,D,O){for(var W=Array(arguments.length-2),be=2;be<arguments.length;be++)W[be-2]=arguments[be];return h.prototype[D].apply(v,W)}}function N(o){const h=o.length;if(0<h){const m=Array(h);for(let v=0;v<h;v++)m[v]=o[v];return m}return[]}function k(o,h){for(let m=1;m<arguments.length;m++){const v=arguments[m];if(u(v)){const D=o.length||0,O=v.length||0;o.length=D+O;for(let W=0;W<O;W++)o[D+W]=v[W]}else o.push(v)}}class b{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(o){return/^[\s\xa0]*$/.test(o)}function w(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function R(o){return R[" "](o),o}R[" "]=function(){};var B=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function z(o,h,m){for(const v in o)h.call(m,o[v],v,o)}function S(o,h){for(const m in o)h.call(void 0,o[m],m,o)}function y(o){const h={};for(const m in o)h[m]=o[m];return h}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(o,h){let m,v;for(let D=1;D<arguments.length;D++){v=arguments[D];for(m in v)o[m]=v[m];for(let O=0;O<C.length;O++)m=C[O],Object.prototype.hasOwnProperty.call(v,m)&&(o[m]=v[m])}}function P(o){var h=1;o=o.split(":");const m=[];for(;0<h&&o.length;)m.push(o.shift()),h--;return o.length&&m.push(o.join(":")),m}function j(o){l.setTimeout(()=>{throw o},0)}function A(){var o=te;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class X{constructor(){this.h=this.g=null}add(h,m){const v=Y.get();v.set(h,m),this.h?this.h.next=v:this.g=v,this.h=v}}var Y=new b(()=>new me,o=>o.reset());class me{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,G=!1,te=new X,ne=()=>{const o=l.Promise.resolve(void 0);Ve=()=>{o.then(xe)}};var xe=()=>{for(var o;o=A();){try{o.h.call(o.g)}catch(m){j(m)}var h=Y;h.j(o),100>h.h&&(h.h++,o.next=h.g,h.g=o)}G=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const m=()=>{};l.addEventListener("test",m,h),l.removeEventListener("test",m,h)}catch{}return o}();function pe(o,h){if(U.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var m=this.type=o.type,v=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget){if(B){e:{try{R(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else m=="mouseover"?h=o.fromElement:m=="mouseout"&&(h=o.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Ee[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&pe.aa.h.call(this)}}_(pe,U);var Ee={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),gt=0;function Vi(o,h,m,v,D){this.listener=o,this.proxy=null,this.src=h,this.type=m,this.capture=!!v,this.ha=D,this.key=++gt,this.da=this.fa=!1}function As(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Rs(o){this.src=o,this.g={},this.h=0}Rs.prototype.add=function(o,h,m,v,D){var O=o.toString();o=this.g[O],o||(o=this.g[O]=[],this.h++);var W=Fi(o,h,v,D);return-1<W?(h=o[W],m||(h.fa=!1)):(h=new Vi(h,this.src,O,!!v,D),h.fa=m,o.push(h)),h};function Ui(o,h){var m=h.type;if(m in o.g){var v=o.g[m],D=Array.prototype.indexOf.call(v,h,void 0),O;(O=0<=D)&&Array.prototype.splice.call(v,D,1),O&&(As(h),o.g[m].length==0&&(delete o.g[m],o.h--))}}function Fi(o,h,m,v){for(var D=0;D<o.length;++D){var O=o[D];if(!O.da&&O.listener==h&&O.capture==!!m&&O.ha==v)return D}return-1}var V="closure_lm_"+(1e6*Math.random()|0),M={};function q(o,h,m,v,D){if(Array.isArray(h)){for(var O=0;O<h.length;O++)q(o,h[O],m,v,D);return null}return m=mp(m),o&&o[le]?o.K(h,m,d(v)?!!v.capture:!1,D):_e(o,h,m,!1,v,D)}function _e(o,h,m,v,D,O){if(!h)throw Error("Invalid event type");var W=d(D)?!!D.capture:!!D,be=Nu(o);if(be||(o[V]=be=new Rs(o)),m=be.add(h,m,v,W,O),m.proxy)return m;if(v=jt(),m.proxy=v,v.src=o,v.listener=m,o.addEventListener)H||(D=W),D===void 0&&(D=!1),o.addEventListener(h.toString(),v,D);else if(o.attachEvent)o.attachEvent(fp(h.toString()),v);else if(o.addListener&&o.removeListener)o.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function jt(){function o(m){return h.call(o.src,o.listener,m)}const h=Cb;return o}function Ps(o,h,m,v,D){if(Array.isArray(h))for(var O=0;O<h.length;O++)Ps(o,h[O],m,v,D);else v=d(v)?!!v.capture:!!v,m=mp(m),o&&o[le]?(o=o.i,h=String(h).toString(),h in o.g&&(O=o.g[h],m=Fi(O,m,v,D),-1<m&&(As(O[m]),Array.prototype.splice.call(O,m,1),O.length==0&&(delete o.g[h],o.h--)))):o&&(o=Nu(o))&&(h=o.g[h.toString()],o=-1,h&&(o=Fi(h,m,v,D)),(m=-1<o?h[o]:null)&&Bi(m))}function Bi(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[le])Ui(h.i,o);else{var m=o.type,v=o.proxy;h.removeEventListener?h.removeEventListener(m,v,o.capture):h.detachEvent?h.detachEvent(fp(m),v):h.addListener&&h.removeListener&&h.removeListener(v),(m=Nu(h))?(Ui(m,o),m.h==0&&(m.src=null,h[V]=null)):As(o)}}}function fp(o){return o in M?M[o]:M[o]="on"+o}function Cb(o,h){if(o.da)o=!0;else{h=new pe(h,this);var m=o.listener,v=o.ha||o.src;o.fa&&Bi(o),o=m.call(v,h)}return o}function Nu(o){return o=o[V],o instanceof Rs?o:null}var Au="__closure_events_fn_"+(1e9*Math.random()>>>0);function mp(o){return typeof o=="function"?o:(o[Au]||(o[Au]=function(h){return o.handleEvent(h)}),o[Au])}function it(){K.call(this),this.i=new Rs(this),this.M=this,this.F=null}_(it,K),it.prototype[le]=!0,it.prototype.removeEventListener=function(o,h,m,v){Ps(this,o,h,m,v)};function vt(o,h){var m,v=o.F;if(v)for(m=[];v;v=v.F)m.push(v);if(o=o.M,v=h.type||h,typeof h=="string")h=new U(h,o);else if(h instanceof U)h.target=h.target||o;else{var D=h;h=new U(v,o),I(h,D)}if(D=!0,m)for(var O=m.length-1;0<=O;O--){var W=h.g=m[O];D=Oo(W,v,!0,h)&&D}if(W=h.g=o,D=Oo(W,v,!0,h)&&D,D=Oo(W,v,!1,h)&&D,m)for(O=0;O<m.length;O++)W=h.g=m[O],D=Oo(W,v,!1,h)&&D}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var o=this.i,h;for(h in o.g){for(var m=o.g[h],v=0;v<m.length;v++)As(m[v]);delete o.g[h],o.h--}}this.F=null},it.prototype.K=function(o,h,m,v){return this.i.add(String(o),h,!1,m,v)},it.prototype.L=function(o,h,m,v){return this.i.add(String(o),h,!0,m,v)};function Oo(o,h,m,v){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,O=0;O<h.length;++O){var W=h[O];if(W&&!W.da&&W.capture==m){var be=W.listener,Xe=W.ha||W.src;W.fa&&Ui(o.i,W),D=be.call(Xe,v)!==!1&&D}}return D&&!v.defaultPrevented}function pp(o,h,m){if(typeof o=="function")m&&(o=g(o,m));else if(o&&typeof o.handleEvent=="function")o=g(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(o,h||0)}function gp(o){o.g=pp(()=>{o.g=null,o.i&&(o.i=!1,gp(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class Sb extends K{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:gp(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zi(o){K.call(this),this.h=o,this.g={}}_(zi,K);var vp=[];function yp(o){z(o.g,function(h,m){this.g.hasOwnProperty(m)&&Bi(h)},o),o.g={}}zi.prototype.N=function(){zi.aa.N.call(this),yp(this)},zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ru=l.JSON.stringify,Tb=l.JSON.parse,Ib=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Pu(){}Pu.prototype.h=null;function xp(o){return o.h||(o.h=o.i())}function _p(){}var $i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ju(){U.call(this,"d")}_(ju,U);function Du(){U.call(this,"c")}_(Du,U);var Gr={},wp=null;function Mo(){return wp=wp||new it}Gr.La="serverreachability";function Ep(o){U.call(this,Gr.La,o)}_(Ep,U);function Hi(o){const h=Mo();vt(h,new Ep(h))}Gr.STAT_EVENT="statevent";function bp(o,h){U.call(this,Gr.STAT_EVENT,o),this.stat=h}_(bp,U);function yt(o){const h=Mo();vt(h,new bp(h,o))}Gr.Ma="timingevent";function Cp(o,h){U.call(this,Gr.Ma,o),this.size=h}_(Cp,U);function Wi(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},h)}function Gi(){this.g=!0}Gi.prototype.xa=function(){this.g=!1};function kb(o,h,m,v,D,O){o.info(function(){if(o.g)if(O)for(var W="",be=O.split("&"),Xe=0;Xe<be.length;Xe++){var ve=be[Xe].split("=");if(1<ve.length){var at=ve[0];ve=ve[1];var ot=at.split("_");W=2<=ot.length&&ot[1]=="type"?W+(at+"="+ve+"&"):W+(at+"=redacted&")}}else W=null;else W=O;return"XMLHTTP REQ ("+v+") [attempt "+D+"]: "+h+`
`+m+`
`+W})}function Nb(o,h,m,v,D,O,W){o.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+D+"]: "+h+`
`+m+`
`+O+" "+W})}function js(o,h,m,v){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+Rb(o,m)+(v?" "+v:"")})}function Ab(o,h){o.info(function(){return"TIMEOUT: "+h})}Gi.prototype.info=function(){};function Rb(o,h){if(!o.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(o=0;o<m.length;o++)if(Array.isArray(m[o])){var v=m[o];if(!(2>v.length)){var D=v[1];if(Array.isArray(D)&&!(1>D.length)){var O=D[0];if(O!="noop"&&O!="stop"&&O!="close")for(var W=1;W<D.length;W++)D[W]=""}}}}return Ru(m)}catch{return h}}var Lo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ou;function Vo(){}_(Vo,Pu),Vo.prototype.g=function(){return new XMLHttpRequest},Vo.prototype.i=function(){return{}},Ou=new Vo;function nr(o,h,m,v){this.j=o,this.i=h,this.l=m,this.R=v||1,this.U=new zi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tp}function Tp(){this.i=null,this.g="",this.h=!1}var Ip={},Mu={};function Lu(o,h,m){o.L=1,o.v=zo(An(h)),o.m=m,o.P=!0,kp(o,null)}function kp(o,h){o.F=Date.now(),Uo(o),o.A=An(o.v);var m=o.A,v=o.R;Array.isArray(v)||(v=[String(v)]),zp(m.i,"t",v),o.C=0,m=o.j.J,o.h=new Tp,o.g=ag(o.j,m?h:null,!o.m),0<o.O&&(o.M=new Sb(g(o.Y,o,o.g),o.O)),h=o.U,m=o.g,v=o.ca;var D="readystatechange";Array.isArray(D)||(D&&(vp[0]=D.toString()),D=vp);for(var O=0;O<D.length;O++){var W=q(m,D[O],v||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,h)):(o.u="GET",o.g.ea(o.A,o.u,null,h)),Hi(),kb(o.i,o.u,o.A,o.l,o.R,o.m)}nr.prototype.ca=function(o){o=o.target;const h=this.M;h&&Rn(o)==3?h.j():this.Y(o)},nr.prototype.Y=function(o){try{if(o==this.g)e:{const ot=Rn(this.g);var h=this.g.Ba();const Ms=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||Qp(this.g)))){this.J||ot!=4||h==7||(h==8||0>=Ms?Hi(3):Hi(2)),Vu(this);var m=this.g.Z();this.X=m;t:if(Np(this)){var v=Qp(this.g);o="";var D=v.length,O=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),Ki(this);var W="";break t}this.h.i=new l.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,o+=this.h.i.decode(v[h],{stream:!(O&&h==D-1)});v.length=0,this.h.g+=o,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,Nb(this.i,this.u,this.A,this.l,this.R,ot,m),this.o){if(this.T&&!this.K){t:{if(this.g){var be,Xe=this.g;if((be=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(be)){var ve=be;break t}}ve=null}if(m=ve)js(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Uu(this,m);else{this.o=!1,this.s=3,yt(12),Kr(this),Ki(this);break e}}if(this.P){m=!0;let en;for(;!this.J&&this.C<W.length;)if(en=Pb(this,W),en==Mu){ot==4&&(this.s=4,yt(14),m=!1),js(this.i,this.l,null,"[Incomplete Response]");break}else if(en==Ip){this.s=4,yt(15),js(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else js(this.i,this.l,en,null),Uu(this,en);if(Np(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||W.length!=0||this.h.h||(this.s=1,yt(16),m=!1),this.o=this.o&&m,!m)js(this.i,this.l,W,"[Invalid Chunked Response]"),Kr(this),Ki(this);else if(0<W.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Wu(at),at.M=!0,yt(11))}}else js(this.i,this.l,W,null),Uu(this,W);ot==4&&Kr(this),this.o&&!this.J&&(ot==4?ng(this.j,this):(this.o=!1,Uo(this)))}else Qb(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Kr(this),Ki(this)}}}catch{}finally{}};function Np(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Pb(o,h){var m=o.C,v=h.indexOf(`
`,m);return v==-1?Mu:(m=Number(h.substring(m,v)),isNaN(m)?Ip:(v+=1,v+m>h.length?Mu:(h=h.slice(v,v+m),o.C=v+m,h)))}nr.prototype.cancel=function(){this.J=!0,Kr(this)};function Uo(o){o.S=Date.now()+o.I,Ap(o,o.I)}function Ap(o,h){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Wi(g(o.ba,o),h)}function Vu(o){o.B&&(l.clearTimeout(o.B),o.B=null)}nr.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Ab(this.i,this.A),this.L!=2&&(Hi(),yt(17)),Kr(this),this.s=2,Ki(this)):Ap(this,this.S-o)};function Ki(o){o.j.G==0||o.J||ng(o.j,o)}function Kr(o){Vu(o);var h=o.M;h&&typeof h.ma=="function"&&h.ma(),o.M=null,yp(o.U),o.g&&(h=o.g,o.g=null,h.abort(),h.ma())}function Uu(o,h){try{var m=o.j;if(m.G!=0&&(m.g==o||Fu(m.h,o))){if(!o.K&&Fu(m.h,o)&&m.G==3){try{var v=m.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var D=v;if(D[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<o.F)qo(m),Go(m);else break e;Hu(m),yt(18)}}else m.za=D[1],0<m.za-m.T&&37500>D[2]&&m.F&&m.v==0&&!m.C&&(m.C=Wi(g(m.Za,m),6e3));if(1>=jp(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Qr(m,11)}else if((o.K||m.g==o)&&qo(m),!x(h))for(D=m.Da.g.parse(h),h=0;h<D.length;h++){let ve=D[h];if(m.T=ve[0],ve=ve[1],m.G==2)if(ve[0]=="c"){m.K=ve[1],m.ia=ve[2];const at=ve[3];at!=null&&(m.la=at,m.j.info("VER="+m.la));const ot=ve[4];ot!=null&&(m.Aa=ot,m.j.info("SVER="+m.Aa));const Ms=ve[5];Ms!=null&&typeof Ms=="number"&&0<Ms&&(v=1.5*Ms,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;const en=o.g;if(en){const Jo=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jo){var O=v.h;O.g||Jo.indexOf("spdy")==-1&&Jo.indexOf("quic")==-1&&Jo.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Bu(O,O.h),O.h=null))}if(v.D){const Gu=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;Gu&&(v.ya=Gu,Se(v.I,v.D,Gu))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-o.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var W=o;if(v.qa=ig(v,v.J?v.ia:null,v.W),W.K){Dp(v.h,W);var be=W,Xe=v.L;Xe&&(be.I=Xe),be.B&&(Vu(be),Uo(be)),v.g=W}else eg(v);0<m.i.length&&Ko(m)}else ve[0]!="stop"&&ve[0]!="close"||Qr(m,7);else m.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Qr(m,7):$u(m):ve[0]!="noop"&&m.l&&m.l.ta(ve),m.v=0)}}Hi(4)}catch{}}var jb=class{constructor(o,h){this.g=o,this.map=h}};function Rp(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pp(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function jp(o){return o.h?1:o.g?o.g.size:0}function Fu(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function Bu(o,h){o.g?o.g.add(h):o.h=h}function Dp(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}Rp.prototype.cancel=function(){if(this.i=Op(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Op(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const m of o.g.values())h=h.concat(m.D);return h}return N(o.i)}function Db(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var h=[],m=o.length,v=0;v<m;v++)h.push(o[v]);return h}h=[],m=0;for(v in o)h[m++]=o[v];return h}function Ob(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var h=[];o=o.length;for(var m=0;m<o;m++)h.push(m);return h}h=[],m=0;for(const v in o)h[m++]=v;return h}}}function Mp(o,h){if(o.forEach&&typeof o.forEach=="function")o.forEach(h,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,h,void 0);else for(var m=Ob(o),v=Db(o),D=v.length,O=0;O<D;O++)h.call(void 0,v[O],m&&m[O],o)}var Lp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mb(o,h){if(o){o=o.split("&");for(var m=0;m<o.length;m++){var v=o[m].indexOf("="),D=null;if(0<=v){var O=o[m].substring(0,v);D=o[m].substring(v+1)}else O=o[m];h(O,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function qr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof qr){this.h=o.h,Fo(this,o.j),this.o=o.o,this.g=o.g,Bo(this,o.s),this.l=o.l;var h=o.i,m=new Ji;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),Vp(this,m),this.m=o.m}else o&&(h=String(o).match(Lp))?(this.h=!1,Fo(this,h[1]||"",!0),this.o=qi(h[2]||""),this.g=qi(h[3]||"",!0),Bo(this,h[4]),this.l=qi(h[5]||"",!0),Vp(this,h[6]||"",!0),this.m=qi(h[7]||"")):(this.h=!1,this.i=new Ji(null,this.h))}qr.prototype.toString=function(){var o=[],h=this.j;h&&o.push(Qi(h,Up,!0),":");var m=this.g;return(m||h=="file")&&(o.push("//"),(h=this.o)&&o.push(Qi(h,Up,!0),"@"),o.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&o.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&o.push("/"),o.push(Qi(m,m.charAt(0)=="/"?Ub:Vb,!0))),(m=this.i.toString())&&o.push("?",m),(m=this.m)&&o.push("#",Qi(m,Bb)),o.join("")};function An(o){return new qr(o)}function Fo(o,h,m){o.j=m?qi(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function Bo(o,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);o.s=h}else o.s=null}function Vp(o,h,m){h instanceof Ji?(o.i=h,zb(o.i,o.h)):(m||(h=Qi(h,Fb)),o.i=new Ji(h,o.h))}function Se(o,h,m){o.i.set(h,m)}function zo(o){return Se(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function qi(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Qi(o,h,m){return typeof o=="string"?(o=encodeURI(o).replace(h,Lb),m&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Lb(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Up=/[#\/\?@]/g,Vb=/[#\?:]/g,Ub=/[#\?]/g,Fb=/[#\?@]/g,Bb=/#/g;function Ji(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function rr(o){o.g||(o.g=new Map,o.h=0,o.i&&Mb(o.i,function(h,m){o.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Ji.prototype,t.add=function(o,h){rr(this),this.i=null,o=Ds(this,o);var m=this.g.get(o);return m||this.g.set(o,m=[]),m.push(h),this.h+=1,this};function Fp(o,h){rr(o),h=Ds(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function Bp(o,h){return rr(o),h=Ds(o,h),o.g.has(h)}t.forEach=function(o,h){rr(this),this.g.forEach(function(m,v){m.forEach(function(D){o.call(h,D,v,this)},this)},this)},t.na=function(){rr(this);const o=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let v=0;v<h.length;v++){const D=o[v];for(let O=0;O<D.length;O++)m.push(h[v])}return m},t.V=function(o){rr(this);let h=[];if(typeof o=="string")Bp(this,o)&&(h=h.concat(this.g.get(Ds(this,o))));else{o=Array.from(this.g.values());for(let m=0;m<o.length;m++)h=h.concat(o[m])}return h},t.set=function(o,h){return rr(this),this.i=null,o=Ds(this,o),Bp(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=this.V(o),0<o.length?String(o[0]):h):h};function zp(o,h,m){Fp(o,h),0<m.length&&(o.i=null,o.g.set(Ds(o,h),N(m)),o.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var v=h[m];const O=encodeURIComponent(String(v)),W=this.V(v);for(v=0;v<W.length;v++){var D=O;W[v]!==""&&(D+="="+encodeURIComponent(String(W[v]))),o.push(D)}}return this.i=o.join("&")};function Ds(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function zb(o,h){h&&!o.j&&(rr(o),o.i=null,o.g.forEach(function(m,v){var D=v.toLowerCase();v!=D&&(Fp(this,v),zp(this,D,m))},o)),o.j=h}function $b(o,h){const m=new Gi;if(l.Image){const v=new Image;v.onload=E(sr,m,"TestLoadImage: loaded",!0,h,v),v.onerror=E(sr,m,"TestLoadImage: error",!1,h,v),v.onabort=E(sr,m,"TestLoadImage: abort",!1,h,v),v.ontimeout=E(sr,m,"TestLoadImage: timeout",!1,h,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=o}else h(!1)}function Hb(o,h){const m=new Gi,v=new AbortController,D=setTimeout(()=>{v.abort(),sr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:v.signal}).then(O=>{clearTimeout(D),O.ok?sr(m,"TestPingServer: ok",!0,h):sr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),sr(m,"TestPingServer: error",!1,h)})}function sr(o,h,m,v,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),v(m)}catch{}}function Wb(){this.g=new Ib}function Gb(o,h,m){const v=m||"";try{Mp(o,function(D,O){let W=D;d(D)&&(W=Ru(D)),h.push(v+O+"="+encodeURIComponent(W))})}catch(D){throw h.push(v+"type="+encodeURIComponent("_badmap")),D}}function $o(o){this.l=o.Ub||null,this.j=o.eb||!1}_($o,Pu),$o.prototype.g=function(){return new Ho(this.l,this.j)},$o.prototype.i=function(o){return function(){return o}}({});function Ho(o,h){it.call(this),this.D=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Ho,it),t=Ho.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=h,this.readyState=1,Xi(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(h.body=o),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yi(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Xi(this)),this.g&&(this.readyState=3,Xi(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$p(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function $p(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?Yi(this):Xi(this),this.readyState==3&&$p(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Yi(this))},t.Qa=function(o){this.g&&(this.response=o,Yi(this))},t.ga=function(){this.g&&Yi(this)};function Yi(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Xi(o)}t.setRequestHeader=function(o,h){this.u.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,o.push(m[0]+": "+m[1]),m=h.next();return o.join(`\r
`)};function Xi(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ho.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Hp(o){let h="";return z(o,function(m,v){h+=v,h+=":",h+=m,h+=`\r
`}),h}function zu(o,h,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=Hp(m),typeof o=="string"?m!=null&&encodeURIComponent(String(m)):Se(o,h,m))}function Me(o){it.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Me,it);var Kb=/^https?$/i,qb=["POST","PUT"];t=Me.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,h,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ou.g(),this.v=this.o?xp(this.o):xp(Ou),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(O){Wp(this,O);return}if(o=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var D in v)m.set(D,v[D]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const O of v.keys())m.set(O,v.get(O));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),D=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(qb,h,void 0))||v||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,W]of m)this.g.setRequestHeader(O,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qp(this),this.u=!0,this.g.send(o),this.u=!1}catch(O){Wp(this,O)}};function Wp(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.m=5,Gp(o),Wo(o)}function Gp(o){o.A||(o.A=!0,vt(o,"complete"),vt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,vt(this,"complete"),vt(this,"abort"),Wo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wo(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Kp(this):this.bb())},t.bb=function(){Kp(this)};function Kp(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Rn(o)!=4||o.Z()!=2)){if(o.u&&Rn(o)==4)pp(o.Ea,0,o);else if(vt(o,"readystatechange"),Rn(o)==4){o.h=!1;try{const W=o.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var v;if(v=W===0){var D=String(o.D).match(Lp)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),v=!Kb.test(D?D.toLowerCase():"")}m=v}if(m)vt(o,"complete"),vt(o,"success");else{o.m=6;try{var O=2<Rn(o)?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.Z()+"]",Gp(o)}}finally{Wo(o)}}}}function Wo(o,h){if(o.g){qp(o);const m=o.g,v=o.v[0]?()=>{}:null;o.g=null,o.v=null,h||vt(o,"ready");try{m.onreadystatechange=v}catch{}}}function qp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function Rn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),Tb(h)}};function Qp(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Qb(o){const h={};o=(o.g&&2<=Rn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<o.length;v++){if(x(o[v]))continue;var m=P(o[v]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const O=h[D]||[];h[D]=O,O.push(m)}S(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zi(o,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[o]||h}function Jp(o){this.Aa=0,this.i=[],this.j=new Gi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zi("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zi("baseRetryDelayMs",5e3,o),this.cb=Zi("retryDelaySeedMs",1e4,o),this.Wa=Zi("forwardChannelMaxRetries",2,o),this.wa=Zi("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Rp(o&&o.concurrentRequestLimit),this.Da=new Wb,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Jp.prototype,t.la=8,t.G=1,t.connect=function(o,h,m,v){yt(0),this.W=o,this.H=h||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=ig(this,null,this.W),Ko(this)};function $u(o){if(Yp(o),o.G==3){var h=o.U++,m=An(o.I);if(Se(m,"SID",o.K),Se(m,"RID",h),Se(m,"TYPE","terminate"),ea(o,m),h=new nr(o,o.j,h),h.L=2,h.v=zo(An(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=h.v,m=!0),m||(h.g=ag(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Uo(h)}sg(o)}function Go(o){o.g&&(Wu(o),o.g.cancel(),o.g=null)}function Yp(o){Go(o),o.u&&(l.clearTimeout(o.u),o.u=null),qo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Ko(o){if(!Pp(o.h)&&!o.s){o.s=!0;var h=o.Ga;Ve||ne(),G||(Ve(),G=!0),te.add(h,o),o.B=0}}function Jb(o,h){return jp(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=h.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Wi(g(o.Ga,o,h),rg(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const D=new nr(this,this.j,o);let O=this.o;if(this.S&&(O?(O=y(O),I(O,this.S)):O=this.S),this.m!==null||this.O||(D.H=O,O=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Zp(this,D,h),m=An(this.I),Se(m,"RID",o),Se(m,"CVER",22),this.D&&Se(m,"X-HTTP-Session-Id",this.D),ea(this,m),O&&(this.O?h="headers="+encodeURIComponent(String(Hp(O)))+"&"+h:this.m&&zu(m,this.m,O)),Bu(this.h,D),this.Ua&&Se(m,"TYPE","init"),this.P?(Se(m,"$req",h),Se(m,"SID","null"),D.T=!0,Lu(D,m,null)):Lu(D,m,h),this.G=2}}else this.G==3&&(o?Xp(this,o):this.i.length==0||Pp(this.h)||Xp(this))};function Xp(o,h){var m;h?m=h.l:m=o.U++;const v=An(o.I);Se(v,"SID",o.K),Se(v,"RID",m),Se(v,"AID",o.T),ea(o,v),o.m&&o.o&&zu(v,o.m,o.o),m=new nr(o,o.j,m,o.B+1),o.m===null&&(m.H=o.o),h&&(o.i=h.D.concat(o.i)),h=Zp(o,m,1e3),m.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Bu(o.h,m),Lu(m,v,h)}function ea(o,h){o.H&&z(o.H,function(m,v){Se(h,v,m)}),o.l&&Mp({},function(m,v){Se(h,v,m)})}function Zp(o,h,m){m=Math.min(o.i.length,m);var v=o.l?g(o.l.Na,o.l,o):null;e:{var D=o.i;let O=-1;for(;;){const W=["count="+m];O==-1?0<m?(O=D[0].g,W.push("ofs="+O)):O=0:W.push("ofs="+O);let be=!0;for(let Xe=0;Xe<m;Xe++){let ve=D[Xe].g;const at=D[Xe].map;if(ve-=O,0>ve)O=Math.max(0,D[Xe].g-100),be=!1;else try{Gb(at,W,"req"+ve+"_")}catch{v&&v(at)}}if(be){v=W.join("&");break e}}}return o=o.i.splice(0,m),h.D=o,v}function eg(o){if(!o.g&&!o.u){o.Y=1;var h=o.Fa;Ve||ne(),G||(Ve(),G=!0),te.add(h,o),o.v=0}}function Hu(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Wi(g(o.Fa,o),rg(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,tg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Wi(g(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Go(this),tg(this))};function Wu(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function tg(o){o.g=new nr(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var h=An(o.qa);Se(h,"RID","rpc"),Se(h,"SID",o.K),Se(h,"AID",o.T),Se(h,"CI",o.F?"0":"1"),!o.F&&o.ja&&Se(h,"TO",o.ja),Se(h,"TYPE","xmlhttp"),ea(o,h),o.m&&o.o&&zu(h,o.m,o.o),o.L&&(o.g.I=o.L);var m=o.g;o=o.ia,m.L=1,m.v=zo(An(h)),m.m=null,m.P=!0,kp(m,o)}t.Za=function(){this.C!=null&&(this.C=null,Go(this),Hu(this),yt(19))};function qo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function ng(o,h){var m=null;if(o.g==h){qo(o),Wu(o),o.g=null;var v=2}else if(Fu(o.h,h))m=h.D,Dp(o.h,h),v=1;else return;if(o.G!=0){if(h.o)if(v==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var D=o.B;v=Mo(),vt(v,new Cp(v,m)),Ko(o)}else eg(o);else if(D=h.s,D==3||D==0&&0<h.X||!(v==1&&Jb(o,h)||v==2&&Hu(o)))switch(m&&0<m.length&&(h=o.h,h.i=h.i.concat(m)),D){case 1:Qr(o,5);break;case 4:Qr(o,10);break;case 3:Qr(o,6);break;default:Qr(o,2)}}}function rg(o,h){let m=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(m*=2),m*h}function Qr(o,h){if(o.j.info("Error code "+h),h==2){var m=g(o.fb,o),v=o.Xa;const D=!v;v=new qr(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Fo(v,"https"),zo(v),D?$b(v.toString(),m):Hb(v.toString(),m)}else yt(2);o.G=0,o.l&&o.l.sa(h),sg(o),Yp(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function sg(o){if(o.G=0,o.ka=[],o.l){const h=Op(o.h);(h.length!=0||o.i.length!=0)&&(k(o.ka,h),k(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function ig(o,h,m){var v=m instanceof qr?An(m):new qr(m);if(v.g!="")h&&(v.g=h+"."+v.g),Bo(v,v.s);else{var D=l.location;v=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var O=new qr(null);v&&Fo(O,v),h&&(O.g=h),D&&Bo(O,D),m&&(O.l=m),v=O}return m=o.D,h=o.ya,m&&h&&Se(v,m,h),Se(v,"VER",o.la),ea(o,v),v}function ag(o,h,m){if(h&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Ca&&!o.pa?new Me(new $o({eb:m})):new Me(o.pa),h.Ha(o.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function og(){}t=og.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qo(){}Qo.prototype.g=function(o,h){return new Dt(o,h)};function Dt(o,h){it.call(this),this.g=new Jp(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(o?o["X-WebChannel-Client-Profile"]=h.va:o={"X-WebChannel-Client-Profile":h.va}),this.g.S=o,(o=h&&h.Sb)&&!x(o)&&(this.g.m=o),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.D=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new Os(this)}_(Dt,it),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){$u(this.g)},Dt.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var m={};m.__data__=o,o=m}else this.u&&(m={},m.__data__=Ru(o),o=m);h.i.push(new jb(h.Ya++,o)),h.G==3&&Ko(h)},Dt.prototype.N=function(){this.g.l=null,delete this.j,$u(this.g),delete this.g,Dt.aa.N.call(this)};function lg(o){ju.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const m in h){o=m;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}_(lg,ju);function cg(){Du.call(this),this.status=1}_(cg,Du);function Os(o){this.g=o}_(Os,og),Os.prototype.ua=function(){vt(this.g,"a")},Os.prototype.ta=function(o){vt(this.g,new lg(o))},Os.prototype.sa=function(o){vt(this.g,new cg)},Os.prototype.ra=function(){vt(this.g,"b")},Qo.prototype.createWebChannel=Qo.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,EE=function(){return new Qo},wE=function(){return Mo()},_E=Gr,Wh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lo.NO_ERROR=0,Lo.TIMEOUT=8,Lo.HTTP_ERROR=6,Ll=Lo,Sp.COMPLETE="complete",xE=Sp,_p.EventType=$i,$i.OPEN="a",$i.CLOSE="b",$i.ERROR="c",$i.MESSAGE="d",it.prototype.listen=it.prototype.K,pa=_p,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,yE=Me}).apply(typeof pl<"u"?pl:typeof self<"u"?self:typeof window<"u"?window:{});const my="@firebase/firestore",py="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Di="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new au("@firebase/firestore");function Us(){return ys.logLevel}function Q(t,...e){if(ys.logLevel<=de.DEBUG){const n=e.map(Sm);ys.debug(`Firestore (${Di}): ${t}`,...n)}}function qn(t,...e){if(ys.logLevel<=de.ERROR){const n=e.map(Sm);ys.error(`Firestore (${Di}): ${t}`,...n)}}function Dr(t,...e){if(ys.logLevel<=de.WARN){const n=e.map(Sm);ys.warn(`Firestore (${Di}): ${t}`,...n)}}function Sm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,bE(t,r,n)}function bE(t,e,n){let r=`FIRESTORE (${Di}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw qn(r),new Error(r)}function ye(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||bE(e,s,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends fn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class t2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class n2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class r2{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new CE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new dt(e)}}class s2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class i2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new s2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class a2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ye(this.o===void 0,3512);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new gy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new gy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=o2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function Gh(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ce(r,s);{const i=SE(),a=l2(i.encode(vy(t,n)),i.encode(vy(e,n)));return a!==0?a:ce(r,s)}}n+=r>65535?2:1}return ce(t.length,e.length)}function vy(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function l2(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ce(t[n],e[n]);return ce(t.length,e.length)}function wi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="__name__";class vn{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return vn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=vn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ce(e.length,n.length)}static compareSegments(e,n){const r=vn.isNumericId(e),s=vn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?vn.extractNumericId(e).compare(vn.extractNumericId(n)):Gh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ar.fromString(e.substring(4,e.length-2))}}class Re extends vn{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const c2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends vn{construct(e,n,r){return new tt(e,n,r)}static isValidIdentifier(e){return c2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yy}static keyField(){return new tt([yy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Re.fromString(e))}static fromName(e){return new ee(Re.fromString(e).popFirst(5))}static empty(){return new ee(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Re(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t,e,n){if(!n)throw new Z(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function d2(t,e,n,r){if(e===!0&&r===!0)throw new Z(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xy(t){if(!ee.isDocumentKey(t))throw new Z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function TE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Im(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se(12329,{type:typeof t})}function io(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Im(t);throw new Z(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t,e){const n={typeString:t};return e&&(n.value=e),n}function To(t,e){if(!TE(t))throw new Z(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Z(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=-62135596800,wy=1e6;class Ie{static now(){return Ie.fromMillis(Date.now())}static fromDate(e){return Ie.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*wy);return new Ie(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_y)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wy}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(To(e,Ie._jsonSchema))return new Ie(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_y;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ie._jsonSchemaVersion="firestore/timestamp/1.0",Ie._jsonSchema={type:$e("string",Ie._jsonSchemaVersion),seconds:$e("number"),nanoseconds:$e("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Ie(0,0))}static max(){return new ae(new Ie(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=-1;function h2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new Ie(n+1,0):new Ie(n,r));return new Or(s,ee.empty(),e)}function f2(t){return new Or(t.readTime,t.key,ao)}class Or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Or(ae.min(),ee.empty(),ao)}static max(){return new Or(ae.max(),ee.empty(),ao)}}function m2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oi(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==p2)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{a[d]=f,++l,l===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function v2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}hu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km=-1;function fu(t){return t==null}function Tc(t){return t===0&&1/t==-1/0}function y2(t){return typeof t=="number"&&Number.isInteger(t)&&!Tc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="";function x2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ey(e)),e=_2(t.get(n),e);return Ey(e)}function _2(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case IE:n+="";break;default:n+=i}}return n}function Ey(t){return t+IE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ss(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||et.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,et.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gl(this.root,e,this.comparator,!1)}getReverseIterator(){return new gl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gl(this.root,e,this.comparator,!0)}}class gl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class et{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??et.RED,this.left=s??et.EMPTY,this.right=i??et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new et(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return et.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}}et.EMPTY=null,et.RED=!0,et.BLACK=!1;et.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cy(this.data.getIterator())}getIteratorFrom(e){return new Cy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class Cy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new on([])}unionWith(e){let n=new Ke(tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new NE("Invalid base64 string: "+i):i}}(e);return new st(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new st(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const w2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mr(t){if(ye(!!t,39018),typeof t=="string"){let e=0;const n=w2.exec(t);if(ye(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lr(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="server_timestamp",RE="__type__",PE="__previous_value__",jE="__local_write_time__";function Nm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[RE])===null||n===void 0?void 0:n.stringValue)===AE}function mu(t){const e=t.mapValue.fields[PE];return Nm(e)?mu(e):e}function oo(t){const e=Mr(t.mapValue.fields[jE].timestampValue);return new Ie(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n,r,s,i,a,l,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const Ic="(default)";class lo{constructor(e,n){this.projectId=e,this.database=n||Ic}static empty(){return new lo("","")}get isDefaultDatabase(){return this.database===Ic}isEqual(e){return e instanceof lo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="__type__",b2="__max__",vl={mapValue:{}},OE="__vector__",kc="value";function Vr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nm(t)?4:S2(t)?9007199254740991:C2(t)?10:11:se(28295,{value:t})}function In(t,e){if(t===e)return!0;const n=Vr(t);if(n!==Vr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oo(t).isEqual(oo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Mr(s.timestampValue),l=Mr(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Lr(s.bytesValue).isEqual(Lr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ue(s.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(s.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ue(s.integerValue)===Ue(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ue(s.doubleValue),l=Ue(i.doubleValue);return a===l?Tc(a)===Tc(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return wi(t.arrayValue.values||[],e.arrayValue.values||[],In);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(by(a)!==by(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!In(a[u],l[u])))return!1;return!0}(t,e);default:return se(52216,{left:t})}}function co(t,e){return(t.values||[]).find(n=>In(n,e))!==void 0}function Ei(t,e){if(t===e)return 0;const n=Vr(t),r=Vr(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Ue(i.integerValue||i.doubleValue),u=Ue(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Sy(t.timestampValue,e.timestampValue);case 4:return Sy(oo(t),oo(e));case 5:return Gh(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Lr(i),u=Lr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=ce(l[d],u[d]);if(f!==0)return f}return ce(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ce(Ue(i.latitude),Ue(a.latitude));return l!==0?l:ce(Ue(i.longitude),Ue(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ty(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,u,d,f;const p=i.fields||{},g=a.fields||{},E=(l=p[kc])===null||l===void 0?void 0:l.arrayValue,_=(u=g[kc])===null||u===void 0?void 0:u.arrayValue,N=ce(((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0,((f=_==null?void 0:_.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:Ty(E,_)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===vl.mapValue&&a===vl.mapValue)return 0;if(i===vl.mapValue)return 1;if(a===vl.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=a.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=Gh(u[p],f[p]);if(g!==0)return g;const E=Ei(l[u[p]],d[f[p]]);if(E!==0)return E}return ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw se(23264,{le:n})}}function Sy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Mr(t),r=Mr(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function Ty(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ei(n[s],r[s]);if(i)return i}return ce(n.length,r.length)}function bi(t){return Kh(t)}function Kh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Mr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Lr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Kh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Kh(n.fields[a])}`;return s+"}"}(t.mapValue):se(61005,{value:t})}function Vl(t){switch(Vr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mu(t);return e?16+Vl(e):16;case 5:return 2*t.stringValue.length;case 6:return Lr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Vl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ss(r.fields,(i,a)=>{s+=i.length+Vl(a)}),s}(t.mapValue);default:throw se(13486,{value:t})}}function qh(t){return!!t&&"integerValue"in t}function Am(t){return!!t&&"arrayValue"in t}function Iy(t){return!!t&&"nullValue"in t}function ky(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ul(t){return!!t&&"mapValue"in t}function C2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[DE])===null||n===void 0?void 0:n.stringValue)===OE}function Ra(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ss(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ra(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ra(t.arrayValue.values[n]);return e}return Object.assign({},t)}function S2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===b2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ul(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ra(n)}setAll(e){let n=tt.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Ra(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ul(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return In(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ul(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ss(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Wt(Ra(this.value))}}function ME(t){const e=[];return Ss(t.fields,(n,r)=>{const s=new tt([n]);if(Ul(r)){const i=ME(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new on(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new ft(e,0,ae.min(),ae.min(),ae.min(),Wt.empty(),0)}static newFoundDocument(e,n,r,s){return new ft(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new ft(e,2,n,ae.min(),ae.min(),Wt.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,ae.min(),ae.min(),Wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n){this.position=e,this.inclusive=n}}function Ny(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(a.referenceValue),n.key):r=Ei(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ay(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!In(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n="asc"){this.field=e,this.dir=n}}function T2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{}class We extends LE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new k2(e,n,r):n==="array-contains"?new R2(e,r):n==="in"?new P2(e,r):n==="not-in"?new j2(e,r):n==="array-contains-any"?new D2(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new N2(e,r):new A2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ei(n,this.value)):n!==null&&Vr(this.value)===Vr(n)&&this.matchesComparison(Ei(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends LE{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new kn(e,n)}matches(e){return VE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function VE(t){return t.op==="and"}function UE(t){return I2(t)&&VE(t)}function I2(t){for(const e of t.filters)if(e instanceof kn)return!1;return!0}function Qh(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+bi(t.value);if(UE(t))return t.filters.map(e=>Qh(e)).join(",");{const e=t.filters.map(n=>Qh(n)).join(",");return`${t.op}(${e})`}}function FE(t,e){return t instanceof We?function(r,s){return s instanceof We&&r.op===s.op&&r.field.isEqual(s.field)&&In(r.value,s.value)}(t,e):t instanceof kn?function(r,s){return s instanceof kn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&FE(a,s.filters[l]),!0):!1}(t,e):void se(19439)}function BE(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${bi(n.value)}`}(t):t instanceof kn?function(n){return n.op.toString()+" {"+n.getFilters().map(BE).join(" ,")+"}"}(t):"Filter"}class k2 extends We{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class N2 extends We{constructor(e,n){super(e,"in",n),this.keys=zE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class A2 extends We{constructor(e,n){super(e,"not-in",n),this.keys=zE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class R2 extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Am(n)&&co(n.arrayValue,this.value)}}class P2 extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&co(this.value.arrayValue,n)}}class j2 extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(co(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!co(this.value.arrayValue,n)}}class D2 extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Am(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>co(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Pe=null}}function Ry(t,e=null,n=[],r=[],s=null,i=null,a=null){return new O2(t,e,n,r,s,i,a)}function Rm(t){const e=oe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),fu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bi(r)).join(",")),e.Pe=n}return e.Pe}function Pm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!T2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ay(t.startAt,e.startAt)&&Ay(t.endAt,e.endAt)}function Jh(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function M2(t,e,n,r,s,i,a,l){return new pu(t,e,n,r,s,i,a,l)}function jm(t){return new pu(t)}function Py(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function L2(t){return t.collectionGroup!==null}function Pa(t){const e=oe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ke(tt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Ac(i,r))}),n.has(tt.keyField().canonicalString())||e.Te.push(new Ac(tt.keyField(),r))}return e.Te}function En(t){const e=oe(t);return e.Ie||(e.Ie=V2(e,Pa(t))),e.Ie}function V2(t,e){if(t.limitType==="F")return Ry(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ac(s.field,i)});const n=t.endAt?new Nc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Nc(t.startAt.position,t.startAt.inclusive):null;return Ry(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Yh(t,e,n){return new pu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gu(t,e){return Pm(En(t),En(e))&&t.limitType===e.limitType}function $E(t){return`${Rm(En(t))}|lt:${t.limitType}`}function Fs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>BE(s)).join(", ")}]`),fu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>bi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>bi(s)).join(",")),`Target(${r})`}(En(t))}; limitType=${t.limitType})`}function vu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Pa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const d=Ny(a,l,u);return a.inclusive?d<=0:d<0}(r.startAt,Pa(r),s)||r.endAt&&!function(a,l,u){const d=Ny(a,l,u);return a.inclusive?d>=0:d>0}(r.endAt,Pa(r),s))}(t,e)}function U2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HE(t){return(e,n)=>{let r=!1;for(const s of Pa(t)){const i=F2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function F2(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Ei(u,d):se(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ss(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return kE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=new Oe(ee.comparator);function Qn(){return B2}const WE=new Oe(ee.comparator);function ga(...t){let e=WE;for(const n of t)e=e.insert(n.key,n);return e}function GE(t){let e=WE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ss(){return ja()}function KE(){return ja()}function ja(){return new Ts(t=>t.toString(),(t,e)=>t.isEqual(e))}const z2=new Oe(ee.comparator),$2=new Ke(ee.comparator);function he(...t){let e=$2;for(const n of t)e=e.add(n);return e}const H2=new Ke(ce);function W2(){return H2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function qE(t){return{integerValue:""+t}}function G2(t,e){return y2(e)?qE(e):Dm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(){this._=void 0}}function K2(t,e,n){return t instanceof Rc?function(s,i){const a={fields:{[RE]:{stringValue:AE},[jE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Nm(i)&&(i=mu(i)),i&&(a.fields[PE]=i),{mapValue:a}}(n,e):t instanceof uo?JE(t,e):t instanceof ho?YE(t,e):function(s,i){const a=QE(s,i),l=jy(a)+jy(s.Ee);return qh(a)&&qh(s.Ee)?qE(l):Dm(s.serializer,l)}(t,e)}function q2(t,e,n){return t instanceof uo?JE(t,e):t instanceof ho?YE(t,e):n}function QE(t,e){return t instanceof Pc?function(r){return qh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Rc extends yu{}class uo extends yu{constructor(e){super(),this.elements=e}}function JE(t,e){const n=XE(e);for(const r of t.elements)n.some(s=>In(s,r))||n.push(r);return{arrayValue:{values:n}}}class ho extends yu{constructor(e){super(),this.elements=e}}function YE(t,e){let n=XE(e);for(const r of t.elements)n=n.filter(s=>!In(s,r));return{arrayValue:{values:n}}}class Pc extends yu{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function jy(t){return Ue(t.integerValue||t.doubleValue)}function XE(t){return Am(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Q2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof uo&&s instanceof uo||r instanceof ho&&s instanceof ho?wi(r.elements,s.elements,In):r instanceof Pc&&s instanceof Pc?In(r.Ee,s.Ee):r instanceof Rc&&s instanceof Rc}(t.transform,e.transform)}class J2{constructor(e,n){this.version=e,this.transformResults=n}}class Bn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xu{}function ZE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new t1(t.key,Bn.none()):new Io(t.key,t.data,Bn.none());{const n=t.data,r=Wt.empty();let s=new Ke(tt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Is(t.key,r,new on(s.toArray()),Bn.none())}}function Y2(t,e,n){t instanceof Io?function(s,i,a){const l=s.value.clone(),u=Oy(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Is?function(s,i,a){if(!Fl(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Oy(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(e1(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Da(t,e,n,r){return t instanceof Io?function(i,a,l,u){if(!Fl(i.precondition,a))return l;const d=i.value.clone(),f=My(i.fieldTransforms,u,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Is?function(i,a,l,u){if(!Fl(i.precondition,a))return l;const d=My(i.fieldTransforms,u,a),f=a.data;return f.setAll(e1(i)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,a,l){return Fl(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function X2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=QE(r.transform,s||null);i!=null&&(n===null&&(n=Wt.empty()),n.set(r.field,i))}return n||null}function Dy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&wi(r,s,(i,a)=>Q2(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Io extends xu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Is extends xu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function e1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Oy(t,e,n){const r=new Map;ye(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,q2(a,l,n[s]))}return r}function My(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,K2(i,a,e))}return r}class t1 extends xu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z2 extends xu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Y2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Da(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Da(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=KE();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=ZE(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&wi(this.mutations,e.mutations,(n,r)=>Dy(n,r))&&wi(this.baseMutations,e.baseMutations,(n,r)=>Dy(n,r))}}class Om{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return z2}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Om(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,fe;function rj(t){switch(t){case F.OK:return se(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return se(15467,{code:t})}}function n1(t){if(t===void 0)return qn("GRPC error has no .code"),F.UNKNOWN;switch(t){case Be.OK:return F.OK;case Be.CANCELLED:return F.CANCELLED;case Be.UNKNOWN:return F.UNKNOWN;case Be.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Be.INTERNAL:return F.INTERNAL;case Be.UNAVAILABLE:return F.UNAVAILABLE;case Be.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Be.NOT_FOUND:return F.NOT_FOUND;case Be.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Be.ABORTED:return F.ABORTED;case Be.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Be.DATA_LOSS:return F.DATA_LOSS;default:return se(39323,{code:t})}}(fe=Be||(Be={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=new Ar([4294967295,4294967295],0);function Ly(t){const e=SE().encode(t),n=new vE;return n.update(e),new Uint8Array(n.digest())}function Vy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ar([n,r],0),new Ar([s,i],0)]}class Mm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new va(`Invalid padding: ${n}`);if(r<0)throw new va(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new va(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new va(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Ar.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Ar.fromNumber(r)));return s.compare(sj)===1&&(s=new Ar([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Ly(e),[r,s]=Vy(n);for(let i=0;i<this.hashCount;i++){const a=this.pe(r,s,i);if(!this.ye(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Mm(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;const n=Ly(e),[r,s]=Vy(n);for(let i=0;i<this.hashCount;i++){const a=this.pe(r,s,i);this.we(a)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ko.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _u(ae.min(),s,new Oe(ce),Qn(),he())}}class ko{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ko(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class r1{constructor(e,n){this.targetId=e,this.De=n}}class s1{constructor(e,n,r=st.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Uy{constructor(){this.ve=0,this.Ce=Fy(),this.Fe=st.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=he(),n=he(),r=he();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:se(38017,{changeType:i})}}),new ko(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Fy()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class ij{constructor(e){this.We=e,this.Ge=new Map,this.ze=Qn(),this.je=yl(),this.Je=yl(),this.He=new Oe(ce)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(Jh(i))if(r===0){const a=new ee(i.path);this.Xe(n,a,ft.newNoDocument(a,ae.min()))}else ye(r===1,20013,{expectedCount:r});else{const a=this.ot(n);if(a!==r){const l=this._t(e),u=l?this.ut(l,e,a):1;if(u!==0){this.rt(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Lr(r).toUint8Array()}catch(u){if(u instanceof NE)return Dr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Mm(a,s,i)}catch(u){return Dr(u instanceof va?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.fe===0?null:l}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,a)=>{const l=this.st(a);if(l){if(i.current&&Jh(l.target)){const u=new ee(l.target.path);this.Tt(u).has(a)||this.It(a,u)||this.Xe(a,u,ft.newNoDocument(u,e))}i.Ne&&(n.set(a,i.Le()),i.ke())}});let r=he();this.Je.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const d=this.st(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ze.forEach((i,a)=>a.setReadTime(e));const s=new _u(e,n,this.He,this.ze,r);return this.ze=Qn(),this.je=yl(),this.Je=yl(),this.He=new Oe(ce),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Uy,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Ke(ce),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Ke(ce),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Uy),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function yl(){return new Oe(ee.comparator)}function Fy(){return new Oe(ee.comparator)}const aj={asc:"ASCENDING",desc:"DESCENDING"},oj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lj={and:"AND",or:"OR"};class cj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xh(t,e){return t.useProto3Json||fu(e)?e:{value:e}}function jc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function i1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uj(t,e){return jc(t,e.toTimestamp())}function bn(t){return ye(!!t,49232),ae.fromTimestamp(function(n){const r=Mr(n);return new Ie(r.seconds,r.nanos)}(t))}function Lm(t,e){return Zh(t,e).canonicalString()}function Zh(t,e){const n=function(s){return new Re(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function a1(t){const e=Re.fromString(t);return ye(d1(e),10190,{key:e.toString()}),e}function ef(t,e){return Lm(t.databaseId,e.path)}function Rd(t,e){const n=a1(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(l1(n))}function o1(t,e){return Lm(t.databaseId,e)}function dj(t){const e=a1(t);return e.length===4?Re.emptyPath():l1(e)}function tf(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function l1(t){return ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function By(t,e,n){return{name:ef(t,e),fields:n.value.mapValue.fields}}function hj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:se(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ye(f===void 0||typeof f=="string",58123),st.fromBase64String(f||"")):(ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),st.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const f=d.code===void 0?F.UNKNOWN:n1(d.code);return new Z(f,d.message||"")}(a);n=new s1(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Rd(t,r.document.name),i=bn(r.document.updateTime),a=r.document.createTime?bn(r.document.createTime):ae.min(),l=new Wt({mapValue:{fields:r.document.fields}}),u=ft.newFoundDocument(s,i,a,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Bl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Rd(t,r.document),i=r.readTime?bn(r.readTime):ae.min(),a=ft.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Bl([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Rd(t,r.document),i=r.removedTargetIds||[];n=new Bl([],i,s,null)}else{if(!("filter"in e))return se(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new nj(s,i),l=r.targetId;n=new r1(l,a)}}return n}function fj(t,e){let n;if(e instanceof Io)n={update:By(t,e.key,e.value)};else if(e instanceof t1)n={delete:ef(t,e.key)};else if(e instanceof Is)n={update:By(t,e.key,e.data),updateMask:Ej(e.fieldMask)};else{if(!(e instanceof Z2))return se(16599,{Rt:e.type});n={verify:ef(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Rc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof uo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ho)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Pc)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw se(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:uj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:se(27497)}(t,e.precondition)),n}function mj(t,e){return t&&t.length>0?(ye(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?bn(s.updateTime):bn(i);return a.isEqual(ae.min())&&(a=bn(i)),new J2(a,s.transformResults||[])}(n,e))):[]}function pj(t,e){return{documents:[o1(t,e.path)]}}function gj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=o1(t,s);const i=function(d){if(d.length!==0)return u1(kn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Bs(g.field),direction:xj(g.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Xh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:s}}function vj(t){let e=dj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=c1(p);return g instanceof kn&&UE(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(g=>function(_){return new Ac(zs(_.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,fu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,E=p.values||[];return new Nc(E,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,E=p.values||[];return new Nc(E,g)}(n.endAt)),M2(e,s,a,i,l,"F",u,d)}function yj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function c1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zs(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=zs(n.unaryFilter.field);return We.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zs(n.unaryFilter.field);return We.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=zs(n.unaryFilter.field);return We.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}}(t):t.fieldFilter!==void 0?function(n){return We.create(zs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return kn.create(n.compositeFilter.filters.map(r=>c1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return se(1026)}}(n.compositeFilter.op))}(t):se(30097,{filter:t})}function xj(t){return aj[t]}function _j(t){return oj[t]}function wj(t){return lj[t]}function Bs(t){return{fieldPath:t.canonicalString()}}function zs(t){return tt.fromServerFormat(t.fieldPath)}function u1(t){return t instanceof We?function(n){if(n.op==="=="){if(ky(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NAN"}};if(Iy(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ky(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NAN"}};if(Iy(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bs(n.field),op:_j(n.op),value:n.value}}}(t):t instanceof kn?function(n){const r=n.getFilters().map(s=>u1(s));return r.length===1?r[0]:{compositeFilter:{op:wj(n.op),filters:r}}}(t):se(54877,{filter:t})}function Ej(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function d1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,r,s,i=ae.min(),a=ae.min(),l=st.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.gt=e}}function Cj(t){const e=vj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(){this.Dn=new Tj}addToCollectionParentIndex(e,n){return this.Dn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Or.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Or.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class Tj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ke(Re.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ke(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},h1=41943040;class Ct{static withCacheSize(e){return new Ct(e,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(h1,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ci(0)}static ur(){return new Ci(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="LruGarbageCollector",Ij=1048576;function Hy([t,e],[n,r]){const s=ce(t,n);return s===0?ce(e,r):s}class kj{constructor(e){this.Tr=e,this.buffer=new Ke(Hy),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Hy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Nj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Q($y,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Mi(n)?Q($y,"Ignoring IndexedDB error during garbage collection: ",n):await Oi(n)}await this.Rr(3e5)})}}class Aj{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(hu.ue);const r=new kj(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(zy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zy):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,a,l,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Us()<=de.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Rj(t,e){return new Aj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(){this.changes=new Ts(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Da(r.mutation,s,on.empty(),Ie.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const s=ss();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=ga();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ss();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Qn();const a=ja(),l=function(){return ja()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Is)?i=i.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Da(f.mutation,d,f.mutation.getFieldMask(),Ie.now())):a.set(d.key,on.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>{var p;return l.set(d,new jj(f,(p=a.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ja();let s=new Oe((a,l)=>a-l),i=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||on.empty();f=l.applyToLocalView(d,f),r.set(u,f);const p=(s.get(l.batchId)||he()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,p=KE();f.forEach(g=>{if(!i.has(g)){const E=ZE(n.get(g),r.get(g));E!==null&&p.set(g,E),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return L.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return ee.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):L2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(ss());let l=ao,u=i;return a.next(d=>L.forEach(d,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?L.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,he())).next(f=>({batchId:l,changes:GE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let s=ga();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=ga();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const d=function(p,g){return new pu(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,ft.newInvalidDocument(f)))});let l=ga();return a.forEach((u,d)=>{const f=i.get(u);f!==void 0&&Da(f.mutation,d,on.empty(),Ie.now()),vu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return L.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:bn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:Cj(s.bundledQuery),readTime:bn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(){this.overlays=new Oe(ee.comparator),this.kr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ss();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=ss(),i=n.length+1,a=new ee(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Oe((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=ss(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=ss(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return L.resolve(l)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new tj(n,r));let i=this.kr.get(n);i===void 0&&(i=he(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this.qr=new Ke(qe.Qr),this.$r=new Ke(qe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new qe(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ee(new Re([])),r=new qe(n,e),s=new qe(n,e+1),i=[];return this.$r.forEachInRange([r,s],a=>{this.Wr(a),i.push(a.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ee(new Re([])),r=new qe(n,e),s=new qe(n,e+1);let i=he();return this.$r.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new qe(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ee.comparator(e.key,n.key)||ce(e.Hr,n.Hr)}static Ur(e,n){return ce(e.Hr,n.Hr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ke(qe.Qr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new ej(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Yr=this.Yr.add(new qe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(a)}lookupMutationBatch(e,n){return L.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?km:this.er-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),s=new qe(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],a=>{const l=this.Zr(a.Hr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(ce);return n.forEach(s=>{const i=new qe(s,0),a=new qe(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,a],l=>{r=r.add(l.Hr)})}),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const a=new qe(new ee(i),0);let l=new Ke(ce);return this.Yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Hr)),!0)},a),L.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(n.mutations,s=>{const i=new qe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new qe(n,0),s=this.Yr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.ni=e,this.docs=function(){return new Oe(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=Qn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ft.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Qn();const a=n.path,l=new ee(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||m2(f2(f),r)<=0||(s.has(f.key)||vu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){se(9500)}ri(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Fj(this)}getSize(e){return L.resolve(this.size)}}class Fj extends Pj{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e){this.persistence=e,this.ii=new Ts(n=>Rm(n),Pm),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.si=0,this.oi=new Vm,this.targetCount=0,this._i=Ci.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),L.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ci(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.hr(n),L.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n){this.ai={},this.overlays={},this.ui=new hu(0),this.ci=!1,this.ci=!0,this.li=new Lj,this.referenceDelegate=e(this),this.hi=new Bj(this),this.indexManager=new Sj,this.remoteDocumentCache=function(s){return new Uj(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new bj(n),this.Ti=new Oj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Mj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Vj(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new zj(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return L.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class zj extends g2{constructor(e){super(),this.currentSequenceNumber=e}}class Um{constructor(e){this.persistence=e,this.Ai=new Vm,this.Ri=null}static Vi(e){return new Um(e)}get mi(){if(this.Ri)return this.Ri;throw se(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,r=>{const s=ee.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return L.or([()=>L.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Dc{constructor(e,n){this.persistence=e,this.gi=new Ts(r=>x2(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Rj(this,n)}static Vi(e,n){return new Dc(e,n)}Ii(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return L.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,a=>this.Sr(e,a,n).next(l=>{l||(r++,i.removeEntry(a,ae.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vl(e.data.value)),n}Sr(e,n,r){return L.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=he(),s=he();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Fm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return XI()?8:v2(pt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new $j;return this.ws(e,n,a).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,n,a,l.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(Us()<=de.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(Us()<=de.DEBUG&&Q("QueryEngine","Query:",Fs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Us()<=de.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):L.resolve())}ps(e,n){if(Py(n))return L.resolve(null);let r=En(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Yh(n,null,"F"),r=En(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=he(...i);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,l);return this.Ds(n,d,a,u.readTime)?this.ps(e,Yh(n,null,"F")):this.vs(e,d,n,u)}))})))}ys(e,n,r,s){return Py(n)||s.isEqual(ae.min())?L.resolve(null):this.gs.getDocuments(e,r).next(i=>{const a=this.bs(n,i);return this.Ds(n,a,r,s)?L.resolve(null):(Us()<=de.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fs(n)),this.vs(e,a,n,h2(s,ao)).next(l=>l))})}bs(e,n){let r=new Ke(HE(e));return n.forEach((s,i)=>{vu(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return Us()<=de.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Fs(n)),this.gs.getDocumentsMatchingQuery(e,n,Or.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="LocalStore",Wj=3e8;class Gj{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Oe(ce),this.Ms=new Ts(i=>Rm(i),Pm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Dj(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Kj(t,e,n,r){return new Gj(t,e,n,r)}async function m1(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=he();for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Bs:d,removedBatchIds:a,addedBatchIds:l}))})})}function qj(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const p=d.batch,g=p.keys();let E=L.resolve();return g.forEach(_=>{E=E.next(()=>f.getEntry(u,_)).next(N=>{const k=d.docVersions.get(_);ye(k!==null,48541),N.version.compareTo(k)<0&&(p.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),f.addEntry(N)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=he();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function p1(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Qj(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const l=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;l.push(n.hi.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.hi.addMatchingKeys(i,f.addedDocuments,p)));let E=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(st.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),s=s.insert(p,E),function(N,k,b){return N.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Wj?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(g,E,f)&&l.push(n.hi.updateTargetData(i,E))});let u=Qn(),d=he();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(Jj(i,a,e.documentUpdates).next(f=>{u=f.Ls,d=f.ks})),!r.isEqual(ae.min())){const f=n.hi.getLastRemoteSnapshotVersion(i).next(p=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return L.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Fs=s,i))}function Jj(t,e,n){let r=he(),s=he();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Qn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Q(Bm,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ls:a,ks:s}})}function Yj(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=km),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xj(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.hi.allocateTargetId(r).next(a=>(s=new yr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function nf(t,e,n){const r=oe(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Mi(a))throw a;Q(Bm,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Wy(t,e,n){const r=oe(t);let s=ae.min(),i=he();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,f){const p=oe(u),g=p.Ms.get(f);return g!==void 0?L.resolve(p.Fs.get(g)):p.hi.getTargetData(d,f)}(r,a,En(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?s:ae.min(),n?i:he())).next(l=>(Zj(r,U2(e),l),{documents:l,qs:i})))}function Zj(t,e,n){let r=t.xs.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class Gy{constructor(){this.activeTargetIds=W2()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eD{constructor(){this.Fo=new Gy,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Gy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="ConnectivityMonitor";class qy{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Q(Ky,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Q(Ky,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl=null;function rf(){return xl===null?xl=function(){return 268435456+Math.round(2147483648*Math.random())}():xl++,"0x"+xl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="RestConnection",nD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rD{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Ic?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const a=rf(),l=this.Go(e,n.toUriEncodedString());Q(Pd,`Sending RPC '${e}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,i);const{host:d}=new URL(l),f=Ri(d);return this.jo(e,l,u,r,f).then(p=>(Q(Pd,`Received RPC '${e}' ${a}: `,p),p),p=>{throw Dr(Pd,`RPC '${e}' ${a} failed with error: `,p,"url: ",l,"request:",r),p})}Jo(e,n,r,s,i,a){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Di}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=nD[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class iD extends rD{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const a=rf();return new Promise((l,u)=>{const d=new yE;d.setWithCredentials(!0),d.listenOnce(xE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Ll.NO_ERROR:const p=d.getResponseJson();Q(ut,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),l(p);break;case Ll.TIMEOUT:Q(ut,`RPC '${e}' ${a} timed out`),u(new Z(F.DEADLINE_EXCEEDED,"Request time out"));break;case Ll.HTTP_ERROR:const g=d.getStatus();if(Q(ut,`RPC '${e}' ${a} failed with status:`,g,"response text:",d.getResponseText()),g>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const _=E==null?void 0:E.error;if(_&&_.status&&_.message){const N=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(x)>=0?x:F.UNKNOWN}(_.status);u(new Z(N,_.message))}else u(new Z(F.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Z(F.UNAVAILABLE,"Connection failed."));break;default:se(9055,{c_:e,streamId:a,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{Q(ut,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(s);Q(ut,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",f,r,15)})}P_(e,n,r){const s=rf(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=EE(),l=wE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");Q(ut,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=a.createWebChannel(f,u);this.T_(p);let g=!1,E=!1;const _=new sD({Ho:k=>{E?Q(ut,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(g||(Q(ut,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),Q(ut,`RPC '${e}' stream ${s} sending:`,k),p.send(k))},Yo:()=>p.close()}),N=(k,b,x)=>{k.listen(b,w=>{try{x(w)}catch(R){setTimeout(()=>{throw R},0)}})};return N(p,pa.EventType.OPEN,()=>{E||(Q(ut,`RPC '${e}' stream ${s} transport opened.`),_.s_())}),N(p,pa.EventType.CLOSE,()=>{E||(E=!0,Q(ut,`RPC '${e}' stream ${s} transport closed`),_.__(),this.I_(p))}),N(p,pa.EventType.ERROR,k=>{E||(E=!0,Dr(ut,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),_.__(new Z(F.UNAVAILABLE,"The operation could not be completed")))}),N(p,pa.EventType.MESSAGE,k=>{var b;if(!E){const x=k.data[0];ye(!!x,16349);const w=x,R=(w==null?void 0:w.error)||((b=w[0])===null||b===void 0?void 0:b.error);if(R){Q(ut,`RPC '${e}' stream ${s} received error:`,R);const B=R.status;let z=function(C){const I=Be[C];if(I!==void 0)return n1(I)}(B),S=R.message;z===void 0&&(z=F.INTERNAL,S="Unknown error status: "+B+" with message "+R.message),E=!0,_.__(new Z(z,S)),p.close()}else Q(ut,`RPC '${e}' stream ${s} received:`,x),_.a_(x)}}),N(l,_E.STAT_EVENT,k=>{k.stat===Wh.PROXY?Q(ut,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===Wh.NOPROXY&&Q(ut,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t){return new cj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="PersistentStream";class v1{constructor(e,n,r,s,i,a,l,u){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new g1(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(qn(n.toString()),qn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new Z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Q(Qy,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Q(Qy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aD extends v1{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=hj(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ae.min():a.readTime?bn(a.readTime):ae.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=tf(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=Jh(u)?{documents:pj(i,u)}:{query:gj(i,u).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=i1(i,a.resumeToken);const d=Xh(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(ae.min())>0){l.readTime=jc(i,a.snapshotVersion.toTimestamp());const d=Xh(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=yj(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=tf(this.serializer),n.removeTarget=e,this.k_(n)}}class oD extends v1{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=mj(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=tf(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>fj(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{}class cD extends lD{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,Zh(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(F.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,Zh(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(F.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class uD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(qn(n),this._a=!1):Q("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="RemoteStore";class dD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(a=>{r.enqueueAndForget(async()=>{ks(this)&&(Q(xs,"Restarting streams for network reachability change."),await async function(u){const d=oe(u);d.Ia.add(4),await No(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Eu(d)}(this))})}),this.Aa=new uD(r,s)}}async function Eu(t){if(ks(t))for(const e of t.da)await e(!0)}async function No(t){for(const e of t.da)await e(!1)}function y1(t,e){const n=oe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Wm(n)?Hm(n):Li(n).x_()&&$m(n,e))}function zm(t,e){const n=oe(t),r=Li(n);n.Ta.delete(e),r.x_()&&x1(n,e),n.Ta.size===0&&(r.x_()?r.B_():ks(n)&&n.Aa.set("Unknown"))}function $m(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Li(t).H_(e)}function x1(t,e){t.Ra.$e(e),Li(t).Y_(e)}function Hm(t){t.Ra=new ij({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Li(t).start(),t.Aa.aa()}function Wm(t){return ks(t)&&!Li(t).M_()&&t.Ta.size>0}function ks(t){return oe(t).Ia.size===0}function _1(t){t.Ra=void 0}async function hD(t){t.Aa.set("Online")}async function fD(t){t.Ta.forEach((e,n)=>{$m(t,e)})}async function mD(t,e){_1(t),Wm(t)?(t.Aa.la(e),Hm(t)):t.Aa.set("Unknown")}async function pD(t,e,n){if(t.Aa.set("Online"),e instanceof s1&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ta.delete(l),s.Ra.removeTarget(l))}(t,e)}catch(r){Q(xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Oc(t,r)}else if(e instanceof Bl?t.Ra.Ye(e):e instanceof r1?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ae.min()))try{const r=await p1(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Ra.Pt(a);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ta.get(d);f&&i.Ta.set(d,f.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,d)=>{const f=i.Ta.get(u);if(!f)return;i.Ta.set(u,f.withResumeToken(st.EMPTY_BYTE_STRING,f.snapshotVersion)),x1(i,u);const p=new yr(f.target,u,d,f.sequenceNumber);$m(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Q(xs,"Failed to raise snapshot:",r),await Oc(t,r)}}async function Oc(t,e,n){if(!Mi(e))throw e;t.Ia.add(1),await No(t),t.Aa.set("Offline"),n||(n=()=>p1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(xs,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Eu(t)})}function w1(t,e){return e().catch(n=>Oc(t,n,e))}async function bu(t){const e=oe(t),n=Ur(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:km;for(;gD(e);)try{const s=await Yj(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,vD(e,s)}catch(s){await Oc(e,s)}E1(e)&&b1(e)}function gD(t){return ks(t)&&t.Pa.length<10}function vD(t,e){t.Pa.push(e);const n=Ur(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function E1(t){return ks(t)&&!Ur(t).M_()&&t.Pa.length>0}function b1(t){Ur(t).start()}async function yD(t){Ur(t).na()}async function xD(t){const e=Ur(t);for(const n of t.Pa)e.X_(n.mutations)}async function _D(t,e,n){const r=t.Pa.shift(),s=Om.from(r,e,n);await w1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await bu(t)}async function wD(t,e){e&&Ur(t).Z_&&await async function(r,s){if(function(a){return rj(a)&&a!==F.ABORTED}(s.code)){const i=r.Pa.shift();Ur(r).N_(),await w1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await bu(r)}}(t,e),E1(t)&&b1(t)}async function Jy(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),Q(xs,"RemoteStore received new credentials");const r=ks(n);n.Ia.add(3),await No(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Eu(n)}async function ED(t,e){const n=oe(t);e?(n.Ia.delete(2),await Eu(n)):e||(n.Ia.add(2),await No(n),n.Aa.set("Unknown"))}function Li(t){return t.Va||(t.Va=function(n,r,s){const i=oe(n);return i.ia(),new aD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:hD.bind(null,t),e_:fD.bind(null,t),n_:mD.bind(null,t),J_:pD.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Wm(t)?Hm(t):t.Aa.set("Unknown")):(await t.Va.stop(),_1(t))})),t.Va}function Ur(t){return t.ma||(t.ma=function(n,r,s){const i=oe(n);return i.ia(),new oD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:yD.bind(null,t),n_:wD.bind(null,t),ea:xD.bind(null,t),ta:_D.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await bu(t)):(await t.ma.stop(),t.Pa.length>0&&(Q(xs,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Gm(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Km(t,e){if(qn("AsyncQueue",`${e}: ${t}`),Mi(t))return new Z(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{static emptySet(e){return new ui(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=ga(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ui)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ui;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(){this.fa=new Oe(ee.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):se(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Si{constructor(e,n,r,s,i,a,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Si(e,n,ui.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class CD{constructor(){this.queries=Xy(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=Xy(),i.forEach((a,l)=>{for(const u of l.wa)u.onError(r)})})(this,new Z(F.ABORTED,"Firestore shutting down"))}}function Xy(){return new Ts(t=>$E(t),gu)}async function SD(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new bD,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Km(a,`Initialization of query '${Fs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&qm(n)}async function TD(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.wa.indexOf(e);a>=0&&(i.wa.splice(a,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ID(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.wa)l.Ca(s)&&(r=!0);a.ya=s}}r&&qm(n)}function kD(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function qm(t){t.Da.forEach(e=>{e.next()})}var sf,Zy;(Zy=sf||(sf={})).Fa="default",Zy.Cache="cache";class ND{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Si(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Si.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==sf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.key=e}}class S1{constructor(e){this.key=e}}class AD{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=he(),this.mutatedKeys=he(),this.Xa=HE(e),this.eu=new ui(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Yy,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),E=vu(this.query,p)?p:null,_=!!g&&this.mutatedKeys.has(g.key),N=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let k=!1;g&&E?g.data.isEqual(E.data)?_!==N&&(r.track({type:3,doc:E}),k=!0):this.iu(g,E)||(r.track({type:2,doc:E}),k=!0,(u&&this.Xa(E,u)>0||d&&this.Xa(E,d)<0)&&(l=!0)):!g&&E?(r.track({type:0,doc:E}),k=!0):g&&!E&&(r.track({type:1,doc:g}),k=!0,(u||d)&&(l=!0)),k&&(E?(a=a.add(E),i=N?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{eu:a,ru:r,Ds:l,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((f,p)=>function(E,_){const N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{At:k})}};return N(E)-N(_)}(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),s=s!=null&&s;const l=n&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,d=u!==this.Ya;return this.Ya=u,a.length!==0||d?{snapshot:new Si(this.query,e.eu,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Yy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=he(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new S1(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new C1(r))}),n}uu(e){this.Ha=e.qs,this.Za=he();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Si.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Qm="SyncEngine";class RD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class PD{constructor(e){this.key=e,this.lu=!1}}class jD{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Ts(l=>$E(l),gu),this.Tu=new Map,this.Iu=new Set,this.du=new Oe(ee.comparator),this.Eu=new Map,this.Au=new Vm,this.Ru={},this.Vu=new Map,this.mu=Ci.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function DD(t,e,n=!0){const r=R1(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await T1(r,e,n,!0),s}async function OD(t,e){const n=R1(t);await T1(n,e,!0,!1)}async function T1(t,e,n,r){const s=await Xj(t.localStore,En(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await MD(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&y1(t.remoteStore,s),l}async function MD(t,e,n,r,s){t.gu=(p,g,E)=>async function(N,k,b,x){let w=k.view.nu(b);w.Ds&&(w=await Wy(N.localStore,k.query,!1).then(({documents:S})=>k.view.nu(S,w)));const R=x&&x.targetChanges.get(k.targetId),B=x&&x.targetMismatches.get(k.targetId)!=null,z=k.view.applyChanges(w,N.isPrimaryClient,R,B);return tx(N,k.targetId,z._u),z.snapshot}(t,p,g,E);const i=await Wy(t.localStore,e,!0),a=new AD(e,i.qs),l=a.nu(i.documents),u=ko.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,u);tx(t,n,d._u);const f=new RD(e,n,a);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function LD(t,e,n){const r=oe(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(a=>!gu(a,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await nf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&zm(r.remoteStore,s.targetId),af(r,s.targetId)}).catch(Oi)):(af(r,s.targetId),await nf(r.localStore,s.targetId,!0))}async function VD(t,e){const n=oe(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zm(n.remoteStore,r.targetId))}async function UD(t,e,n){const r=GD(t);try{const s=await function(a,l){const u=oe(a),d=Ie.now(),f=l.reduce((E,_)=>E.add(_.key),he());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let _=Qn(),N=he();return u.Os.getEntries(E,f).next(k=>{_=k,_.forEach((b,x)=>{x.isValidDocument()||(N=N.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,_)).next(k=>{p=k;const b=[];for(const x of l){const w=X2(x,p.get(x.key).overlayedDocument);w!=null&&b.push(new Is(x.key,w,ME(w.value.mapValue),Bn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,d,b,l)}).next(k=>{g=k;const b=k.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(E,k.batchId,b)})}).then(()=>({batchId:g.batchId,changes:GE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let d=a.Ru[a.currentUser.toKey()];d||(d=new Oe(ce)),d=d.insert(l,u),a.Ru[a.currentUser.toKey()]=d}(r,s.batchId,n),await Ao(r,s.changes),await bu(r.remoteStore)}catch(s){const i=Km(s,"Failed to persist write");n.reject(i)}}async function I1(t,e){const n=oe(t);try{const r=await Qj(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Eu.get(i);a&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.lu=!0:s.modifiedDocuments.size>0?ye(a.lu,14607):s.removedDocuments.size>0&&(ye(a.lu,42227),a.lu=!1))}),await Ao(n,r,e)}catch(r){await Oi(r)}}function ex(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=oe(a);u.onlineState=l;let d=!1;u.queries.forEach((f,p)=>{for(const g of p.wa)g.va(l)&&(d=!0)}),d&&qm(u)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FD(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let a=new Oe(ee.comparator);a=a.insert(i,ft.newNoDocument(i,ae.min()));const l=he().add(i),u=new _u(ae.min(),new Map,new Oe(ce),a,l);await I1(r,u),r.du=r.du.remove(i),r.Eu.delete(e),Jm(r)}else await nf(r.localStore,e,!1).then(()=>af(r,e,n)).catch(Oi)}async function BD(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await qj(n.localStore,e);N1(n,r,null),k1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ao(n,s)}catch(s){await Oi(s)}}async function zD(t,e,n){const r=oe(t);try{const s=await function(a,l){const u=oe(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(ye(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);N1(r,e,n),k1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ao(r,s)}catch(s){await Oi(s)}}function k1(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function N1(t,e,n){const r=oe(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function af(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||A1(t,r)})}function A1(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(zm(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Jm(t))}function tx(t,e,n){for(const r of n)r instanceof C1?(t.Au.addReference(r.key,e),$D(t,r)):r instanceof S1?(Q(Qm,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||A1(t,r.key)):se(19791,{yu:r})}function $D(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Q(Qm,"New document in limbo: "+n),t.Iu.add(r),Jm(t))}function Jm(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ee(Re.fromString(e)),r=t.mu.next();t.Eu.set(r,new PD(n)),t.du=t.du.insert(n,r),y1(t.remoteStore,new yr(En(jm(n.path)),r,"TargetPurposeLimboResolution",hu.ue))}}async function Ao(t,e,n){const r=oe(t),s=[],i=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((l,u)=>{a.push(r.gu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Fm.Es(u.targetId,d);i.push(p)}}))}),await Promise.all(a),r.hu.J_(s),await async function(u,d){const f=oe(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(d,g=>L.forEach(g.Is,E=>f.persistence.referenceDelegate.addReference(p,g.targetId,E)).next(()=>L.forEach(g.ds,E=>f.persistence.referenceDelegate.removeReference(p,g.targetId,E)))))}catch(p){if(!Mi(p))throw p;Q(Bm,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const E=f.Fs.get(g),_=E.snapshotVersion,N=E.withLastLimboFreeSnapshotVersion(_);f.Fs=f.Fs.insert(g,N)}}}(r.localStore,i))}async function HD(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){Q(Qm,"User change. New user:",e.toKey());const r=await m1(n.localStore,e);n.currentUser=e,function(i,a){i.Vu.forEach(l=>{l.forEach(u=>{u.reject(new Z(F.CANCELLED,a))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ao(n,r.Bs)}}function WD(t,e){const n=oe(t),r=n.Eu.get(e);if(r&&r.lu)return he().add(r.key);{let s=he();const i=n.Tu.get(e);if(!i)return s;for(const a of i){const l=n.Pu.get(a);s=s.unionWith(l.view.tu)}return s}}function R1(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=I1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FD.bind(null,e),e.hu.J_=ID.bind(null,e.eventManager),e.hu.pu=kD.bind(null,e.eventManager),e}function GD(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zD.bind(null,e),e}class Mc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Kj(this.persistence,new Hj,e.initialUser,this.serializer)}Du(e){return new f1(Um.Vi,this.serializer)}bu(e){return new eD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mc.provider={build:()=>new Mc};class KD extends Mc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){ye(this.persistence.referenceDelegate instanceof Dc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Nj(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new f1(r=>Dc.Vi(r,n),this.serializer)}}class of{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ex(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HD.bind(null,this.syncEngine),await ED(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new CD}()}createDatastore(e){const n=wu(e.databaseInfo.databaseId),r=function(i){return new iD(i)}(e.databaseInfo);return function(i,a,l,u){return new cD(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new dD(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>ex(this.syncEngine,n,0),function(){return qy.C()?new qy:new tD}())}createSyncEngine(e,n){return function(s,i,a,l,u,d,f){const p=new jD(s,i,a,l,u,d);return f&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);Q(xs,"RemoteStore shutting down."),i.Ia.add(5),await No(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}of.provider={build:()=>new of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):qn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="FirestoreClient";class QD{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=dt.UNAUTHENTICATED,this.clientId=Tm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{Q(Fr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Q(Fr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Km(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Dd(t,e){t.asyncQueue.verifyOperationInProgress(),Q(Fr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await m1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Dr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Q("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Dr("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function nx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await JD(t);Q(Fr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Jy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Jy(e.remoteStore,s)),t._onlineComponents=e}async function JD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(Fr,"Using user provided OfflineComponentProvider");try{await Dd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Dr("Error using user provided cache. Falling back to memory cache: "+n),await Dd(t,new Mc)}}else Q(Fr,"Using default OfflineComponentProvider"),await Dd(t,new KD(void 0));return t._offlineComponents}async function P1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(Fr,"Using user provided OnlineComponentProvider"),await nx(t,t._uninitializedComponentsProvider._online)):(Q(Fr,"Using default OnlineComponentProvider"),await nx(t,new of))),t._onlineComponents}function YD(t){return P1(t).then(e=>e.syncEngine)}async function XD(t){const e=await P1(t),n=e.eventManager;return n.onListen=DD.bind(null,e.syncEngine),n.onUnlisten=LD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VD.bind(null,e.syncEngine),n}function ZD(t,e,n={}){const r=new Rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,d){const f=new qD({next:g=>{f.Ou(),a.enqueueAndForget(()=>TD(i,p));const E=g.docs.has(l);!E&&g.fromCache?d.reject(new Z(F.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&g.fromCache&&u&&u.source==="server"?d.reject(new Z(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new ND(jm(l.path),f,{includeMetadataChanges:!0,ka:!0});return SD(i,p)}(await XD(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="firestore.googleapis.com",sx=!0;class ix{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=D1,this.ssl=sx}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:sx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=h1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ij)throw new Z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ym{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ix({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ix(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new t2;switch(r.type){case"firstParty":return new i2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rx.get(n);r&&(Q("ComponentProvider","Removing Datastore"),rx.delete(n),r.terminate())}(this),Promise.resolve()}}function eO(t,e,n,r={}){var s;t=io(t,Ym);const i=Ri(e),a=t._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(s0(`https://${u}`),i0("Firestore",!0)),a.host!==D1&&a.host!==u&&Dr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},a),{host:u,ssl:i,emulatorOptions:r});if(!fs(d,l)&&(t._setSettings(d),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=dt.MOCK_USER;else{f=HI(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new dt(g)}t._authCredentials=new n2(new CE(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xm(this.firestore,e,this._query)}}class Je{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Je(this.firestore,e,this._key)}toJSON(){return{type:Je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(To(n,Je._jsonSchema))return new Je(e,r||null,new ee(Re.fromString(n.referencePath)))}}Je._jsonSchemaVersion="firestore/documentReference/1.0",Je._jsonSchema={type:$e("string",Je._jsonSchemaVersion),referencePath:$e("string")};class fo extends Xm{constructor(e,n,r){super(e,n,jm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new ee(e))}withConverter(e){return new fo(this.firestore,e,this._path)}}function Ns(t,e,...n){if(t=wt(t),arguments.length===1&&(e=Tm.newId()),u2("doc","path",e),t instanceof Ym){const r=Re.fromString(e,...n);return xy(r),new Je(t,null,new ee(r))}{if(!(t instanceof Je||t instanceof fo))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return xy(r),new Je(t.firestore,t instanceof fo?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="AsyncQueue";class ox{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new g1(this,"async_queue_retry"),this.oc=()=>{const r=jd();r&&Q(ax,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=jd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=jd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Rr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Mi(e))throw e;Q(ax,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,qn("INTERNAL UNHANDLED ERROR: ",lx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Gm.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&se(47125,{hc:lx(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function lx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Zm extends Ym{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ox,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ox(e),this._firestoreClient=void 0,await e}}}function tO(t,e){const n=typeof t=="object"?t:f0(),r=typeof t=="string"?t:Ic,s=wo(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=zI("firestore");i&&eO(s,...i)}return s}function O1(t){if(t._terminated)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||nO(t),t._firestoreClient}function nO(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,f){return new E2(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,j1(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new QD(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gt(st.fromBase64String(e))}catch(n){throw new Z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gt(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(To(e,Gt._jsonSchema))return Gt.fromBase64String(e.bytes)}}Gt._jsonSchemaVersion="firestore/bytes/1.0",Gt._jsonSchema={type:$e("string",Gt._jsonSchemaVersion),bytes:$e("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cn._jsonSchemaVersion}}static fromJSON(e){if(To(e,Cn._jsonSchema))return new Cn(e.latitude,e.longitude)}}Cn._jsonSchemaVersion="firestore/geoPoint/1.0",Cn._jsonSchema={type:$e("string",Cn._jsonSchemaVersion),latitude:$e("number"),longitude:$e("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Sn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(To(e,Sn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Sn(e.vectorValues);throw new Z(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sn._jsonSchemaVersion="firestore/vectorValue/1.0",Sn._jsonSchema={type:$e("string",Sn._jsonSchemaVersion),vectorValues:$e("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=/^__.*__$/;class sO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Is(e,this.data,this.fieldMask,n,this.fieldTransforms):new Io(e,this.data,n,this.fieldTransforms)}}function L1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{Ec:t})}}class tp{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new tp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Lc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(L1(this.Ec)&&rO.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class iO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wu(e)}Dc(e,n,r,s=!1){return new tp({Ec:e,methodName:n,bc:r,path:tt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function aO(t){const e=t._freezeSettings(),n=wu(t._databaseId);return new iO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oO(t,e,n,r,s,i={}){const a=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);B1("Data must be an object, but it was:",a,r);const l=U1(r,a);let u,d;if(i.merge)u=new on(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=lO(e,p,n);if(!a.contains(g))throw new Z(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);uO(f,g)||f.push(g)}u=new on(f),d=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=a.fieldTransforms;return new sO(new Wt(l),u,d)}function V1(t,e){if(F1(t=wt(t)))return B1("Unsupported field value:",e,t),U1(t,e);if(t instanceof M1)return function(r,s){if(!L1(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=V1(l,s.yc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return G2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ie.fromDate(r);return{timestampValue:jc(s.serializer,i)}}if(r instanceof Ie){const i=new Ie(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jc(s.serializer,i)}}if(r instanceof Cn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gt)return{bytesValue:i1(s.serializer,r._byteString)};if(r instanceof Je){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Lm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Sn)return function(a,l){return{mapValue:{fields:{[DE]:{stringValue:OE},[kc]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.wc("VectorValues must only contain numeric values.");return Dm(l.serializer,d)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Im(r)}`)}(t,e)}function U1(t,e){const n={};return kE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ss(t,(r,s)=>{const i=V1(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function F1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ie||t instanceof Cn||t instanceof Gt||t instanceof Je||t instanceof M1||t instanceof Sn)}function B1(t,e,n){if(!F1(n)||!TE(n)){const r=Im(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function lO(t,e,n){if((e=wt(e))instanceof ep)return e._internalPath;if(typeof e=="string")return z1(t,e);throw Lc("Field path arguments must be of type string or ",t,!1,void 0,n)}const cO=new RegExp("[~\\*/\\[\\]]");function z1(t,e,n){if(e.search(cO)>=0)throw Lc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ep(...e.split("."))._internalPath}catch{throw Lc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lc(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new Z(F.INVALID_ARGUMENT,l+t+u)}function uO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(H1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dO extends $1{data(){return super.data()}}function H1(t,e){return typeof e=="string"?z1(t,e):e instanceof ep?e._internalPath:e._delegate._internalPath}class hO{convertValue(e,n="none"){switch(Vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ss(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[kc].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Ue(a.doubleValue));return new Sn(i)}convertGeoPoint(e){return new Cn(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(oo(e));default:return null}}convertTimestamp(e){const n=Mr(e);return new Ie(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);ye(d1(r),9688,{name:e});const s=new lo(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||qn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ya{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class os extends $1{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(H1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=os._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}os._jsonSchemaVersion="firestore/documentSnapshot/1.0",os._jsonSchema={type:$e("string",os._jsonSchemaVersion),bundleSource:$e("string","DocumentSnapshot"),bundleName:$e("string"),bundle:$e("string")};class zl extends os{data(e={}){return super.data(e)}}class Oa{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ya(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zl(this._firestore,this._userDataWriter,r.key,r,new ya(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new zl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ya(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new zl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ya(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:mO(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t){t=io(t,Je);const e=io(t.firestore,Zm);return ZD(O1(e),t._key).then(n=>vO(e,t,n))}Oa._jsonSchemaVersion="firestore/querySnapshot/1.0",Oa._jsonSchema={type:$e("string",Oa._jsonSchemaVersion),bundleSource:$e("string","QuerySnapshot"),bundleName:$e("string"),bundle:$e("string")};class pO extends hO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,n)}}function np(t,e,n){t=io(t,Je);const r=io(t.firestore,Zm),s=fO(t.converter,e,n);return gO(r,[oO(aO(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Bn.none())])}function gO(t,e){return function(r,s){const i=new Rr;return r.asyncQueue.enqueueAndForget(async()=>UD(await YD(r),s,i)),i.promise}(O1(t),e)}function vO(t,e,n){const r=n.docs.get(e._key),s=new pO(t);return new os(t,s,e._key,r,new ya(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Di=s})(Pi),Tn(new hn("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Zm(new r2(r.getProvider("auth-internal")),new a2(a,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lo(d.options.projectId,f)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Qt(my,py,e),Qt(my,py,"esm2017")})();const yO={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},xO=!1,Vc=xO?h0(yO):null,pn=Vc?DR(Vc):null,Rt=Vc?tO(Vc):null,rp=T.createContext(null);function cx(t){return t.includes("auth/invalid-credential")||t.includes("auth/wrong-password")?"Invalid email or password.":t.includes("auth/user-not-found")?"No account found for this email.":t.includes("auth/email-already-in-use")?"This email is already registered.":t.includes("auth/weak-password")?"Password should be at least 6 characters.":t.includes("auth/invalid-email")?"Please enter a valid email address.":t.includes("auth/too-many-requests")?"Too many attempts. Try again later.":t}function _O(t){return t?{uid:t.uid,name:t.displayName??null,email:t.email??null,picture:t.photoURL??null}:null}function wO({children:t}){const[e,n]=T.useState(null),[r,s]=T.useState(!0),[i,a]=T.useState(null);T.useEffect(()=>{if(!pn)return;const E=EA(pn,_=>{n(_O(_)),s(!1)});return()=>E()},[]);const l=T.useCallback(async()=>{if(pn){a(null),s(!0);try{const E=new Dn;await $A(pn,E)}catch(E){n(null),a(E instanceof Error?E.message:"Google sign-in failed")}finally{s(!1)}}},[]),u=T.useCallback(async(E,_)=>{if(pn){a(null),s(!0);try{await vA(pn,E.trim(),_)}catch(N){const k=N instanceof Error?N.message:"Sign-in failed";a(k.includes("auth/")?cx(k):k)}finally{s(!1)}}},[]),d=T.useCallback(async(E,_,N)=>{if(pn){a(null),s(!0);try{const k=await gA(pn,E.trim(),_);N!=null&&N.trim()&&k.user&&await xA(k.user,{displayName:N.trim()})}catch(k){const b=k instanceof Error?k.message:"Sign-up failed";a(b.includes("auth/")?cx(b):b)}finally{s(!1)}}},[]),f=T.useCallback(async()=>{pn&&await bA(pn),n(null),a(null)},[]),p=T.useCallback(()=>a(null),[]),g={user:e,isAuthenticated:!!e,isLoading:r,login:l,loginWithEmail:u,signUpWithEmail:d,logout:f,authError:i,clearAuthError:p};return c.jsx(rp.Provider,{value:g,children:t})}const W1={user:null,isAuthenticated:!1,isLoading:!1,login:async()=>{},loginWithEmail:async()=>{},signUpWithEmail:async()=>{},logout:async()=>{},authError:null,clearAuthError:()=>{}};function EO({children:t}){return c.jsx(rp.Provider,{value:W1,children:t})}function Ro(){return T.useContext(rp)??W1}const ux="seamuns-dashboard-theme",dx="seamuns-dashboard-color-mode",hx="seamuns-dashboard-color-theme",G1=[{id:"default",label:"Default",emoji:"",brand:"#2563eb"},{id:"health",label:"Health",emoji:"",brand:"#0d9488"},{id:"war",label:"War & conflict",emoji:"",brand:"#b91c1c"},{id:"women",label:"Women",emoji:"",brand:"#a855f7"},{id:"nature",label:"Nature",emoji:"",brand:"#16a34a"},{id:"peace",label:"Peace",emoji:"",brand:"#0284c7"},{id:"economy",label:"Economy",emoji:"",brand:"#d97706"},{id:"education",label:"Education",emoji:"",brand:"#4f46e5"},{id:"rights",label:"Human rights",emoji:"",brand:"#dc2626"}],lf="gold-blue",K1=[{id:"gold-blue",label:"Gold & Blue",emoji:""},{id:"red",label:"Red",emoji:""},{id:"orange",label:"Orange",emoji:""},{id:"yellow",label:"Yellow",emoji:""},{id:"green",label:"Green",emoji:""},{id:"light-blue",label:"Light Blue",emoji:""},{id:"blue",label:"Blue",emoji:""},{id:"purple",label:"Purple",emoji:""},{id:"pink",label:"Pink",emoji:""},{id:"brown",label:"Brown",emoji:""},{id:"monochromatic",label:"Monochromatic",emoji:""}],q1=T.createContext(null),bO=t=>G1.some(e=>e.id===t),CO=t=>K1.some(e=>e.id===t),SO=t=>t==="light"||t==="dark";function TO({children:t}){const[e,n]=T.useState(()=>{if(typeof window>"u")return"default";const f=localStorage.getItem(ux);return f&&bO(f)?f:"default"}),[r,s]=T.useState(()=>{if(typeof window>"u")return lf;const f=localStorage.getItem(hx);return f&&CO(f)?f:lf}),[i,a]=T.useState(()=>{if(typeof window>"u")return"light";const f=localStorage.getItem(dx);return f&&SO(f)?f:"light"});T.useEffect(()=>{document.documentElement.setAttribute("data-theme",e),localStorage.setItem(ux,e)},[e]),T.useEffect(()=>{document.documentElement.setAttribute("data-color-theme",r),localStorage.setItem(hx,r)},[r]),T.useEffect(()=>{document.documentElement.setAttribute("data-color-mode",i),localStorage.setItem(dx,i)},[i]);const l=f=>n(f),u=f=>s(f),d=f=>a(f);return c.jsx(q1.Provider,{value:{themeId:e,setThemeId:l,themes:G1,colorThemeId:r,setColorThemeId:u,colorThemes:K1,colorMode:i,setColorMode:d},children:t})}function IO(){const t=T.useContext(q1);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Q1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},u)=>T.createElement("svg",{ref:u,...NO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Q1("lucide",s),...l},[...a.map(([d,f])=>T.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(t,e)=>{const n=T.forwardRef(({className:r,...s},i)=>T.createElement(AO,{ref:i,iconNode:e,className:Q1(`lucide-${kO(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=ie("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=ie("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=ie("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=ie("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=ie("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=ie("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=ie("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=ie("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=ie("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=ie("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=ie("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=ie("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=ie("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=ie("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=ie("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=ie("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=ie("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=ie("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=ie("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=ie("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=ie("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=ie("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=ie("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=ie("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=ie("Vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function vx(){const{colorThemeId:t,setColorThemeId:e,colorThemes:n,colorMode:r,setColorMode:s,setThemeId:i}=IO(),[a,l]=T.useState(!1),u=T.useRef(null);T.useEffect(()=>{function f(p){u.current&&!u.current.contains(p.target)&&l(!1)}return a&&document.addEventListener("click",f),()=>document.removeEventListener("click",f)},[a]);const d=n.find(f=>f.id===t)??n[0];return c.jsxs("div",{className:"relative",ref:u,children:[c.jsxs("button",{type:"button",onClick:()=>l(!a),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text)] hover:bg-[var(--bg-card)] border border-[var(--border)] bg-[var(--bg-elevated)] transition-colors","aria-expanded":a,"aria-haspopup":"listbox","aria-label":"Theme",children:[c.jsx(zO,{className:"w-4 h-4 flex-shrink-0 text-[var(--text-muted)]"}),c.jsx("span",{className:"hidden sm:inline",children:"Theme"}),c.jsx("span",{className:"text-[var(--brand)]",title:d.label,"aria-hidden":!0,children:d.emoji}),c.jsx(jo,{className:`w-4 h-4 flex-shrink-0 text-[var(--text-muted)] transition-transform ${a?"rotate-180":""}`,"aria-hidden":!0})]}),a&&c.jsxs("div",{className:"absolute right-0 top-full mt-1.5 py-2 rounded-xl border border-[var(--border)] bg-[var(--bg-card)] shadow-[var(--shadow-card)] shadow-lg z-50 min-w-[200px]",role:"dialog","aria-label":"Theme options",children:[c.jsx("div",{className:"px-3 py-1.5 text-xs font-medium text-[var(--text-muted)] border-b border-[var(--border)] mb-2",children:"Appearance"}),c.jsxs("div",{className:"flex gap-1 px-2 pb-2",children:[c.jsxs("button",{type:"button",onClick:()=>s("light"),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${r==="light"?"bg-[var(--brand)] text-white shadow-sm":"text-[var(--text-muted)] hover:bg-[var(--bg-elevated)] hover:text-[var(--text)]"}`,"aria-pressed":r==="light",children:[c.jsx(KO,{className:"w-4 h-4"}),"Light"]}),c.jsxs("button",{type:"button",onClick:()=>s("dark"),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${r==="dark"?"bg-[var(--brand)] text-white shadow-sm":"text-[var(--text-muted)] hover:bg-[var(--bg-elevated)] hover:text-[var(--text)]"}`,"aria-pressed":r==="dark",children:[c.jsx(BO,{className:"w-4 h-4"}),"Dark"]})]}),c.jsxs("div",{className:"px-3 py-1.5 text-xs font-medium text-[var(--text-muted)] border-b border-[var(--border)] mb-2",children:["Theme color ",c.jsx("span",{className:"font-normal",children:"(default: Gold & Blue)"})]}),c.jsx("div",{className:"max-h-[260px] overflow-y-auto",role:"listbox","aria-label":"Theme color",children:n.map(f=>{const p=f.id===lf,g=t===f.id;return c.jsxs("button",{type:"button",role:"option","aria-selected":g,onClick:()=>{e(f.id),i("default"),l(!1)},className:`flex items-center gap-2 w-full px-3 py-2 text-left text-sm transition-colors whitespace-nowrap min-w-0 ${g?"bg-[var(--brand)] text-white":"text-[var(--text)] hover:bg-[var(--bg-elevated)]"}`,children:[c.jsx("span",{className:"text-base flex-shrink-0","aria-hidden":!0,children:f.emoji}),c.jsx("span",{className:"truncate",children:f.label}),p&&c.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded text-[10px] font-medium flex-shrink-0 ${g?"bg-white/20 text-white":"bg-[var(--accent-soft)] text-[var(--accent)]"}`,children:"Default"}),g&&c.jsx("span",{className:"ml-auto text-white","aria-hidden":!0,children:""})]},f.id)})})]})]})}function ib({className:t="h-8 w-auto"}){return c.jsx("img",{src:"/logo.png",alt:"SEAMUNs",className:t,fetchPriority:"high"})}const yx=[{to:"/",label:" Home"},{to:"/chair",label:" Chair Room"},{to:"/delegate",label:" Delegate"}];function QO(){const[t,e]=T.useState(!1),n=bs(),r=()=>e(!1);return T.useEffect(()=>{r()},[n.pathname]),c.jsxs("div",{className:"min-h-screen flex flex-col",children:[c.jsxs("header",{className:"sticky top-0 z-50 border-b border-[var(--border)] bg-[var(--bg-base)]/95 backdrop-blur-sm shadow-[0_1px_0_0_var(--border)]",children:[c.jsxs("div",{className:"max-w-[1600px] mx-auto px-2 sm:px-4 py-1.5 sm:py-2 flex items-center justify-between gap-2 min-h-0",children:[c.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3 min-w-0",children:[c.jsxs(_d,{to:"/",className:"font-semibold text-base sm:text-lg md:text-xl text-[var(--text)] hover:text-[var(--brand)] transition-colors flex items-center gap-1.5 sm:gap-2 whitespace-nowrap min-w-0 py-1",onClick:r,children:[c.jsx(ib,{className:"h-5 sm:h-7 w-auto flex-shrink-0"}),c.jsx("span",{className:"hidden sm:inline truncate",children:"SEAMUNs Dashboard"}),c.jsx("span",{className:"sm:hidden truncate",children:"SEAMUNs"}),c.jsx("span",{className:"text-[var(--brand)]/80 text-sm hidden sm:inline",children:""})]}),c.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[var(--text-muted)] hover:text-[var(--brand)] transition-colors hidden md:inline",children:"seamuns.site"})]}),c.jsxs("div",{className:"hidden md:flex items-center gap-1.5",children:[c.jsx(vx,{}),c.jsx("nav",{className:"flex items-center gap-0.5 p-0.5 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] flex-nowrap",children:yx.map(({to:s,label:i})=>c.jsx(_d,{to:s,className:({isActive:a})=>`px-2.5 py-1 rounded-md text-xs font-medium transition-colors whitespace-nowrap ${a?"bg-[var(--brand)] text-white shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:i},s))}),void 0]}),c.jsxs("div",{className:"flex md:hidden items-center gap-0.5",children:[c.jsx(vx,{}),c.jsx("button",{type:"button",onClick:()=>e(!t),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors","aria-expanded":t,"aria-label":t?"Close menu":"Open menu",children:t?c.jsx(ku,{className:"w-4 h-4"}):c.jsx(FO,{className:"w-4 h-4"})}),void 0]})]}),t&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40 bg-black/30 md:hidden",onClick:r,"aria-hidden":!0}),c.jsx("div",{className:"fixed top-11 right-0 bottom-0 left-0 z-50 md:hidden bg-[var(--bg-elevated)] border-l border-[var(--border)] shadow-xl overflow-y-auto",role:"dialog","aria-label":"Navigation menu",children:c.jsxs("nav",{className:"flex flex-col p-4 gap-1",children:[yx.map(({to:s,label:i})=>c.jsx(_d,{to:s,onClick:r,className:({isActive:a})=>`px-4 py-3 rounded-lg text-sm font-medium transition-colors ${a?"bg-[var(--brand)] text-white":"text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:i},s)),c.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",onClick:r,className:"px-4 py-3 rounded-lg text-sm text-[var(--text-muted)] hover:text-[var(--brand)] hover:bg-[var(--bg-card)]",children:"seamuns.site "})]})})]})]}),c.jsx("main",{className:"main-content flex-1 min-w-0",children:c.jsx(yI,{})}),c.jsxs("footer",{className:"border-t border-[var(--border)] py-2 sm:py-3 px-3 sm:px-4 text-center text-[10px] sm:text-xs text-[var(--text-muted)] bg-[var(--bg-elevated)]/50",children:["Part of ",c.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",className:"text-[var(--brand)] hover:underline",children:"SEAMUNs"}),"  Model UN conferences across South East Asia",c.jsx("span",{className:"block mt-1 opacity-70",title:"You see this when the latest build (AL, EU, IOPC, UKPC, PC, HCC committees) is deployed",children:"Build: committees+allocations"})]})]})}const JO={Afghanistan:"AF",Albania:"AL",Algeria:"DZ",Andorra:"AD",Angola:"AO","Antigua and Barbuda":"AG",Argentina:"AR",Armenia:"AM",Australia:"AU",Austria:"AT",Azerbaijan:"AZ",Bahamas:"BS",Bahrain:"BH",Bangladesh:"BD",Barbados:"BB",Belarus:"BY",Belgium:"BE",Belize:"BZ",Benin:"BJ",Bhutan:"BT",Bolivia:"BO","Bosnia and Herzegovina":"BA",Botswana:"BW",Brazil:"BR","Brunei Darussalam":"BN",Bulgaria:"BG","Burkina Faso":"BF",Burundi:"BI","Cabo Verde":"CV",Cambodia:"KH",Cameroon:"CM",Canada:"CA","Central African Republic":"CF",Chad:"TD",Chile:"CL",China:"CN",Colombia:"CO",Comoros:"KM",Congo:"CG","Costa Rica":"CR",Croatia:"HR",Cuba:"CU",Cyprus:"CY","Czech Republic":"CZ","Cte d'Ivoire":"CI","Democratic People's Republic of Korea":"KP","Democratic Republic of the Congo":"CD",Denmark:"DK",Djibouti:"DJ",Dominica:"DM","Dominican Republic":"DO",Ecuador:"EC",Egypt:"EG","El Salvador":"SV","Equatorial Guinea":"GQ",Eritrea:"ER",Estonia:"EE",Eswatini:"SZ",Ethiopia:"ET",Fiji:"FJ",Finland:"FI",France:"FR",Gabon:"GA",Gambia:"GM",Georgia:"GE",Germany:"DE",Ghana:"GH",Greece:"GR",Grenada:"GD",Guatemala:"GT",Guinea:"GN","Guinea-Bissau":"GW",Guyana:"GY",Haiti:"HT",Honduras:"HN",Hungary:"HU",Iceland:"IS",India:"IN",Indonesia:"ID",Iran:"IR",Iraq:"IQ",Ireland:"IE",Israel:"IL",Italy:"IT",Jamaica:"JM",Japan:"JP",Jordan:"JO",Kazakhstan:"KZ",Kenya:"KE",Kiribati:"KI",Kuwait:"KW",Kyrgyzstan:"KG","Lao People's Democratic Republic":"LA",Latvia:"LV",Lebanon:"LB",Lesotho:"LS",Liberia:"LR",Libya:"LY",Liechtenstein:"LI",Lithuania:"LT",Luxembourg:"LU",Madagascar:"MG",Malawi:"MW",Malaysia:"MY",Maldives:"MV",Mali:"ML",Malta:"MT","Marshall Islands":"MH",Mauritania:"MR",Mauritius:"MU",Mexico:"MX","Micronesia (Federated States of)":"FM",Moldova:"MD",Monaco:"MC",Mongolia:"MN",Montenegro:"ME",Morocco:"MA",Mozambique:"MZ",Myanmar:"MM",Namibia:"NA",Nauru:"NR",Nepal:"NP",Netherlands:"NL","New Zealand":"NZ",Nicaragua:"NI",Niger:"NE",Nigeria:"NG","North Macedonia":"MK",Norway:"NO",Oman:"OM",Pakistan:"PK",Palau:"PW",Panama:"PA","Papua New Guinea":"PG",Paraguay:"PY",Peru:"PE",Philippines:"PH",Poland:"PL",Portugal:"PT",Qatar:"QA","Republic of Korea":"KR",Romania:"RO","Russian Federation":"RU",Rwanda:"RW","Saint Kitts and Nevis":"KN","Saint Lucia":"LC","Saint Vincent and the Grenadines":"VC",Samoa:"WS","San Marino":"SM","Sao Tome and Principe":"ST","Saudi Arabia":"SA",Senegal:"SN",Serbia:"RS",Seychelles:"SC","Sierra Leone":"SL",Singapore:"SG",Slovakia:"SK",Slovenia:"SI","Solomon Islands":"SB",Somalia:"SO","South Africa":"ZA","South Sudan":"SS",Spain:"ES","Sri Lanka":"LK",Sudan:"SD",Suriname:"SR",Sweden:"SE",Switzerland:"CH","Syrian Arab Republic":"SY",Tajikistan:"TJ",Thailand:"TH","Timor-Leste":"TL",Togo:"TG",Tonga:"TO","Trinidad and Tobago":"TT",Tunisia:"TN",Turkey:"TR",Turkmenistan:"TM",Tuvalu:"TV",Uganda:"UG",Ukraine:"UA","United Arab Emirates":"AE","United Kingdom":"GB","United Republic of Tanzania":"TZ","United States":"US",Uruguay:"UY",Uzbekistan:"UZ",Vanuatu:"VU",Venezuela:"VE","Viet Nam":"VN",Yemen:"YE",Zambia:"ZM",Zimbabwe:"ZW"};function YO(t){return/^[A-Z]{2}$/i.test(t)?Array.from(t.toUpperCase()).map(e=>String.fromCodePoint(127397+e.charCodeAt(0))).join(""):""}function ab(t){const e=JO[t];return e?YO(e):""}const ob="chairData";async function XO(t){if(!Rt)return null;const e=Ns(Rt,ob,t),n=await Cu(e);return n.exists()?n.data():null}async function ZO(t,e){if(!Rt)return;const n=Ns(Rt,ob,t);await np(n,e)}const lb="seamuns-dashboard-chair-state",cr={committee:"UNSC",topic:"Cybersecurity and International Peace",universe:"",sessionStarted:!1,sessionStartTime:null,delegates:[],delegateStrikes:[],delegateFeedback:[],motions:[],speakers:[],activeSpeaker:null,speakerDuration:60,rollCallComplete:!1,crisisSlides:[],crisisSpeakers:[],crisisFacts:[],crisisPathways:[],archive:[],voteInProgress:null,delegateVotes:{},flowChecklist:{},prepChecklist:{},delegationEmojiOverrides:{},chairName:"",chairEmail:""};function e4(){try{const t=localStorage.getItem(lb);if(t){const e=JSON.parse(t);return{...cr,...e}}}catch{}return cr}const cb=T.createContext(null);function t4({children:t,userId:e=null}){const[n,r]=T.useState(e4),[s,i]=T.useState(!1),[a,l]=T.useState(null),[u,d]=T.useState(!1);T.useEffect(()=>{if(!e){d(!0);return}let V=!1;return XO(e).then(M=>{V||!M||r({...cr,...M,delegates:Array.isArray(M.delegates)?M.delegates:cr.delegates,delegateStrikes:Array.isArray(M.delegateStrikes)?M.delegateStrikes:cr.delegateStrikes,delegateFeedback:Array.isArray(M.delegateFeedback)?M.delegateFeedback:cr.delegateFeedback,motions:Array.isArray(M.motions)?M.motions:cr.motions,speakers:Array.isArray(M.speakers)?M.speakers:cr.speakers,activeSpeaker:M.activeSpeaker,voteInProgress:M.voteInProgress})}).catch(()=>{}).finally(()=>{V||d(!0)}),()=>{V=!0}},[e]),T.useEffect(()=>{const V=setTimeout(()=>{try{localStorage.setItem(lb,JSON.stringify(n))}catch{}},1e3);return()=>clearTimeout(V)},[n]);const f=T.useCallback(async()=>{if(e){i(!0);try{await ZO(e,n),l(new Date)}finally{i(!1)}}},[e,n]);T.useEffect(()=>{if(!e||!u)return;const V=setTimeout(()=>{f()},3e3);return()=>clearTimeout(V)},[e,u,n,f]);const p=T.useCallback(V=>{r(M=>({...M,committee:V}))},[]),g=T.useCallback(V=>{r(M=>({...M,topic:V}))},[]),E=T.useCallback(V=>{r(M=>({...M,universe:V}))},[]),_=T.useCallback(V=>{r(M=>({...M,chairName:V}))},[]),N=T.useCallback(V=>{r(M=>({...M,chairEmail:V}))},[]),k=T.useCallback(()=>{r(V=>({...V,sessionStarted:!0,sessionStartTime:new Date().toISOString()}))},[]),b=T.useCallback(()=>{r(V=>({...V,sessionStarted:!1,sessionStartTime:null}))},[]),x=T.useCallback(V=>{r(M=>({...M,delegates:[...M.delegates,{...V,id:crypto.randomUUID()}]}))},[]),w=T.useCallback(V=>{r(M=>({...M,delegates:M.delegates.filter(q=>q.id!==V),delegateStrikes:M.delegateStrikes.filter(q=>q.delegateId!==V),delegateFeedback:M.delegateFeedback.filter(q=>q.delegateId!==V)}))},[]),R=T.useCallback((V,M)=>{r(q=>({...q,delegates:q.delegates.map(_e=>_e.id===V?{..._e,...M}:_e)}))},[]),B=T.useCallback((V,M)=>{r(q=>({...q,motions:[...q.motions,{id:crypto.randomUUID(),text:V,type:M,starred:!1,timestamp:new Date().toISOString(),status:"active"}]}))},[]),z=T.useCallback(V=>{r(M=>({...M,motions:M.motions.map(q=>q.id===V?{...q,starred:!q.starred}:q)}))},[]),S=T.useCallback((V,M)=>{r(q=>({...q,motions:q.motions.map(_e=>_e.id===V?{..._e,status:M}:_e)}))},[]),y=T.useCallback(V=>{r(M=>{const q=M.motions.find(_e=>_e.id===V);return!q||q.type==="point"?M:{...M,voteInProgress:q,delegateVotes:{}}})},[]),C=T.useCallback((V,M)=>{r(q=>({...q,delegateVotes:{...q.delegateVotes,[V]:M}}))},[]),I=T.useCallback(()=>{r(V=>{if(!V.voteInProgress)return V;const M=Object.values(V.delegateVotes).filter(jt=>jt==="yes").length,q=Object.values(V.delegateVotes).filter(jt=>jt==="no").length,_e=Object.values(V.delegateVotes).filter(jt=>jt==="abstain").length;return{...V,motions:V.motions.map(jt=>jt.id===V.voteInProgress.id?{...jt,votes:{yes:M,no:q,abstain:_e},status:M>q?"passed":"failed"}:jt),voteInProgress:null,delegateVotes:{}}})},[]),P=T.useCallback((V,M,q)=>{r(_e=>({..._e,speakers:[..._e.speakers,{id:crypto.randomUUID(),delegateId:V,country:M,name:q,duration:_e.speakerDuration,speaking:!1}]}))},[]),j=T.useCallback(V=>{r(M=>{var q;return{...M,speakers:M.speakers.filter(_e=>_e.id!==V),activeSpeaker:((q=M.activeSpeaker)==null?void 0:q.id)===V?null:M.activeSpeaker}})},[]),A=T.useCallback(V=>{r(M=>({...M,activeSpeaker:V,speakers:M.speakers.map(q=>q.id===(V==null?void 0:V.id)?{...q,speaking:!0,startTime:Date.now()}:{...q,speaking:!1})}))},[]),X=T.useCallback(V=>{r(M=>({...M,speakerDuration:V}))},[]),Y=T.useCallback(V=>{r(M=>({...M,rollCallComplete:V}))},[]),me=T.useCallback(V=>{r(M=>({...M,crisisSlides:[...M.crisisSlides,V]}))},[]),Ve=T.useCallback(V=>{r(M=>({...M,crisisSpeakers:[...M.crisisSpeakers,V]}))},[]),G=T.useCallback(V=>{r(M=>({...M,crisisFacts:[...M.crisisFacts,V]}))},[]),te=T.useCallback(V=>{r(M=>({...M,crisisPathways:[...M.crisisPathways,V]}))},[]),ne=T.useCallback((V,M,q)=>{r(_e=>({..._e,archive:[..._e.archive,{type:V,name:M,content:q}]}))},[]),xe=T.useCallback((V,M)=>{r(q=>({...q,delegateStrikes:[...q.delegateStrikes,{delegateId:V,type:M,timestamp:new Date().toISOString()}]}))},[]),K=T.useCallback((V,M)=>{r(q=>{const _e=[...q.delegateStrikes].reverse().findIndex(Ps=>Ps.delegateId===V&&Ps.type===M);if(_e===-1)return q;const jt=q.delegateStrikes.length-1-_e;return{...q,delegateStrikes:q.delegateStrikes.filter((Ps,Bi)=>Bi!==jt)}})},[]),U=T.useCallback((V,M)=>{r(q=>({...q,delegateFeedback:[...q.delegateFeedback,{delegateId:V,type:M,timestamp:new Date().toISOString()}]}))},[]),H=T.useCallback(V=>{const M={compliment:0,concern:0};return n.delegateFeedback.filter(q=>q.delegateId===V).forEach(q=>{M[q.type]=(M[q.type]??0)+1}),M},[n.delegateFeedback]),pe=T.useCallback(V=>{r(M=>({...M,flowChecklist:{...M.flowChecklist,[V]:!M.flowChecklist[V]}}))},[]),Ee=T.useCallback(V=>!!n.flowChecklist[V],[n.flowChecklist]),le=T.useCallback(()=>{r(V=>({...V,flowChecklist:{}}))},[]),gt=T.useCallback(V=>{r(M=>({...M,prepChecklist:{...M.prepChecklist,[V]:!M.prepChecklist[V]}}))},[]),Vi=T.useCallback(V=>!!n.prepChecklist[V],[n.prepChecklist]),As=T.useCallback(()=>{r(V=>({...V,prepChecklist:{}}))},[]),Rs=T.useCallback((V,M)=>{r(q=>{const _e={...q.delegationEmojiOverrides};return M===null||M===""?delete _e[V]:_e[V]=M,{...q,delegationEmojiOverrides:_e}})},[]),Ui=T.useCallback(V=>{const M=n.delegationEmojiOverrides[V];return M!==void 0&&M!==""?M:ab(V)},[n.delegationEmojiOverrides]),Fi={...n,setCommittee:p,setTopic:g,setUniverse:E,setChairName:_,setChairEmail:N,startSession:k,stopSession:b,addDelegate:x,removeDelegate:w,updateDelegate:R,addMotion:B,starMotion:z,setMotionStatus:S,startVote:y,recordVote:C,endVote:I,addToSpeakers:P,removeFromSpeakers:j,setActiveSpeaker:A,setSpeakerDuration:X,setRollCallComplete:Y,addCrisisSlide:me,addCrisisSpeaker:Ve,addCrisisFact:G,addCrisisPathway:te,addToArchive:ne,addStrike:xe,removeStrike:K,getStrikeCount:(V,M)=>n.delegateStrikes.filter(q=>q.delegateId===V&&q.type===M).length,getStrikeCountsByType:V=>{const M={};return n.delegateStrikes.filter(q=>q.delegateId===V).forEach(q=>{M[q.type]=(M[q.type]??0)+1}),M},addDelegateFeedback:U,getFeedbackCountsByType:H,toggleFlowStep:pe,isFlowStepDone:Ee,resetFlowChecklist:le,togglePrepStep:gt,isPrepStepDone:Vi,resetPrepChecklist:As,setDelegationEmoji:Rs,getDelegationEmoji:Ui,saveToAccount:f,isSaving:s,lastSaved:a,isLoaded:u};return c.jsx(cb.Provider,{value:Fi,children:t})}function Pt(){const t=T.useContext(cb);if(!t)throw new Error("useChair must be used within ChairProvider");return t}function er({title:t,children:e,label:n="More info"}){const[r,s]=T.useState(!1),i=T.useRef(null);return T.useEffect(()=>{if(!r)return;const a=l=>{i.current&&!i.current.contains(l.target)&&s(!1)};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[r]),c.jsxs("div",{className:"relative inline-flex",ref:i,children:[c.jsx("button",{type:"button",onClick:a=>{a.stopPropagation(),s(l=>!l)},className:"p-1 rounded-full text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-expanded":r,"aria-haspopup":"dialog","aria-label":n,children:c.jsx(MO,{className:"w-4 h-4"})}),r&&c.jsxs("div",{role:"dialog","aria-label":t,className:"absolute left-0 top-full mt-1 z-50 min-w-[220px] max-w-[320px] p-3 rounded-xl border border-[var(--border)] bg-[var(--bg-card)] shadow-lg text-left",children:[c.jsx("p",{className:"font-medium text-[var(--text)] text-sm mb-1",children:t}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] [&_ul]:list-disc [&_ul]:pl-4 [&_ul]:space-y-0.5 [&_ol]:list-decimal [&_ol]:pl-4 [&_ol]:space-y-0.5",children:e})]})]})}const n4=["Point of order abuse","Unparliamentary language","Speaking out of turn","Disruption","Failure to yield","Other"],uf=3;function r4(t){return t.rollCallStatus?t.rollCallStatus:t.present?"present":"absent"}function s4(){const{delegates:t,committee:e,topic:n,universe:r,getStrikeCountsByType:s,addDelegateFeedback:i,getFeedbackCountsByType:a,getDelegationEmoji:l}=Pt(),[u,d]=T.useState(null),f=T.useRef(null);return T.useEffect(()=>{if(!u)return;const p=g=>{f.current&&!f.current.contains(g.target)&&d(null)};return document.addEventListener("click",p),()=>document.removeEventListener("click",p)},[u]),c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Digital Room View",c.jsx(er,{title:"Digital Room",children:"Shows all delegates with their roll-call status (Absent, Present, P&V). Click a delegate card to give a compliment or concern reminder. Delegates are listed alphabetically by country."})]}),c.jsxs("p",{className:"text-[var(--text-muted)] text-sm",children:[e,r?`  ${r}  ${n}`:`  ${n}`]}),c.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:"Click a delegate to give a compliment or concern reminder."})]})}),c.jsx("div",{className:"card-block p-6 min-h-[320px]",children:t.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-[var(--text-muted)]",children:[c.jsx("p",{className:"text-sm",children:" No delegates in the room yet."}),c.jsx("p",{className:"text-xs mt-1",children:"Add delegates from the Delegates section."})]}):c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:[...t].sort((p,g)=>p.country.localeCompare(g.country,void 0,{sensitivity:"base"})).map(p=>{const g=s(p.id),E=Object.values(g).reduce((w,R)=>w+R,0),_=Object.values(g).some(w=>w>=uf),N=a(p.id),k=N.compliment??0,b=N.concern??0,x=u===p.id;return c.jsxs("div",{ref:x?f:void 0,className:"relative",children:[c.jsxs("button",{type:"button",onClick:()=>d(x?null:p.id),className:`w-full rounded-lg border p-3 text-center transition-colors text-left ${_?"border-[var(--danger)] bg-[var(--danger)]/10 hover:bg-[var(--danger)]/15":"border-[var(--border)] bg-[var(--bg-elevated)] hover:bg-[var(--bg-card)] hover:border-[var(--accent)]/50"} ${x?"ring-2 ring-[var(--accent)]":""}`,"aria-expanded":x,"aria-haspopup":"menu","aria-label":`${p.country}  give compliment or concern`,children:[c.jsxs("div",{className:"text-xs font-medium text-[var(--accent)] uppercase tracking-wide flex items-center justify-center gap-1",children:[c.jsx("span",{children:l(p.country)||""}),c.jsx("span",{children:p.country})]}),c.jsx("div",{className:"text-sm text-[var(--text)] mt-1 font-medium",children:p.name||""}),p.committee&&c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-0.5",children:p.committee}),c.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2 flex-wrap",children:[(()=>{const w=r4(p),R={absent:"Absent",present:"Present (may abstain)","present-and-voting":"Present and voting"};return c.jsxs("span",{className:`inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[10px] font-medium ${w==="absent"?"bg-[var(--text-muted)]/20 text-[var(--text-muted)]":w==="present"?"bg-[var(--success)]/20 text-[var(--success)]":"bg-[var(--accent)]/20 text-[var(--accent)]"}`,title:R[w],children:[c.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${w==="absent"?"bg-[var(--text-muted)]":w==="present"?"bg-[var(--success)]":"bg-[var(--accent)]"}`}),w==="present-and-voting"?"P&V":w==="present"?"Present":"Absent"]})})(),E>0&&c.jsxs("span",{className:`inline-flex items-center gap-0.5 text-xs ${_?"text-[var(--danger)]":"text-[var(--accent)]"}`,title:Object.entries(g).map(([w,R])=>`${w}: ${R}`).join(", "),children:[c.jsx(Uc,{className:"w-3 h-3"}),E]}),k>0&&c.jsxs("span",{className:"inline-flex items-center gap-0.5 text-xs text-[var(--success)]",title:"Compliments",children:[c.jsx(gx,{className:"w-3 h-3"}),k]}),b>0&&c.jsxs("span",{className:"inline-flex items-center gap-0.5 text-xs text-[var(--danger)]",title:"Concern reminders",children:[c.jsx(mx,{className:"w-3 h-3"}),b]}),c.jsx(jo,{className:`w-3 h-3 text-[var(--text-muted)] flex-shrink-0 transition-transform ${x?"rotate-180":""}`,"aria-hidden":!0})]})]}),x&&c.jsxs("div",{className:"absolute left-0 right-0 top-full mt-1 z-10 rounded-lg border border-[var(--border)] bg-[var(--bg-card)] shadow-lg py-1 min-w-[10rem]",role:"menu","aria-label":"Delegate actions",children:[c.jsxs("button",{type:"button",role:"menuitem",onClick:()=>{i(p.id,"compliment"),d(null)},className:"flex items-center gap-2 w-full px-3 py-2 text-left text-sm text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[c.jsx(gx,{className:"w-4 h-4 text-[var(--success)]"}),"Give compliment"]}),c.jsxs("button",{type:"button",role:"menuitem",onClick:()=>{i(p.id,"concern"),d(null)},className:"flex items-center gap-2 w-full px-3 py-2 text-left text-sm text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[c.jsx(mx,{className:"w-4 h-4 text-[var(--danger)]"}),"Give concern reminder"]})]})]},p.id)})})})]})}const i4=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Cte d'Ivoire","Democratic People's Republic of Korea","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Lao People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia (Federated States of)","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Macedonia","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Republic of Korea","Romania","Russian Federation","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syrian Arab Republic","Tajikistan","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United Republic of Tanzania","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela","Viet Nam","Yemen","Zambia","Zimbabwe"],di="__OTHER__",a4=[{value:"AL",label:"AL  Arab League"},{value:"EU",label:"EU  European Union"},{value:"IOPC",label:"IOPC  International Olympic and Paralympic Committee"},{value:"UKPC",label:"UKPC  UK Parliament Committee"},{value:"PC",label:"PC  Press Corps"},{value:"HCC",label:"HCC  Historical Crisis Committee"},{value:"UNSC",label:"SC / UNSC  Security Council"},{value:"HSC",label:"HSC  Historical Security Council"},{value:"US-Senate",label:"US Senate  United States Senate"},{value:"ASEAN",label:"ASEAN  Association of Southeastern Asian Nations"},{value:"AU",label:"AU  African Union"},{value:"CCPCJ",label:"CCPCJ  Commission on Crime Prevention and Criminal Justice"},{value:"CERN",label:"CERN  European Organization for Nuclear Research"},{value:"CND",label:"CND  United Nations Commission on Narcotic Drugs"},{value:"CoM",label:"CoM  Council of Marvels (Fictional)"},{value:"CPD",label:"CPD  Commission on Population and Development"},{value:"CSTD",label:"CSTD  Commission on Science and Technology for Development"},{value:"DGC",label:"DGC  United Nations Department of Global Communications"},{value:"DISEC",label:"DISEC  Disarmament and International Security Committee (UNGA 1st)"},{value:"ECOFIN",label:"ECOFIN  Economic and Financial Committee (UNGA 2nd)"},{value:"ECOSOC",label:"ECOSOC  Economic and Social Council"},{value:"FAO",label:"FAO  Food and Agriculture Organization"},{value:"FIFA",label:"FIFA  Fdration Internationale de Football Association"},{value:"GA6",label:"GA6  Legal (UNGA 6th Committee)"},{value:"HRC",label:"HRC  Human Rights Council"},{value:"UNHRC",label:"UNHRC  Human Rights Council"},{value:"IAEA",label:"IAEA  International Atomic Energy Agency"},{value:"ICAO",label:"ICAO  International Civil Aviation Organisation"},{value:"ICC",label:"ICC  International Criminal Court"},{value:"ICC-Commerce",label:"ICC  International Chamber of Commerce"},{value:"ICJ",label:"ICJ  International Court of Justice"},{value:"ICRC",label:"ICRC  International Committee of the Red Cross"},{value:"ILO",label:"ILO  International Labour Organization"},{value:"IMF",label:"IMF  International Monetary Fund"},{value:"IMO",label:"IMO  International Maritime Organisation"},{value:"Interpol",label:"Interpol  International Criminal Police Organization"},{value:"NATO",label:"NATO  North Atlantic Treaty Organization"},{value:"PBC",label:"PBC  Peacebuilding Commission"},{value:"SCSHT",label:"SCSHT  Special Conference on Slavery and Human Trafficking"},{value:"SOCHUM",label:"SOCHUM  Social, Cultural, and Humanitarian Committee (UNGA 3rd)"},{value:"SPECPOL",label:"SPECPOL  Special Political and Decolonization (UNGA 4th)"},{value:"UNCSA",label:"UNCSA  Commission on Superhuman Activities (Fictional)"},{value:"UNCTAD",label:"UNCTAD  United Nations Conference on Trade and Development"},{value:"UNEP",label:"UNEP  United Nations Environmental Program"},{value:"UNESCO",label:"UNESCO  UN Educational, Scientific, and Cultural Organization"},{value:"UNHCR",label:"UNHCR  UN High Commissioner for Refugees"},{value:"UNICEF",label:"UNICEF  United Nations Children's Fund"},{value:"UNIDO",label:"UNIDO  UN Industrial Development Organization"},{value:"UNISDR",label:"UNISDR  United Nations Office for Disaster Risk Reduction"},{value:"UNODC",label:"UNODC  United Nations Office on Drugs and Crime"},{value:"UNOOSA",label:"UNOOSA  United Nations Office for Outer Space Affairs"},{value:"UNPFII",label:"UNPFII  UN Permanent Forum on Indigenous Issues"},{value:"UN-Women",label:"UN Women  United Nations Entity for Gender Equality and the Empowerment of Women"},{value:"UNWTO",label:"UNWTO  World Tourism Organization"},{value:"WFP",label:"WFP  World Food Program"},{value:"WHO",label:"WHO  World Health Organization"},{value:"WMO",label:"WMO  World Meteorological Organization"},{value:"WIPO",label:"WIPO  World Intellectual Property Organization"},{value:"WB",label:"WB  World Bank"},{value:"WTO",label:"WTO  World Trade Organization"},{value:"Crisis",label:"Crisis Committee"}],cp=a4;cp.map(t=>t.value);const zt="__OTHER__";function o4(t){const e=t.party==="D"?"Democrat":t.party==="R"?"Republican":"Independent";return`${t.state}  ${t.name} (${e})`}const l4=[{state:"Alabama",name:"Katie Britt",party:"R"},{state:"Alabama",name:"Tommy Tuberville",party:"R"},{state:"Alaska",name:"Lisa Murkowski",party:"R"},{state:"Alaska",name:"Dan Sullivan",party:"R"},{state:"Arizona",name:"Mark Kelly",party:"D"},{state:"Arizona",name:"Kyrsten Sinema",party:"I"},{state:"Arkansas",name:"John Boozman",party:"R"},{state:"Arkansas",name:"Tom Cotton",party:"R"},{state:"California",name:"Alex Padilla",party:"D"},{state:"California",name:"Laphonza Butler",party:"D"},{state:"Colorado",name:"Michael Bennet",party:"D"},{state:"Colorado",name:"John Hickenlooper",party:"D"},{state:"Connecticut",name:"Richard Blumenthal",party:"D"},{state:"Connecticut",name:"Chris Murphy",party:"D"},{state:"Delaware",name:"Tom Carper",party:"D"},{state:"Delaware",name:"Chris Coons",party:"D"},{state:"Florida",name:"Rick Scott",party:"R"},{state:"Florida",name:"Marco Rubio",party:"R"},{state:"Georgia",name:"Jon Ossoff",party:"D"},{state:"Georgia",name:"Raphael Warnock",party:"D"},{state:"Hawaii",name:"Brian Schatz",party:"D"},{state:"Hawaii",name:"Mazie Hirono",party:"D"},{state:"Idaho",name:"Mike Crapo",party:"R"},{state:"Idaho",name:"Jim Risch",party:"R"},{state:"Illinois",name:"Dick Durbin",party:"D"},{state:"Illinois",name:"Tammy Duckworth",party:"D"},{state:"Indiana",name:"Todd Young",party:"R"},{state:"Indiana",name:"Jim Banks",party:"R"},{state:"Iowa",name:"Chuck Grassley",party:"R"},{state:"Iowa",name:"Joni Ernst",party:"R"},{state:"Kansas",name:"Jerry Moran",party:"R"},{state:"Kansas",name:"Roger Marshall",party:"R"},{state:"Kentucky",name:"Mitch McConnell",party:"R"},{state:"Kentucky",name:"Rand Paul",party:"R"},{state:"Louisiana",name:"Bill Cassidy",party:"R"},{state:"Louisiana",name:"John Kennedy",party:"R"},{state:"Maine",name:"Susan Collins",party:"R"},{state:"Maine",name:"Angus King",party:"I"},{state:"Maryland",name:"Ben Cardin",party:"D"},{state:"Maryland",name:"Chris Van Hollen",party:"D"},{state:"Massachusetts",name:"Elizabeth Warren",party:"D"},{state:"Massachusetts",name:"Ed Markey",party:"D"},{state:"Michigan",name:"Gary Peters",party:"D"},{state:"Michigan",name:"Elissa Slotkin",party:"D"},{state:"Minnesota",name:"Amy Klobuchar",party:"D"},{state:"Minnesota",name:"Tina Smith",party:"D"},{state:"Mississippi",name:"Roger Wicker",party:"R"},{state:"Mississippi",name:"Cindy Hyde-Smith",party:"R"},{state:"Missouri",name:"Josh Hawley",party:"R"},{state:"Missouri",name:"Eric Schmitt",party:"R"},{state:"Montana",name:"Jon Tester",party:"D"},{state:"Montana",name:"Steve Daines",party:"R"},{state:"Nebraska",name:"Deb Fischer",party:"R"},{state:"Nebraska",name:"Pete Ricketts",party:"R"},{state:"Nevada",name:"Catherine Cortez Masto",party:"D"},{state:"Nevada",name:"Jacky Rosen",party:"D"},{state:"New Hampshire",name:"Jeanne Shaheen",party:"D"},{state:"New Hampshire",name:"Maggie Hassan",party:"D"},{state:"New Jersey",name:"Cory Booker",party:"D"},{state:"New Jersey",name:"Andy Kim",party:"D"},{state:"New Mexico",name:"Martin Heinrich",party:"D"},{state:"New Mexico",name:"Ben Ray Lujn",party:"D"},{state:"New York",name:"Chuck Schumer",party:"D"},{state:"New York",name:"Kirsten Gillibrand",party:"D"},{state:"North Carolina",name:"Thom Tillis",party:"R"},{state:"North Carolina",name:"Ted Budd",party:"R"},{state:"North Dakota",name:"John Hoeven",party:"R"},{state:"North Dakota",name:"Kevin Cramer",party:"R"},{state:"Ohio",name:"Sherrod Brown",party:"D"},{state:"Ohio",name:"JD Vance",party:"R"},{state:"Oklahoma",name:"James Lankford",party:"R"},{state:"Oklahoma",name:"Markwayne Mullin",party:"R"},{state:"Oregon",name:"Ron Wyden",party:"D"},{state:"Oregon",name:"Jeff Merkley",party:"D"},{state:"Pennsylvania",name:"Bob Casey Jr.",party:"D"},{state:"Pennsylvania",name:"John Fetterman",party:"D"},{state:"Rhode Island",name:"Jack Reed",party:"D"},{state:"Rhode Island",name:"Sheldon Whitehouse",party:"D"},{state:"South Carolina",name:"Lindsey Graham",party:"R"},{state:"South Carolina",name:"Tim Scott",party:"R"},{state:"South Dakota",name:"John Thune",party:"R"},{state:"South Dakota",name:"Mike Rounds",party:"R"},{state:"Tennessee",name:"Marsha Blackburn",party:"R"},{state:"Tennessee",name:"Bill Hagerty",party:"R"},{state:"Texas",name:"John Cornyn",party:"R"},{state:"Texas",name:"Ted Cruz",party:"R"},{state:"Utah",name:"Mike Lee",party:"R"},{state:"Utah",name:"John Curtis",party:"R"},{state:"Vermont",name:"Peter Welch",party:"D"},{state:"Vermont",name:"Bernie Sanders",party:"I"},{state:"Virginia",name:"Mark Warner",party:"D"},{state:"Virginia",name:"Tim Kaine",party:"D"},{state:"Washington",name:"Patty Murray",party:"D"},{state:"Washington",name:"Maria Cantwell",party:"D"},{state:"West Virginia",name:"Shelley Moore Capito",party:"R"},{state:"West Virginia",name:"Jim Justice",party:"R"},{state:"Wisconsin",name:"Tammy Baldwin",party:"D"},{state:"Wisconsin",name:"Ron Johnson",party:"R"},{state:"Wyoming",name:"John Barrasso",party:"R"},{state:"Wyoming",name:"Cynthia Lummis",party:"R"}],c4=l4.map(o4),u4=["Algeria","Bahrain","Comoros","Djibouti","Egypt","Iraq","Jordan","Kuwait","Lebanon","Libya","Mauritania","Morocco","Oman","State of Palestine","Qatar","Saudi Arabia","Somalia","Sudan","Syrian Arab Republic","Tunisia","United Arab Emirates","Yemen"],d4=["Austria","Belgium","Bulgaria","Croatia","Cyprus","Czech Republic","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Ireland","Italy","Latvia","Lithuania","Luxembourg","Malta","Netherlands","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden"],h4=["Algeria","Argentina","Australia","Azerbaijan","Brazil","Cabo Verde","Cameroon","Chile","China","Cte d'Ivoire","Cuba","Djibouti","Ethiopia","France","Guyana","India","Japan","Kazakhstan","Kenya","Malaysia","Mexico","Morocco","Netherlands","New Zealand","Peru","Philippines","Republic of Korea","Russian Federation","Senegal","Serbia","Slovenia","South Africa","Sweden","Tunisia","United Kingdom","United States"],f4=["Keir Starmer (Labour  PM)","David Lammy (Labour  Justice)","Rachel Reeves (Labour  Chancellor)","Pat McFadden (Labour  Work & Pensions)","Darren Jones (Labour  Cabinet)","Yvette Cooper (Labour  Foreign Sec)","John Healey (Labour  Defence)","Shabana Mahmood (Labour  Home Sec)","Wes Streeting (Labour  Health)","Bridget Phillipson (Labour  Education)","Ed Miliband (Labour  Energy)","Liz Kendall (Labour  Science)","Jonathan Reynolds (Labour  Whip)","Heidi Alexander (Labour  Transport)","Diane Abbott (Labour  MP Hackney)","Bayo Alaba (Labour  MP Southend)","Dawn Butler (Labour  MP Brent)","Kemi Badenoch (Conservative)","Mel Stride (Conservative)","Priti Patel (Conservative)","Chris Philp (Conservative)","James Cartlidge (Conservative)","Robert Jenrick (Conservative)","Victoria Atkins (Conservative)","Laura Trott (Conservative)","Tom Tugendhat (Conservative)","James Cleverly (Conservative)","Ed Davey (Lib Dem)","Daisy Cooper (Lib Dem)","Helen Morgan (Lib Dem)","Stephen Flynn (SNP)","Pete Wishart (SNP)","Nigel Farage (Reform UK)","Richard Tice (Reform UK)","Lee Anderson (Reform UK)"],m4=["African News Agency (ANA)","Agence France-Presse (AFP)","Agenzia Nazionale Stampa Associata (ANSA)","Al Jazeera","AP News","Asian News International (ANI)","Australian Broadcasting Corporation (ABC)","British Broadcasting Corporation (BBC)","CBC (Canada)","Channel News Asia (CNA)","China Central Television (CCTV)","DW News (Germany)","Fox News (USA)","Global Times (GT)","Le Monde (LEM)","Korean Central News Agency (KCNA)","Kyodo News (Japan)","NBC News (USA)","New York Times (NYT)","NHK (Japan)","Novaya Gazeta Europe (NGE)","Prensa Latina (PL)","Rappler (RAP)","Reuters (REU)","Russia Today (RT)","South China Morning Post (SCMP)","The Guardian (TG)","The Times of Israel (TOI)","The Washington Post (WP)","Xinhua News Agency (XNA)","Yonhap News Agency (YNA)"],p4=["Vladimir Putin (Pres Russia)","Dmitry Medvedev (PM Russia)","Sergei Shoigu (Defence Minister)","Valery Gerasimov (Chief of Staff)","Sergey Lavrov (Foreign Min)","Oleksandr Turchynov (Acting Pres Ukraine)","Arseniy Yatsenyuk (PM Ukraine)","Barack Obama (US Pres)","John Kerry (US Sec of State)","Angela Merkel (German Chancellor)","David Cameron (PM UK)","Ban Ki-moon (UN SG)","Xi Jinping (China Pres)","Cao Cao (Wei)","Sima Yi (Wei)","Zhuge Liang (Shu)","Lin Zexu (Viceroy)","Daoguang Emperor","Viscount Melbourne (British PM)","Lord Palmerston (Foreign Secretary)","Charles Elliot (Trade Superintendent)"],ub=["China","France","Russian Federation","United Kingdom","United States","Albania","Brazil","Gabon","Ghana","India","Ireland","Kenya","Mexico","Norway","United Arab Emirates"],g4=[...ub],up={UNSC:ub,HSC:g4,"US-Senate":c4,AL:u4,EU:d4,IOPC:h4,UKPC:f4,PC:m4,HCC:p4},xx=[...i4],v4=new Set(Object.keys(up));function _x(t){return(t??"").replace(/[\u2013\u2014\u2212\-]/g,"-").trim()}function y4(t){const e=(t??"").trim();if(!e)return"";if(up[e])return e;const n=_x(e),r=cp.find(i=>i.value===e||i.label===e||_x(i.label)===n);if(r)return r.value;const s=e.match(/^([A-Za-z0-9\-]+)\s*[\-\s]/);return s!=null&&s[1]&&v4.has(s[1])?s[1]:e}function Ma(t){if(!t||!t.trim())return xx;const e=y4(t),n=e?up[e]:void 0;return n?[...n]:xx}function x4(t,e){const n=Ma(t),r=new Set(e),s=new Set(n),i=e.filter(u=>!s.has(u)),a=e.filter(u=>s.has(u)),l=n.filter(u=>!r.has(u));return[...a,...l,...i]}function _4(){const{delegates:t,addDelegate:e,removeDelegate:n,updateDelegate:r,committee:s,addStrike:i,removeStrike:a,getStrikeCountsByType:l,getDelegationEmoji:u,setDelegationEmoji:d}=Pt(),[f,p]=T.useState(""),[g,E]=T.useState(""),[_,N]=T.useState(""),[k,b]=T.useState(""),[x,w]=T.useState(!1),[R,B]=T.useState(null),[z,S]=T.useState(""),[y,C]=T.useState(null),[I,P]=T.useState(""),[j,A]=T.useState(""),[X,Y]=T.useState(null),[me,Ve]=T.useState(""),G=f===di?g.trim():f,te=x4(s,t.map(K=>K.country)),ne=()=>{G&&(e({country:G,name:_.trim()||void 0,email:k.trim()||void 0,committee:s||void 0,rollCallStatus:"absent"}),p(""),E(""),N(""),b(""))},xe=()=>{Ma(s).forEach(U=>{t.some(H=>H.country===U)||e({country:U,committee:s||void 0,rollCallStatus:"absent"})}),w(!1)};return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Delegates",c.jsx(er,{title:"Delegates",children:"Add all countries in the room. Select from the UNGA dropdown or add custom. You can set a name and email per delegate. Use the  icon to set a custom flag/emoji for non-UN delegations (e.g. FWC). Strikes can be recorded per delegate."})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Add or remove delegates. Country list is tailored to this committee (e.g. UNSC shows 15 members; GA committees show all UNGA). Use  to set a custom emoji for non-UN delegations."})]})}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add delegate"}),c.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[c.jsxs("label",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Country"}),c.jsxs("select",{value:f,onChange:K=>p(K.target.value),className:"min-w-[12rem] max-w-[20rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Country / delegation",children:[c.jsx("option",{value:"",children:" Select country "}),te.map(K=>c.jsx("option",{value:K,children:K},K)),c.jsx("option",{value:di,children:" Other "})]})]}),f===di&&c.jsxs("label",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Custom country"}),c.jsx("input",{type:"text",value:g,onChange:K=>E(K.target.value),placeholder:"e.g. Observer State",className:"w-40 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("label",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Name (optional)"}),c.jsx("input",{type:"text",value:_,onChange:K=>N(K.target.value),placeholder:"Delegate name",className:"w-40 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("label",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Email (optional)"}),c.jsx("input",{type:"email",value:k,onChange:K=>b(K.target.value),placeholder:"delegate@example.com",className:"w-48 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("button",{onClick:ne,disabled:!G,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]}),c.jsx("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap items-center gap-2",children:c.jsx("button",{onClick:()=>w(!0),className:"px-3 py-1.5 rounded-lg bg-[var(--accent-soft)] text-[var(--accent)] text-sm font-medium hover:bg-[var(--accent-soft)]/80 transition-colors",children:"Add all UNGA members not in list"})})]}),x&&c.jsxs("div",{className:"rounded-xl border border-[var(--accent)] bg-[var(--accent-soft)] p-4 flex items-center justify-between flex-wrap gap-2",children:[c.jsxs("p",{className:"text-sm text-[var(--text)]",children:["Add all possible participants for this committee not yet in the list?",Ma(s).length<50&&c.jsxs("span",{className:"text-[var(--text-muted)] ml-1",children:["(",Ma(s).length," for this committee)"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>w(!1),className:"px-3 py-1.5 rounded-lg bg-[var(--bg-card)] text-sm",children:"Cancel"}),c.jsx("button",{onClick:xe,className:"px-3 py-1.5 rounded-lg bg-[var(--accent)] text-white text-sm font-medium",children:"Add all"})]})]}),c.jsxs("div",{className:"card-block overflow-hidden",children:[c.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border)] flex items-center gap-2",children:[c.jsx(lp,{className:"w-4 h-4 text-[var(--text-muted)]"}),c.jsxs("span",{className:"text-sm font-medium text-[var(--text)]",children:[" Current delegates (",t.length,")"]})]}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-[28rem] overflow-auto",children:[...t].sort((K,U)=>K.country.localeCompare(U.country,void 0,{sensitivity:"base"})).map(K=>{const U=l(K.id),H=Object.values(U).some(le=>le>=uf),pe=Object.values(U).reduce((le,gt)=>le+gt,0),Ee=y===K.id;return c.jsxs("li",{className:`px-4 py-3 flex flex-col gap-2 ${H?"bg-[var(--danger)]/10 border-l-4 border-[var(--danger)]":""}`,children:[c.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[c.jsxs("span",{className:"text-sm text-[var(--text)] flex items-center gap-2 min-w-0",children:[c.jsx("span",{className:"text-base shrink-0",title:"Delegation flag/emoji",children:u(K.country)||""}),c.jsx("strong",{className:"text-[var(--accent)] truncate",children:K.country}),K.name&&c.jsxs("span",{className:"text-[var(--text-muted)] ml-1 shrink-0",children:[" ",K.name]}),K.email&&c.jsxs("span",{className:"text-xs text-[var(--text-muted)] ml-1 shrink-0 truncate",title:K.email,children:[" ",K.email]}),pe>0&&c.jsxs("span",{className:"ml-2 inline-flex items-center gap-1 text-xs",title:"Strikes",children:[c.jsx(Uc,{className:`w-3.5 h-3.5 ${H?"text-[var(--danger)]":"text-[var(--accent)]"}`}),pe]})]}),c.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[c.jsx("button",{onClick:()=>{B(R===K.id?null:K.id),S(K.email??"")},className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors",title:"Edit delegate email",children:c.jsx(UO,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>{Y(X===K.country?null:K.country),Ve(u(K.country))},className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors",title:"Set custom emoji/flag for this delegation",children:c.jsx(GO,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>C(Ee?null:K.id),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors",title:"Add strike",children:c.jsx(Uc,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>n(K.id),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)] transition-colors",title:"Remove delegate",children:c.jsx(_s,{className:"w-4 h-4"})})]})]}),X===K.country&&c.jsxs("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap gap-2 items-center",children:[c.jsx("label",{className:"text-xs text-[var(--text-muted)]",children:"Custom emoji for this delegation:"}),c.jsx("input",{type:"text",value:me,onChange:le=>Ve(le.target.value),placeholder:"e.g.  or paste any emoji",className:"w-24 px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm"}),c.jsx("button",{onClick:()=>{d(K.country,me.trim()||null),Y(null),Ve("")},className:"px-2 py-1.5 rounded-lg bg-[var(--accent)] text-white text-xs font-medium",children:"Apply"}),c.jsx("button",{onClick:()=>{d(K.country,null),Y(null),Ve("")},className:"px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] text-[var(--text-muted)] text-xs",children:"Clear (use preset)"}),c.jsx("button",{onClick:()=>{Y(null),Ve("")},className:"px-2 py-1.5 rounded-lg text-[var(--text-muted)] text-xs",children:"Cancel"})]}),R===K.id&&c.jsxs("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap gap-2 items-center",children:[c.jsx("label",{className:"text-xs text-[var(--text-muted)]",children:"Delegate email:"}),c.jsx("input",{type:"email",value:z,onChange:le=>S(le.target.value),placeholder:"delegate@example.com",className:"flex-1 min-w-[12rem] px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm"}),c.jsx("button",{onClick:()=>{r(K.id,{email:z.trim()||void 0}),B(null),S("")},className:"px-2 py-1.5 rounded-lg bg-[var(--accent)] text-white text-xs font-medium",children:"Apply"}),c.jsx("button",{onClick:()=>{r(K.id,{email:void 0}),B(null),S("")},className:"px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] text-[var(--text-muted)] text-xs",children:"Clear"}),c.jsx("button",{onClick:()=>{B(null),S("")},className:"px-2 py-1.5 rounded-lg text-[var(--text-muted)] text-xs",children:"Cancel"})]}),Object.keys(U).length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 text-xs",children:Object.entries(U).map(([le,gt])=>c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-md ${gt>=uf?"bg-[var(--danger)]/20 text-[var(--danger)]":"bg-[var(--accent-soft)] text-[var(--accent)]"}`,children:[le,": ",gt,c.jsx("button",{onClick:()=>a(K.id,le),className:"p-0.5 rounded hover:bg-black/10",title:"Remove one strike",children:c.jsx(op,{className:"w-3 h-3"})})]},le))}),Ee&&c.jsxs("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap gap-2 items-end",children:[c.jsxs("select",{value:j,onChange:le=>{const gt=le.target.value;A(gt),gt&&(i(K.id,gt),C(null),A(""),P(""))},className:"px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",children:[c.jsx("option",{value:"",children:" Select misbehaviour"}),n4.map(le=>c.jsx("option",{value:le,children:le},le))]}),c.jsx("input",{type:"text",value:I,onChange:le=>P(le.target.value),placeholder:"Or type custom",className:"w-36 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsx("button",{onClick:()=>{const le=I.trim();le&&(i(K.id,le),C(null),P(""),A(""))},disabled:!I.trim(),className:"px-3 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add strike (custom)"}),c.jsx("button",{onClick:()=>{C(null),P(""),A("")},className:"px-3 py-2 rounded-lg bg-[var(--bg-elevated)] text-[var(--text-muted)] text-sm",children:"Cancel"})]})]},K.id)})})]})]})}const w4=[{id:"mod-caucus",label:"Moderated caucus",type:"motion",template:t=>`Motion for moderated caucus for ${t.duration||"___"} on the topic of ${t.topic||"___"} with ${t.speakerTime||"___"} per speaker`,fields:[{key:"duration",label:"Total time",placeholder:"e.g. 10 minutes"},{key:"topic",label:"Topic",placeholder:"e.g. causes of conflict"},{key:"speakerTime",label:"Time per speaker",placeholder:"e.g. 45 seconds"}]},{id:"unmod-caucus",label:"Unmoderated caucus",type:"motion",template:t=>`Motion for unmoderated caucus for ${t.duration||"___"}`,fields:[{key:"duration",label:"Duration",placeholder:"e.g. 5 minutes"}]},{id:"open-speaker-list",label:"Open speaker list",type:"motion",template:()=>"Motion to open the speaker list",fields:[]},{id:"close-speaker-list",label:"Close speaker list",type:"motion",template:()=>"Motion to close the speaker list",fields:[]},{id:"point-order",label:"Point of order",type:"point",template:()=>"Point of order",fields:[]},{id:"point-information",label:"Point of information",type:"point",template:()=>"Point of information",fields:[]},{id:"point-personal",label:"Point of personal privilege",type:"point",template:()=>"Point of personal privilege",fields:[]}];function E4(){const{motions:t,addMotion:e,starMotion:n,setMotionStatus:r,startVote:s}=Pt(),[i,a]=T.useState(""),[l,u]=T.useState("motion"),[d,f]=T.useState(!1),[p,g]=T.useState(null),[E,_]=T.useState({}),N=()=>{i.trim()&&(e(i.trim(),l),a(""))},k=R=>{g(R),_({}),u(R.type)},b=()=>{if(!p)return;const R=p.template(E);e(R,p.type),g(null),_({}),f(!1)},x=t.filter(R=>R.status==="active"),w=t.filter(R=>R.status!=="active");return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Motions & Points"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Record and star motions and points."})]}),c.jsxs("div",{className:"card-block p-4 space-y-3",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>u("motion"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${l==="motion"?"bg-[var(--accent-soft)] text-[var(--accent)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)]"}`,children:" Motion"}),c.jsx("button",{onClick:()=>u("point"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${l==="point"?"bg-[var(--accent-soft)] text-[var(--accent)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)]"}`,children:" Point"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:i,onChange:R=>a(R.target.value),onKeyDown:R=>R.key==="Enter"&&N(),placeholder:l==="motion"?"e.g. Motion to open the speaker list":"e.g. Point of order",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[c.jsx(Nn,{className:"w-4 h-4"}),"  Add"]})]}),c.jsxs("div",{className:"border-t border-[var(--border)] pt-3 mt-3",children:[c.jsxs("button",{type:"button",onClick:()=>f(!d),className:"flex items-center gap-1.5 text-xs font-medium text-[var(--text-muted)] hover:text-[var(--accent)]",children:[d?c.jsx(ip,{className:"w-3.5 h-3.5"}):c.jsx(jo,{className:"w-3.5 h-3.5"}),"Preset options"]}),d&&c.jsxs("div",{className:"mt-2 space-y-2",children:[c.jsx("div",{className:"flex flex-wrap gap-1.5",children:w4.map(R=>c.jsx("button",{type:"button",onClick:()=>k(R),className:`px-2.5 py-1.5 rounded-md text-xs font-medium transition-colors ${(p==null?void 0:p.id)===R.id?"bg-[var(--accent)] text-white":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)] border border-[var(--border)]"}`,children:R.label},R.id))}),p&&c.jsxs("div",{className:"rounded-lg border border-[var(--border)] bg-[var(--bg-elevated)] p-3 space-y-2",children:[p.fields.length===0?c.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:p.template({})}):p.fields.map(R=>c.jsxs("label",{className:"block",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-0.5",children:R.label}),c.jsx("input",{type:"text",value:E[R.key]??"",onChange:B=>_(z=>({...z,[R.key]:B.target.value})),placeholder:R.placeholder,className:"w-full px-2.5 py-1.5 rounded-md bg-[var(--bg-card)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]},R.key)),c.jsxs("div",{className:"flex gap-2 pt-1",children:[c.jsxs("button",{type:"button",onClick:b,className:"px-3 py-1.5 rounded-md bg-[var(--accent)] text-white text-xs font-medium hover:opacity-90",children:["Add ",p.type==="motion"?"motion":"point"]}),c.jsx("button",{type:"button",onClick:()=>g(null),className:"px-3 py-1.5 rounded-md text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] text-xs font-medium",children:"Cancel"})]})]})]})]})]}),x.length>0&&c.jsxs("div",{className:"rounded-xl border border-[var(--accent)]/40 bg-[var(--accent-soft)]/30 p-4",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-3",children:" Active"}),c.jsx("ul",{className:"space-y-2",children:x.map(R=>c.jsxs("li",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("button",{onClick:()=>n(R.id),className:"p-1 rounded text-[var(--text-muted)] hover:text-[var(--accent)]",title:R.starred?"Unstar":"Star",children:c.jsx(px,{className:`w-4 h-4 ${R.starred?"fill-[var(--accent)] text-[var(--accent)]":""}`})}),c.jsx("span",{className:"text-xs text-[var(--text-muted)] uppercase",children:R.type}),c.jsx("span",{className:"text-sm text-[var(--text)] flex-1",children:R.text}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>r(R.id,"passed"),className:"p-1.5 rounded-lg bg-[var(--success)]/20 text-[var(--success)] hover:bg-[var(--success)]/30",title:"Passed",children:c.jsx(sp,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>r(R.id,"failed"),className:"p-1.5 rounded-lg bg-[var(--danger)]/20 text-[var(--danger)] hover:bg-[var(--danger)]/30",title:"Failed",children:c.jsx(ku,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>r(R.id,"tabled"),className:"p-1.5 rounded-lg bg-[var(--text-muted)]/20 text-[var(--text-muted)]",title:"Tabled",children:c.jsx(op,{className:"w-4 h-4"})}),R.type==="motion"&&c.jsx("button",{onClick:()=>s(R.id),className:"px-2 py-1 rounded-lg bg-[var(--accent)] text-white text-xs font-medium",children:"Vote"})]})]},R.id))})]}),c.jsxs("div",{className:"card-block overflow-hidden",children:[c.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Log"})}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:[...w].reverse().map(R=>c.jsxs("li",{className:"px-4 py-3 flex items-start gap-2",children:[c.jsx("button",{onClick:()=>n(R.id),className:"p-1 rounded mt-0.5 text-[var(--text-muted)] hover:text-[var(--accent)] flex-shrink-0",children:c.jsx(px,{className:`w-4 h-4 ${R.starred?"fill-[var(--accent)] text-[var(--accent)]":""}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] uppercase",children:R.type}),c.jsx("p",{className:"text-sm text-[var(--text)]",children:R.text}),c.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-[var(--text-muted)]",children:[c.jsx("span",{children:new Date(R.timestamp).toLocaleString()}),c.jsx("span",{className:"capitalize",children:R.status}),R.type==="motion"&&R.votes&&c.jsxs("span",{children:["Yes ",R.votes.yes," / No ",R.votes.no," / Abstain ",R.votes.abstain]})]})]})]},R.id))})]})]})}function wx(t){return t.rollCallStatus?t.rollCallStatus:t.present?"present":"absent"}function b4(){const{voteInProgress:t,delegates:e,delegateVotes:n,recordVote:r,endVote:s,getDelegationEmoji:i}=Pt();if(!t)return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Voting"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Start a vote from a motion in Motions & Points."})]}),c.jsx("div",{className:"card-block p-8 text-center text-[var(--text-muted)]",children:' No active vote. Go to Motions & Points and click "Vote" on a motion.'})]});const a=Object.values(n).filter(g=>g==="yes").length,l=Object.values(n).filter(g=>g==="no").length,u=Object.values(n).filter(g=>g==="abstain").length,f=e.filter(g=>wx(g)!=="absent").length,p=Object.keys(n).length;return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Active Voting",c.jsx(er,{title:"Voting",children:`Start a vote from a motion in Motions & Points. Record each delegate's vote: Yes, No, or Abstain. Delegates marked "Present and voting" cannot abstain. Absent delegates have no vote buttons. End vote to record the result on the motion.`})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Record each delegate's vote."})]})}),c.jsxs("div",{className:"rounded-xl border-2 border-[var(--accent)] bg-[var(--accent-soft)]/30 p-4",children:[c.jsx("p",{className:"text-sm font-medium text-[var(--text)] mb-2",children:" Motion:"}),c.jsx("p",{className:"text-[var(--text)]",children:t.text}),c.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[c.jsxs("span",{className:"text-[var(--success)]",children:["Yes: ",a]}),c.jsxs("span",{className:"text-[var(--danger)]",children:["No: ",l]}),c.jsxs("span",{className:"text-[var(--text-muted)]",children:["Abstain: ",u]}),c.jsxs("span",{className:"text-[var(--text-muted)]",children:["Recorded: ",p," / ",f]})]}),c.jsx("button",{onClick:s,className:"mt-4 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:"End vote & record result"})]}),c.jsxs("div",{className:"card-block overflow-hidden",children:[c.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Delegate votes"})}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:[...e].sort((g,E)=>g.country.localeCompare(E.country,void 0,{sensitivity:"base"})).map(g=>{const E=n[g.id],_=wx(g),N=_==="absent",k=_==="present";return c.jsxs("li",{className:`px-4 py-3 flex items-center justify-between ${N?"opacity-60":""}`,children:[c.jsxs("span",{className:"text-sm text-[var(--text)] flex items-center gap-2",children:[c.jsx("span",{className:"shrink-0",children:i(g.country)||""}),c.jsx("strong",{className:"text-[var(--accent)]",children:g.country}),g.name&&c.jsx("span",{className:"text-[var(--text-muted)]",children:g.name}),N&&c.jsx("span",{className:"ml-2 text-xs text-[var(--text-muted)]",children:"(Absent)"})]}),N?c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:""}):c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>r(g.id,"yes"),className:`p-2 rounded-lg transition-colors ${E==="yes"?"bg-[var(--success)]/30 text-[var(--success)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--success)]"}`,title:"Yes",children:c.jsx(sp,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>r(g.id,"no"),className:`p-2 rounded-lg transition-colors ${E==="no"?"bg-[var(--danger)]/30 text-[var(--danger)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--danger)]"}`,title:"No",children:c.jsx(ku,{className:"w-4 h-4"})}),k&&c.jsx("button",{onClick:()=>r(g.id,"abstain"),className:`p-2 rounded-lg transition-colors ${E==="abstain"?"bg-[var(--text-muted)]/30 text-[var(--text)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)]"}`,title:"Abstain (present only)",children:c.jsx(op,{className:"w-4 h-4"})})]})]},g.id)})})]})]})}const C4="config",S4="committees",db="userConfig";function hb(t){return Array.isArray(t)&&t.length>0&&t.every(e=>e&&typeof e.value=="string"&&typeof e.label=="string")}async function T4(){if(!Rt)return null;try{const t=Ns(Rt,C4,S4),e=await Cu(t);if(!e.exists())return null;const n=e.data(),r=(n==null?void 0:n.options)??(n==null?void 0:n.committeeOptions)??n;return hb(r)?r:null}catch{return null}}async function I4(t){if(!Rt||!t)return null;try{const e=Ns(Rt,db,t),n=await Cu(e);if(!n.exists())return null;const r=n.data(),s=(r==null?void 0:r.committeeOptions)??(r==null?void 0:r.options)??r;return hb(s)?s:null}catch{return null}}async function Od(t,e){if(!(!Rt||!t))try{const n=Ns(Rt,db,t);await np(n,{committeeOptions:e,updatedAt:new Date().toISOString()},{merge:!0})}catch{}}const Ex=cp.map(t=>({value:t.value,label:t.label}));function fb(){const[t,e]=T.useState(Ex),{user:n}=Ro(),r=(n==null?void 0:n.uid)??null,s=T.useRef(!1);return T.useEffect(()=>{let i=!1;async function a(){if(r){const u=await I4(r);if(i)return;if(u!=null&&u.length){e(u);return}}const l=await T4();if(!i){if(l!=null&&l.length){e(l),r&&!s.current&&(s.current=!0,Od(r,l).catch(()=>{}));return}try{const u=await fetch("/committees.json");if(i)return;if(u.ok){const d=await u.json();if(Array.isArray(d)&&d.length>0&&d.every(f=>f&&typeof f.value=="string"&&typeof f.label=="string")){const f=d;e(f),r&&!s.current&&(s.current=!0,Od(r,f).catch(()=>{}));return}}}catch{}r&&!s.current&&(s.current=!0,Od(r,Ex).catch(()=>{}))}}return a(),()=>{i=!0}},[r]),t}function bx({onClose:t}){const{committee:e,topic:n,universe:r,chairName:s,chairEmail:i,setCommittee:a,setTopic:l,setUniverse:u,setChairName:d,setChairEmail:f}=Pt(),p=fb(),g=T.useMemo(()=>p.find(N=>N.value===e)?e:e?zt:"",[e,p]),E=_=>{a(_===zt?"":_)};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"font-semibold text-lg text-[var(--text)]",children:" Committee & topic"}),t&&c.jsx("button",{onClick:t,className:"text-[var(--text-muted)] hover:text-[var(--text)] text-sm",children:"Close"})]}),c.jsxs("label",{className:"block",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Set committee"}),c.jsxs("select",{value:g,onChange:_=>E(_.target.value),className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Committee",children:[c.jsx("option",{value:"",children:"Select committee"}),p.map(_=>c.jsx("option",{value:_.value,children:_.label},_.value)),c.jsx("option",{value:zt,children:"Other (custom)"})]}),g===zt&&c.jsx("input",{id:"chair-committee-custom",name:"committee-custom",type:"text",value:e,onChange:_=>a(_.target.value),placeholder:"e.g. Custom committee name",className:"mt-2 w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Custom committee name"})]}),c.jsxs("label",{className:"block",htmlFor:"chair-universe",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Universe (optional, for fictional committees)"}),c.jsx("input",{id:"chair-universe",name:"chair-universe",type:"text",value:r,onChange:_=>u(_.target.value),placeholder:"e.g. Star Wars, Harry Potter  leave blank for real-world",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Universe (optional)"})]}),c.jsxs("label",{className:"block",htmlFor:"chair-topic",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Topic"}),c.jsx("input",{id:"chair-topic",name:"chair-topic",type:"text",value:n,onChange:_=>l(_.target.value),placeholder:"e.g. Cybersecurity and International Peace",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("div",{className:"pt-2 border-t border-[var(--border)]",children:[c.jsx("h4",{className:"text-sm font-medium text-[var(--text)] mb-2",children:" Chair"}),c.jsxs("label",{className:"block mb-2",htmlFor:"chair-name",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Chair name (optional)"}),c.jsx("input",{id:"chair-name",name:"chair-name",type:"text",value:s,onChange:_=>d(_.target.value),placeholder:"e.g. Jane Smith",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Chair name"})]}),c.jsxs("label",{className:"block",htmlFor:"chair-email",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Chair email (optional)"}),c.jsx("input",{id:"chair-email",name:"chair-email",type:"email",value:i,onChange:_=>f(_.target.value),placeholder:"e.g. chair@conference.org",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Chair email"})]})]})]})}function k4(){const{motions:t}=Pt(),e=t.filter(a=>a.status==="passed").length,n=t.filter(a=>a.status==="failed").length,r=t.filter(a=>a.status==="tabled").length,s=t.filter(a=>a.type==="motion").length,i=t.filter(a=>a.type==="point").length;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Score"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Motions and points summary."})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--success)]",children:e}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Passed"})]}),c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--danger)]",children:n}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Failed"})]}),c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--text-muted)]",children:r}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Tabled"})]}),c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:t.length}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Total"})]})]}),c.jsxs("div",{className:"card-block p-4",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)] mb-2",children:" Breakdown"}),c.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["Motions: ",s,"  Points: ",i]})]})]})}function _l(t){return t.rollCallStatus?t.rollCallStatus:t.present?"present":"absent"}const N4={absent:"present",present:"present-and-voting","present-and-voting":"absent"},Cx={absent:"Absent",present:"Present (may abstain)","present-and-voting":"Present and voting"};function A4(){const{delegates:t,rollCallComplete:e,setRollCallComplete:n,updateDelegate:r,getDelegationEmoji:s}=Pt(),i=(p,g)=>{r(p,{rollCallStatus:g})},a=(p,g)=>{i(p,N4[g])},l=t.filter(p=>_l(p)==="present").length,u=t.filter(p=>_l(p)==="present-and-voting").length,d=t.filter(p=>_l(p)==="absent").length,f=l+u;return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Roll Call Tracker",c.jsx(er,{title:"Roll call",children:"Mark each delegate as Absent, Present (may abstain), or Present and voting (must vote, cannot abstain). Click a delegate's status to cycle. During voting, only present delegates can vote; present-and-voting cannot choose abstain."})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Present (may abstain from voting), Present and voting (must vote, cannot abstain), or Absent. Click to cycle."})]})}),c.jsx("div",{className:"flex items-center gap-3",children:c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:e,onChange:p=>n(p.target.checked),className:"rounded border-[var(--border)] bg-[var(--bg-elevated)] text-[var(--accent)] focus:ring-[var(--accent)]"}),c.jsx("span",{className:"text-sm text-[var(--text)]",children:"Roll call complete"})]})}),c.jsxs("div",{className:"card-block p-4 flex flex-wrap gap-4 text-sm",children:[c.jsxs("span",{className:"text-[var(--success)]",children:["Present (may abstain): ",c.jsx("strong",{children:l})]}),c.jsxs("span",{className:"text-[var(--accent)]",children:["Present and voting: ",c.jsx("strong",{children:u})]}),c.jsxs("span",{className:"text-[var(--text-muted)]",children:["Absent: ",c.jsx("strong",{children:d})]}),c.jsxs("span",{className:"text-[var(--text-muted)]",children:["Total present: ",c.jsx("strong",{children:f})," / ",t.length]})]}),c.jsxs("div",{className:"card-block overflow-hidden",children:[c.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Delegates"})}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:[...t].sort((p,g)=>p.country.localeCompare(g.country,void 0,{sensitivity:"base"})).map(p=>{const g=_l(p),E=g==="present",_=g==="present-and-voting",N=g==="absent";return c.jsxs("li",{className:"px-4 py-3 flex items-center justify-between gap-2",children:[c.jsxs("span",{className:"text-sm text-[var(--text)] min-w-0 flex items-center gap-2",children:[c.jsx("span",{className:"text-base shrink-0",children:s(p.country)||""}),c.jsx("strong",{className:"text-[var(--accent)] truncate",children:p.country}),p.name&&c.jsx("span",{className:"text-[var(--text-muted)] shrink-0",children:p.name})]}),c.jsxs("button",{onClick:()=>a(p.id,g),className:`flex items-center gap-1.5 text-xs px-2.5 py-1.5 rounded-lg transition-colors shrink-0 ${N?"text-[var(--text-muted)] bg-[var(--bg-elevated)] hover:bg-[var(--border)]":E?"text-[var(--success)] bg-[var(--success)]/10 hover:bg-[var(--success)]/20":"text-[var(--accent)] bg-[var(--accent-soft)] hover:bg-[var(--accent-soft)]/80"}`,title:Cx[g],children:[N&&c.jsx(ku,{className:"w-4 h-4"}),E&&c.jsx(sp,{className:"w-4 h-4"}),_&&c.jsx(sb,{className:"w-4 h-4"}),Cx[g]]})]},p.id)})})]}),c.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Click a delegate's status to cycle: Absent  Present (may abstain)  Present and voting  Absent."})]})}function R4(){const{sessionStarted:t,sessionStartTime:e,startSession:n,stopSession:r}=Pt();return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Committee Session"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Start or stop the committee session."})]}),c.jsxs("div",{className:"card-block p-6 flex flex-col sm:flex-row items-center gap-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:`w-3 h-3 rounded-md ${t?"bg-[var(--success)] animate-pulse":"bg-[var(--text-muted)]"}`}),c.jsx("span",{className:"text-sm font-medium text-[var(--text)]",children:t?" Session in progress":" Session not started"})]}),e&&c.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Started: ",new Date(e).toLocaleString()]}),c.jsx("div",{className:"flex gap-3",children:t?c.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--danger)] text-white text-sm font-medium hover:opacity-90 transition-opacity",children:[c.jsx(Iu,{className:"w-4 h-4"}),"  Stop session"]}):c.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--success)] text-white text-sm font-medium hover:opacity-90 transition-opacity",children:[c.jsx(eb,{className:"w-4 h-4"}),"  Start session"]})})]})]})}function P4(){const{delegates:t,speakers:e,activeSpeaker:n,speakerDuration:r,setSpeakerDuration:s,addToSpeakers:i,removeFromSpeakers:a,setActiveSpeaker:l,getDelegationEmoji:u}=Pt(),[d,f]=T.useState(""),[p,g]=T.useState(0);T.useEffect(()=>{if(!(n!=null&&n.startTime))return;const N=setInterval(()=>{g(Math.floor((Date.now()-n.startTime)/1e3))},1e3);return()=>clearInterval(N)},[n==null?void 0:n.startTime,n==null?void 0:n.id]);const E=()=>{const N=t.find(k=>k.id===d);N&&(i(N.id,N.country,N.name||N.country),f(""))},_=n?Math.max(0,r-p):0;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Speakers"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Mod Speakers List, Active Speaker (Timed), Consultation Speakers."})]}),c.jsxs("div",{className:"rounded-xl border-2 border-[var(--accent)]/50 bg-[var(--accent-soft)]/30 p-4",children:[c.jsxs("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2 flex items-center gap-2",children:[c.jsx(Tu,{className:"w-4 h-4"}),"  Active speaker"]}),n?c.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[c.jsxs("span",{className:"text-lg font-semibold text-[var(--text)] flex items-center gap-2",children:[c.jsx("span",{children:u(n.country)||""}),n.country,"  ",n.name]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx(mo,{className:"w-4 h-4 text-[var(--text-muted)]"}),c.jsxs("span",{className:_===0?"text-[var(--danger)]":"text-[var(--text)]",children:[Math.floor(_/60),":",String(_%60).padStart(2,"0")," remaining"]})]}),c.jsx("button",{onClick:()=>l(null),className:"px-3 py-1.5 rounded-lg bg-[var(--bg-card)] text-sm text-[var(--text)] hover:bg-[var(--border)]",children:"End speech"})]}):c.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No active speaker. Start one from the list below."})]}),c.jsxs("div",{className:"card-block p-4 space-y-3",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Speaker duration (seconds)"}),c.jsx("input",{type:"number",min:30,max:300,value:r,onChange:N=>s(Number(N.target.value)||60),className:"w-24 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("div",{className:"card-block p-4 space-y-3",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add to speakers list"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("select",{value:d,onChange:N=>f(N.target.value),className:"px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",children:[c.jsx("option",{value:"",children:"Select delegate"}),[...t].sort((N,k)=>N.country.localeCompare(k.country,void 0,{sensitivity:"base"})).map(N=>c.jsxs("option",{value:N.id,children:[N.country," ",N.name?` ${N.name}`:""]},N.id))]}),c.jsxs("button",{onClick:E,disabled:!d,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]})]}),c.jsxs("div",{className:"card-block overflow-hidden",children:[c.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Mod speakers list"})}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-80 overflow-auto",children:e.map((N,k)=>c.jsxs("li",{className:"px-4 py-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("span",{className:"text-xs text-[var(--text-muted)] w-6",children:[k+1,"."]}),c.jsxs("span",{className:"text-sm text-[var(--text)] flex items-center gap-2",children:[c.jsx("span",{className:"shrink-0",children:u(N.country)||""}),c.jsx("strong",{className:"text-[var(--accent)]",children:N.country}),"  ",N.name]}),N.speaking&&c.jsx("span",{className:"px-2 py-0.5 rounded bg-[var(--accent-soft)] text-[var(--accent)] text-xs font-medium",children:"Speaking"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[!N.speaking&&c.jsx("button",{onClick:()=>l(N),className:"px-2 py-1 rounded-lg bg-[var(--accent)] text-white text-xs font-medium hover:opacity-90",children:"Start"}),c.jsx("button",{onClick:()=>a(N.id),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)]",title:"Remove",children:c.jsx(_s,{className:"w-4 h-4"})})]})]},N.id))})]})]})}const j4=[{id:"slides",label:"Slides",icon:Y1},{id:"speakers",label:"Speakers",icon:Tu},{id:"facts",label:"Facts",icon:Su},{id:"pathways",label:"Pathways",icon:$O}];function D4(){const{crisisSlides:t,crisisSpeakers:e,crisisFacts:n,crisisPathways:r,addCrisisSlide:s,addCrisisSpeaker:i,addCrisisFact:a,addCrisisPathway:l}=Pt(),[u,d]=T.useState("slides"),[f,p]=T.useState(""),g=()=>{f.trim()&&(u==="slides"&&s(f.trim()),u==="speakers"&&i(f.trim()),u==="facts"&&a(f.trim()),u==="pathways"&&l(f.trim()),p(""))},_={slides:t,speakers:e,facts:n,pathways:r}[u];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Crisis Dashboard"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Slides  Speakers  Facts  Pathways."})]}),c.jsx("div",{className:"flex gap-2 border-b border-[var(--border)] pb-2",children:j4.map(({id:N,label:k,icon:b})=>c.jsxs("button",{onClick:()=>d(N),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${u===N?"bg-[var(--accent-soft)] text-[var(--accent)]":"text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:[c.jsx(b,{className:"w-4 h-4"})," ",k]},N))}),c.jsxs("div",{className:"card-block p-4 space-y-3",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:f,onChange:N=>p(N.target.value),onKeyDown:N=>N.key==="Enter"&&g(),placeholder:u==="slides"?"Slide title or URL":u==="speakers"?"Speaker name":u==="facts"?"Fact":"Pathway description",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-64 overflow-auto",children:_.map((N,k)=>c.jsx("li",{className:"px-3 py-2 flex items-center justify-between text-sm text-[var(--text)]",children:N},k))})]})]})}const O4=[{id:"position",label:" Position papers",icon:Su},{id:"chair-report",label:" Chair reports",icon:Po},{id:"slides",label:" Slides (ceremony or crisis)",icon:Y1},{id:"speeches",label:" Speeches",icon:Tu},{id:"prep",label:" Prep document",icon:DO}];function M4(){const{archive:t,addToArchive:e}=Pt(),[n,r]=T.useState("position"),[s,i]=T.useState(""),[a,l]=T.useState(""),u=()=>{s.trim()&&(e(n,s.trim(),a.trim()||void 0),i(""),l(""))};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Archive"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Position papers, chair reports, slides, speeches, prep docs."})]}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add to archive"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:O4.map(({id:d,label:f,icon:p})=>c.jsxs("button",{onClick:()=>r(d),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n===d?"bg-[var(--accent-soft)] text-[var(--accent)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)]"}`,children:[c.jsx(p,{className:"w-4 h-4"})," ",f]},d))}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("input",{type:"text",value:s,onChange:d=>i(d.target.value),placeholder:"Document name",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsx("textarea",{value:a,onChange:d=>l(d.target.value),placeholder:"Optional content or link",rows:2,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"}),c.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]})]}),c.jsxs("div",{className:"card-block overflow-hidden",children:[c.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Archive"})}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:t.length===0?c.jsx("li",{className:"px-4 py-8 text-center text-[var(--text-muted)] text-sm",children:"No items in archive yet."}):t.slice().reverse().map((d,f)=>c.jsxs("li",{className:"px-4 py-3",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] uppercase",children:d.type}),c.jsx("p",{className:"text-sm font-medium text-[var(--text)]",children:d.name}),d.content&&c.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:d.content})]},f))})]})]})}const Md=[{id:"rollcall",label:"Roll call"},{id:"open-floor",label:"Open the floor (points & motions)"},{id:"recognize-motions",label:"Recognize motions"},{id:"vote-motions",label:"Vote on motion(s)"},{id:"engage-or-gsl",label:"Engage in chosen motion or move to GSL"},{id:"open-floor-again",label:"Open the floor again"},{id:"recognize-motions-2",label:"Recognize motions (repeat as needed)"},{id:"vote-motions-2",label:"Vote on motion(s)"},{id:"continue-cycle",label:"Continue cycle (engage motion / GSL  open floor)"}];function L4(){const{toggleFlowStep:t,isFlowStepDone:e,resetFlowChecklist:n}=Pt(),r=Md.filter(s=>e(s.id)).length;return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Committee flow checklist",c.jsx(er,{title:"Committee flow",children:"Tick each step as you run the session: roll call  open the floor  recognize motions  vote  engage in the motion or move to GSL  open the floor again. Reset when starting a new session or cycle."})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Normal committee flow  tick steps as you go. Reset when starting a new session or cycle."})]})}),c.jsxs("div",{className:"card-block p-4 space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[c.jsxs("span",{className:"text-xs font-medium text-[var(--text-muted)]",children:[r," / ",Md.length," done"]}),c.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[c.jsx(tb,{className:"w-3.5 h-3.5"}),"Reset checklist"]})]}),c.jsx("ul",{className:"space-y-1",children:Md.map(s=>{const i=e(s.id);return c.jsx("li",{children:c.jsxs("label",{className:`flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer transition-colors ${i?"bg-[var(--success)]/10 text-[var(--text)]":"hover:bg-[var(--bg-elevated)]"}`,children:[c.jsx("span",{className:"text-[var(--accent)] flex-shrink-0",children:i?c.jsx(Do,{className:"w-5 h-5 fill-[var(--success)] text-[var(--success)]"}):c.jsx(Iu,{className:"w-5 h-5"})}),c.jsx("span",{className:`text-sm ${i?"line-through text-[var(--text-muted)]":"text-[var(--text)]"}`,children:s.label}),c.jsx("input",{type:"checkbox",checked:i,onChange:()=>t(s.id),className:"sr-only","aria-label":s.label})]})},s.id)})})]})]})}const Sx=[{title:" Rules & procedure",steps:[{id:"prep-rules-read",label:"Read and understand committee rules of procedure"},{id:"prep-parliamentary",label:"Review parliamentary procedure (motions, points, voting)"},{id:"prep-time-limits",label:"Confirm speaking times and time limits"},{id:"prep-quorum",label:"Know quorum and voting requirements"}]},{title:" Committee & topic",steps:[{id:"prep-topic-research",label:"Research committee topic and background"},{id:"prep-study-guide",label:"Read study guide and key documents"},{id:"prep-committee-set",label:"Set committee name and topic in dashboard"},{id:"prep-agenda",label:"Prepare session agenda and flow"}]},{title:" Room & tech",steps:[{id:"prep-room-setup",label:"Set up digital room (delegates list, placards)"},{id:"prep-tech-check",label:"Tech check: platform, audio, screen share"},{id:"prep-backup",label:"Have backup plan if tech fails"}]},{title:" Materials & logistics",steps:[{id:"prep-rollcall-list",label:"Prepare roll call list and attendance"},{id:"prep-speakers-list",label:"Plan speakers list management"},{id:"prep-motions-templates",label:"Prepare common motions / points (if using templates)"},{id:"prep-timing",label:"Confirm session start time and breaks"}]},{title:" Crisis (if applicable)",steps:[{id:"prep-crisis-brief",label:"Review crisis elements and update slides"},{id:"prep-crisis-speakers",label:"Plan crisis speaker order / cues"},{id:"prep-crisis-pathways",label:"Prepare crisis pathways and facts"}]},{title:" Team & communication",steps:[{id:"prep-co-chair",label:"Coordinate with co-chair(s) on roles"},{id:"prep-staff",label:"Confirm staff / dais support and cues"},{id:"prep-delegate-brief",label:"Prepare brief for delegates (rules, timing)"}]}];function V4(){const{togglePrepStep:t,isPrepStepDone:e,resetPrepChecklist:n}=Pt(),r=Sx.flatMap(i=>i.steps),s=r.filter(i=>e(i.id)).length;return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Chair preparation checklist",c.jsx(er,{title:"Chair prep",children:"Before the conference: review rules and procedure, research the topic, set up the digital room and tech, prepare roll call and speakers list, and coordinate with co-chairs. Reset when prepping a new session."})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Before the conference: rules, topic, room, materials, and team. Reset when prepping a new session."})]})}),c.jsxs("div",{className:"card-block p-4 flex items-center justify-between gap-2 mb-4",children:[c.jsxs("span",{className:"text-xs font-medium text-[var(--text-muted)]",children:[s," / ",r.length," done"]}),c.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[c.jsx(tb,{className:"w-3.5 h-3.5"}),"Reset checklist"]})]}),c.jsx("div",{className:"space-y-5",children:Sx.map(i=>c.jsxs("div",{className:"card-block p-4",children:[c.jsx("h3",{className:"font-medium text-[var(--text)] mb-3",children:i.title}),c.jsx("ul",{className:"space-y-1",children:i.steps.map(a=>{const l=e(a.id);return c.jsx("li",{children:c.jsxs("label",{className:`flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer transition-colors ${l?"bg-[var(--success)]/10 text-[var(--text)]":"hover:bg-[var(--bg-elevated)]"}`,children:[c.jsx("span",{className:"text-[var(--accent)] flex-shrink-0",children:l?c.jsx(Do,{className:"w-5 h-5 fill-[var(--success)] text-[var(--success)]"}):c.jsx(Iu,{className:"w-5 h-5"})}),c.jsx("span",{className:`text-sm ${l?"line-through text-[var(--text-muted)]":"text-[var(--text)]"}`,children:a.label}),c.jsx("input",{type:"checkbox",checked:l,onChange:()=>t(a.id),className:"sr-only","aria-label":a.label})]})},a.id)})})]},i.title))})]})}const U4=[{step:1,title:"Set committee & topic",body:"Open Settings () or go to  Committee & Topic. Enter committee name, optional universe for fictional committees, topic, and your chair name/email."},{step:2,title:"Prep checklist",body:"Use  Prep checklist to tick off rules, topic research, room setup, materials, and team coordination before the conference."},{step:3,title:"Add delegates",body:"Go to  Delegates. Select country from the dropdown (all UNGA members) or add custom. Optionally add name and email. Use the  icon to set a custom flag/emoji for delegations like FWC."},{step:4,title:"Roll call",body:"In  Roll Call, mark each delegate as Absent, Present (may abstain), or Present and voting (must vote). Click to cycle. Mark roll call complete when done."},{step:5,title:"Digital Room",body:" Digital Room shows all delegates with their roll-call status. Click a delegate to give a compliment or concern reminder."},{step:6,title:"Flow checklist",body:"Use  Flow checklist during the session: roll call  open floor  recognize motions  vote  engage or GSL  repeat."},{step:7,title:"Motions & voting",body:"In  Motions & Points, add motions or points. Start a vote from a motion; in  Voting record each delegate's vote (Yes/No/Abstain). Present and voting delegates cannot abstain."},{step:8,title:"Speakers",body:"In  Speakers, add delegates to the mod speakers list, set speaking time, and start/stop the active speaker with the timer."},{step:9,title:"Crisis & archive",body:"Use  Crisis for crisis elements. Use  Archive to store position papers, chair reports, and prep docs."}];function F4(){const[t,e]=T.useState(!1);return c.jsxs("section",{className:"mt-10 pt-6 border-t border-[var(--border)]","aria-labelledby":"chair-howto-heading",children:[c.jsxs("button",{type:"button",onClick:()=>e(n=>!n),className:"flex items-center gap-2 w-full text-left group","aria-expanded":t,children:[c.jsx(Po,{className:"w-5 h-5 text-[var(--accent)] shrink-0"}),c.jsx("h2",{id:"chair-howto-heading",className:"font-semibold text-lg text-[var(--text)] group-hover:text-[var(--accent)] transition-colors",children:"How to use this system (Chair)"}),t?c.jsx(ip,{className:"w-5 h-5 text-[var(--text-muted)] ml-auto"}):c.jsx(jo,{className:"w-5 h-5 text-[var(--text-muted)] ml-auto"})]}),t&&c.jsxs("div",{className:"mt-4 space-y-4 text-sm text-[var(--text-muted)]",children:[c.jsx("p",{className:"text-[var(--text)]",children:"Step-by-step guide for running committee in the Chair Room:"}),c.jsx("ol",{className:"space-y-3 list-none pl-0",children:U4.map(({step:n,title:r,body:s})=>c.jsxs("li",{className:"flex gap-3",children:[c.jsx("span",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-[var(--accent-soft)] text-[var(--accent)] font-semibold flex items-center justify-center text-xs",children:n}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-[var(--text)]",children:r}),c.jsx("p",{className:"mt-0.5",children:s})]})]},n))})]})]})}const dp=[{category:"Documents & articles",sources:[{name:"UN Official Document System (ODS)",url:"https://documents.un.org/"},{name:"UN Digital Library",url:"https://digitallibrary.un.org/"},{name:"UN News",url:"https://news.un.org/"},{name:"UN Yearbook",url:"https://www.un.org/en/yearbook/"},{name:"UN Press",url:"https://press.un.org/"}]},{category:"Legislation & treaties",sources:[{name:"UN Treaty Collection",url:"https://treaties.un.org/"},{name:"UN Audiovisual Library of International Law",url:"https://legal.un.org/avl/"},{name:"UNCITRAL (International Trade Law)",url:"https://uncitral.un.org/"},{name:"UN Charter",url:"https://www.un.org/en/about-us/un-charter"}]},{category:"Main bodies",sources:[{name:"UN General Assembly",url:"https://www.un.org/ga/"},{name:"UN Security Council",url:"https://www.un.org/securitycouncil/"},{name:"UN ECOSOC",url:"https://www.un.org/ecosoc/"},{name:"International Court of Justice (ICJ)",url:"https://www.icj-cij.org/"},{name:"UN Secretariat",url:"https://www.un.org/sg/"},{name:"UN Trusteeship Council",url:"https://www.un.org/en/about-us/trusteeship-council"}]},{category:"Programmes & funds",sources:[{name:"UNDP",url:"https://www.undp.org/"},{name:"UNICEF",url:"https://www.unicef.org/"},{name:"UNHCR",url:"https://www.unhcr.org/"},{name:"WFP (World Food Programme)",url:"https://www.wfp.org/"},{name:"UNFPA",url:"https://www.unfpa.org/"},{name:"UN Environment Programme (UNEP)",url:"https://www.unep.org/"},{name:"UN Women",url:"https://www.unwomen.org/"},{name:"UN-Habitat",url:"https://unhabitat.org/"}]},{category:"Specialized agencies & related",sources:[{name:"WHO",url:"https://www.who.int/"},{name:"UNESCO",url:"https://www.unesco.org/"},{name:"IOM (International Organization for Migration)",url:"https://www.iom.int/"},{name:"UN Office on Drugs and Crime (UNODC)",url:"https://www.unodc.org/"},{name:"UN Office for Disarmament Affairs (UNODA)",url:"https://www.un.org/disarmament/"},{name:"UN Human Rights (OHCHR)",url:"https://www.ohchr.org/"},{name:"World Bank",url:"https://www.worldbank.org/"},{name:"IMF",url:"https://www.imf.org/"},{name:"ILO",url:"https://www.ilo.org/"},{name:"FAO",url:"https://www.fao.org/"}]},{category:"Peacekeeping & missions",sources:[{name:"UN Peacekeeping",url:"https://peacekeeping.un.org/"},{name:"UN Peacekeeping  current missions",url:"https://peacekeeping.un.org/en/missions"},{name:"UN Special Political Missions",url:"https://dppa.un.org/en/special-political-missions"}]},{category:"Founders & members",sources:[{name:"UN Member States",url:"https://www.un.org/en/about-us/member-states"},{name:"UN System (founders & members)",url:"https://www.un.org/en/about-us/un-system"},{name:"UN History",url:"https://www.un.org/en/about-us/history"}]}],mb=dp.flatMap(t=>t.sources);function hp({compact:t=!1,showHeading:e=!0}){return c.jsxs("div",{className:"space-y-4",children:[e&&c.jsxs("div",{children:[c.jsx("h2",{className:"section-heading text-[var(--text)] mb-0.5",children:" Official UN links"}),c.jsx("p",{className:"text-[var(--text-muted)] text-xs sm:text-sm",children:"Documents, treaties, main bodies, programmes, missions, and member info. Open in new tab."})]}),c.jsx("div",{className:t?"space-y-3":"space-y-5",children:dp.map(({category:n,sources:r})=>c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wide mb-1.5 sm:mb-2",children:n}),c.jsx("ul",{className:t?"flex flex-wrap gap-1.5":"flex flex-wrap gap-2",children:r.map(({name:s,url:i})=>c.jsx("li",{children:c.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:`inline-block rounded-md border border-[var(--border)] bg-[var(--bg-elevated)] text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors ${t?"px-2 py-1 text-xs":"px-2.5 py-1.5 text-sm"}`,children:[s," "]})},s))})]},n))})]})}const pb="seamuns-dashboard-sidebar-expanded";function B4(){try{const t=localStorage.getItem(pb);return t===null?!0:t==="true"}catch{return!0}}const z4=[{id:"committee",label:" Committee & Topic",icon:Po},{id:"prep",label:" Prep checklist",icon:VO},{id:"flow",label:" Flow checklist",icon:Do},{id:"delegates",label:" Delegates",icon:rb},{id:"room",label:" Digital Room",icon:LO},{id:"rollcall",label:" Roll Call",icon:fx},{id:"session",label:" Session",icon:eb},{id:"speakers",label:" Speakers",icon:Tu},{id:"motions",label:" Motions & Points",icon:Su},{id:"voting",label:" Voting",icon:sb},{id:"score",label:" Score",icon:fx},{id:"crisis",label:" Crisis",icon:Uc},{id:"archive",label:" Archive",icon:RO},{id:"links",label:" Official links",icon:cf}];function $4(){const[t,e]=T.useState("committee"),[n,r]=T.useState(!1),[s,i]=T.useState(B4);T.useEffect(()=>{localStorage.setItem(pb,String(s))},[s]);const a=()=>i(l=>!l);return c.jsxs("div",{className:"flex flex-col lg:flex-row min-h-[calc(100vh-3rem)] sm:min-h-[calc(100vh-3.5rem)] lg:min-h-[calc(100vh-4rem)]",children:[c.jsx("aside",{className:`border-b lg:border-b-0 lg:border-r border-[var(--border)] bg-[var(--bg-elevated)] flex-shrink-0 overflow-x-auto overflow-y-hidden transition-[width] duration-200 ${s?"lg:w-max lg:min-w-[11rem] lg:max-w-[14rem]":"lg:w-10"}`,children:c.jsxs("div",{className:"flex lg:flex-col gap-0.5 p-1 sm:p-1.5 items-stretch lg:items-stretch",children:[z4.map(({id:l,label:u,icon:d})=>c.jsxs("button",{onClick:()=>e(l),title:u,className:`flex items-center gap-1.5 px-2 py-1.5 rounded-md text-xs font-medium transition-colors text-left whitespace-nowrap min-w-0 shrink-0 ${s?"w-full lg:w-max lg:min-w-0":"w-full lg:justify-center lg:px-1.5 lg:w-full"} ${t===l?"bg-[var(--accent)] text-white shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:[c.jsx(d,{className:"w-3.5 h-3.5 flex-shrink-0"}),c.jsx("span",{className:s?"lg:whitespace-nowrap":"truncate lg:sr-only lg:overflow-hidden lg:w-0",children:u})]},l)),c.jsxs("button",{onClick:()=>r(!n),title:"Settings",className:`flex items-center gap-1.5 px-2 py-1.5 rounded-md text-xs text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] mt-auto shrink-0 ${s?"w-full lg:w-max lg:min-w-0":"w-full lg:justify-center lg:px-1.5 lg:w-full"}`,children:[c.jsx(WO,{className:"w-3.5 h-3.5"}),c.jsx("span",{className:s?"lg:whitespace-nowrap":"truncate lg:sr-only lg:overflow-hidden lg:w-0",children:" Settings"})]}),c.jsxs("button",{type:"button",onClick:a,title:s?"Collapse sidebar":"Expand sidebar",className:"hidden lg:flex items-center justify-center gap-1.5 px-1.5 py-1.5 rounded-md text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors w-max",children:[s?c.jsx(X1,{className:"w-4 h-4 flex-shrink-0"}):c.jsx(Z1,{className:"w-4 h-4 flex-shrink-0"}),s&&c.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:"Hide labels"})]})]})}),c.jsxs("main",{className:"flex-1 p-2 sm:p-3 md:p-5 overflow-auto min-w-0",children:[n&&c.jsx("div",{className:"mb-6 p-4 card-block",children:c.jsx(bx,{onClose:()=>r(!1)})}),t==="prep"&&c.jsx(V4,{}),t==="flow"&&c.jsx(L4,{}),t==="room"&&c.jsx(s4,{}),t==="delegates"&&c.jsx(_4,{}),t==="motions"&&c.jsx(E4,{}),t==="voting"&&c.jsx(b4,{}),t==="committee"&&c.jsx(bx,{}),t==="score"&&c.jsx(k4,{}),t==="rollcall"&&c.jsx(A4,{}),t==="session"&&c.jsx(R4,{}),t==="speakers"&&c.jsx(P4,{}),t==="crisis"&&c.jsx(D4,{}),t==="archive"&&c.jsx(M4,{}),t==="links"&&c.jsx("div",{className:"card-block p-4 sm:p-6",children:c.jsx(hp,{showHeading:!0})}),c.jsx(F4,{})]})]})}function H4(){const{saveToAccount:t,isSaving:e,lastSaved:n,isLoaded:r}=Pt(),{isAuthenticated:s}=Ro(),i=a=>{const l=Date.now()-a.getTime();return l<6e4?"Saved just now":l<36e5?`Saved ${Math.floor(l/6e4)}m ago`:a.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})};return c.jsxs("div",{className:"border-b border-[var(--border)] bg-[var(--bg-elevated)] px-3 sm:px-4 py-2 sm:py-3 flex flex-wrap items-center gap-2 sm:gap-3 shadow-[0_1px_0_0_var(--border)]",children:[c.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-[var(--accent-soft)] flex items-center justify-center flex-shrink-0",children:c.jsx(J1,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--accent)]"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("h1",{className:"page-title text-[var(--text)] whitespace-nowrap truncate",children:" Chair Room"}),c.jsx("p",{className:"text-xs sm:text-sm text-[var(--text-muted)] whitespace-nowrap truncate",children:" Digital Room   Motions   Voting   Speakers"}),r&&!s&&c.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:"Data is saved automatically to this device. Sign in to save to your account and sync across devices."}),r&&s&&c.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:"Data is saved automatically to this device and to your account."})]}),r&&s&&c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>t(),disabled:e,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--brand)] text-white hover:opacity-90 transition-opacity disabled:opacity-60",children:[c.jsx(nb,{className:"w-3.5 h-3.5"}),e?"Saving":"Save to account"]}),n&&!e&&c.jsxs("span",{className:"text-xs text-[var(--text-muted)]",title:"Auto-saved to your account",children:["Auto-saved ",i(n)]})]})]})}function W4(){const{user:t}=Ro(),e=(t==null?void 0:t.uid)??null;return c.jsxs(t4,{userId:e,children:[c.jsx(H4,{}),c.jsx($4,{})]})}const gb="delegateData";async function G4(t){if(!Rt)return null;const e=Ns(Rt,gb,t),n=await Cu(e);return n.exists()?n.data():null}async function K4(t,e){if(!Rt)return;const n=Ns(Rt,gb,t);await np(n,e)}const vb="seamuns-dashboard-delegate-state";function yb(t){const e=t.committeeMatrix&&Object.keys(t.committeeMatrix).length>0,n=t.committeeMatrixEntries&&t.committeeMatrixEntries.length>0;return{...t,delegateEmail:t.delegateEmail??"",positionPaperDeadline:t.positionPaperDeadline??"",conferenceEndDate:t.conferenceEndDate??"",committeeCount:t.committeeCount??0,committees:t.committees??[],committeeMatrixEntries:e&&!n&&t.committeeMatrix?Object.entries(t.committeeMatrix).map(([s,i])=>({committee:s,firstName:i,delegation:""})):t.committeeMatrixEntries??[],checklist:{...xb,...t.checklist||{}}}}const xb={positionPaper:!1,researchTopic:!1,researchCountryStance:!1,researchResolutions:!1,researchAllies:!1,researchNews:!1,positionPaperDraft:!1,positionPaperFinal:!1,positionPaperSubmit:!1,openingSpeechDraft:!1,openingSpeechTimed:!1,openingSpeech:!1,modSpeeches:!1,modCaucusPoints:!1,knowRules:!1,knowAgenda:!1,materialsReady:!1},$l=t=>({id:t,name:"New Conference",country:"",delegateEmail:"",stanceOverview:"",committeeCount:0,committees:[],committeeMatrixEntries:[],countdownDate:"",conferenceEndDate:"",positionPaperDeadline:"",checklist:{...xb},trustedSources:[],nationSources:[],uploadedResources:[]});function Hl(){var t;return((t=crypto.randomUUID)==null?void 0:t.call(crypto))??`conf-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function Tx(){var t;try{const e=localStorage.getItem(vb);if(!e)return null;const n=JSON.parse(e);if(!Array.isArray(n.conferences)||n.conferences.length===0)return null;const r=n.conferences.map(i=>yb(i)),s=typeof n.activeConferenceId=="string"&&n.activeConferenceId?n.activeConferenceId:((t=r[0])==null?void 0:t.id)??"";return!s&&r[0]?{conferences:r,activeConferenceId:r[0].id}:{conferences:r,activeConferenceId:s}}catch{return null}}const _b=T.createContext(null);function q4(t,e){const n=t.find(r=>r.id===e);return n||(t.length>0?t[0]:$l(Hl()))}function Q4({children:t,userId:e=null}){var K;const[n,r]=T.useState(()=>{var H;const U=Tx();return(H=U==null?void 0:U.conferences)!=null&&H.length?U.conferences:[$l(Hl())]}),[s,i]=T.useState(()=>{var H;const U=Tx();return U!=null&&U.activeConferenceId&&((H=U==null?void 0:U.conferences)!=null&&H.some(pe=>pe.id===U.activeConferenceId))?U.activeConferenceId:""}),[a,l]=T.useState(!1),[u,d]=T.useState(null),[f,p]=T.useState(!1),g=s||((K=n[0])==null?void 0:K.id),E=q4(n,g??"");T.useEffect(()=>{!g&&n[0]&&i(n[0].id)},[g,n]),T.useEffect(()=>{const U=setTimeout(()=>{var H;try{localStorage.setItem(vb,JSON.stringify({conferences:n,activeConferenceId:g??((H=n[0])==null?void 0:H.id)??""}))}catch{}},1e3);return()=>clearTimeout(U)},[n,g]),T.useEffect(()=>{if(!e){p(!0);return}let U=!1;return G4(e).then(H=>{U||!H||H.conferences.length>0&&(r(H.conferences.map(yb)),i(H.activeConferenceId||H.conferences[0].id))}).catch(()=>{}).finally(()=>{U||p(!0)}),()=>{U=!0}},[e]);const _=T.useCallback(U=>{r(H=>{const pe=H.findIndex(le=>le.id===g);if(pe<0)return H;const Ee=[...H];return Ee[pe]=U(H[pe]),Ee})},[g]),N=T.useCallback(U=>_(H=>({...H,name:U})),[_]),k=T.useCallback(U=>_(H=>({...H,country:U})),[_]),b=T.useCallback(U=>_(H=>({...H,delegateEmail:U})),[_]),x=T.useCallback(U=>_(H=>({...H,stanceOverview:U})),[_]),w=T.useCallback(U=>_(H=>({...H,committeeCount:Math.max(0,Math.min(20,U))})),[_]),R=T.useCallback(U=>_(H=>({...H,committees:U})),[_]),B=T.useCallback(U=>_(H=>({...H,committeeMatrixEntries:[...H.committeeMatrixEntries??[],U]})),[_]),z=T.useCallback(U=>_(H=>({...H,committeeMatrixEntries:(H.committeeMatrixEntries??[]).filter((pe,Ee)=>Ee!==U)})),[_]),S=T.useCallback(U=>_(H=>({...H,countdownDate:U})),[_]),y=T.useCallback(U=>_(H=>({...H,conferenceEndDate:U})),[_]),C=T.useCallback(U=>_(H=>({...H,positionPaperDeadline:U})),[_]),I=T.useCallback(U=>_(H=>({...H,checklist:{...H.checklist,[U]:!H.checklist[U]}})),[_]),P=T.useCallback(U=>_(H=>({...H,trustedSources:[...H.trustedSources,U]})),[_]),j=T.useCallback(U=>_(H=>({...H,trustedSources:H.trustedSources.filter((pe,Ee)=>Ee!==U)})),[_]),A=T.useCallback(U=>_(H=>({...H,nationSources:[...H.nationSources,U]})),[_]),X=T.useCallback(U=>_(H=>({...H,nationSources:H.nationSources.filter((pe,Ee)=>Ee!==U)})),[_]),Y=T.useCallback((U,H)=>_(pe=>({...pe,uploadedResources:[...pe.uploadedResources,{name:U,url:H}]})),[_]),me=T.useCallback(U=>_(H=>({...H,uploadedResources:H.uploadedResources.filter((pe,Ee)=>Ee!==U)})),[_]),Ve=T.useCallback(()=>{const U=Hl(),H=$l(U);r(pe=>[...pe,H]),i(U)},[]),G=T.useCallback(U=>{var le,gt;const H=n.filter(Vi=>Vi.id!==U),pe=H.length>0?H:[$l(Hl())],Ee=g===U?((le=pe[0])==null?void 0:le.id)??"":g??((gt=pe[0])==null?void 0:gt.id)??"";r(pe),i(Ee)},[n,g]),te=T.useCallback(U=>{i(U)},[]),ne=T.useCallback(async()=>{var U;if(e){l(!0);try{await K4(e,{conferences:n,activeConferenceId:g??((U=n[0])==null?void 0:U.id)??""}),d(new Date)}finally{l(!1)}}},[e,n,g]);T.useEffect(()=>{if(!e||!f)return;const U=setTimeout(()=>{ne()},3e3);return()=>clearTimeout(U)},[e,f,n,g,ne]);const xe={...E,conferences:n,activeConferenceId:g??"",setName:N,setCountry:k,setDelegateEmail:b,setStanceOverview:x,setCommitteeCount:w,setCommittees:R,addCommitteeMatrixEntry:B,removeCommitteeMatrixEntry:z,setCountdownDate:S,setConferenceEndDate:y,setPositionPaperDeadline:C,toggleChecklist:I,addTrustedSource:P,removeTrustedSource:j,addNationSource:A,removeNationSource:X,addUploadedResource:Y,removeUploadedResource:me,addConference:Ve,removeConference:G,setActiveConference:te,saveToAccount:ne,isSaving:a,lastSaved:u,isLoaded:f};return c.jsx(_b.Provider,{value:xe,children:t})}function tr(){const t=T.useContext(_b);if(!t)throw new Error("useDelegate must be used within DelegateProvider");return t}function La(t){const[e,n]=T.useState(null);return T.useEffect(()=>{if(!t){n(null);return}const r=new Date(t).getTime(),s=()=>{const a=Date.now();if(a>=r){n({days:0,hours:0,minutes:0,seconds:0});return}const l=Math.floor((r-a)/1e3);n({days:Math.floor(l/86400),hours:Math.floor(l%86400/3600),minutes:Math.floor(l%3600/60),seconds:l%60})};s();const i=setInterval(s,1e3);return()=>clearInterval(i)},[t]),e}function Ld({diff:t,label:e}){return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--text-muted)]",children:[c.jsx(mo,{className:"w-4 h-4 text-[var(--accent)]"}),c.jsx("span",{children:e})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:t.days}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Days"})]}),c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:t.hours}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Hours"})]}),c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:t.minutes}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Minutes"})]}),c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:t.seconds}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Seconds"})]})]})]})}function J4(){const{countdownDate:t,positionPaperDeadline:e}=tr(),n=La(t??""),r=La(e??""),s=i=>`${i.days}d ${i.hours}h ${i.minutes}m ${i.seconds}s`;return!n&&!r?c.jsx("p",{className:"text-sm text-[var(--text-muted)] mb-4",children:"Set conference start and/or position paper deadline below to see countdowns."}):c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[n&&c.jsxs("div",{className:"card-block p-3 flex items-center gap-3",children:[c.jsx(mo,{className:"w-5 h-5 text-[var(--accent)] flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-[var(--text-muted)]",children:"Conference starts in"}),c.jsx("div",{className:"text-sm font-semibold text-[var(--accent)]",children:s(n)})]})]}),r&&c.jsxs("div",{className:"card-block p-3 flex items-center gap-3",children:[c.jsx(mo,{className:"w-5 h-5 text-[var(--accent)] flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-[var(--text-muted)]",children:"Position paper due in"}),c.jsx("div",{className:"text-sm font-semibold text-[var(--accent)]",children:s(r)})]})]})]})}function Y4(){const{countdownDate:t,setCountdownDate:e,conferenceEndDate:n,setConferenceEndDate:r,positionPaperDeadline:s,setPositionPaperDeadline:i}=tr(),a=La(t??""),l=La(n??""),u=La(s??"");return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Conference & position paper countdown"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Set conference start/end and position paper due date to see time remaining."})]}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsxs("label",{className:"block",htmlFor:"countdown-conference-start",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Conference start (date & time)"}),c.jsx("input",{id:"countdown-conference-start",name:"countdown-conference-start",type:"datetime-local",value:t?t.slice(0,16):"",onChange:d=>e(d.target.value?new Date(d.target.value).toISOString():""),className:"w-full max-w-xs px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("label",{className:"block",htmlFor:"countdown-conference-end",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Conference end (date & time)"}),c.jsx("input",{id:"countdown-conference-end",name:"countdown-conference-end",type:"datetime-local",value:n?n.slice(0,16):"",onChange:d=>r(d.target.value?new Date(d.target.value).toISOString():""),className:"w-full max-w-xs px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),a&&c.jsx(Ld,{diff:a,label:" Time until conference:"}),l&&c.jsx(Ld,{diff:l,label:" Time until conference ends:"})]}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsx("h3",{className:"font-medium text-lg text-[var(--text)]",children:" Position paper countdown"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Set the position paper due date to see time remaining."}),c.jsxs("label",{className:"block",htmlFor:"countdown-position-paper-deadline",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Position paper due (date & time)"}),c.jsx("input",{id:"countdown-position-paper-deadline",name:"countdown-position-paper-deadline",type:"datetime-local",value:s?s.slice(0,16):"",onChange:d=>i(d.target.value?new Date(d.target.value).toISOString():""),className:"w-full max-w-xs px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),u&&c.jsx(Ld,{diff:u,label:" Time until position paper due:"})]})]})}function X4(){const{name:t,country:e,delegateEmail:n,stanceOverview:r,countdownDate:s,conferenceEndDate:i,positionPaperDeadline:a,setName:l,setCountry:u,setDelegateEmail:d,setStanceOverview:f,setCountdownDate:p,setConferenceEndDate:g,setPositionPaperDeadline:E}=tr(),_=k=>{if(k<=0){g("");return}if(!s)return;const b=new Date(s),x=new Date(b);x.setDate(x.getDate()+k),g(x.toISOString())},N=s&&i?Math.round((new Date(i).getTime()-new Date(s).getTime())/864e5):0;return c.jsxs("div",{className:"space-y-6",children:[c.jsx(J4,{}),c.jsxs("div",{className:"card-block p-4 space-y-4 border-2 border-[var(--accent)]/30",children:[c.jsx("h3",{className:"font-semibold text-lg text-[var(--text)] flex items-center gap-1.5",children:" Conference & position paper dates"}),c.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Add dates when registering your stance. Countdowns will appear here and in the  Conference & position paper countdown section."}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[c.jsxs("label",{className:"block",htmlFor:"stance-conference-start",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Conference start (date & time)"}),c.jsx("input",{id:"stance-conference-start",name:"conference-start",type:"datetime-local",value:s?s.slice(0,16):"",onChange:k=>p(k.target.value?new Date(k.target.value).toISOString():""),className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("label",{className:"block",htmlFor:"stance-conference-end",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Conference end (date & time)"}),c.jsx("input",{id:"stance-conference-end",name:"conference-end",type:"datetime-local",value:i?i.slice(0,16):"",onChange:k=>g(k.target.value?new Date(k.target.value).toISOString():""),className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]})]}),c.jsxs("label",{className:"block",htmlFor:"stance-conference-duration",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Duration (days)  sets end from start"}),c.jsx("input",{id:"stance-conference-duration",name:"conference-duration-days",type:"number",min:0,max:31,value:N||"",onChange:k=>{const b=k.target.value?parseInt(k.target.value,10):0;!Number.isNaN(b)&&b>=0&&_(b)},placeholder:"e.g. 2",className:"w-24 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("label",{className:"block",htmlFor:"stance-position-paper-deadline",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Position paper deadline (date & time)"}),c.jsx("input",{id:"stance-position-paper-deadline",name:"position-paper-deadline",type:"datetime-local",value:a?a.slice(0,16):"",onChange:k=>E(k.target.value?new Date(k.target.value).toISOString():""),className:"w-full max-w-sm px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]})]}),c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Country Assignment",c.jsx(er,{title:"Country & Stance",children:"Enter your conference name, country assignment, optional email (e.g. for chair contact), and a brief stance overview. This is your main profile for this conference."})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Your country and brief stance overview for this conference."})]})}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsxs("label",{className:"block",htmlFor:"stance-conference-name",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Conference name"}),c.jsx("input",{id:"stance-conference-name",name:"conference-name",type:"text",value:t,onChange:k=>l(k.target.value),placeholder:"e.g. NMUN 2025",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("label",{className:"block",htmlFor:"stance-country",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Country"}),c.jsx("input",{id:"stance-country",name:"country",type:"text",value:e,onChange:k=>u(k.target.value),placeholder:"e.g. France, United Kingdom",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("label",{className:"block",htmlFor:"stance-delegate-email",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Your email (optional)"}),c.jsx("input",{id:"stance-delegate-email",name:"delegate-email",type:"email",value:n,onChange:k=>d(k.target.value),placeholder:"e.g. you@example.com",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Your email"})]}),c.jsxs("label",{className:"block",htmlFor:"stance-overview",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Brief stance overview"}),c.jsx("textarea",{id:"stance-overview",name:"stance-overview",value:r,onChange:k=>f(k.target.value),placeholder:"Summarize your country's position on the committee topic(s)...",rows:5,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]})]})]})}function Z4(t,e){if(t===zt)return"Other";const n=e.find(r=>r.value===t);return n?n.label:t}function eM(){const t=fb(),{committeeCount:e,committees:n,setCommitteeCount:r,setCommittees:s,committeeMatrixEntries:i,addCommitteeMatrixEntry:a,removeCommitteeMatrixEntry:l}=tr(),[u,d]=T.useState(""),[f,p]=T.useState(""),[g,E]=T.useState(""),[_,N]=T.useState({}),[k,b]=T.useState(0),x=Math.max(0,Math.min(20,e)),w=n.length>0?n:Array.from({length:x},(X,Y)=>_[Y]??""),R=X=>{const Y=Math.max(0,Math.min(20,X));r(Y),Y<n.length?s(n.slice(0,Y)):Y>n.length&&s([...n,...Array(Y-n.length).fill("")])},B=(X,Y)=>{const me=[...w];me[X]=Y===zt?zt:Y,s(me)},z=(X,Y)=>{N(Ve=>({...Ve,[X]:Y}));const me=[...n];me.length<=X||(me[X]=Y,s(me))},S=X=>X===zt?"Other":Z4(X,t),y=w.filter(Boolean),C=Math.min(Math.max(0,k),Math.max(0,y.length-1)),I=y[C]??"",P=X=>i.map((Y,me)=>({entry:Y,i:me})).filter(({entry:Y})=>Y.committee===X),j=Ma(I),A=X=>{const Y=f===di?g.trim():f;!X||!u.trim()||(a({committee:X,firstName:u.trim(),delegation:Y||""}),d(""),p(""),E(""))};return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Committee Matrix",c.jsx(er,{title:"Committee Matrix",children:"Set how many committees and which ones for this conference. Use one tab per committee to add entries: first name and delegation. Each delegation shows a flag emoji. Use this to track who is in which committee."})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Set how many committees for this conference, which committees, then add delegates (first name + delegation)."})]})}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Conference committees"}),c.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"When registering this conference: how many committees, and which ones?"}),c.jsxs("label",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"How many committees?"}),c.jsx("input",{type:"number",min:0,max:20,value:x,onChange:X=>R(parseInt(X.target.value,10)||0),className:"w-24 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Number of committees"})]}),x>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block",children:"Which committees?"}),Array.from({length:x},(X,Y)=>c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("span",{className:"text-xs text-[var(--text-muted)] w-20",children:["Committee ",Y+1]}),c.jsxs("select",{value:w[Y]&&t.some(me=>me.value===w[Y])?w[Y]:w[Y]?zt:"",onChange:me=>B(Y,me.target.value),className:"min-w-[12rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":`Committee ${Y+1}`,children:[c.jsx("option",{value:"",children:"Select"}),t.map(me=>c.jsx("option",{value:me.value,children:me.label},me.value)),c.jsx("option",{value:zt,children:"Other (custom)"})]}),(w[Y]===zt||w[Y]&&!t.some(me=>me.value===w[Y]))&&c.jsx("input",{type:"text",value:w[Y]&&w[Y]!==zt?w[Y]:_[Y]??"",onChange:me=>z(Y,me.target.value),placeholder:"Committee name",className:"min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]},Y))]})]}),c.jsx("div",{className:"card-block overflow-hidden",children:y.length===0?c.jsx("div",{className:"px-4 py-8 text-center text-[var(--text-muted)] text-sm",children:"Set committees above, then use the tabs to add and view matrix entries per committee."}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex border-b border-[var(--border)] overflow-x-auto",children:y.map((X,Y)=>c.jsx("button",{type:"button",onClick:()=>b(Y),className:`px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${Y===C?"border-[var(--accent)] text-[var(--accent)] bg-[var(--accent-soft)]/30":"border-transparent text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-elevated)]"}`,children:S(X)},X))}),I&&c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Delegation options are tailored to this committee (e.g. UNSC: 15 members; GA committees: full UNGA)."}),c.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] mr-2",children:" Add to this committee:"}),c.jsxs("label",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"First name"}),c.jsx("input",{type:"text",value:u,onChange:X=>d(X.target.value),placeholder:"e.g. Alex",className:"w-28 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("label",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Delegation"}),c.jsxs("select",{value:f,onChange:X=>p(X.target.value),className:"min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Delegation",children:[c.jsx("option",{value:"",children:"Select"}),j.map(X=>c.jsx("option",{value:X,children:X},X)),c.jsx("option",{value:di,children:"Other"})]}),f===di&&c.jsx("input",{type:"text",value:g,onChange:X=>E(X.target.value),placeholder:"Delegation name",className:"mt-1 min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("button",{onClick:()=>A(I),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-[var(--border)] bg-[var(--bg-elevated)]",children:[c.jsx("th",{className:"text-left px-4 py-2 font-medium text-[var(--text-muted)]",children:"First name"}),c.jsx("th",{className:"text-left px-4 py-2 font-medium text-[var(--text-muted)]",children:"Delegation"}),c.jsx("th",{className:"w-10 px-2 py-2","aria-label":"Remove"})]})}),c.jsx("tbody",{children:P(I).length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-[var(--text-muted)]",children:"No entries for this committee yet."})}):P(I).map(({entry:X,i:Y})=>c.jsxs("tr",{className:"border-b border-[var(--border)]",children:[c.jsx("td",{className:"px-4 py-3 text-[var(--text)]",children:X.firstName}),c.jsx("td",{className:"px-4 py-3 text-[var(--text)]",children:c.jsxs("span",{className:"inline-flex items-center gap-2",children:[c.jsx("span",{className:"text-base shrink-0",title:X.delegation||void 0,children:ab(X.delegation||"")||""}),X.delegation||""]})}),c.jsx("td",{className:"px-2 py-3",children:c.jsx("button",{type:"button",onClick:()=>l(Y),className:"p-1.5 rounded text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)]","aria-label":"Remove entry",children:c.jsx(_s,{className:"w-4 h-4"})})})]},Y))})]})})]})]})})]})}const wb="https://docs.google.com/document/d/1SuV8e971dG78pm6_P6Z62MZQTjRKgBn2lyclq148Ifw/edit?usp=sharing";function tM(){const{country:t}=tr();return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Prep Template"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Use this template to structure your research and speaking prep."})]}),c.jsxs("div",{className:"card-block p-4 sm:p-5 border-2 border-[var(--accent)]/30 bg-[var(--accent-soft)]/50",children:[c.jsxs("h3",{className:"text-sm font-medium text-[var(--text)] mb-1 flex items-center gap-2",children:[c.jsx(jO,{className:"w-4 h-4 text-[var(--accent)]"}),"Make a copy to guide your prep"]}),c.jsxs("p",{className:"text-sm text-[var(--text-muted)] mb-3",children:["Open the MUN Prep Template in Google Docs, then use ",c.jsx("strong",{children:"File  Make a copy"})," to create your own copy for research and speaking prep."]}),c.jsxs("a",{href:wb,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 transition-opacity",children:[c.jsx(ap,{className:"w-4 h-4"}),"Open MUN Prep Template (Google Doc)"]})]}),c.jsxs("div",{className:"card-block p-6 space-y-4",children:[c.jsxs("section",{children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Country"}),c.jsx("p",{className:"text-sm text-[var(--text)]",children:t||""})]}),c.jsxs("section",{children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Topic research"}),c.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Key facts, UN resolutions, recent developments."}),c.jsx("textarea",{placeholder:"Notes...",rows:4,className:"mt-2 w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]}),c.jsxs("section",{children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Country stance"}),c.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"How your country views the topic; red lines and priorities."}),c.jsx("textarea",{placeholder:"Notes...",rows:4,className:"mt-2 w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]}),c.jsxs("section",{children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Opening speech (draft)"}),c.jsx("textarea",{placeholder:"Draft opening statement...",rows:5,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]}),c.jsxs("section",{children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Mod speeches (optional)"}),c.jsx("textarea",{placeholder:"Talking points for moderated caucus...",rows:3,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]})]})]})}const Eb=["Reuters","BBC News","Al Jazeera","Associated Press (AP)","The Guardian","Council on Foreign Relations (CFR)","Human Rights Watch","Amnesty International"],Ix=[...mb.map(t=>t.name),...Eb],nM=Object.fromEntries(mb.map(t=>[t.name,t.url])),rM={health:["WHO","UN News"],disease:["WHO","UN News"],refugee:["UNHCR","UN News","Amnesty International"],refugees:["UNHCR","UN News","Amnesty International"],migration:["UNHCR","UN News","IOM (International Organization for Migration)"],climate:["UN News","UN Environment Programme (UNEP)","Reuters","The Guardian"],environment:["UN News","UN Environment Programme (UNEP)","Reuters","The Guardian"],economy:["World Bank","IMF","UN News"],economic:["World Bank","IMF","UN News"],finance:["IMF","World Bank"],rights:["Human Rights Watch","Amnesty International","UN News","UN Human Rights (OHCHR)"],"human-rights":["Human Rights Watch","Amnesty International","UN News","UN Human Rights (OHCHR)"],conflict:["Reuters","BBC News","Council on Foreign Relations (CFR)","UN News","UN Peacekeeping"],security:["Reuters","BBC News","Council on Foreign Relations (CFR)","UN News","UN Security Council"],peace:["UN News","UN Peacekeeping","Reuters","BBC News"],education:["UN News","UNESCO"],women:["UN News","Amnesty International","UN Women"],gender:["UN News","Amnesty International","UN Women"],disarmament:["UN News","UN Office for Disarmament Affairs (UNODA)","Reuters"],arms:["UN News","UN Office for Disarmament Affairs (UNODA)","Reuters"],drugs:["UN Office on Drugs and Crime (UNODC)","UN News"],crime:["UN Office on Drugs and Crime (UNODC)","UN News"],treaties:["UN Treaty Collection","UN Official Document System (ODS)","UN Audiovisual Library of International Law"],documents:["UN Official Document System (ODS)","UN Digital Library","UN Treaty Collection"],food:["WFP (World Food Programme)","FAO","UN News"],labour:["ILO","UN News"],habitat:["UN-Habitat","UN News"],charter:["UN Charter","UN Official Document System (ODS)"],missions:["UN Peacekeeping","UN Peacekeeping  current missions","UN Special Political Missions"]};function sM(t){const e=t.toLowerCase().trim().split(/\s+/).filter(Boolean);if(e.length===0)return[];const n=new Set;for(const i of e){const a=[];for(const[u,d]of Object.entries(rM))(u.includes(i)||i.includes(u))&&a.push(...d);const l=Ix.filter(u=>u.toLowerCase().includes(i));[...a,...l].forEach(u=>n.add(u))}const r=e.join(" ");return Ix.filter(i=>i.toLowerCase().includes(r)).forEach(i=>n.add(i)),Array.from(n)}function iM(){const{trustedSources:t,nationSources:e,addTrustedSource:n,removeTrustedSource:r,addNationSource:s,removeNationSource:i}=tr(),[a,l]=T.useState(""),[u,d]=T.useState(""),[f,p]=T.useState(""),g=T.useMemo(()=>sM(f),[f]),E=()=>{a.trim()&&(n(a.trim()),l(""))},_=()=>{u.trim()&&(s(u.trim()),d(""))},N=k=>{t.includes(k)||n(k)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Trusted & Nation Sources"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Trusted sources and nation-specific sources for research."})]}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Search by key terms (topic-related)"}),c.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Enter terms related to your topic (e.g. health, refugees, climate, economy) to see suggested sources."}),c.jsx("div",{className:"flex gap-2",children:c.jsxs("div",{className:"relative flex-1",children:[c.jsx(HO,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--text-muted)] pointer-events-none"}),c.jsx("input",{id:"sources-key-terms",name:"sources-key-terms",type:"text",value:f,onChange:k=>p(k.target.value),placeholder:"e.g. health refugees climate",className:"w-full pl-9 pr-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]})}),g.length>0&&c.jsxs("div",{className:"rounded-lg border border-[var(--border)] bg-[var(--bg-elevated)] p-3",children:[c.jsx("p",{className:"text-xs font-medium text-[var(--text-muted)] mb-2",children:"Suggested sources for your topic"}),c.jsx("div",{className:"flex flex-wrap gap-1.5",children:g.map(k=>c.jsxs("button",{type:"button",onClick:()=>N(k),disabled:t.includes(k),className:"px-2.5 py-1 rounded-md text-xs font-medium transition-colors bg-[var(--accent-soft)] text-[var(--accent)] hover:opacity-90 border border-[var(--accent)]/30 disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",k]},k))})]}),c.jsx("h3",{className:"text-sm font-medium text-[var(--text)] pt-2 border-t border-[var(--border)]",children:" Trusted sources"}),c.jsx("p",{className:"text-xs text-[var(--text-muted)] mb-2",children:"Official UN links by category (click to add; open link in new tab)."}),dp.map(({category:k,sources:b})=>c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wide mb-1.5",children:k}),c.jsx("div",{className:"flex flex-wrap gap-1.5",children:b.map(({name:x,url:w})=>c.jsxs("span",{className:"inline-flex items-center gap-1",children:[c.jsxs("button",{type:"button",onClick:()=>N(x),disabled:t.includes(x),className:"px-2.5 py-1 rounded-md text-xs font-medium transition-colors bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--accent-soft)] border border-[var(--border)] disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",x]}),c.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--accent)] hover:underline text-xs",title:"Open in new tab",children:""})]},x))})]},k)),c.jsx("h4",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wide mb-1.5 mt-4",children:"Other trusted"}),c.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:Eb.map(k=>c.jsxs("button",{type:"button",onClick:()=>N(k),disabled:t.includes(k),className:"px-2.5 py-1 rounded-md text-xs font-medium transition-colors bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--accent-soft)] border border-[var(--border)] disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",k]},k))}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"sources-trusted-input",name:"sources-trusted",type:"text",value:a,onChange:k=>l(k.target.value),onKeyDown:k=>k.key==="Enter"&&E(),placeholder:"URL or name",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]}),c.jsx("ul",{className:"space-y-2",children:t.map((k,b)=>{const x=nM[k];return c.jsxs("li",{className:"flex items-center justify-between gap-2 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] text-sm text-[var(--text)]",children:[x?c.jsxs("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--accent)] hover:underline truncate min-w-0",children:[k," "]}):c.jsx("span",{className:"truncate min-w-0",children:k}),c.jsx("button",{onClick:()=>r(b),className:"p-1 rounded text-[var(--text-muted)] hover:text-[var(--danger)] shrink-0",children:c.jsx(_s,{className:"w-4 h-4"})})]},b)})})]}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Nation-specific sources"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"sources-nation-input",name:"sources-nation",type:"text",value:u,onChange:k=>d(k.target.value),onKeyDown:k=>k.key==="Enter"&&_(),placeholder:"URL or name",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]}),c.jsx("ul",{className:"space-y-2",children:e.map((k,b)=>c.jsxs("li",{className:"flex items-center justify-between px-3 py-2 rounded-lg bg-[var(--bg-elevated)] text-sm text-[var(--text)]",children:[k,c.jsx("button",{onClick:()=>i(b),className:"p-1 rounded text-[var(--text-muted)] hover:text-[var(--danger)]",children:c.jsx(_s,{className:"w-4 h-4"})})]},b))})]})]})}function aM(){const{uploadedResources:t,addUploadedResource:e,removeUploadedResource:n}=tr(),[r,s]=T.useState(""),[i,a]=T.useState(""),l=()=>{r.trim()&&(e(r.trim(),i.trim()||void 0),s(""),a(""))};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Chair Report & Delegate Resources"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Handbook, position paper guidelines, chair report  upload or link."})]}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsxs("h3",{className:"text-sm font-medium text-[var(--text)] flex items-center gap-2",children:[c.jsx(qO,{className:"w-4 h-4 text-[var(--accent)]"}),"  Add resource"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("input",{id:"resource-name",name:"resource-name",type:"text",value:r,onChange:u=>s(u.target.value),placeholder:"Resource name (e.g. Chair report, Pos paper guidelines)",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsx("input",{id:"resource-url",name:"resource-url",type:"text",value:i,onChange:u=>a(u.target.value),placeholder:"URL (optional)",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-64 overflow-auto",children:t.map((u,d)=>c.jsxs("li",{className:"px-3 py-3 flex items-center justify-between gap-2",children:[u.url?c.jsxs("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 min-w-0 flex items-center gap-2 rounded-lg py-1 -mx-1 px-1 hover:bg-[var(--accent-soft)] transition-colors group",children:[c.jsx(ap,{className:"w-4 h-4 flex-shrink-0 text-[var(--text-muted)] group-hover:text-[var(--accent)]"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-[var(--text)] group-hover:text-[var(--accent)] truncate",children:u.name}),c.jsx("p",{className:"text-xs text-[var(--text-muted)] truncate max-w-xs",children:u.url})]})]}):c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-[var(--text)]",children:u.name}),c.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"No link"})]}),c.jsx("button",{type:"button",onClick:()=>n(d),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)] flex-shrink-0","aria-label":"Remove resource",children:c.jsx(_s,{className:"w-4 h-4"})})]},d))})]})]})}const oM=[{title:" Topic research",docSection:"Complete the Topic research section in your prep doc",keys:[{key:"researchTopic",label:"Topic and background (key facts, history)"},{key:"researchResolutions",label:"Existing UN resolutions and draft ideas"},{key:"researchNews",label:"Recent news and developments on the topic"}]},{title:" Country stance",docSection:"Complete the Country stance section in your prep doc",keys:[{key:"researchCountryStance",label:"Your countrys stance, policy, and red lines"},{key:"researchAllies",label:"Likely allies and blocs"}]},{title:" Position paper",docSection:"Use the Position paper section in your prep doc",keys:[{key:"positionPaperDraft",label:"Draft (structure and main points)"},{key:"positionPaperFinal",label:"Finalise (edit and cite sources)"},{key:"positionPaperSubmit",label:"Submit by deadline"},{key:"positionPaper",label:"Complete and approved"}]},{title:" Opening speech",docSection:"Use the Opening speech section in your prep doc",keys:[{key:"openingSpeechDraft",label:"Draft opening statement"},{key:"openingSpeechTimed",label:"Time and trim to speaking limit"},{key:"openingSpeech",label:"Ready and practised"}]},{title:" Mod & unmod speeches",docSection:"Use the Mod / unmod section in your prep doc",keys:[{key:"modSpeeches",label:"Moderated caucus talking points"},{key:"modCaucusPoints",label:"Unmoderated caucus / bloc discussion points"}]},{title:" Rules & materials",docSection:"Check off before conference",keys:[{key:"knowRules",label:"Committee rules and parliamentary procedure"},{key:"knowAgenda",label:"Agenda, timing, and conference schedule"},{key:"materialsReady",label:"Materials ready (placard, paper, laptop, etc.)"}]}];function lM(){const{checklist:t,toggleChecklist:e}=tr();return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Preparation checklist",c.jsx(er,{title:"Preparation checklist",children:"Tick off research, position paper, speeches, and materials. The checklist follows the sections of the MUN Prep Template  make a copy of the template and work through each section in your doc."})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm mb-2",children:"This checklist follows the sections of the MUN Prep Template. Make a copy of the template and work through each section in your doc."}),c.jsxs("a",{href:wb,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 text-sm font-medium text-[var(--accent)] hover:underline",children:[c.jsx(ap,{className:"w-4 h-4"}),"Open MUN Prep Template (Google Doc)"]})]})}),c.jsx("div",{className:"space-y-5",children:oM.map(n=>c.jsxs("div",{className:"card-block p-4",children:[c.jsx("h3",{className:"font-medium text-[var(--text)] mb-1",children:n.title}),c.jsx("p",{className:"text-xs text-[var(--text-muted)] mb-3",children:n.docSection}),c.jsx("ul",{className:"space-y-1",children:n.keys.map(({key:r,label:s})=>c.jsx("li",{children:c.jsxs("label",{className:"flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer hover:bg-[var(--bg-elevated)] transition-colors",children:[c.jsx("span",{className:"text-[var(--accent)] flex-shrink-0",children:t[r]?c.jsx(Do,{className:"w-5 h-5 fill-[var(--accent)]"}):c.jsx(Iu,{className:"w-5 h-5"})}),c.jsx("span",{className:`text-sm text-[var(--text)] ${t[r]?"line-through text-[var(--text-muted)]":""}`,children:s}),c.jsx("input",{type:"checkbox",checked:t[r],onChange:()=>e(r),className:"sr-only","aria-label":s})]})},r))})]},n.title))})]})}const cM=[{step:1,title:"Set your conference & country",body:"In  Country & Stance, enter conference name, your country assignment, your email (optional), and a brief stance overview."},{step:2,title:"Committee matrix",body:"In  Committee Matrix, set how many committees and which ones. Use the tabs to add entries per committee: first name and delegation. Each delegation shows a flag emoji."},{step:3,title:"Prep template",body:"In  Prep Template, open the MUN Prep Template (Google Doc) and make a copy. Use it to structure research, country stance, position paper, and speeches."},{step:4,title:"Trusted & nation sources",body:"In  Trusted & Nation Sources, add links and sources you use for research and country policy."},{step:5,title:"Checklist",body:"In  Checklist, tick off research, position paper, speeches, and materials. The checklist follows the sections of the MUN Prep Template."},{step:6,title:"Chair report & resources",body:"In  Chair Report & Resources, add handbook, position paper guidelines, and any uploaded resources from your chair."},{step:7,title:"Conference & position paper countdown",body:"In  Conference & position paper countdown (or on  Country & Stance) set conference start/end and position paper due date to see countdowns."},{step:8,title:"Save to account",body:'Sign in and use "Save to account" to store your conferences and data across devices. You can add multiple conferences and switch between them.'}];function uM(){const[t,e]=T.useState(!1);return c.jsxs("section",{className:"mt-10 pt-6 border-t border-[var(--border)]","aria-labelledby":"delegate-howto-heading",children:[c.jsxs("button",{type:"button",onClick:()=>e(n=>!n),className:"flex items-center gap-2 w-full text-left group","aria-expanded":t,children:[c.jsx(Po,{className:"w-5 h-5 text-[var(--accent)] shrink-0"}),c.jsx("h2",{id:"delegate-howto-heading",className:"font-semibold text-lg text-[var(--text)] group-hover:text-[var(--accent)] transition-colors",children:"How to use this system (Delegate)"}),t?c.jsx(ip,{className:"w-5 h-5 text-[var(--text-muted)] ml-auto"}):c.jsx(jo,{className:"w-5 h-5 text-[var(--text-muted)] ml-auto"})]}),t&&c.jsxs("div",{className:"mt-4 space-y-4 text-sm text-[var(--text-muted)]",children:[c.jsx("p",{className:"text-[var(--text)]",children:"Step-by-step guide for preparing as a delegate:"}),c.jsx("ol",{className:"space-y-3 list-none pl-0",children:cM.map(({step:n,title:r,body:s})=>c.jsxs("li",{className:"flex gap-3",children:[c.jsx("span",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-[var(--accent-soft)] text-[var(--accent)] font-semibold flex items-center justify-center text-xs",children:n}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-[var(--text)]",children:r}),c.jsx("p",{className:"mt-0.5",children:s})]})]},n))})]})]})}const bb="seamuns-dashboard-sidebar-expanded";function dM(){try{const t=localStorage.getItem(bb);return t===null?!0:t==="true"}catch{return!0}}function hM(){const{conferences:t,activeConferenceId:e,setActiveConference:n,addConference:r,removeConference:s,saveToAccount:i,isSaving:a,lastSaved:l,isLoaded:u}=tr(),{isAuthenticated:d}=Ro(),f=t.length>1,p=g=>{const E=Date.now()-g.getTime();return E<6e4?"Saved just now":E<36e5?`Saved ${Math.floor(E/6e4)}m ago`:g.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})};return c.jsxs("div",{className:"border-b border-[var(--border)] bg-[var(--bg-elevated)] px-3 sm:px-4 py-2 sm:py-3 flex flex-wrap items-center gap-2 sm:gap-3 shadow-[0_1px_0_0_var(--border)]",children:[c.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-[var(--accent-soft)] flex items-center justify-center flex-shrink-0",children:c.jsx(lp,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--accent)]"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("h1",{className:"page-title text-[var(--text)] whitespace-nowrap truncate",children:" Delegate Dashboard"}),c.jsx("p",{className:"text-xs sm:text-sm text-[var(--text-muted)] whitespace-nowrap truncate",children:" Country   Matrix   Prep   Checklist   Countdown"}),u&&!d&&c.jsx("p",{className:"text-xs text-[var(--accent)] mt-1",children:"Sign in and save to account so your data isn't lost on refresh or when switching devices."})]}),u&&c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("label",{className:"flex items-center gap-1.5 text-xs text-[var(--text-muted)]",children:[c.jsx("span",{className:"hidden sm:inline",children:"Conference"}),c.jsx("select",{value:e,onChange:g=>n(g.target.value),className:"min-w-[8rem] px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Select conference",children:t.map(g=>c.jsx("option",{value:g.id,children:g.name||"Unnamed"},g.id))})]}),c.jsxs("button",{type:"button",onClick:r,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--accent)] text-white hover:opacity-90 transition-opacity",children:[c.jsx(Nn,{className:"w-3.5 h-3.5"})," Add conference"]}),f&&c.jsx("button",{type:"button",onClick:()=>s(e),title:"Remove this conference",className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-card)] transition-colors","aria-label":"Remove conference",children:c.jsx(_s,{className:"w-3.5 h-3.5"})}),d&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>i(),disabled:a,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--brand)] text-white hover:opacity-90 transition-opacity disabled:opacity-60",children:[c.jsx(nb,{className:"w-3.5 h-3.5"}),a?"Saving":"Save to account"]}),l&&!a&&c.jsxs("span",{className:"text-xs text-[var(--text-muted)]",title:"Auto-saved to your account",children:["Auto-saved ",p(l)]})]})]})]})}const fM=[{id:"country",label:" Country & Stance",icon:OO},{id:"countdown",label:" Countdown",icon:mo},{id:"matrix",label:" Committee Matrix",icon:rb},{id:"prep",label:" Prep Template",icon:Su},{id:"sources",label:" Trusted & Nation Sources",icon:cf},{id:"resources",label:" Chair Report & Resources",icon:Po},{id:"checklist",label:" Checklist",icon:Do},{id:"links",label:" Official links",icon:cf}];function mM(){const[t,e]=T.useState("country"),[n,r]=T.useState(dM);T.useEffect(()=>{localStorage.setItem(bb,String(n))},[n]);const s=()=>r(i=>!i);return c.jsxs("div",{className:"flex flex-col lg:flex-row min-h-[calc(100vh-3rem)] sm:min-h-[calc(100vh-3.5rem)] lg:min-h-[calc(100vh-4rem)]",children:[c.jsx("aside",{className:`border-b lg:border-b-0 lg:border-r border-[var(--border)] bg-[var(--bg-elevated)] flex-shrink-0 overflow-x-auto overflow-y-hidden transition-[width] duration-200 ${n?"lg:w-max lg:min-w-[11rem] lg:max-w-[14rem]":"lg:w-10"}`,children:c.jsxs("div",{className:"flex lg:flex-col gap-0.5 p-1 sm:p-1.5 items-stretch lg:items-stretch",children:[fM.map(({id:i,label:a,icon:l})=>c.jsxs("button",{onClick:()=>e(i),title:a,className:`flex items-center gap-1.5 px-2 py-1.5 rounded-md text-xs font-medium transition-colors text-left whitespace-nowrap min-w-0 shrink-0 ${n?"w-full lg:w-max lg:min-w-0":"w-full lg:justify-center lg:px-1.5 lg:w-full"} ${t===i?"bg-[var(--accent)] text-white shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:[c.jsx(l,{className:"w-3.5 h-3.5 flex-shrink-0"}),c.jsx("span",{className:n?"lg:whitespace-nowrap":"truncate lg:sr-only lg:overflow-hidden lg:w-0",children:a})]},i)),c.jsxs("button",{type:"button",onClick:s,title:n?"Collapse sidebar":"Expand sidebar",className:"hidden lg:flex items-center justify-center gap-1.5 px-1.5 py-1.5 rounded-md text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors w-max",children:[n?c.jsx(X1,{className:"w-4 h-4 flex-shrink-0"}):c.jsx(Z1,{className:"w-4 h-4 flex-shrink-0"}),n&&c.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:"Hide labels"})]})]})}),c.jsxs("main",{className:"flex-1 p-2 sm:p-3 md:p-5 overflow-auto min-w-0",children:[t==="country"&&c.jsx(X4,{}),t==="matrix"&&c.jsx(eM,{}),t==="prep"&&c.jsx(tM,{}),t==="sources"&&c.jsx(iM,{}),t==="links"&&c.jsx("div",{className:"card-block p-4 sm:p-6",children:c.jsx(hp,{showHeading:!0})}),t==="resources"&&c.jsx(aM,{}),t==="checklist"&&c.jsx(lM,{}),t==="countdown"&&c.jsx(Y4,{}),c.jsx(uM,{})]})]})}function pM(){const{user:t}=Ro(),e=(t==null?void 0:t.uid)??null;return c.jsxs(Q4,{userId:e,children:[c.jsx(hM,{}),c.jsx(mM,{})]})}function gM(){return c.jsxs("div",{className:"max-w-[1000px] mx-auto px-3 sm:px-6 py-8 sm:py-12 md:py-16 text-center",children:[c.jsx(ib,{className:"h-10 sm:h-12 md:h-14 w-auto mx-auto mb-4 sm:mb-5"}),c.jsxs("h1",{className:"font-semibold text-2xl sm:text-3xl md:text-4xl text-[var(--text)] mb-2 sm:mb-3",children:["SEAMUNs Dashboard ",c.jsx("span",{className:"text-[var(--brand)]",children:""})]}),c.jsxs("p",{className:"text-[var(--text-muted)] text-sm sm:text-base md:text-lg mb-6 sm:mb-10 max-w-xl mx-auto",children:["Part of ",c.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",className:"text-[var(--brand)] hover:underline",children:"SEAMUNs"}),"  run committee sessions and prepare for conferences. Choose your role below."]}),c.jsxs("div",{className:"grid sm:grid-cols-2 gap-3 sm:gap-6",children:[c.jsxs(jh,{to:"/chair",className:"group block p-4 sm:p-6 md:p-8 rounded-[var(--radius-card)] border border-[var(--border)] bg-[var(--bg-card)] shadow-[var(--shadow-card)] hover:border-[var(--brand)] hover:bg-[var(--brand-soft)] transition-all text-left",children:[c.jsx("div",{className:"w-9 h-9 sm:w-11 sm:h-11 rounded-lg sm:rounded-xl bg-[var(--brand-soft)] flex items-center justify-center mb-3 sm:mb-4 group-hover:scale-105 transition-transform",children:c.jsx(J1,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--brand)]"})}),c.jsx("h2",{className:"font-semibold text-lg sm:text-xl text-[var(--text)] mb-1.5 sm:mb-2",children:" Chair Room"}),c.jsx("p",{className:"text-[var(--text-muted)] text-xs sm:text-sm",children:" Digital Room   Delegates   Motions   Voting   Speakers   Crisis   Archive"})]}),c.jsxs(jh,{to:"/delegate",className:"group block p-4 sm:p-6 md:p-8 rounded-[var(--radius-card)] border border-[var(--border)] bg-[var(--bg-card)] shadow-[var(--shadow-card)] hover:border-[var(--accent)] hover:bg-[var(--accent-soft)] transition-all text-left",children:[c.jsx("div",{className:"w-9 h-9 sm:w-11 sm:h-11 rounded-lg sm:rounded-xl bg-[var(--accent-soft)] flex items-center justify-center mb-3 sm:mb-4 group-hover:scale-105 transition-transform",children:c.jsx(lp,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--accent)]"})}),c.jsx("h2",{className:"font-semibold text-lg sm:text-xl text-[var(--text)] mb-1.5 sm:mb-2",children:" Delegate Dashboard"}),c.jsx("p",{className:"text-[var(--text-muted)] text-xs sm:text-sm",children:" Country   Matrix   Prep   Checklist   Countdown"})]})]}),c.jsxs("p",{className:"mt-6 sm:mt-10 text-[var(--text-muted)] text-xs sm:text-sm flex items-center justify-center gap-2",children:[c.jsx(PO,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),c.jsx("span",{children:" Per-conference setup for chairs and delegates"})]}),c.jsx("section",{className:"mt-10 sm:mt-14 pt-8 sm:pt-12 border-t border-[var(--border)] text-left",children:c.jsx(hp,{showHeading:!0})})]})}function vM(){return c.jsx(TO,{children:c.jsx(_I,{children:c.jsxs(Vs,{path:"/",element:c.jsx(QO,{}),children:[c.jsx(Vs,{index:!0,element:c.jsx(gM,{})}),c.jsx(Vs,{path:"chair",element:c.jsx(W4,{})}),c.jsx(Vs,{path:"delegate",element:c.jsx(pM,{})}),c.jsx(Vs,{path:"*",element:c.jsx(vI,{to:"/",replace:!0})})]})})})}window.addEventListener("unhandledrejection",t=>{var n;const e=((n=t.reason)==null?void 0:n.message)??String(t.reason);typeof e=="string"&&e.includes("message channel closed before a response was received")&&(t.preventDefault(),t.stopPropagation())});const yM=!1,xM=yM?wO:EO,_M=c.jsx(T.StrictMode,{children:c.jsx(kI,{children:c.jsx(xM,{children:c.jsx(vM,{})})})});Fw(document.getElementById("root")).render(_M);
